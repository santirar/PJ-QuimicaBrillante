(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([[5634],{67074:(e,t,r)=>{var n={"./add_member_controller.js":93008,"./admin_controller.js":32960,"./admin_sidebar_controller.js":84619,"./admin_tabs_controller.js":16216,"./auth_providers_controller.js":5312,"./authentication_form_controller.js":37428,"./autocomplete_controller.js":70507,"./back_controller.js":79374,"./bottom_bar_controller.js":14522,"./browser_notifications_controller.js":94431,"./clipboard_controller.js":16187,"./collapsible_controller.js":94033,"./colorpicker_controller.js":69113,"./comment_controller.js":86840,"./custom_domain_form_controller.js":50721,"./daterange_controller.js":77706,"./download_controller.js":19441,"./dropdown_controller.js":71826,"./flash_controller.js":24062,"./form_controller.js":6e4,"./infinity_scroll_controller.js":83723,"./lazy_load_controller.js":22010,"./like_controller.js":62505,"./member_settings_controller.js":72567,"./mobile_controller.js":80916,"./mobile_sidebar_controller.js":72089,"./monthrange_controller.js":17830,"./multiselect_controller.js":46614,"./notification_preferences_controller.js":45344,"./onboardingform_controller.js":42382,"./otp_controller.js":72802,"./popup_controller.js":88643,"./post_controller.js":45593,"./post_form_controller.js":11922,"./profile_image_controller.js":11192,"./profilecard_controller.js":99375,"./react_mount_controller.js":56219,"./recaptcha_controller.js":64023,"./reorder_controller.js":22998,"./reorderparent_controller.js":43522,"./richtext_controller.js":26037,"./select_controller.js":64230,"./share_controller.js":16267,"./signin_controller.js":14746,"./spaces_sidebar_controller.js":13186,"./standard_layout_controller.js":99859,"./stimulus-tabs/tabs_controller.js":69230,"./stripe_controller.js":92254,"./time_controller.js":28277,"./toggle_controller.js":75467,"./trix_attachment_preview_controller.js":25040,"./unread_posts_count_controller.js":18251,"./unsaved_changes_controller.js":84633,"./validation_controller.js":87169,"controllers/add_member_controller.js":93008,"controllers/admin_controller.js":32960,"controllers/admin_sidebar_controller.js":84619,"controllers/admin_tabs_controller.js":16216,"controllers/auth_providers_controller.js":5312,"controllers/authentication_form_controller.js":37428,"controllers/autocomplete_controller.js":70507,"controllers/back_controller.js":79374,"controllers/bottom_bar_controller.js":14522,"controllers/browser_notifications_controller.js":94431,"controllers/clipboard_controller.js":16187,"controllers/collapsible_controller.js":94033,"controllers/colorpicker_controller.js":69113,"controllers/comment_controller.js":86840,"controllers/custom_domain_form_controller.js":50721,"controllers/daterange_controller.js":77706,"controllers/download_controller.js":19441,"controllers/dropdown_controller.js":71826,"controllers/flash_controller.js":24062,"controllers/form_controller.js":6e4,"controllers/infinity_scroll_controller.js":83723,"controllers/lazy_load_controller.js":22010,"controllers/like_controller.js":62505,"controllers/member_settings_controller.js":72567,"controllers/mobile_controller.js":80916,"controllers/mobile_sidebar_controller.js":72089,"controllers/monthrange_controller.js":17830,"controllers/multiselect_controller.js":46614,"controllers/notification_preferences_controller.js":45344,"controllers/onboardingform_controller.js":42382,"controllers/otp_controller.js":72802,"controllers/popup_controller.js":88643,"controllers/post_controller.js":45593,"controllers/post_form_controller.js":11922,"controllers/profile_image_controller.js":11192,"controllers/profilecard_controller.js":99375,"controllers/react_mount_controller.js":56219,"controllers/recaptcha_controller.js":64023,"controllers/reorder_controller.js":22998,"controllers/reorderparent_controller.js":43522,"controllers/richtext_controller.js":26037,"controllers/select_controller.js":64230,"controllers/share_controller.js":16267,"controllers/signin_controller.js":14746,"controllers/spaces_sidebar_controller.js":13186,"controllers/standard_layout_controller.js":99859,"controllers/stimulus-tabs/tabs_controller.js":69230,"controllers/stripe_controller.js":92254,"controllers/time_controller.js":28277,"controllers/toggle_controller.js":75467,"controllers/trix_attachment_preview_controller.js":25040,"controllers/unread_posts_count_controller.js":18251,"controllers/unsaved_changes_controller.js":84633,"controllers/validation_controller.js":87169};function i(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=67074},50795:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var n=r(34128),i=r(17857),o={preview:function(e){var t=e.subscriptionProcessorId,r=e.couponCode;return function(){return(0,n.UT)(i.q.subscriptions.coupons.preview({subscriptionProcessorId:t,couponCode:r}))}},create:function(e){var t=e.subscriptionProcessorId,r=e.params;return(0,n.Cu)(i.q.subscriptions.coupons.create({subscriptionProcessorId:t}),r)},delete:function(e){var t=e.subscriptionProcessorId;return(0,n.pC)(i.q.subscriptions.coupons.delete({subscriptionProcessorId:t}))}}},13546:(e,t,r)=>{"use strict";r.d(t,{i:()=>o});var n=r(34128),i=r(49326),o={index:function(e){return function(){return Object.keys(e).forEach((function(t){null===e[t]&&delete e[t]})),(0,n.UT)(i.av.paywalls.index({params:e}))}},getPaywall:function(e){return(0,n.UT)(i.av.paywalls.show({paywallId:e}))},createPaywall:function(e){return(0,n.Cu)(i.av.paywalls.create(),e)},updatePaywall:function(e,t){return(0,n.aU)(i.av.paywalls.update({paywallId:e}),t)},deletePaywall:function(e){return(0,n.pC)(i.av.paywalls.delete({paywallId:e}))},updateMemberAccess:function(e){return(0,n.Cu)(i.av.paywalls.updateMemberAccess({paywallId:e}))}}},75381:(e,t,r)=>{"use strict";r.d(t,{W:()=>c});var n=r(34128),i=r(49326);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={index:function(e){var t=e.filters,r=e.order,o=e.page,s=e.perPage,c=e.searchKey,l=c?{search_key:c}:{};return function(){return(0,n.UT)(i.av.admin.paywalls.charges.index({params:a({filters:t,page:o,per_page:s,order:r},l)}))}},refundCharge:function(e){var t=e.chargeProcessorId,r=e.params;return(0,n.Cu)(i.av.admin.paywalls.charges.refunds({chargeProcessorId:t}),r)}}},76181:(e,t,r)=>{"use strict";r.d(t,{k:()=>u});var n=r(64687),i=r.n(n),o=r(80129),a=r.n(o),s=r(34128),c=r(49326);function l(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var u={show:function(e){return(0,s.t5)(c.av.paywallCheckout.show({paywallCheckoutPath:e}),{method:"GET"})},preview:function(){var e,t=(e=i().mark((function e(t){var r,n,o,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.queryParams,n=t.shouldIgnoreCommunityMember,o="".concat(c.av.paywallCheckout.preview()).concat(a().stringify({checkout:r})),e.next=4,fetch(o,{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:n?"omit":"same-origin"});case 4:return l=e.sent,e.abrupt("return",(0,s.QJ)(l));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),prepare:function(e){return(0,s.Cu)(c.av.paywallCheckout.prepare(),{checkout:e})},create:function(e){var t=e.formData;return(0,s.Cu)(c.av.paywallCheckout.create(),{checkout:t})},prepare_DEPRECATED:function(e){return(0,s.t5)(c.av.paywallCheckout.prepare(),{method:"POST",body:JSON.stringify({checkout:{community_id:e}})})},create_DEPRECATED:function(e){var t=e.formData;return(0,s.t5)(c.av.paywallCheckout.create(),{method:"POST",body:JSON.stringify({checkout:t})})}}},88116:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(34128),i=r(49326),o={index:function(e){var t=e.paywallId,r=e.skipDateValidations,o=e.couponStatuses;return function(){return(0,n.UT)(i.av.paywallCoupons.index({params:{paywall_id:t,skip_date_validations:r,status:o}}))}},createPaywallCoupon:function(e){var t=JSON.stringify({paywall_coupon:e});return(0,n.t5)(i.av.paywallCoupons.create(),{method:"POST",body:t,forReactQuery:!0})},updatePaywallCoupon:function(e,t){var r=JSON.stringify({paywall_coupon:t,forReactQuery:!0});return(0,n.t5)(i.av.paywallCoupons.update({paywallCouponId:e}),{method:"PATCH",body:r,forReactQuery:!0})},calculateDiscount:function(e){return(0,n.t5)(i.av.paywallCoupons.calculateDiscount({params:e}),{method:"GET",forReactQuery:!0})},destroyPaywallCoupon:function(e){return(0,n.t5)(i.av.paywallCoupons.destroy({paywallCouponId:e}),{method:"DELETE",forReactQuery:!0})}}},31772:(e,t,r)=>{"use strict";r.d(t,{Y:()=>c});var n=r(34128),i=r(49326);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={index:function(e){var t=e.filters,r=e.order,o=e.page,s=e.perPage,c=e.searchKey,l=c?{search_key:c}:{};return function(){return(0,n.UT)(i.av.admin.paywalls.subscriptions.index({params:a({filters:t,order:r,page:o,per_page:s},l)}))}},create:function(e){var t=e.params;return(0,n.Cu)(i.av.admin.paywalls.subscriptions.create(),t)},cancelAndRefundSubscription:function(e){var t=e.subscriptionProcessorId,r=e.params;return(0,n.Cu)(i.av.admin.paywalls.subscriptions.cancellations({subscriptionProcessorId:t}),r)},resumeSubscription:function(e){var t=e.subscriptionProcessorId;return(0,n.pC)(i.av.admin.paywalls.subscriptions.cancellations({subscriptionProcessorId:t}))},refundOptionsSubscription:function(e){var t=e.subscriptionProcessorId;return(0,n.UT)(i.av.admin.paywalls.subscriptions.refundOptions({subscriptionProcessorId:t}))}}},82575:(e,t,r)=>{"use strict";r.d(t,{r:()=>o});var n=r(34128),i=r(49326),o={index:function(e){return(0,n.UT)(i.av.paywalls.affiliates.index(e))},invite:function(e){return(0,n.Cu)(i.av.paywalls.affiliates.invite(),e)},attributions:{create:function(e){return(0,n.Cu)(i.av.paywalls.affiliates.attributions.create(),e)},destroy:function(e){return(0,n.pC)(i.av.paywalls.affiliates.attributions.destroy(),e)}}}},50567:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var n=r(34128),i=r(49326),o={create:function(e,t){return(0,n.Cu)(i.av.paywalls.communityMembers.billingInfo.create(e),{billing_info:t})},show:function(e){return(0,n.UT)(i.av.paywalls.communityMembers.billingInfo.show(e))},update:function(e,t){return(0,n.aU)(i.av.paywalls.communityMembers.billingInfo.update(e),{billing_info:t})}}},1229:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(34128),i=r(15913),o={create:function(e){return(0,n.Cu)(i.yT.create(),e)},refresh:function(){return(0,n.UT)(i.yT.refresh())}}},23360:(e,t,r)=>{"use strict";r.d(t,{X:()=>U,c:()=>R});var n=r(67294),i=r(88767),o=r(73377),a=r(1669),s=r(40160),c=r(24185),l=r(77388),u=r(63353),d=r(85893),p=(0,l.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(5961),r.e(4593),r.e(4061),r.e(7392),r.e(1574),r.e(8458),r.e(7634),r.e(7173)]).then(r.bind(r,17173))})),f=function(){return(0,d.jsx)(n.Suspense,{fallback:(0,d.jsx)(u.w,{}),children:(0,d.jsx)(p,{})})},m=(0,l.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(5961),r.e(7392),r.e(8458),r.e(7634),r.e(2073),r.e(9513)]).then(r.bind(r,72943))})),b=function(){return(0,d.jsx)(n.Suspense,{fallback:(0,d.jsx)(u.w,{}),children:(0,d.jsx)(m,{})})},h=(0,l.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(5961),r.e(4593),r.e(7392),r.e(8458),r.e(7634),r.e(2073),r.e(9642)]).then(r.bind(r,58368))})),v=function(){return(0,d.jsx)(n.Suspense,{fallback:(0,d.jsx)(u.w,{}),children:(0,d.jsx)(h,{})})},y=(0,l.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(2837),r.e(9541),r.e(8838),r.e(5961),r.e(4061),r.e(4040),r.e(7392),r.e(1574),r.e(7908),r.e(8458),r.e(9903),r.e(7634),r.e(1638),r.e(3492)]).then(r.bind(r,69933))})),g=function(){return(0,d.jsx)(n.Suspense,{fallback:(0,d.jsx)(u.w,{}),children:(0,d.jsx)(y,{})})},_=(0,l.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(5961),r.e(4593),r.e(7392),r.e(8458),r.e(7634),r.e(6623)]).then(r.bind(r,56623))})),j=function(){return(0,d.jsx)(n.Suspense,{fallback:(0,d.jsx)(u.w,{}),children:(0,d.jsx)(_,{})})},x=(0,l.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(5961),r.e(4593),r.e(7392),r.e(1574),r.e(8458),r.e(7634),r.e(5061),r.e(7967)]).then(r.bind(r,55585))})),w=function(){return(0,d.jsx)(n.Suspense,{fallback:(0,d.jsx)(u.w,{}),children:(0,d.jsx)(x,{})})};function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=(0,l.u)((function(){return Promise.all([r.e(532),r.e(3530),r.e(8838),r.e(5961),r.e(4593),r.e(1356),r.e(5363),r.e(7392),r.e(1574),r.e(8458),r.e(7634),r.e(5061),r.e(9518)]).then(r.bind(r,5954))})),k=function(e){return(0,d.jsx)(n.Suspense,{fallback:(0,d.jsx)(u.w,{}),children:(0,d.jsx)(C,S({},e))})},N=function(e){var t=e.hasEmail,r=void 0!==t&&t,n=e.otpSignInResponse,i=e.setOtpSignInResponse;return(0,d.jsxs)(s.VK,{children:[(0,d.jsx)(c.AW,{path:"/users/login",component:w}),(0,d.jsx)(c.AW,{path:"/users/sign_in",component:w}),(0,d.jsx)(c.AW,{path:"/sign_in",component:w}),(0,d.jsx)(c.AW,{path:"/sign_up",children:(0,d.jsx)(k,{hasEmail:r,otpSignInResponse:n,setOtpSignInResponse:i})}),(0,d.jsx)(c.AW,{path:"/users/password/new",component:j}),(0,d.jsx)(c.AW,{path:"/communities/new",component:f}),(0,d.jsx)(c.AW,{path:"/communities/:community_id/questions",component:b}),(0,d.jsx)(c.AW,{path:"/communities/:community_id/templates",component:v}),(0,d.jsx)(c.AW,{path:"/settings/profile",component:g})]})},I=r(21809);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=(0,n.createContext)({});M.displayName="CurrentCommunityContext";var R=function(){return(0,n.useContext)(M)},B=new i.QueryClient,U=function(e){var t=e.currentCommunity,r=e.currentCommunityPolicies,s=e.communityThemeSettings,c=void 0===s?{}:s,l=e.brandColor,u=void 0===l?{light:"",dark:""}:l,p=e.brandTextColor,f=void 0===p?{light:"",dark:""}:p,m=e.invitationToken,b=e.signUpOptions,h=e.notice,v=e.alert,y=e.errors,g=e.user_email,_=e.current_user,j=e.is_signup_password_matching,x=e.can_current_community_support_custom_login,w=e.authProviderAuthorizationUrl,O=e.authProviderName,S=e.authProviderSignInWithCircleLinkLabel,P=e.promotion_details,C=e.suggestedLanguage,k=T(T({},c),{},{brand_color:u,brand_text_color:f,current_theme:"default",is_custom:!1});(0,a.M2)();var E=A((0,n.useState)(null),2),D=E[0],L=E[1];return(0,d.jsx)(i.QueryClientProvider,{client:B,children:(0,d.jsx)(M.Provider,{value:{currentCommunity:t,currentCommunityPolicies:r,invitationToken:m,signUpOptions:b,errors:y,currentUser:_,userEmail:g,isSignupPasswordMatching:j,canCurrentCommunitySupportCustomLogin:x,authProviderAuthorizationUrl:w,authProviderName:O,suggestedLanguage:C,authProviderSignInWithCircleLinkLabel:S,promotion_details:P},children:(0,d.jsx)(a.f6,{theme:k,children:(0,d.jsxs)(I.V,{children:[(0,d.jsx)(o.I,{notice:h,alert:v}),(0,d.jsx)(N,{hasEmail:Boolean((null===y||void 0===y?void 0:y.email)&&g),otpSignInResponse:D,setOtpSignInResponse:L})]})})})})}},28435:(e,t,r)=>{"use strict";r.d(t,{g:()=>$c});var n=r(67294),i=r(64687),o=r.n(i),a=r(43784);function s(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var c=function(){var e,t=(e=o().mark((function e(){var t,n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("pt"!==(null===(t=window)||void 0===t?void 0:t.locale)){e.next=7;break}return e.next=3,r.e(205).then(r.bind(r,68994));case 3:n=e.sent,(0,a.Z)({locale:n.default,weekStartsOn:1}),e.next=11;break;case 7:return e.next=9,Promise.resolve().then(r.bind(r,41695));case 9:i=e.sent,(0,a.Z)({locale:i.default});case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,c,"next",e)}function c(e){s(o,n,i,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),l=r(81967),u=r(74238),d=r(72675),p=r(84495),f=r(1963),m=r(32194),b=r(85893),h=[p.Cz,m.Rl,p.x3,d.yB,f.hg],v=function(e){var t=e.children;return h.reduceRight((function(e,t){return(0,b.jsx)(t,{children:e})}),t)},y=r(1669),g=r(34974),_=r(97529),j=r(42175),x=r(58521),w=r(86013),O=r(96486),S=r.n(O),P=r(97012),C=r(30887),k=r(19300),N=r(393),I=function(){var e,t,r,n,i=(0,P.wh)(),o=i.currentCommunityMember,a=i.isViewOnlyMasquerading,s=i.masqueradingEntity,c=(0,u.wC)().masquerade_referrer_url,l=(0,N.D)(),d=!!c&&!l,p=(0,f.Vu)(),m=p.isBannerVisible,h=p.openViewMasqueradingSearch,v=p.openEditMasqueradingSearch,y=p.hideBanner;return d||m?(m?(e=(0,w.t)("view_only_masquerading.banner.title_not_selected"),t=(0,w.t)("view_only_masquerading.banner.title_selected"),r=(0,w.t)("view_only_masquerading.banner.placeholder"),n=h):a?(e=(0,w.t)("view_only_masquerading.banner.title_selected"),t=(0,w.t)("view_only_masquerading.banner.title_selected"),r=(0,O.truncate)(s.name,{length:50}),n=h):(e=(0,w.t)("masquerade.banner.title"),t=(0,w.t)("masquerade.banner.title"),r=(0,O.truncate)(o.name,{length:50}),n=v),(0,b.jsxs)("div",{className:"flex h-12 items-center justify-between bg-gray-900 px-6 dark:bg-gray-700",children:[(0,b.jsx)("div",{})," ",(0,b.jsxs)("div",{className:"flex","data-testid":"masquerade-banner",children:[(0,b.jsx)("div",{className:"mr-2",children:(0,b.jsx)(k.Di,{weight:"semibold",color:"text-feature-dark",children:e})}),(0,b.jsxs)("button",{type:"button",onClick:n,className:"flex","aria-label":t,children:[(0,b.jsx)("div",{className:"border-dark dark:border-secondary border-b border-dashed",children:(0,b.jsx)(k.Di,{color:"text-feature-dark",children:r})}),(0,b.jsx)("div",{children:(0,b.jsx)(C.JO,{type:"20-chevron-down-sm",className:"text-feature-dark ml-[3px]","aria-hidden":!0})})]})]}),(0,b.jsx)("div",{children:(0,b.jsx)("button",{type:"button",onClick:function(){y(),c&&(window.location.href=c)},children:(0,b.jsx)(k.Di,{color:"text-feature-dark",weight:"semibold",children:(0,w.t)("view_only_masquerading.banner.exit")})})})]})):null},A=r(73377),E=r(73935),D=r(24185),T="https://community.circle.so/c/product-updates",L={text:"",type:"",area:"",is_important:!1},M="support-widget-state",R=["/messages/new","/messages","/live"],B={enter:"transition ease-out duration-200 transform",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-200 transform",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95"},U="completed",F="failed",z="uploaded",V="uploading",q=3e5,G=9e5,H=36e5,W=[{text:(0,w.t)("support_widget.constants.bug"),value:"bug"},{text:(0,w.t)("support_widget.constants.feedback"),value:"feedback"},{text:(0,w.t)("support_widget.constants.question"),value:"question"}],Z=[{text:(0,w.t)("support_widget.constants.admin_billing"),value:"admin_billing"},{text:(0,w.t)("support_widget.constants.apps"),value:"apps"},{text:(0,w.t)("support_widget.constants.courses"),value:"courses"},{text:(0,w.t)("support_widget.constants.events"),value:"events"},{text:(0,w.t)("support_widget.constants.live_streams_and_rooms"),value:"live_streams_and_rooms"},{text:(0,w.t)("support_widget.constants.member_access"),value:"member_access"},{text:(0,w.t)("support_widget.constants.paywalls"),value:"paywalls"},{text:(0,w.t)("support_widget.constants.posts_and_comments"),value:"posts_and_comments"},{text:(0,w.t)("support_widget.constants.settings"),value:"settings"},{text:(0,w.t)("support_widget.constants.other"),value:"other"}],J=function(){try{return Q(localStorage.getItem(M))}catch(e){return console.error("Failed to get item from localStorage:",e),null}},$=function(e){try{localStorage.setItem(M,JSON.stringify(e))}catch(t){console.error("Failed to set item in localStorage:",t)}},Q=function(e){try{return JSON.parse(e)}catch(t){console.error("Parsing JSON failed",t)}},K=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[-A-Z0-9+\u0026\u2019@#/%?=()~_|!:,.;]*[-A-Z0-9+\u0026@#/%=~()_|])/gi,X=function(e){try{return e.replace(K,(function(e,t,r){return"".concat(t,'<a class="break-all" href=\'').concat(r,"' target='_blank' rel='noopener noreferrer'>").concat(r,"</a>")}))}catch(t){return e}};function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ie=(0,n.createContext)({});ie.displayName="SupportWidgetContext";var oe=function(){var e=(0,n.useContext)(ie);if(!e)throw new Error("useSupportWidgetContext must be used within a SupportWidgetContextProvider");return e},ae=function(e){var t,r=e.children,i=e.has_active_conversations,o=e.unread_conversations,a=e.live_chat_enabled,s=e.support_widget_v2_enabled,c=e.display_onboarding,l=(0,P.wh)().isViewOnlyMasquerading,u=re((0,n.useState)({name:"",emoji:"",custom_emoji_url:"",custom_emoji_dark_url:""}),2),d=u[0],p=u[1],f=re((0,n.useState)((function(){var e;return(null===(e=J())||void 0===e?void 0:e.isExpanded)||!1})),2),m=f[0],h=f[1],v=(0,n.useRef)(null),y=re((0,n.useState)((function(){var e;return!l&&((null===(e=J())||void 0===e?void 0:e.isOpen)||!1)})),2),g=y[0],_=y[1],j=(null===(t=J())||void 0===t?void 0:t.formValues)||{},x=j.text,w=j.type,O=j.area,S=j.is_important,C=re((0,n.useState)(x||w||O||S),2),k=C[0],N=C[1],I=re((0,n.useState)(i),2),A=I[0],E=I[1],D=re((0,n.useState)(o),2),T=D[0],L=D[1];return(0,b.jsx)(ie.Provider,{value:{isExpanded:m,expandWidget:function(){$(ee(ee({},J()),{},{isExpanded:!0})),h(!0)},collapseWidget:function(){$(ee(ee({},J()),{},{isExpanded:!1})),h(!1)},isOpen:g,toggleWidget:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shouldTriggerOnWidgetClose;l||(void 0!==e&&e&&g&&null!==v.current?v.current():($(ee(ee({},J()),{},{isOpen:!g})),_(!g)))},isDraftConversationPresent:k,setIsDraftConversationPresent:N,currentSpaceProperties:d,setCurrentSpaceProperties:p,showMessages:A,setShowMessages:E,unreadConversations:T,setUnreadConversations:L,supportWidgetV2Enabled:s,liveChatEnabled:a,displayOnboarding:c,setOnWidgetClose:function(e){return v.current=e}},children:r})},se=function(){return null},ce=r(47031),le=r(94184),ue=r.n(le),de=r(88767),pe=r(87588),fe=r(30414),me=function(e){var t=e.isOpen,r=e.onClick;return(0,b.jsx)(fe.T,{children:(0,b.jsx)("button",{type:"submit",className:"bg-support-widget float-right hidden h-14 w-14 self-end rounded-full text-white shadow-md lg:block",onClick:r,"aria-label":(0,w.t)("support_widget.floating_button_aria_label"),"aria-expanded":t,"aria-controls":"support-widget",children:(0,b.jsx)(C.JO,{type:t?"20-chevron-down":"chat",size:t?20:null})})})},be=r(85722),he=r(65954),ve=r(56933),ye=function(e){var t=e.onClick,r=(0,n.useRef)(null);return(0,n.useEffect)((function(){var e=r.current;if(e){var t=e.offsetHeight;e.style.setProperty("--arrow-top","".concat(t,"px"))}}),[]),(0,b.jsxs)("div",{ref:r,className:"support-widget-onboarding bg-circle w-[303px] rounded-lg p-6 text-white",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,b.jsx)("img",{loading:"lazy",src:ve,alt:(0,w.t)("support_widget.circle_logo_alt_text"),className:"h-8 w-8 rounded-md border-2 dark:border-white"}),(0,b.jsx)("button",{type:"button",className:"-mt-1",onClick:t,children:(0,b.jsx)(C.JO,{type:"20-close",size:20})})]}),(0,b.jsx)(he.o,{color:"text-white",children:(0,w.t)("support_widget.onboarding.title")}),(0,b.jsx)(be.Q,{color:"text-white",children:(0,w.t)("support_widget.onboarding.content")})]})},ge=r(45697);function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var we=function(e){var t=e.children,r=(0,D.TH)(),i=oe().collapseWidget;return(0,n.useEffect)((function(){$(je(je({},J()),{},{location:r.pathname})),"/form"===r.pathname||r.pathname.startsWith("/posts/")||r.pathname.startsWith("/news/")||i()}),[r.pathname,i]),t};we.propTypes={children:r.n(ge)().node};var Oe=r(40160),Se=function(e){return ue()({"text-circle link-active":e,"text-default link-inactive":!e},"relative flex flex-col gap-2 hover:text-circle focus:text-circle w-1/5 text-center")},Pe=function(){var e=oe(),t=e.showMessages,r=e.unreadConversations,n=oe().isDraftConversationPresent;return(0,b.jsxs)("div",{className:"flex h-[76px] w-full items-center justify-evenly text-xs",children:[(0,b.jsxs)(Oe.OL,{to:"/",className:Se,isActive:function(e,t){return"/"===t.pathname},children:[(0,b.jsx)(C.JO,{type:"home-v2",viewBox:"0 0 16 16"}),(0,b.jsx)("span",{children:(0,w.t)("support_widget.bottom_menu.home")})]}),(t||n)&&(0,b.jsxs)(Oe.OL,{to:"/conversations",className:Se,children:[(0,b.jsx)(C.JO,{type:"16-messages",viewBox:"0 0 16 16"}),r.length>0?(0,b.jsx)("span",{className:"absolute right-5 top-[-2px] h-2 w-2 rounded-full bg-blue-600"}):n&&(0,b.jsx)("span",{className:"bg-dark absolute right-5 top-[-2px] h-2 w-2 rounded-full"}),(0,b.jsx)("span",{children:(0,w.t)("support_widget.bottom_menu.messages")})]}),(0,b.jsxs)(Oe.OL,{to:"/space_groups",className:Se,isActive:function(e,t){var r;return t.pathname.startsWith("/space_groups")||t.pathname.startsWith("/spaces")||t.pathname.startsWith("/posts")&&!["848480","3422440","3701502"].includes(null===(r=t.pathname.split("/"))||void 0===r?void 0:r.slice(-1)[0])},children:[(0,b.jsx)(C.JO,{type:"question-mark",viewBox:"0 0 24 24"}),(0,b.jsx)("span",{children:(0,w.t)("support_widget.bottom_menu.help")})]}),(0,b.jsxs)(Oe.OL,{to:"/news",className:Se,isActive:function(e,t){return t.pathname.startsWith("/news")},children:[(0,b.jsx)(C.JO,{type:"announcements",size:20}),(0,b.jsx)("span",{children:(0,w.t)("support_widget.bottom_menu.news")})]}),(0,b.jsxs)(Oe.OL,{to:"/events",className:Se,isActive:function(e,t){return t.pathname.startsWith("/events")},children:[(0,b.jsx)(C.JO,{type:"support-widget-calendar",size:20}),(0,b.jsx)("span",{children:(0,w.t)("support_widget.bottom_menu.events")})]})]})},Ce=function(e){var t=e.children,r=(0,D.TH)(),n=oe().isExpanded;return"/ask"!==r.pathname&&!r.pathname.match(/\/conversations\/\d+/)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:ue()("xxl:h-full support-widget-container border-primary bg-primary hidden origin-bottom-right overflow-y-auto rounded-t-lg border-x border-t lg:flex lg:flex-col",{"h-[min(75vh,100vh-224px)] max-h-[75vh] min-h-[min(580px,100vh-224px)] w-[688px]":n,"h-[min(580px,100vh-224px)] max-h-[580px] min-h-[80px] w-[400px]":!n}),style:{transition:"width 200ms ease 0s, height 200ms ease 0s, max-height 200ms ease 0s, transform 300ms cubic-bezier(0, 1.2, 1, 1) 0s"},children:t}),(0,b.jsx)("div",{className:"border-primary bg-primary hidden origin-bottom-right rounded-b-lg border-y border-l shadow-lg lg:flex",children:(0,b.jsx)(Pe,{})})]}):(0,b.jsx)("div",{className:ue()("xxl:h-full support-widget-container border-primary bg-primary hidden origin-bottom-right overflow-y-auto rounded-t-lg border lg:flex lg:flex-col",{"h-[min(75vh,100vh-224px)] max-h-[75vh] min-h-[min(658px,100vh-224px)] w-[688px]":n,"h-[min(658px,100vh-224px)] max-h-[658px] min-h-[80px] w-[400px]":!n}),style:{transition:"width 200ms ease 0s, height 200ms ease 0s, max-height 200ms ease 0s, transform 300ms cubic-bezier(0, 1.2, 1, 1) 0s"},children:t})},ke=r(16743),Ne=r(87958),Ie=r(61926),Ae=r(49326),Ee=r(55675),De="type_live_chat",Te=function(e){var t=e.onClick,r=e.type;return(0,b.jsxs)("div",{className:"bg-tertiary flex flex-col gap-6 px-4 py-6",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)(ke.Z.BodySm,{children:(0,w.t)("support_widget.chatbot.live_chat_ended")}),r==De?(0,b.jsx)(ke.Z.BodySm,{weight:"font-bold",children:(0,w.t)("support_widget.chatbot.live_chat_follow_up")}):null]}),(0,b.jsx)(Ee.z,{variant:"circle",large:!0,onClick:t,children:(0,w.t)("support_widget.chatbot.live_chat_back_home")})]})},Le=r(3682),Me=r(87536),Re=function(e){var t=e.onSubmit,r=(0,Me.Gc)(),i=r.handleSubmit,o=r.reset,a=(0,Me.qo)({name:"message"}),s=(0,n.useRef)(null),c=function(){(0,Le.Z)(s.current)};return(0,n.useEffect)((function(){c()}),[]),(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)(Ie.l.Input,{name:"message",variant:"textarea",label:null,placeholder:(0,w.t)("support_widget.chatbot.message_placeholder"),ref:s,rows:1,onInput:c,onKeyDown:function(e){e.shiftKey||"Enter"!=e.key||(i(t)(),o(),e.preventDefault())},hideBorder:!0,focusRequired:!1,className:"form-control hide-scrollbar max-h-[128px] resize-none !py-4 !pl-6 focus:!ring-0 focus:!ring-offset-0"}),(0,b.jsx)("div",{className:"text-circle pr-4 pt-4",children:a&&(0,b.jsx)(Ne.T,{placement:"top",content:(0,w.t)("support_widget.chatbot.send"),children:(0,b.jsx)(C.JO,{type:"tiptap-send",className:"cursor-pointer",onClick:function(){i(t)(),o()}})})})]})},Be=r(66007),Ue=r(95764),Fe=r(12689),ze=r(38870),Ve=r(73952);function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ge(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var He=function(e){var t,r,i=e.attachment,o=null===(t=i.thumbnails)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.content_url,a=qe((0,n.useState)(!!o),2),s=a[0],c=a[1];return(0,b.jsx)("div",{children:(0,b.jsxs)("a",{href:i.content_url,target:"_blank",rel:"noreferrer",className:"flex gap-2 rounded-lg border border-gray-300 p-3 dark:border-gray-600",download:!0,children:[s?(0,b.jsx)("img",{loading:"lazy",alt:"",className:"h-10 w-10 rounded-lg object-cover",src:o,onError:function(){return c(!1)}}):(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gray-100 object-cover text-gray-400 dark:bg-gray-700",children:(0,b.jsx)(C.JO,{type:"tiptap-paperclip",size:20})}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(Ve.T1,{weight:"semibold",className:"break-all",children:(0,O.truncate)(i.file_name,{length:28})}),(0,b.jsx)(Fe.wN,{children:(0,O.truncate)(i.content_type.split("/").pop().toUpperCase(),{length:28})})]})]})})};function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Je=function(e){var t=e.attachments,r=e.collapsed,i=void 0===r||r,o=We((0,n.useState)(i),2),a=o[0],s=o[1],c=1===t.length?"file":"files";return 0===t.length?null:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ke.Z.LabelXs,{children:(0,b.jsxs)("button",{type:"button",onClick:function(){return s((function(e){return!e}))},className:"text-dark hover:text-dark focus:text-dark cursor-pointer hover:underline",children:["".concat(t.length," ").concat(c),a?(0,b.jsx)(C.JO,{type:"cheveron-up",useWithFillCurrentColor:!0}):(0,b.jsx)(C.JO,{type:"cheveron-down",useWithFillCurrentColor:!0})]})}),(0,b.jsx)("div",{className:"flex flex-col gap-2",children:!a&&t.map((function(e){return(0,b.jsx)(He,{attachment:e},e.id)}))})]})},$e=function(){return(0,b.jsx)("div",{className:"from-circle flex h-[40px] w-[40px] shrink-0 justify-center overflow-hidden rounded bg-gradient-to-b to-[#6B47D2] text-white",children:(0,b.jsx)(C.JO,{type:"20-ai",size:20})})},Qe=function(e){var t=e.label,r=e.sublabel,n=e.event,i=e.value,o=e.selected,a=e.setSelected,s=e.process;return(0,b.jsxs)("button",{type:"button",className:ue()("border-primary rounded-full border px-4 py-2 text-sm font-medium",{"hover:border-secondary cursor-pointer":null===o,"border-secondary bg-gray-100 dark:bg-gray-700":o===t,"cursor-not-allowed":null!==o,"w-full":r}),onClick:function(){null===o&&(a(t),s({event:n,value:i}))},children:[(0,b.jsx)(Ve.T1,{weight:"medium",children:t}),r&&(0,b.jsxs)(b.Fragment,{children:[" \u2022 ",(0,b.jsx)(Ve.T1,{weight:"medium",color:"text-gray-400",children:r})]})]})};function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){Ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rt=function(e){var t=e.type,r=e.authorAvatarUrl,i=e.authorName,o=e.content,a=e.buttons,s=e.attachments,c=void 0===s?[]:s,l=e.createdAt,u=e.process,d=void 0===u?function(){}:u,p=et((0,n.useState)(null),2),f=p[0],m=p[1],h=(0,P.wh)().currentCommunityMember,v={business:{avatarUrl:r,name:i},bot:{avatarUrl:null,name:(0,w.t)("support_widget.chatbot.name")},user:{avatarUrl:h.avatar_url,name:h.name}},y=a.map((function(e){var t=e.label;return(0,b.jsx)(Qe,Xe(Xe({},e),{},{selected:f,setSelected:m,process:d}),t)}));return(0,b.jsxs)("div",{className:"ml-6 flex flex-row items-start gap-3 pt-6",children:["bot"===t?(0,b.jsx)($e,{}):(0,b.jsx)(ze.s,{src:v[t].avatarUrl,size:"10",name:v[t].name}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,b.jsx)(k.Di,{weight:"semibold",color:"text-dark",children:v[t].name}),(0,b.jsx)(Fe.wN,{color:"text-light",children:l})]}),(0,b.jsxs)("div",{className:"message-content pr-6",children:[(0,b.jsx)(Ue.p,{children:(0,b.jsx)(Be.Z,{html:o})}),c.length>0?(0,b.jsx)(Je,{attachments:c,collapsed:!1}):null,y.length>0?(0,b.jsx)("div",{className:"mt-4 flex flex-row flex-wrap gap-2",children:y}):null]})]})]})},nt=function(){return(0,b.jsxs)("div",{className:"ml-6 flex flex-row items-start gap-3 pt-6",children:[(0,b.jsx)($e,{}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)(k.Di,{weight:"semibold",color:"text-dark",children:(0,w.t)("support_widget.chatbot.name")}),(0,b.jsxs)("div",{className:"typing flex h-5 items-center gap-1",children:[(0,b.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-gray-500"}),(0,b.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-gray-500"}),(0,b.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-gray-500"})]})]})]})},it=r(33681),ot=function(e){var t=e.attachment,r=e.onCancel;return(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2 break-all rounded-md bg-gray-50 px-4 py-2 dark:bg-gray-700",children:[t.status===U?(0,b.jsx)("a",{href:t.blobUrl,target:"_blank",rel:"noopener noreferrer",className:"text-circle hover:text-circle focus:text-circle dark:text-dark dark:hover:text-dark text-sm font-semibold underline",children:(0,O.truncate)(t.filename,{length:40})}):(0,b.jsx)(Ve.T1,{weight:"semibold",children:(0,O.truncate)(t.filename,{length:28})}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(t.status===V||t.status===z)&&(0,b.jsx)(it.Z,{variant:"determinate",value:t.progress||0,className:"linear-progress h-1 w-14 rounded-full"}),(0,b.jsx)(C.JO,{type:"16-close",size:16,onClick:function(){r(t)},className:"text-dark cursor-pointer"})]})]})};function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?at(Object(r),!0).forEach((function(t){ct(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lt=function(e){var t,r,n,i,o,a=e.ariaLabel,s=void 0===a?"":a,c=e.onClick,l=void 0===c?null:c,u=e.href,d=void 0===u?"":u,p=e.icon,f=void 0===p?"":p,m=e.type,h=void 0===m?"":m,v=e.className,y=void 0===v?"":v,g=e.size,_=void 0===g?20:g,j=(0,D.k6)(),x=oe(),O=x.isExpanded,S=x.expandWidget,P=x.collapseWidget,k={back:{ariaLabel:(0,w.t)("support_widget.search_container.back_button_label"),icon:"20-chevron-left",onClick:j.goBack},expand:{ariaLabel:(0,w.t)("support_widget.search_container.expand_widget_label"),icon:O?"shrink":"20-expand",onClick:function(){return O?P():S()}}};d?(n="a",i={href:d,target:"_blank",rel:"noopener noreferrer"}):(n="button",i={onClick:l||(null===(o=k[h])||void 0===o?void 0:o.onClick)});return(0,b.jsx)(n,st(st({className:ue()("text-dark hover:bg-tertiary w-10 rounded-lg p-2",{"visited:text-dark hover:text-dark focus:bg-tertiary focus:text-dark inline-block text-center":d},y),"aria-label":(null===(t=k[h])||void 0===t?void 0:t.ariaLabel)||s},i),{},{children:(0,b.jsx)(C.JO,{useWithFillCurrentColor:!0,type:(null===(r=k[h])||void 0===r?void 0:r.icon)||f,size:_})}))},ut=r(41389);function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){ft(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ft(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mt=function(e){var t=e.onSubmit,r=e.uploadAttachments,i=e.uploadingEnabled,o=(0,Me.Gc)(),a=o.handleSubmit,s=o.reset,c=(0,Me.qo)({name:"message"}),l=(0,n.useRef)(null),u=c,d=(0,ut.uI)({onDrop:r,noClick:!0,multiple:!1}),p=d.getRootProps,f=d.getInputProps,m=d.inputRef,h=function(){(0,Le.Z)(l.current)};return(0,n.useEffect)((function(){h()}),[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ie.l.Input,{name:"message",variant:"textarea",label:null,placeholder:(0,w.t)("support_widget.chatbot.message_placeholder"),ref:l,rows:1,onInput:h,onKeyDown:function(e){e.shiftKey||"Enter"!=e.key||(a(t)(),s(),e.preventDefault())},hideBorder:!0,focusRequired:!1,className:"form-control hide-scrollbar !mb-1 !mt-2 max-h-[128px] resize-none !py-3 !pl-6 focus:!ring-0 focus:!ring-offset-0"}),(0,b.jsxs)("div",pt(pt({className:"flex justify-between pb-4 pl-6 pr-4"},p()),{},{children:[(0,b.jsx)("input",pt({},f())),(0,b.jsx)(Ne.T,{placement:"right",content:i?(0,w.t)("tiptap.attach_file"):(0,w.t)("support_widget.chatbot.live_chat_send_a_message_first"),className:ue()({"hover:text-circle focus:text-circle text-dark visited:text-dark":i,"text-dark visited:text-dark":!i}),children:(0,b.jsx)("button",{type:"submit","aria-label":(0,w.t)("tiptap.attach_file"),onClick:function(e){e.preventDefault(),m.current.click()},disabled:!i,className:ue()({"cursor-not-allowed":!i}),children:(0,b.jsx)(C.JO,{type:"tiptap-paperclip",size:20})})}),(0,b.jsx)("span",{className:ue()({"text-circle dark:text-circle visited:text-circle":u,"text-dark visited:text-dark":!u}),children:(0,b.jsx)(C.JO,{type:"tiptap-send",className:ue()({"cursor-pointer":u,"cursor-not-allowed":!u}),onClick:function(){u&&(a(t)(),s())},size:20})})]}))]})},bt="in_queue",ht="chatting",vt=function(e){var t=e.onStay,r=e.onLeave,n=e.warningType==bt?(0,w.t)("support_widget.chatbot.live_chat_leave_dialog.explanation_when_in_queue"):(0,w.t)("support_widget.chatbot.live_chat_leave_dialog.explanation_when_chatting");return(0,b.jsx)("div",{className:"my-auto px-14",children:(0,b.jsxs)("div",{className:"flex flex-col gap-9",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2 text-center text-sm",children:[(0,b.jsx)(ke.Z.TitleSm,{weight:"bold",children:(0,b.jsx)("span",{className:"text-lg",children:(0,w.t)("support_widget.chatbot.live_chat_leave_dialog.are_you_sure")})}),(0,b.jsx)("div",{className:"px-4",children:(0,b.jsx)(ke.Z.BodySm,{children:n})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)(Ee.z,{large:!0,full:!0,className:"!bg-[#2B2E33] dark:!bg-white dark:text-[#19283a]",onClick:t,children:(0,w.t)("support_widget.chatbot.live_chat_leave_dialog.stay")}),(0,b.jsx)(Ee.z,{variant:"secondary",full:!0,large:!0,onClick:r,children:(0,w.t)("support_widget.chatbot.live_chat_leave_dialog.leave")})]})]})})},yt=r(99333),gt=r(24897),_t=r(48895),jt="select-conversation-type",xt=function(e){var t=e.displayLiveChat,r=[{label:(0,w.t)("support_widget.chatbot.templates.conversation_select_type_answers.question"),event:jt,value:"question"},{label:(0,w.t)("support_widget.chatbot.templates.conversation_select_type_answers.feedback"),event:jt,value:"feedback"},{label:(0,w.t)("support_widget.chatbot.templates.conversation_select_type_answers.bug"),event:jt,value:"bug"}];return t&&r.push({label:(0,w.t)("support_widget.chatbot.templates.conversation_select_type_answers.live_chat"),event:jt,value:"live-chat"}),{content:(0,w.t)("support_widget.chatbot.templates.conversation_select_type"),buttons:r}};function wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(r),!0).forEach((function(t){St(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function St(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pt=function(e){var t=e.history,r=e.addMessage,n=e.setIsUserInputEnabled,i=e.setConversationType,o=e.setProductArea,a=e.conversationType,s=e.setIsBotProcessing,c=e.createSupportWidgetFeedback,l=e.productArea,u=e.createChatMessage,d=e.sessionId,p=e.setSessionId,f=e.setIsConversationEnded,m=e.setCanRestart,b=e.displayLiveChat,h=e.createLiveChatMessage,v=e.setIsLiveChatEnded,y=e.hasPostedLiveMessage,g=e.setIsLiveChatWithDeflectionEnabled,_=function(e){"bug"===e?r("bot",{content:(0,w.t)("support_widget.chatbot.templates.reach_out_to_support"),buttons:[{label:(0,w.t)("support_widget.send_a_message"),event:"contact-support",value:null}]}):"feedback"==e?r("bot",{content:(0,w.t)("support_widget.chatbot.templates.feedback_select_product_area"),buttons:Z.map((function(e){return{label:e.text,event:"select-product-type",value:e.value}}))}):"question"==e?r("bot",{content:(0,w.t)("support_widget.chatbot.templates.question_select_product_area"),buttons:Z.map((function(e){return{label:e.text,event:"select-product-type",value:e.value}}))}):"live-chat"==e&&(r("bot",{content:(0,w.t)("support_widget.chatbot.templates.live_chat_start"),buttons:[]}),n(!0)),i(e),m(!0)};return function(e){var j=e.event,x=e.value;"select-conversation-type"===j?_(x):"contact-support"===j?($(Ot(Ot({},J()),{},{formValues:Ot(Ot({},L),{},{type:a,area:l,text:x})})),t.push("/form",{source:"chat",chatBotSessionId:d})):"start-chat"===j?(r("bot",xt({displayLiveChat:b})),p(null),o(null),i(null),n(!1),s(!1),m(!1),f(!1),v(!1)):"restart-chat"===j?(r("bot",xt({displayLiveChat:b})),p(null),o(null),i(null),n(!1),s(!1),g(!1)):"select-product-type"==j?("feedback"===a?r("bot",{content:(0,w.t)("support_widget.chatbot.templates.feedback_prompt"),buttons:[]}):"question"===a&&r("bot",{content:(0,w.t)("support_widget.chatbot.templates.question_prompt"),buttons:[]}),o(x),n(!0)):"post-message"==j?function(e){r("user",{content:X(e),buttons:[]}),"feedback"===a?(s(!0),n(!1),c({text:e,area:l,type:"feedback",is_important:!1})):"question"===a?(s(!0),n(!1),u({message:e,sessionId:d,productArea:l})):"live-chat"===a&&(y||(s(!0),m(!1)),h({message:e,sessionId:d}))}(x):"complete-chat"==j&&(r("bot",{content:["Enjoy the rest of your day!"],buttons:[]}),n(!1),f(!0))}};function Ct(e){return function(e){if(Array.isArray(e))return kt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function It(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){At(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function At(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Et=function(){$(It(It({},J()),{},{location:"/"}))},Dt=function(e){var t=e.onSuccess,r=e.onError,n=e.attachments,i=e.source,o=e.chatBotSessionId,a=(0,de.useQueryClient)();return(0,de.useMutation)((function(e){var t=e.text,r=e.area,a=e.type,s=e.is_important;return pe.R.createConversation({text:t,area:r,type:a,is_important:s,source:i,chatBotSessionId:o,zendeskUploadIds:n.map((function(e){return e.zendeskUploadId})),submitPageUrl:window.location.href,viewportHeight:window.innerHeight||document.documentElement.clientHeight,viewportWidth:window.innerWidth||document.documentElement.clientWidth}).then((function(e){return e.json()}))}),{onSuccess:function(e){a.getQueryData(["conversations","list"])&&a.setQueryData(["conversations","list"],(function(t){return{conversations:[e.ticket].concat(Ct(t.conversations))}})),t(e.ticket)},onError:r})};function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(r),!0).forEach((function(t){Mt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rt(e){return function(e){if(Array.isArray(e))return zt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ft(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(){return Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bt.apply(this,arguments)}function Ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||Ft(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){if(e){if("string"===typeof e)return zt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zt(e,t):void 0}}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Vt=function(){var e,t=oe().liveChatEnabled,r=(e={enabled:t}.enabled,(0,de.useQuery)(["liveChatStatus"],(function(){return pe.R.getLiveChatStatus()}),{enabled:e,retry:!1,staleTime:0,cacheTime:0})),i=r.data,o=r.isLoading,a=Ut((0,n.useState)(!1),2),s=a[0],c=a[1],l=null===i||void 0===i?void 0:i.is_available,u=(0,D.k6)(),d=Ut((0,n.useState)(null),2),p=d[0],f=d[1],m=Ut((0,n.useState)(null),2),b=m[0],h=m[1],v=Ut((0,n.useState)(null),2),y=v[0],g=v[1],_=Ut((0,n.useState)(t),2),j=_[0],x=_[1],O=Ut((0,n.useState)(!1),2),S=O[0],P=O[1],C=Ut((0,n.useState)(!1),2),k=C[0],N=C[1],I=Ut((0,n.useState)(!1),2),A=I[0],E=I[1],T=Ut((0,n.useState)(!1),2),L=T[0],M=T[1],R=Ut((0,n.useState)([]),2),B=R[0],U=R[1],F=Ut((0,n.useState)(!1),2),z=F[0],V=F[1],q=Ut((0,n.useState)(!1),2),G=q[0],H=q[1],W=Ut((0,n.useState)(null),2),Z=W[0],J=W[1],$=new Audio(yt),Q=Ut((0,n.useState)(!1),2),K=Q[0],Y=Q[1],ee=Ut((0,n.useState)(!1),2),te=ee[0],re=ee[1];$.oncanplaythrough=function(){return Y(!0)};var ne,ie,ae,se=function(e,t){var r=Bt({},t);U((function(t){return[].concat(Rt(t),[Lt({id:(new Date).getTime().toString(),type:e,createdAt:(0,_t.w)({dateTime:new Date,format:_t.f.short_time})},r)])}))},ce=Dt({attachments:[],source:"chat",onSuccess:function(){x(!1),se("bot",{content:(0,w.t)("support_widget.chatbot.templates.feedback_received"),buttons:[]}),se("bot",{content:(0,w.t)("support_widget.chatbot.templates.restart_prompt"),buttons:[{label:(0,w.t)("support_widget.chatbot.answer_yes"),event:"restart-chat",value:null},{label:(0,w.t)("support_widget.chatbot.answer_no"),event:"complete-chat",value:null}]})}}).mutate,le=(ne={onSuccess:function(e){f(e.result.session_id),x(!1),P(!0);var t=e.result.answer,r=[],n=t.match(/<sources>([\s\S]*)<\/sources>/);if(n){t=t.replace(n[0],"");var i=JSON.parse(n[1]).filter((function(e){return"Not Available"!==e.url})).map((function(e){var t=e.url,r=e.title;return{url:t?t.replace("https://help-en.circle.so","https://help.circle.so"):null,title:r}})).map((function(e){return'<li><a target="_blank" href="'.concat(e.url,'">').concat(e.title,"</a></li>")}));i.length>0&&(t=t.concat('<h6 class="sources-title">'.concat((0,w.t)("support_widget.chatbot.helpful_resources"),"</h6><ul>").concat(i.join(""),"</ul>")))}if(t.match(/<ticket>([\s\S]*)<\/ticket>/)){var o,a,s,l,u=function(e){var t=e.displayLiveChat,r=e.emailWaitTime,n=e.liveChatWaitTime;return t?{content:(0,w.t)("support_widget.chatbot.templates.select_contact_method"),buttons:[{label:(0,w.t)("support_widget.chatbot.contact_methods.live_chat"),sublabel:(0,w.t)("support_widget.chatbot.estimated_wait_time",{time:n}),event:jt,value:"live-chat"},{label:(0,w.t)("support_widget.chatbot.contact_methods.email"),sublabel:(0,w.t)("support_widget.chatbot.estimated_wait_time",{time:r}),event:"contact-support",value:null}]}:{content:(0,w.t)("support_widget.chatbot.templates.reach_out_to_support"),buttons:[{label:(0,w.t)("support_widget.send_a_message"),event:"contact-support",value:null}]}}({displayLiveChat:null===e||void 0===e||null===(o=e.live_chat)||void 0===o?void 0:o.is_available,emailWaitTime:null===e||void 0===e||null===(a=e.live_chat)||void 0===a?void 0:a.email_wait_time,liveChatWaitTime:null===e||void 0===e||null===(s=e.live_chat)||void 0===s?void 0:s.live_chat_wait_time});t=u.content,r=u.buttons,P(!1),c(null===e||void 0===e||null===(l=e.live_chat)||void 0===l?void 0:l.is_available)}se("bot",{content:t,buttons:r})}},ie=ne.onSuccess,ae=ne.onError,(0,de.useMutation)((function(e){var t=e.message,r=e.sessionId,n=e.productArea;return pe.R.createChatMessage({message:t,sessionId:r,productArea:n}).then((function(e){return e.json()}))}),{onSuccess:ie,onError:ae})),ue=le.mutate,fe=function(e){var t=e.onSuccess,r=e.onError;return(0,de.useMutation)((function(e){var t=e.message,r=e.sessionId;return pe.R.createLiveChatMessage({message:t,sessionId:r}).then((function(e){return e.json()}))}),{onSuccess:t,onError:r})}({onSuccess:function(e){f(e.result.session_id),G||H(!0)}}),me=fe.mutate;(0,gt.s)({channel:"SupportWidget::LiveChatChannel",onMessageReceive:function(e){"newMessage"===e.event?(se(e.userType,{content:X(e.content),authorAvatarUrl:e.author.avatarUrl,authorName:e.author.name,buttons:[],attachments:e.attachments}),"user"!=e.userType&&K&&$.play()):"completeChat"===e.event?(N(!0),P(!1),V(!1)):"enterQueue"===e.event?(J(e.position),V(!0),M(!1),x(!1),se("bot",{content:(0,w.t)("support_widget.chatbot.templates.live_chat_first_message_posted"),buttons:[]})):"updateQueue"===e.event?J(e.position):"agentJoined"===e.event&&(se("bot",{content:(0,w.t)("support_widget.chatbot.templates.live_chat_agent_joined",{agent_first_name:e.agent_first_name}),buttons:[]}),K&&$.play(),V(!1),re(!0))},chat_bot_session_id:p,canCreateConnection:(l||s)&&p},[]);var be=Pt({history:u,addMessage:se,setIsUserInputEnabled:P,setConversationType:h,setProductArea:g,conversationType:b,setIsBotProcessing:x,createSupportWidgetFeedback:ce,productArea:y,createChatMessage:ue,sessionId:p,setSessionId:f,setIsConversationEnded:E,setCanRestart:M,displayLiveChat:l,createLiveChatMessage:me,setIsLiveChatEnded:N,setIsWaiting:V,hasPostedLiveMessage:G,setIsLiveChatWithDeflectionEnabled:c});return{sessionId:p,conversationType:b,messages:B,setMessages:U,isBotProcessing:j,isUserInputEnabled:S,isLiveChatEnded:k,isConversationEnded:A,canRestart:L,process:be,isWaiting:z,currentQueuePosition:Z,isLiveChatStatusLoading:o,hasPostedLiveMessage:G,hasAgentJoined:te}},qt=r(79292);function Gt(e){return function(e){if(Array.isArray(e))return Qt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||$t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){Zt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||$t(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){if(e){if("string"===typeof e)return Qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qt(e,t):void 0}}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Kt=function(e){var t=e.sessionId,r=Jt((0,n.useState)((function(){return[]})),2),i=r[0],o=r[1],a=(0,n.useRef)({}),s=function(e,t){o((function(r){return r.map((function(r){return r.url===e?Wt(Wt({},r),t):r}))}))},c=function(e){var r=e.url,n=e.file,i=e.filename;s(r,{status:V}),new qt.DirectUpload(n,(0,Ae.hq)(),{directUploadWillStoreFileWithXHR:function(e){return e.upload.addEventListener("progress",(function(t){a.current[r]&&e.abort(),s(r,{progress:t.loaded/t.total*100})}))}}).create((function(e,n){if(e)throw s(r,{status:F}),new Error("Direct upload failed: ".concat(e));pe.R.createAttachment({signedId:n.signed_id,target:"sunshine"}).then((function(e){return e.json()})).then((function(e){var c=(0,Ae.Gd)({signed_id:n.signed_id,filename:n.filename}),l=e.zendesk_upload_id;s(r,{status:z,zendeskUploadId:l,blobUrl:c}),function(e){var r=e.url,n=e.zendeskUploadId,i=null;i=setInterval((function(){pe.R.checkAttachment({zendeskUploadId:n,target:"sunshine"}).then((function(e){a.current[r]?clearInterval(i):e.success&&(clearInterval(i),o((function(e){return e.filter((function(e){return e.url!==r}))})),pe.R.uploadLiveChatAttachment({mediaUrl:e.sunshine_media_url,mediaIsImage:e.sunshine_is_image,sessionId:t}))})).catch((function(e){console.error(e)}))}),1e3)}({url:r,filename:i,zendeskUploadId:l,blobUrl:c})})).catch((function(e){console.error(e)}))}))};return{uploadAttachments:function(e){var t=e.map((function(e){return{file:e,url:URL.createObjectURL(e),filename:e.name,completed:!1}}));o([].concat(Gt(i),Gt(t)));var r,n=function(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=$t(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;c({url:a.url,file:a.file,filename:a.filename,status:V})}}catch(s){n.e(s)}finally{n.f()}},attachments:i,setAttachments:o,cancelAttachment:function(e){a.current[e.url]=!0,o((function(t){return t.filter((function(t){return t.url!==e.url}))}))}}},Xt=function(e){if(0===e)return e;if(e>=11&&e<=13)return e+"th";switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}};function Yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(r),!0).forEach((function(t){tr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ir="back",or=function(){var e=Vt(),t=e.sessionId,r=e.conversationType,i=e.messages,o=e.setMessages,a=e.isBotProcessing,s=e.isUserInputEnabled,c=e.isLiveChatEnded,l=e.isConversationEnded,u=e.canRestart,d=e.process,p=e.isWaiting,f=e.currentQueuePosition,m=e.isLiveChatStatusLoading,h=e.hasPostedLiveMessage,v=e.hasAgentJoined,y=oe(),g=y.setOnWidgetClose,_=y.toggleWidget,j=(0,D.k6)(),x=rr((0,n.useState)(null),2),O=x[0],S=x[1],P=rr((0,n.useState)(null),2),k=P[0],N=P[1],I=Kt({sessionId:t}),A=I.attachments,E=I.uploadAttachments,T=I.cancelAttachment,L="live-chat"==r&&h&&!c;(0,n.useEffect)((function(){0!=i.length||m||d({event:"start-chat"});var e=document.getElementById("message-scroll-view");e&&e.scrollIntoView()}),[i.length,d,m]),(0,n.useEffect)((function(){if(L){var e=function(e){return e.preventDefault(),e.returnValue="",""};return window.addEventListener("beforeunload",e),g((function(){N("collapse"),S(v?ht:bt)})),function(){window.removeEventListener("beforeunload",e),g(null)}}}),[L,g,v]);var M=function(e){d({event:"post-message",value:e.message})};return O?(0,b.jsx)(vt,{warningType:O,onStay:function(){N(null),S(null)},onLeave:function(){k==ir?j.replace("/"):_({shouldTriggerOnWidgetClose:!1})}}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"sticky top-0 z-10",children:[(0,b.jsxs)("div",{className:"border-primary bg-primary flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(0,b.jsx)(lt,{type:"back",onClick:function(){L?(N(ir),S(v?ht:bt)):j.replace("/")}}),(0,b.jsxs)("div",{children:[u&&(0,b.jsx)(Ne.T,{placement:"top",content:(0,w.t)("support_widget.chatbot.restart"),children:(0,b.jsx)(lt,{ariaLabel:(0,w.t)("support_widget.search_container.restart_button_label"),icon:"16-restart",className:"items-center justify-center",size:16,onClick:function(){o([])}})}),t&&(0,b.jsx)(Ne.T,{placement:"top",content:(0,w.t)("support_widget.chatbot.download_chat"),children:(0,b.jsx)(lt,{href:Ae.av.supportWidget.downloadChat(t),icon:"download",className:""})})]})]}),p&&(0,b.jsxs)("div",{className:"border-primary bg-secondary flex gap-4 border-b p-4",children:[(0,b.jsx)("div",{className:"bg-primary flex h-10 w-10 shrink-0 items-center justify-center rounded-lg text-[#6550D9]",children:(0,b.jsx)(C.JO,{type:"20-time-delay",size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(ke.Z.BodySm,{children:(0,w.t)("support_widget.chatbot.live_chat_wait_queue.please_wait")}),(0,b.jsx)(ke.Z.BodySm,{weight:"font-bold",children:(0,w.t)("support_widget.chatbot.live_chat_wait_queue.current_position",{position:Xt(f)})})]})]})]}),(0,b.jsxs)("div",{className:"mb-6 mt-auto flex flex-col",children:[i.map((function(e){return(0,b.jsx)(rt,er(er({},e),{},{process:d}),e.id)})),a&&(0,b.jsx)(nt,{}),A.length>0&&(0,b.jsx)("div",{className:"mt-4 flex flex-col gap-2 pl-6 pr-4",children:A.map((function(e){return(0,b.jsx)(ot,{attachment:e,onCancel:T},e.url)}))}),(0,b.jsx)("div",{id:"message-scroll-view"})]}),s?(0,b.jsx)("div",{className:"bg-primary sticky bottom-0 z-10",children:(0,b.jsx)("div",{className:"border-primary border-t",children:(0,b.jsx)(Ie.l,{onSubmit:M,children:"live-chat"==r?(0,b.jsx)(mt,{onSubmit:M,uploadAttachments:E,uploadingEnabled:h}):(0,b.jsx)(Re,{onSubmit:M})})})}):null,l&&(0,b.jsx)(Te,{type:"type_ai_chat",onClick:function(){return j.replace("/")}}),c&&(0,b.jsx)(Te,{type:De,onClick:function(){return j.replace("/")}})]})},ar=r(21809),sr=r(87811),cr=function(e){var t=document.createElement("div");return t.innerHTML=e.replace(/\n/g,"<br>").replace(/(<br\s*\/?>\s*)+/g,"<br>"),t.querySelectorAll("[style]").forEach((function(e){return e.removeAttribute("style")})),function(e){var t=(new DOMParser).parseFromString(e,"text/html");return t.querySelectorAll(":empty:not(br):not(img)").forEach((function(e){return e.remove()})),t.body.innerHTML}(t.innerHTML)},lr=function(e){var t=e.author,r=e.avatar,n=e.content,i=e.attachments,o=e.createdAt,a=cr(n),s=(0,sr.H)(o).time;return(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"pt-1",children:(0,b.jsx)(ze.s,{src:r,size:"10",name:t})}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)(k.Di,{weight:"bold",children:t}),(0,b.jsx)(ke.Z.LabelSm,{children:s})]}),(0,b.jsx)(Ue.p,{children:(0,b.jsx)(Be.Z,{html:a,className:"comment-body"})}),(0,b.jsx)(Je,{attachments:i})]})]})};function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){pr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fr=function(e){var t=e.isSubmitting,r=e.uploadAttachments,i=e.attachments,o=e.cancelAttachment,a=e.commentsCount,s=e.onSubmit,c=(0,Me.Gc)(),l=c.setValue,u=c.handleSubmit,d=c.reset,p=(0,Me.qo)({name:"comment"}),f=i.every((function(e){return e.completed})),m=(0,ut.uI)({onDrop:r,noClick:!0}),h=m.getRootProps,v=m.getInputProps,y=m.inputRef,g=!t&&p&&f,_=(0,n.useRef)(null),j=function(){(0,Le.Z)(_.current),document.getElementById("scroll-to-bottom").scrollIntoView()};return(0,n.useEffect)((function(){l("comment",""),d(),_.current.disabled=!1,_.current.style.height="44px",document.getElementById("scroll-to-bottom").scrollIntoView()}),[l,d,a]),(0,n.useEffect)((function(){j()}),[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ie.l.Input,{name:"comment",variant:"textarea",label:null,placeholder:(0,w.t)("support_widget.chatbot.message_placeholder"),ref:_,rows:1,onInput:j,hideBorder:!0,focusRequired:!1,className:"form-control hide-scrollbar !mb-1 !mt-2 max-h-[128px] resize-none !py-3 !pl-6 focus:!ring-0 focus:!ring-offset-0"}),i.length>0&&(0,b.jsx)("div",{className:"my-4 flex flex-col gap-2 pl-6 pr-4",children:i.map((function(e){return(0,b.jsx)(ot,{attachment:e,onCancel:o},e.url)}))}),(0,b.jsxs)("div",dr(dr({className:"flex justify-between pb-4 pl-6 pr-4"},h()),{},{children:[(0,b.jsx)("input",dr({},v())),(0,b.jsx)(Ne.T,{placement:"right",content:(0,w.t)("tiptap.attach_file"),className:"hover:text-circle focus:text-circle text-dark visited:text-dark",children:(0,b.jsx)("button",{type:"submit","aria-label":(0,w.t)("tiptap.attach_file"),onClick:function(e){e.preventDefault(),y.current.click()},children:(0,b.jsx)(C.JO,{type:"tiptap-paperclip",size:20})})}),(0,b.jsx)("span",{className:ue()({"text-circle dark:text-circle visited:text-circle":g,"text-dark visited:text-dark":!g}),children:(0,b.jsx)(C.JO,{type:"tiptap-send",className:ue()({"cursor-pointer":g,"cursor-not-allowed":!g}),onClick:function(){g&&(u(s)(),_.current.disabled=!0)},size:20})})]}))]})},mr=function(e){var t=e.current,r=e.previous,n=(0,sr.H)(t).day;return n!==(0,sr.H)(r).day?(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"h-px grow bg-gray-200 dark:bg-gray-700"}),(0,b.jsx)("div",{className:"mx-5 grow-0",children:(0,b.jsx)(ke.Z.LabelXs,{color:"text-light",weight:"semibold",children:n.toUpperCase()})}),(0,b.jsx)("div",{className:"h-px grow bg-gray-200 dark:bg-gray-700"})]}):null},br=function(e){var t=e.rows,r=void 0===t?1:t,n=e.wrapperClassName,i=void 0===n?"":n,o=e.loaderClassName,a=void 0===o?"":o,s=e.width,c=void 0===s?"100%":s,l=e.height,u=void 0===l?"24px":l;return(0,b.jsx)("div",{className:ue()("animate-pulse space-y-2 px-6 last:pb-4",i),children:Array(r).fill().map((function(e,t){return(0,b.jsx)("div",{className:ue()("bg-secondary rounded-md",a),style:{width:c,height:u}},t)}))})};function hr(e){return function(e){if(Array.isArray(e))return xr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||jr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(r),!0).forEach((function(t){gr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||jr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(e,t){if(e){if("string"===typeof e)return xr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xr(e,t):void 0}}function xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wr=function(e){var t=e.controlName,r=e.cachingEnabled,i=_r((0,n.useState)((function(){return r&&J()["".concat(t,"-attachments")]||[]})),2),o=i[0],a=i[1],s=(0,n.useRef)({}),c=function(e,t){a((function(r){return r.map((function(r){return r.url===e?yr(yr({},r),t):r}))}))},l=function(e){var n=e.url,i=e.file,o=e.filename;c(n,{status:V}),new qt.DirectUpload(i,(0,Ae.hq)(),{directUploadWillStoreFileWithXHR:function(e){return e.upload.addEventListener("progress",(function(t){s.current[n]&&e.abort(),c(n,{progress:t.loaded/t.total*100})}))}}).create((function(e,i){if(e)throw c(n,{status:F}),new Error("Direct upload failed: ".concat(e));pe.R.createAttachment({signedId:i.signed_id}).then((function(e){return e.json()})).then((function(e){var a=(0,Ae.Gd)({signed_id:i.signed_id,filename:i.filename}),l=e.zendesk_upload_id;c(n,{status:z,zendeskUploadId:l,blobUrl:a}),function(e){var n=e.url,i=e.filename,o=e.zendeskUploadId,a=e.blobUrl,l=null;l=setInterval((function(){pe.R.checkAttachment({zendeskUploadId:o.current}).then((function(e){if(s.current[n])clearInterval(l);else if(e.success){if(c(n,{status:U,completed:!0}),r){var u=J()["".concat(t,"-attachments")]||[];$(yr(yr({},J()),{},gr({},"".concat(t,"-attachments"),[].concat(hr(u),[{status:U,completed:!0,url:n,filename:i,zendeskUploadId:o,blobUrl:a}]))))}clearInterval(l)}})).catch((function(e){console.error(e)}))}),1e3)}({url:n,filename:o,zendeskUploadId:l,blobUrl:a})})).catch((function(e){console.error(e)}))}))};return{uploadAttachments:function(e){var t=e.map((function(e){return{file:e,url:URL.createObjectURL(e),filename:e.name,completed:!1}}));a([].concat(hr(o),hr(t)));var r,n=function(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=jr(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;l({url:i.url,file:i.file,filename:i.filename,status:V})}}catch(s){n.e(s)}finally{n.f()}},attachments:o,setAttachments:a,cancelAttachment:function(e){s.current[e.url]=!0,a((function(t){return t.filter((function(t){return t.url!==e.url}))})),r&&$(yr(yr({},J()),{},gr({},"".concat(t,"-attachments"),(J()["".concat(t,"-attachments")]||[]).filter((function(t){return t.url!==e.url})))))}}},Or=r(87561),Sr=r(80812),Pr=Or.Ry().shape({text:Or.Z_().required(Sr.Z.t("support_widget.send_message_form.error.text")),type:Or.Z_().required(Sr.Z.t("support_widget.send_message_form.error.type")),area:Or.Z_().required(Sr.Z.t("support_widget.send_message_form.error.area")),is_important:Or.O7().notRequired()}),Cr=Or.Ry().shape({comment:Or.Z_().required("This field is required")});function kr(e){return function(e){if(Array.isArray(e))return Nr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Nr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ir=function(){var e,t=(0,n.useRef)(null),r=(0,ar.p)(),i=(0,P.wh)().currentCommunityMember,o=(0,D.$B)(),a=(0,D.TH)(),s=(0,D.k6)(),c=Number(o.params.id),l=function(e){var t=oe().setUnreadConversations,r=(0,de.useQueryClient)();return(0,de.useQuery)(["conversations","show",e],(function(){return pe.R.showConversation({id:e})}),{onSuccess:function(e){var n=e.conversation.id;t((function(e){return e.filter((function(e){return e!==n}))})),r.getQueryData(["conversations","list"])&&r.setQueryData(["conversations","list"],(function(e){return{conversations:e.conversations.map((function(e){return e.id===n?It(It({},e),{},{unread:!1}):e}))}}))},onError:Et,retry:!1})}(c),u=l.isError,d=l.isLoading,p=l.data,f=null===p||void 0===p?void 0:p.conversation,m=null===p||void 0===p?void 0:p.comments,h=wr({controlName:"conversation-view-".concat(c),cachingEnabled:!1}),v=h.uploadAttachments,y=h.attachments,g=h.setAttachments,_=h.cancelAttachment,j=(0,de.useQueryClient)(),x=(0,de.useMutation)((function(e){var t=e.comment;return pe.R.updateConversation({comment:t,id:c,zendeskUploadIds:y.map((function(e){return e.zendeskUploadId}))}).then((function(e){return e.json()}))}),{onSuccess:function(e){j.setQueryData(["conversations","show",c],(function(t){return{conversation:t.conversation,comments:[].concat(kr(t.comments),[e.comment])}})),g([]),r.success((0,w.t)("support_widget.send_message_form.success"))},onError:O.noop}),S=x.mutate,C=x.isLoading;return(0,n.useEffect)((function(){d||u||!t.current||(t.current.querySelectorAll(".comment-body a").forEach((function(e){e.setAttribute("target","_blank"),e.setAttribute("rel","noreferrer noopener")})),t.current.querySelectorAll(".comment-body img").forEach((function(e){var t=document.createElement("a");t.setAttribute("target","_blank"),t.setAttribute("rel","noreferrer noopener"),t.setAttribute("href",e.getAttribute("src")),e.parentNode.insertBefore(t,e),t.appendChild(e)})),t.current.querySelectorAll(".signature").forEach((function(e){return e.remove()})),document.getElementById("scroll-to-bottom").scrollIntoView())}),[d,u]),d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(br,{rows:1,height:"52px",wrapperClassName:"!px-0 mb-4"}),(0,b.jsx)(br,{rows:4,height:"60px"})]}):u?(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("div",{className:"support-widget-post__header border-primary flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:(0,b.jsx)(lt,{type:"back"})}),(0,b.jsx)("div",{className:"grow",children:(0,b.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,w.t)("support_widget.no_messages_found")})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-primary support-widget-post__header border-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:["CreateConversationView"==(null===(e=a.state)||void 0===e?void 0:e.from)?(0,b.jsx)(lt,{type:"back",onClick:function(){return s.push("/")}}):(0,b.jsx)(lt,{type:"back"}),(0,b.jsx)(ke.Z.LabelMd,{weight:"semibold",color:"text-dark",children:C?(0,w.t)("support_widget.sending"):(0,O.truncate)(f.subject,{length:30})}),(0,b.jsx)("div",{className:"w-[44px]"})]}),(0,b.jsx)("div",{className:"mt-auto flex flex-col",children:(0,b.jsx)("div",{className:"mx-6 my-4 flex flex-col gap-4",ref:t,children:m.map((function(e,t){var r,n;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(mr,{current:e.created_at,previous:null===(r=m[t-1])||void 0===r?void 0:r.created_at}),(0,b.jsx)(lr,{author:e.author_id===f.requester_id?i.name:e.author.name,avatar:e.author_id===f.requester_id?i.avatar_url:null===(n=e.author.photo)||void 0===n?void 0:n.content_url,attachments:e.attachments,content:e.html_body,createdAt:e.created_at},e.id)]})}))})}),(0,b.jsxs)("div",{children:["closed"===f.status?(0,b.jsx)("div",{className:"dark:border-light mt-auto flex flex-col items-center gap-5 border-t p-5",children:(0,b.jsx)(k.Di,{weight:"medium",color:"text-light",children:(0,w.t)("support_widget.conversation_closed")})}):(0,b.jsx)("div",{className:"border-t-primary border-t",children:(0,b.jsx)(Ie.l,{preventAccidentalLeave:!0,validationSchema:Cr,id:"update-message-form",onSubmit:S,mode:"onSubmit",defaultValues:{comment:""},children:(0,b.jsx)(fr,{isSubmitting:C||d,attachments:y,uploadAttachments:v,cancelAttachment:_,commentsCount:m.length,onSubmit:S})})}),(0,b.jsx)("div",{id:"scroll-to-bottom"})]})]})},Ar=function(e){var t=e.conversation,r=t.id,n=t.subject,i=t.status,o=t.custom_fields.find((function(e){return 0xaff66b84297===e.id})),a=o?S().capitalize(o.value):void 0,s=(0,sr.H)(t.updated_at).day,c=function(e){return{closed:"Closed",solved:"Solved"}[e]||"Open"};return(0,b.jsxs)(Oe.rU,{to:"/conversations/".concat(r),className:"text-dark hover:bg-tertiary hover:text-dark focus:bg-secondary focus:text-dark cursor-pointer px-6 py-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)(ke.Z.LabelSm,{truncate:!0,weight:t.unread?"medium":"normal",children:n}),(0,b.jsxs)("div",{className:"ml-4 flex self-center",children:[t.unread&&(0,b.jsx)("div",{className:"mr-3 flex self-center",children:(0,b.jsx)("span",{className:"h-2 w-2 rounded-full bg-blue-600"})}),(0,b.jsx)("span",{className:ue()({"bg-green-50 text-green-600 ring-green-600/50 dark:bg-[#0D6E30]  dark:text-white dark:ring-[#199543]":"Open"===c(i)},{"bg-gray-50  text-gray-500 ring-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:ring-gray-600":"Closed"===c(i)||"Solved"===c(i)},"inline-flex w-14 items-center justify-center rounded-full px-2 py-1 text-xs font-medium ring-1 ring-inset"),children:c(i)})]})]}),(0,b.jsx)("div",{children:(0,b.jsxs)(ke.Z.BodyXs,{className:"text-xs",color:"text-gray-400 flex",children:[a,(0,b.jsx)("div",{className:"mx-2 flex self-center",children:(0,b.jsx)("span",{className:"h-1 w-1 rounded-full bg-gray-400"})}),s]})})]})};function Er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(r),!0).forEach((function(t){Tr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Er(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lr=function(){var e,t=oe(),r=t.isDraftConversationPresent,n=t.setIsDraftConversationPresent,i=(0,D.k6)(),o=null===(e=J().formValues)||void 0===e?void 0:e.text,a=(0,w.t)("support_widget.draft_message_button.title")+" "+(o||(0,w.t)("support_widget.draft_message_button.default_title"));return r?(0,b.jsx)("button",{type:"button",className:"text-dark hover:bg-tertiary hover:text-dark focus:bg-secondary focus:text-dark cursor-pointer px-6 py-2",onClick:function(){i.replace("/form")},children:(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsxs)("div",{className:"mr-5 flex min-w-0 flex-col text-left",children:[(0,b.jsx)(ke.Z.LabelSm,{truncate:!0,weight:"medium",children:a}),(0,b.jsx)("div",{children:(0,b.jsx)(ke.Z.BodyXs,{className:"text-xs",color:"text-gray-400",children:(0,w.t)("support_widget.draft_message_button.subtitle")})})]}),(0,b.jsx)("div",{className:" items-center self-center",children:(0,b.jsx)("span",{className:"text-dark px-4",children:(0,b.jsx)(C.JO,{type:"16-trash-bin",useWithFillCurrentColor:!0,onClick:function(e){$(Dr(Dr({},J()),{},{formValues:L})),n(!1),e.stopPropagation()},size:20})})})]})}):null},Mr=function(){var e=(0,de.useQuery)(["conversations","list"],(function(){return pe.R.listConversations()}),{retry:!1,staleTime:q}),t=e.isLoading,r=e.data;if(t)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(br,{rows:1,height:"52px",wrapperClassName:"!px-0"}),Array(4).fill(null).map((function(e,t){return(0,b.jsxs)("div",{className:"my-2",children:[(0,b.jsx)(br,{rows:1,height:"20px",width:"80%",loaderClassName:"mb-2"}),(0,b.jsx)(br,{rows:1,height:"13px",width:"25%",wrapperClassName:"last:pb-0"})]},t)}))]});var n=(null===r||void 0===r?void 0:r.conversations)||[];return(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("div",{className:"border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-center border-b px-3",children:(0,b.jsx)(ke.Z.LabelMd,{weight:"semibold",children:(0,w.t)("support_widget.messages_screen.title")})}),(0,b.jsx)(Lr,{}),0===n.length?(0,b.jsx)("div",{className:"px-6 py-2",children:(0,b.jsx)(ke.Z.BodyMd,{children:(0,w.t)("support_widget.no_messages_found")})}):n.map((function(e){return(0,b.jsx)(Ar,{conversation:e},e.id)}))]})},Rr=r(82258);function Br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ur(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fr=function(e){return(0,b.jsx)(Ie.l.Item,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(r),!0).forEach((function(t){Ur(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({hideDescription:!0,hideBorder:!0,hidePlaceholder:!0,fullWidth:!0,translationRoot:"support_widget.send_message_form"},e))};function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(r),!0).forEach((function(t){qr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Hr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Wr=function(e){var t=e.isLoading,r=e.uploadAttachments,i=e.attachments,o=e.cancelAttachment,a=Gr((0,Me.qo)({name:["text","type","area","is_important"]}),4),s=a[0],c=a[1],l=a[2],u=a[3],d=s&&c&&l,p=(0,Rr.c)(s,500),f=Gr((0,n.useState)(W),2),m=f[0],h=f[1],v=Gr((0,n.useState)(Z),2),y=v[0],g=v[1],_=oe().setIsDraftConversationPresent,j=i.every((function(e){return e.completed})),x=(0,ut.uI)({onDrop:r,noClick:!0}),O=x.getRootProps,S=x.getInputProps,P=x.inputRef;return(0,n.useEffect)((function(){$(Vr(Vr({},J()),{},{formValues:{text:p,type:c,area:l,is_important:u}})),_(p||c||l||u)}),[p,c,l,_,u]),(0,n.useEffect)((function(){var e=document.getElementById("send-message-form-container");e.scrollIntoView(),e.querySelectorAll("label > span").forEach((function(e){var t=document.createElement("span");t.className="text-red-400",t.textContent=" *",e.appendChild(t)}))}),[]),(0,b.jsxs)("div",{className:"flex max-h-full flex-col px-6",children:[(0,b.jsx)(Fr,{hidePlaceholder:!1,name:"type",children:(0,b.jsx)(Ie.l.Select,{name:"type",data:m,onSearch:function(e){if(""===e)h(W);else{var t=W.filter((function(t){return t.value.toLowerCase().includes(e.toLowerCase())}));h(t)}}})}),(0,b.jsx)(Fr,{hidePlaceholder:!1,className:"!pt-2",name:"area",children:(0,b.jsx)(Ie.l.Select,{name:"area",data:y,onSearch:function(e){if(""===e)g(Z);else{var t=Z.filter((function(t){return t.value.toLowerCase().includes(e.toLowerCase())}));g(t)}}})}),(0,b.jsx)(Fr,{className:"!pt-2",name:"text",children:(0,b.jsx)(Ie.l.Input,{name:"text",variant:"textarea",rows:12,className:"form-control resize-none"})}),(0,b.jsx)(Fr,{name:"is_important",hideLabel:!0,hideDescription:!0,hideBorder:!0,children:(0,b.jsx)(Ie.l.Checkbox,{className:"dark:border-secondary !mt-1",option:{label:(0,w.t)("support_widget.send_message_form.is_important_description")}})}),i.length>0&&(0,b.jsx)("div",{className:"mt-6 flex flex-col gap-2",children:i.map((function(e){return(0,b.jsx)(ot,{attachment:e,onCancel:o},e.url)}))}),(0,b.jsxs)("div",Vr(Vr({className:"my-6 flex justify-between"},O()),{},{children:[(0,b.jsx)("input",Vr({},S())),(0,b.jsx)(Ne.T,{placement:"right",content:(0,w.t)("tiptap.attach_file"),className:"text-dark visited:text-dark hover:bg-tertiary hover:text-dark focus:bg-tertiary flex w-10 items-center justify-center rounded-lg text-center",children:(0,b.jsx)("button",{type:"button","aria-label":(0,w.t)("tiptap.attach_file"),onClick:function(e){e.preventDefault(),P.current.click()},className:"p-2",children:(0,b.jsx)(C.JO,{type:"tiptap-paperclip",size:20})})}),(0,b.jsx)(Ne.T,{placement:"left",content:(0,w.t)("support_widget.send_message_form.button_tooltip"),disabled:d&&j,children:(0,b.jsx)("button",{className:"bg-circle rounded-lg px-6 py-2.5 font-bold leading-5 text-white hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-50",disabled:t||!d||!j,type:"submit",children:(0,w.t)("support_widget.send_message_form.button_label")})})]}))]})};function Zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(r),!0).forEach((function(t){$r(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qr=function(){var e,t,r=(0,D.k6)(),n=(0,D.TH)(),i=(0,ar.p)(),o=wr({controlName:"conversation-create",cachingEnabled:!0}),a=o.uploadAttachments,s=o.attachments,c=o.cancelAttachment,l=oe(),u=l.setShowMessages,d=l.setIsDraftConversationPresent,p=Dt({attachments:s,source:null===(e=n.state)||void 0===e?void 0:e.source,chatBotSessionId:null===(t=n.state)||void 0===t?void 0:t.chatBotSessionId,onSuccess:function(e){var t=J();delete t["conversation-create-attachments"],delete t.formValues,$(t),u(!0),d(!1),i.success((0,w.t)("support_widget.conversation_created_toast")),r.push("/conversations/".concat(e.id),{from:"CreateConversationView"})},onError:function(){i.error((0,w.t)("request_failure_message"))}}),f=p.mutate,m=p.isLoading,h=Jr(Jr({},L),J().formValues);return(0,b.jsxs)("div",{className:"flex flex-col",id:"send-message-form-container",children:[(0,b.jsxs)("div",{className:"border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-start space-x-4 border-b px-3",children:[(0,b.jsx)(lt,{type:"back",onClick:function(){return r.replace("/")}}),(0,b.jsx)("span",{className:"flex-1 text-center",children:(0,b.jsx)(ke.Z.LabelMd,{weight:"semibold",color:"text-dark",children:m?(0,w.t)("support_widget.sending_message"):(0,w.t)("support_widget.send_a_message")})}),(0,b.jsx)(lt,{type:"expand"})]}),(0,b.jsx)("div",{className:"grow overflow-y-auto",children:(0,b.jsx)(Ie.l,{preventAccidentalLeave:!0,validationSchema:Pr,id:"send-message-form",onSubmit:f,mode:"onSubmit",defaultValues:h,children:(0,b.jsx)(Wr,{isLoading:m,attachments:s,uploadAttachments:a,cancelAttachment:c})})})]})},Kr=function(e){var t=e.event,r=e.last,n=new Date(t.starts_at).toLocaleString("en-US",{month:"long",day:"numeric"}),i=new Date(t.starts_at).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return(0,b.jsxs)("a",{href:t.post_url,target:"_blank",rel:"noreferrer",className:ue()("flex items-start justify-between p-4 hover:bg-gray-100 dark:border-gray-700 hover:dark:bg-gray-900",{"border-b":!r}),children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("span",{className:"text-sm font-semibold text-[#1A283B] dark:font-medium dark:text-gray-300",children:t.name}),(0,b.jsxs)("span",{className:"text-[11px] font-medium text-gray-500",children:[n," ",(0,w.t)("support_widget.at")," ",i]})]}),(0,b.jsx)("div",{className:"text-gray-400",children:(0,b.jsx)(C.JO,{type:"16-arrow-right",size:16})})]})},Xr=function(e){var t=e.current,r=e.previous,n=new Date(t),i=new Date(r),o=n.getFullYear(),a=n.toLocaleString("en-US",{month:"long"}),s=i.getFullYear(),c=i.toLocaleString("en-US",{month:"long"});return o!==s||a!==c?(0,b.jsx)("div",{className:"bg-[#F7F9FB] p-4 dark:bg-[#42464D]",children:(0,b.jsxs)("span",{className:"text-base font-semibold leading-5 text-gray-900 dark:text-gray-100",children:[a," ",o]})}):null},Yr=function(){var e=(0,de.useQuery)(["events"],(function(){return pe.R.listEvents()}),{staleTime:H,retry:!1}),t=e.isLoading,r=e.data;if(t)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(br,{rows:1,height:"52px",wrapperClassName:"!px-0 mb-4"}),(0,b.jsx)(br,{rows:1,height:"20px",wrapperClassName:"px-2 mb-4",width:"25%"}),(0,b.jsx)(br,{rows:4,height:"70px",wrapperClassName:"px-2 mb-4"}),(0,b.jsx)(br,{rows:1,height:"20px",wrapperClassName:"px-2 mb-4",width:"25%"}),(0,b.jsx)(br,{rows:1,height:"70px",wrapperClassName:"px-2 mb-4"})]});var n=(null===r||void 0===r?void 0:r.records)||[];return(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("div",{className:"border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-center border-b px-3",children:(0,b.jsx)(k.Di,{weight:"semibold",children:(0,w.t)("support_widget.events")})}),n.map((function(e,t){var r;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Xr,{current:e.starts_at,previous:null===(r=n[t-1])||void 0===r?void 0:r.starts_at}),(0,b.jsx)(Kr,{event:e,last:t===n.length-1},e.id)]})}))]})},en=r(15218),tn=r(41609),rn=r.n(tn),nn=["onClick","className","label","type"];function on(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function an(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?on(Object(r),!0).forEach((function(t){sn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):on(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cn(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ln=function(e){var t=e.onClick,r=void 0===t?O.noop:t,n=e.className,i=e.label,o=e.type,a=void 0===o?"button":o,s=cn(e,nn);return(0,b.jsx)("button",an(an({className:ue()("w-full rounded-lg bg-[#506CF0] px-6 py-2.5 font-bold leading-5 text-white hover:opacity-90 disabled:cursor-not-allowed disabled:opacity-50",n),onClick:r,type:a},s),{},{children:i}))},un=function(e){var t=e.post,r=t.id,n=t.name,i=(0,D.k6)();return(0,b.jsxs)("button",{type:"submit",className:"hover:bg-tertiary focus:bg-secondary flex cursor-pointer items-center justify-between space-x-6 px-6 py-2 transition-all duration-150 ease-in-out",onClick:function(){i.push(Ae._N.showPost(r))},children:[(0,b.jsx)("span",{className:"text-dark text-left",children:(0,b.jsx)(ke.Z.LabelSm,{weight:"medium",children:n})}),(0,b.jsx)("span",{className:"-mr-1 ml-2.5",children:(0,b.jsx)(C.JO,{type:"16-chevron-right",size:16,className:"text-dark"})})]})},dn=function(e){var t=e.spaceId,r=e.searchText,n=function(e,t){return(0,de.useQuery)(["posts","list",e,t],(function(){return pe.R.listPosts({spaceId:e,searchText:t})}),{retry:!1})}(t,(0,Rr.c)(r,500)),i=n.isLoading,o=n.data,a=(null===o||void 0===o?void 0:o.records)||[];return i?(0,b.jsx)(br,{rows:5}):rn()(a)?(0,b.jsx)("div",{className:"flex flex-col justify-center px-6 py-2",children:(0,b.jsx)("div",{className:"mx-auto mb-5 mt-auto w-full",children:(0,b.jsxs)("div",{className:"border-primary bg-primary rounded-lg border",children:[(0,b.jsx)("div",{className:"mt-4 text-center",children:(0,b.jsx)(ke.Z.LabelMd,{weight:"semibold",color:"dark:text-[#ABAFB2]",children:(0,w.t)("support_widget.no_articles_found")})}),(0,b.jsx)("div",{className:"mx-6 my-5",children:(0,b.jsx)(Oe.rU,{to:Ae._N.askChatBot(),children:(0,b.jsx)(ln,{label:(0,w.t)("support_widget.still_need_help"),className:"dark:bg-gray-50 dark:text-gray-800"})})})]})})}):(0,b.jsx)("div",{className:"overflow-auto",children:(0,b.jsx)("div",{className:"mt-1.5 flex flex-col justify-center",children:a.map((function(e){return(0,b.jsx)(un,{post:e},e.id)}))})})},pn=["searchText","setSearchText","initialFocus"];function fn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(r),!0).forEach((function(t){bn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hn(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var vn=function(e){var t=e.searchText,r=e.setSearchText,i=e.initialFocus,o=void 0===i||i,a=hn(e,pn),s=(0,n.useRef)(null),c=(0,D.TH)();return(0,n.useEffect)((function(){var e;o&&(null===(e=s.current)||void 0===e||e.focus())}),[o,c]),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"text-dark pointer-events-none absolute left-0 top-[11px] flex items-center pl-3",children:(0,b.jsx)(C.JO,{type:"16-search",size:20})}),(0,b.jsx)("input",mn({ref:s,type:"text",defaultValue:t,className:"border-primary bg-primary text-default focus:border-light placeholder:text-light block h-10 w-full rounded-md pl-10 placeholder:opacity-100 focus:ring-0 sm:text-sm",placeholder:(0,w.t)("support_widget.placeholder_text"),onChange:function(e){r(e.target.value)}},a))]})},yn=function(e){var t=e.spaceGroup,r=oe().setCurrentSpaceProperties,n=(0,D.k6)();return(0,O.isEmpty)(t.spaces)?null:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"px-6",children:(0,b.jsx)(ke.Z.LabelXxs,{color:"text-light",children:t.name})}),(0,b.jsx)("div",{className:"flex flex-col",children:t.spaces.map((function(e){var t=e.id,i=e.name,o=e.emoji,a=e.custom_emoji_url,s=e.custom_emoji_dark_url;return(0,b.jsxs)("button",{type:"submit",className:"hover:bg-tertiary focus:bg-secondary flex cursor-pointer items-center justify-between space-x-6 px-6 py-2 transition-all duration-150 ease-in-out last:mb-4",onClick:function(){return e=t,r({name:i,emoji:o,custom_emoji_url:a,custom_emoji_dark_url:s}),void n.push(Ae._N.posts(e));var e},children:[(0,b.jsx)(ke.Z.LabelSm,{weight:"medium",children:(0,b.jsxs)("div",{className:"flex flex-row",children:[(0,b.jsx)(en.S,{className:"!h-5 !w-auto",emoji:o,customEmojiUrl:a,customEmojiDarkUrl:s}),(0,b.jsx)("span",{className:"ml-2 break-all",children:i})]})}),(0,b.jsx)(C.JO,{type:"16-chevron-right",size:16,className:"text-default"})]},t)}))})]})},gn=function(){var e=(0,de.useQuery)("space-groups",(function(){return pe.R.spaceGroups()}),{staleTime:H,retry:!1}),t=e.isLoading,r=e.data,n=(null===r||void 0===r?void 0:r.records)||[];return t?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(br,{width:"50px"}),(0,b.jsx)(br,{rows:5})]}):rn()(n)?(0,b.jsx)("div",{className:"px-6",children:(0,b.jsx)(ke.Z.BodyMd,{children:(0,w.t)("support_widget.no_spaces_found")})}):(0,b.jsx)("div",{className:"mb-4 overflow-auto",children:(0,b.jsx)("div",{className:"mt-1.5",children:n.map((function(e){return(0,b.jsx)(yn,{spaceGroup:e},e.id)}))})})};function _n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var xn=function(){var e=_n((0,n.useState)(""),2),t=e[0],r=e[1],i=(0,D.k6)(),o=(0,D.UO)().spaceId,a=oe().currentSpaceProperties,s=a.custom_emoji_url,c=a.custom_emoji_dark_url,l=a.emoji,u=a.name,d=t||o,p=(0,D.$B)(Ae._N.spaceGroups());return(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("div",{className:ue()("bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center space-x-4 border-b px-3",{"justify-between":o,"justify-center":!o}),children:[o&&(0,b.jsx)(lt,{type:"back",onClick:function(){return i.replace("/space_groups")}}),p?(0,b.jsx)(k.Di,{weight:"semibold",children:(0,w.t)("support_widget.search_container.title")}):(0,b.jsxs)("div",{className:"text-dark help-view-title flex",children:[(0,b.jsx)(en.S,{className:"!h-5 !w-auto",emoji:l,customEmojiUrl:s,customEmojiDarkUrl:c}),(0,b.jsx)("span",{className:"ml-2",children:(0,b.jsx)(k.Di,{weight:"semibold",children:u})})]}),o&&(0,b.jsx)("div",{className:"w-[44px]"})]}),(0,b.jsx)("div",{className:"px-6 pb-2 pt-5",children:(0,b.jsx)(vn,{searchText:t,setSearchText:r})}),d?(0,b.jsx)(dn,{spaceId:o,searchText:t}):(0,b.jsx)(gn,{})]})},wn=function(){var e=(0,D.k6)();return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute left-0 top-2.5 flex items-center pl-3 text-gray-500",children:(0,b.jsx)(C.JO,{type:"20-ai",size:20})}),(0,b.jsx)("input",{type:"text",className:"border-primary bg-primary text-default focus:border-light placeholder:text-light block h-10 w-full rounded-md pl-10 placeholder:opacity-100 focus:ring-0 sm:text-sm",placeholder:(0,w.t)("support_widget.chatbot.what_do_you_need_help_with"),onFocus:function(){return e.push("/ask")}})]})},On=function(){return(0,b.jsx)("div",{className:"border-circle bg-primary text-circle my-[-1px] rounded border px-1.5 py-1 text-[11px] font-semibold leading-[11px] dark:border-[#6983FF] dark:text-[#6983FF]",children:(0,w.t)("beta").toUpperCase()})},Sn=function(){var e=(0,de.useQuery)(["pinnedPost"],(function(){return pe.R.showPinnedPost()}),{staleTime:H,retry:!1}),t=e.isError,r=e.isLoading,n=e.data;return r?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(br,{rows:1,height:"52px",wrapperClassName:"px-0 mb-4"}),(0,b.jsx)(br,{rows:1,height:"200px",wrapperClassName:"px-4 mb-4"})]}):t||0===Object.keys(n).length?null:(0,b.jsxs)(Oe.rU,{className:"border-primary bg-primary block cursor-pointer rounded-lg border p-4",to:"/news/".concat(n.id),children:[n.cover_image_url&&(0,b.jsx)("div",{children:(0,b.jsx)("img",{loading:"lazy",alt:"",className:"mb-4 rounded",src:n.cover_image_url})}),(0,b.jsxs)("div",{className:"text-dark mb-1",children:[(0,b.jsx)("div",{className:"news-title pb-3",children:(0,b.jsx)(k.Di,{weight:"semibold",children:n.name})}),(0,b.jsx)("div",{className:"news-excerpt",children:(0,b.jsx)(be.Q,{children:(0,O.truncate)(n.body_plain_text,{length:200})})})]})]})},Pn=function(){var e=oe().toggleWidget,t=(0,P.wh)().currentUser;return window.drift.on("chatClose",(function(){window.drift.api.widget.hide(),window.drift.unload(),e()})),(0,b.jsx)("button",{type:"submit",onClick:function(){"undefined"!==typeof window.drift&&(e(),window.drift.load("fbn954vvh72x"),window.drift.on("ready",(function(){window.drift.config({verticalOffset:4,horizontalOffset:18}),window.drift.identify(t.id,{name:t.name,email:t.email}),window.drift.api.startInteraction({interactionId:361881})})))},className:"border-primary bg-primary mb-4 block w-full rounded-lg border pt-4 text-left",children:(0,b.jsx)("div",{className:"mb-4 ml-6",children:(0,b.jsx)(ke.Z.LabelMd,{weight:"semibold",children:(0,w.t)("support_widget.talk_to_agent")})})})},Cn=function(){var e=(0,de.useQuery)(["posts","tutorials"],(function(){return pe.R.listTutorialPosts()}),{staleTime:H,retry:!1}),t=e.isLoading,r=e.data,n=(r=void 0===r?{records:[]}:r).records;return t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(br,{rows:1,wrapperClassName:"mb-1.5"}),(0,b.jsx)(br,{rows:3,wrapperClassName:"space-y-1"})]}):(0,b.jsx)("div",{className:"mt-1.5 flex flex-col justify-center pb-4",children:n.slice(0,3).map((function(e){return(0,b.jsx)(un,{post:e},e.id)}))})},kn=r(80312),Nn=function(){var e=(0,P.wh)().currentCommunityMember,t=function(){var e=(0,P.wh)(),t=e.currentCommunity,r=e.currentCommunitySettings,i=!(null===r||void 0===r||!r.drift_at_support_widget_enabled),o=t.is_on_trial&&i;return(0,n.useEffect)((function(){if(o){var e=document.createElement("script");return e.type="text/javascript",e.id="hs-script-loader",e.async=!0,e.defer=!0,e.src="//js.hs-scripts.com/9306053.js",document.body.appendChild(e),function(){document.body.removeChild(e)}}}),[o]),{shouldShowDriftLink:o}}(),r=t.shouldShowDriftLink;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-circle h-[220px] rounded-lg  rounded-b-none pb-[140px] pt-7",children:(0,b.jsxs)("div",{className:"pl-8",children:[(0,b.jsx)("div",{className:"flex flex-row items-center justify-between",children:(0,b.jsx)("img",{loading:"lazy",src:ve,alt:(0,w.t)("support_widget.circle_logo_alt_text"),className:"h-10 w-10 rounded-md border-2 dark:border-white"})}),(0,b.jsxs)("div",{className:"mt-4 flex items-center text-white",children:[(0,b.jsx)(ke.Z.TitleMd,{color:"text-white",children:(0,w.t)("support_widget.greeting",{first_name:(null===e||void 0===e?void 0:e.first_name)||(0,w.t)("support_widget.default_greeting_name")})}),(0,b.jsx)("img",{loading:"lazy",src:kn,alt:(0,w.t)("support_widget.hand_wave_alt_text"),className:"ml-2 h-6 w-6"})]}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(ke.Z.BodySm,{color:"text-white",children:(0,w.t)("support_widget.greeting_question_1")})})]})}),(0,b.jsxs)("div",{className:"px-4 pb-4",children:[(0,b.jsxs)("div",{className:"border-primary bg-primary mb-4 mt-[-64px] rounded-lg border pt-4",children:[(0,b.jsx)("div",{className:"ml-6",children:(0,b.jsxs)("span",{className:"flex items-center gap-3",children:[(0,b.jsx)(ke.Z.LabelMd,{weight:"semibold",color:"text-dark",children:(0,w.t)("support_widget.chatbot.i_need_help")}),(0,b.jsx)(On,{})]})}),(0,b.jsx)("div",{className:"px-6 py-4",children:(0,b.jsx)(wn,{})})]}),(0,b.jsxs)("div",{className:"border-primary bg-primary mb-4 rounded-lg border pt-4",children:[(0,b.jsx)("div",{className:"mb-3 ml-6",children:(0,b.jsx)("a",{href:"https://community.circle.so/c/tutorials",target:"_blank",rel:"noreferrer",children:(0,b.jsx)(ke.Z.LabelMd,{weight:"semibold",color:"text-dark hover:text-circle",children:(0,w.t)("support_widget.tutorial_posts")})})}),(0,b.jsx)(Cn,{})]}),r&&(0,b.jsx)(Pn,{}),(0,b.jsx)(Sn,{})]})]})},In=function(e){var t=e.post;return(0,b.jsxs)(Oe.rU,{className:"border-primary bg-primary mb-4 block cursor-pointer rounded-lg border p-4",to:"/news/".concat(t.id),children:[t.cover_image_url&&(0,b.jsx)("div",{children:(0,b.jsx)("img",{loading:"lazy",alt:"",className:"mb-4 rounded",src:t.cover_image_url})}),(0,b.jsxs)("div",{className:"text-dark mb-1",children:[(0,b.jsx)("div",{className:"news-title pb-3",children:(0,b.jsx)(k.Di,{weight:"semibold",children:t.name})}),(0,b.jsx)("div",{className:"news-excerpt",children:(0,b.jsx)(be.Q,{children:(0,O.truncate)(t.body_plain_text,{length:200})})})]})]})},An=function(){var e=(0,de.useQuery)(["news"],(function(){return pe.R.listNews()}),{staleTime:H,retry:!1}),t=e.isLoading,r=e.data;if(t)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(br,{rows:1,height:"52px",wrapperClassName:"!px-0 mb-4"}),(0,b.jsx)(br,{rows:2,height:"170px",wrapperClassName:"px-2 mb-4"})]});var n=(null===r||void 0===r?void 0:r.records)||[];return(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("div",{className:"border-primary bg-primary sticky top-0 z-10 mb-4 flex h-[52px] shrink-0 items-center justify-center border-b px-3",children:(0,b.jsx)(k.Di,{weight:"semibold",children:(0,w.t)("support_widget.news.news")})}),(0,b.jsxs)("div",{className:"mb-4 px-4",children:[n.map((function(e){return(0,b.jsx)(In,{post:e},e.id)})),(0,b.jsxs)("a",{href:T,target:"_blank",rel:"noopener noreferrer",className:"see-more-news border-circle my-4 flex w-full justify-center gap-2 rounded-md border p-1",children:[(0,w.t)("support_widget.news.see_more"),(0,b.jsx)(C.JO,{type:"share-support-widget",useWithFillCurrentColor:!0,size:16})]})]})]})},En=r(68375),Dn=r(29458),Tn=r(37109),Ln=function(e){var t=e.postUrl;return(0,b.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"border-circle my-2 flex w-full justify-center gap-2 rounded-lg border p-1",children:[(0,b.jsx)(C.JO,{type:"share-support-widget",useWithFillCurrentColor:!0,size:16}),(0,w.t)("support_widget.open_post")]})},Mn=function(){var e=function(e){var t=(0,de.useQueryClient)();return(0,de.useQuery)(["news",e],(function(){return pe.R.showPost(e)}),{onError:Et,retry:!1,staleTime:G,initialData:function(){var r,n;return null===(r=t.getQueryData(["news"]))||void 0===r||null===(n=r.records)||void 0===n?void 0:n.find((function(t){var r;return(null===(r=t.id)||void 0===r?void 0:r.toString())===e}))}})}((0,D.$B)().params.id),t=e.isError,r=e.isLoading,n=e.data;return r?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(br,{rows:1,height:"52px",wrapperClassName:"px-0 mb-4"}),(0,b.jsx)(br,{rows:1,height:"150px",wrapperClassName:"px-0 space-y-0"}),(0,b.jsx)(br,{rows:1,height:"34px",wrapperClassName:"my-4"}),(0,b.jsx)(br,{rows:6})]}):t?(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("div",{className:"support-widget-post__header border-primary bg-primary sticky top-0 z-10 flex h-[52px] items-center justify-between border-b px-3",children:[(0,b.jsx)(lt,{type:"back"}),(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)(lt,{type:"expand"})})]}),(0,b.jsx)("div",{className:"support-widget-post__body grow",children:(0,b.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,w.t)("support_widget.post_not_found")})})]}):(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("div",{className:"support-widget-post__header border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(0,b.jsx)(lt,{type:"back"}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(lt,{href:null===n||void 0===n?void 0:n.post_url,icon:"share-support-widget",size:16}),(0,b.jsx)(lt,{type:"expand"})]})]}),(0,b.jsxs)("div",{className:"support-widget-post__body !mb-0 grow",children:[n.cover_image_url&&(0,b.jsx)("div",{children:(0,b.jsx)("img",{loading:"lazy",alt:"",src:n.cover_image_url})}),(0,b.jsx)("div",{className:"mx-6 my-4",children:(0,b.jsx)(ke.Z.TitleMd,{children:(0,b.jsx)("a",{className:"!text-dark transition-colors duration-150 ease-linear hover:!text-[#4262F0]",href:n.post_url||T,target:"_blank",rel:"noreferrer noopener",children:n.name})})}),(0,b.jsxs)("div",{id:"news_view_post_body",className:"mx-6 my-3 flex max-h-full flex-col gap-2",children:[(0,En.Iz)(n)&&n.body_trix_content&&(0,b.jsx)(Dn.P,{content:n.body_trix_content}),(0,En.s8)(n)&&n.tiptap_body&&(0,b.jsx)(Tn.R,{readOnly:!0,value:n.tiptap_body.body,sgidToObjectMap:n.tiptap_body.sgids_to_object_map,inlineAttachments:n.tiptap_body.inline_attachments,disabledExtensions:["cta"]}),(0,b.jsx)("div",{className:"py-4",children:(0,b.jsx)(Ln,{postUrl:n.post_url})})]})]})]})},Rn=r(62268);function Bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Un(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fn=function(e){var t=e.post,r=Bn((0,n.useState)(null),2),i=r[0],o=r[1],a=(0,de.useMutation)((function(e){var t=e.postId,r=e.value;return pe.R.createPostFeedback({postId:t,helpful:r})})).mutate;return(0,n.useEffect)((function(){null!==i&&document.getElementById("feedback-response-container").scrollIntoView()}),[i]),(0,b.jsxs)("div",{className:"mx-auto w-full pt-4",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(k.Di,{weight:"semibold",children:(0,w.t)("support_widget.was_this_article_helpful")})}),(0,b.jsx)("div",{className:"mb-6 flex justify-center gap-4",children:(0,b.jsx)(Rn.O,{value:i,handleFeedback:function(e){o(e),a({postId:t.id,value:e})}})}),(0,b.jsxs)("div",{id:"feedback-response-container",children:[i&&(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsx)(be.Q,{children:(0,w.t)("support_widget.thank_you_for_article_feedback")})}),!1===i&&(0,b.jsx)("div",{className:"mt-8",children:(0,b.jsx)("div",{className:"bg-primary",children:(0,b.jsx)("div",{className:"my-5",children:(0,b.jsx)(Oe.rU,{to:Ae._N.askChatBot(),children:(0,b.jsx)(ln,{label:(0,w.t)("support_widget.still_need_help"),className:"dark:bg-gray-50 dark:text-gray-800"})})})})})]})]})},zn=function(e){var t=e.id,r=(0,n.useRef)(null),i=(0,D.k6)(),o=function(e){return(0,de.useQuery)(["posts","details",e],(function(){return pe.R.showPost(e)}),{onError:Et,retry:!1,staleTime:G})}(t),a=o.isError,s=o.isLoading,c=o.data,l=(null===c||void 0===c?void 0:c.post_url)||"https://help.circle.so";["help-en.circle.so","help-pt.circle.so","pt-help.circle.so"].forEach((function(e){l.includes(e)&&(l=l.replace(e,"help.circle.so"))}));var u=(0,n.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget.getAttribute("data-post-id");i.push(Ae._N.showPost(t))}),[i]),d=(0,n.useCallback)((function(e){var t=e.containerElement;c&&(t.querySelectorAll(".trix-content a").forEach((function(e){c.urls_hash[e.href]?e.setAttribute("data-post-id",c.urls_hash[e.href]):(e.setAttribute("target","_blank"),e.setAttribute("rel","noreferrer"))})),t.querySelectorAll(".trix-content a[data-post-id]").forEach((function(e){e.addEventListener("click",u)})),r.current=t)}),[c,u]);return(0,n.useEffect)((function(){return function(){r.current&&r.current.querySelectorAll(".trix-content a[data-post-id]").forEach((function(e){e.removeEventListener("click",u)}))}}),[u]),s?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(br,{rows:1,height:"52px",wrapperClassName:"px-0 mb-4"}),(0,b.jsx)(br,{rows:1,height:"150px",wrapperClassName:"px-0 space-y-0"}),(0,b.jsx)(br,{rows:1,height:"34px",wrapperClassName:"my-4"}),(0,b.jsx)(br,{rows:6})]}):a?(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("div",{className:"support-widget-post__header border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(0,b.jsx)(lt,{type:"back"}),(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)(lt,{type:"expand"})})]}),(0,b.jsx)("div",{className:"support-widget-post__body grow",children:(0,b.jsx)("div",{className:"mx-6 my-3 max-h-full",children:(0,w.t)("support_widget.post_not_found")})})]}):(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("div",{className:"support-widget-post__header border-primary bg-primary sticky top-0 z-10 flex h-[52px] shrink-0 items-center justify-between border-b px-3",children:[(0,b.jsx)(lt,{type:"back"}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(lt,{href:l,icon:"share-support-widget",size:16}),(0,b.jsx)(lt,{type:"expand"})]})]}),(0,b.jsxs)("div",{className:"support-widget-post__body !mb-0 grow",children:[c.cover_image_url&&(0,b.jsx)("div",{children:(0,b.jsx)("img",{loading:"lazy",alt:"",src:c.cover_image_url})}),(0,b.jsx)("div",{className:"mx-6 my-4",children:(0,b.jsx)(ke.Z.TitleLg,{children:(0,b.jsx)("a",{className:"!text-dark transition-colors duration-150 ease-linear hover:!text-[#4262F0]",href:l,target:"_blank",rel:"noreferrer noopener",children:c.name})})}),(0,b.jsxs)("div",{className:"mx-6 my-3 flex max-h-full flex-col gap-2",children:[(0,En.Iz)(c)&&c.body_trix_content&&(0,b.jsx)(Dn.P,{content:c.body_trix_content,transformLinks:d}),(0,En.s8)(c)&&c.tiptap_body&&(0,b.jsx)(Tn.R,{readOnly:!0,value:c.tiptap_body.body,sgidToObjectMap:c.tiptap_body.sgids_to_object_map,inlineAttachments:c.tiptap_body.inline_attachments,disabledExtensions:["cta"]}),(0,b.jsx)(Ln,{postUrl:l}),"tutorials"!==c.space_slug&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"border-primary mb-0 grow border-b pt-2"}),(0,b.jsx)(Fn,{post:c})]})]})]})]})};function Vn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(r),!0).forEach((function(t){Gn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Wn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Zn=function(){var e,t=oe(),r=t.isOpen,i=t.displayOnboarding,o=t.toggleWidget,a=Hn((0,n.useState)(0),2),s=a[0],c=a[1],l=Hn((0,n.useState)(!1),2),u=l[0],d=l[1],p=Hn((0,n.useState)(!0),2),f=p[0],m=p[1],h=Hn((0,n.useState)(i),2),v=h[0],y=h[1],g=["/"],_=null===(e=J())||void 0===e?void 0:e.location,j=(0,P.wh)(),x=j.currentCommunity,O=j.currentCommunitySettings;_&&"/"!=_&&g.push(_);var S=(0,de.useMutation)((function(){return pe.R.completeOnboarding()}),{onSuccess:function(){},onError:function(){}}).mutate;(0,n.useEffect)((function(){c(function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=document.createElement("div");e.appendChild(t);var r=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),r+24}())}),[]);var k=function(){v&&S(),y(!1)},N=function(){return d(!0)},I=function(){return d(!1)},A=!r&&f&&v;return(0,b.jsxs)("div",{className:"fixed bottom-4 z-[60] flex flex-col",style:{right:s},children:[(0,b.jsx)(ce.u,qn(qn({show:r},B),{},{children:(0,b.jsxs)(D.VA,{initialEntries:g,initialIndex:g.length-1,children:[(null===O||void 0===O?void 0:O.support_widget_analytics_enabled)&&(0,b.jsx)(D.AW,{render:function(e){var t=e.location;return"function"===typeof window.gtag&&window.gtag("event","page_view",{page_location:window.location.href,page_path:t.pathname+t.search,page_title:(0,w.t)("support_widget.support_widget"),community_name:null===x||void 0===x?void 0:x.name,community_id:null===x||void 0===x?void 0:x.id}),null}}),(0,b.jsx)(Ce,{children:(0,b.jsx)(we,{children:(0,b.jsxs)(D.rs,{children:[(0,b.jsx)(D.AW,{exact:!0,path:"/",component:Nn},"path"),(0,b.jsx)(D.AW,{exact:!0,path:"/ask",component:or},"path"),(0,b.jsx)(D.AW,{exact:!0,path:"/form",component:Qr},"path"),(0,b.jsx)(D.AW,{exact:!0,path:"/space_groups",component:xn},"path"),(0,b.jsx)(D.AW,{exact:!0,path:"/news",component:An},"path"),(0,b.jsx)(D.AW,{exact:!0,path:"/spaces/:spaceId/posts",component:xn},"path"),(0,b.jsx)(D.AW,{exact:!0,path:"/conversations",component:Mr},"path"),(0,b.jsx)(D.AW,{exact:!0,path:"/conversations/:id",component:Ir},"path"),(0,b.jsx)(D.AW,{exact:!0,path:"/news/:id",component:Mn},"path"),(0,b.jsx)(D.AW,{exact:!0,path:"/posts/:id",render:function(e){var t=e.match;return(0,b.jsx)(zn,{id:t.params.id},t.params.id)}},"path"),(0,b.jsx)(D.AW,{exact:!0,path:"/events",component:Yr},"path")]})})})]})})),A&&(0,b.jsx)(ye,{onClick:function(){return k()}}),(0,b.jsxs)("div",{className:"-mr-5 mt-5 flex justify-end align-baseline",onMouseOver:N,onFocus:N,onMouseOut:I,onBlur:I,children:[(0,b.jsx)("div",{className:ue()("transition-transform duration-300 ease-linear",{"translate-x-30":!f}),children:(0,b.jsx)(me,{isOpen:r,onClick:function(){f&&(k(),o({shouldTriggerOnWidgetClose:!0}))}})}),(0,b.jsx)(C.JO,{type:f?"12-chevron-right":"12-chevron-left",size:12,className:ue()("cursor-pointer text-gray-400",{invisible:v||r||f&&!u}),onClick:f?function(){return m(!1)}:function(){return m(!0)}})]})]})},Jn=function(){var e,t=(0,D.TH)(),r=(0,P.nT)().records,n=(0,P.wh)(),i=n.currentCommunity,o=n.currentCommunitySettings,a=n.currentCommunityMember,s=(0,de.useQuery)(["conversations","check"],(function(){return pe.R.checkConversations()}),{retry:!1,staleTime:q}).data,c=J();for(var l in c)(l.match(/conversation-view-\d+-comment/)&&""===c[l]||l.match(/conversation-view-\d+-attachments/)&&0===c[l].length||"isChatWindowExpanded"===l)&&delete c[l];$(c);var u=!(null!==a&&void 0!==a&&a.is_admin),d=r.filter((function(e){return"chat"===e.post_type})).map((function(e){return e.slug})),p=R.concat(d).some((function(e){return t.pathname.includes(e)}));return u||p?null:(0,b.jsx)(b.Fragment,{children:(0,E.createPortal)((0,b.jsx)(g.S,{renderFunc:se,children:(0,b.jsx)(ae,{has_active_conversations:(null===s||void 0===s?void 0:s.has_active_conversations)||!1,unread_conversations:(null===s||void 0===s?void 0:s.unread_conversations)||[],live_chat_enabled:o.support_widget_v2_enabled||"basic"==i.current_plan_tier,support_widget_v2_enabled:o.support_widget_v2_enabled,display_onboarding:!1===(null===(e=a.preferences)||void 0===e?void 0:e.has_seen_widget_onboarding),children:(0,b.jsx)(Zn,{})})}),document.body)})},$n=r(28175),Qn=r(37601),Kn=r(87658),Xn=r(64632),Yn=r(53301),ei=r(57103),ti=["children","hideAppBar"];function ri(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(r),!0).forEach((function(t){ii(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ri(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ii(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oi(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ai=function(e){var t=e.children,r=e.hideAppBar,i=oi(e,ti),o=(0,Xn.l)(),a=o.config,s=o.setConfig;return(0,n.useEffect)((function(){s((function(e){return ni(ni({},e),{},{hideAppBar:r})}))}),[r,s]),(0,ei.T)(),(0,b.jsx)(Yn.a,ni(ni({},i),{},{disableRightSidebar:a.disableRightSidebar,renderLeftSidebar:a.renderLeftSidebar,disableSidebar:a.disableSidebar,hideAppBar:a.hideAppBar,children:t}))},si=["children"];function ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function li(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ci(Object(r),!0).forEach((function(t){ui(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ci(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ui(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function di(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var pi=function(e){var t=e.children,r=di(e,si);return(0,ei.M)(),(0,b.jsx)(ai,li(li({},r),{},{children:t}))},fi=["shouldHideMainHeader","children","hideAppBar"];function mi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(r),!0).forEach((function(t){hi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vi(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var yi=function(e){var t=e.shouldHideMainHeader,r=void 0===t||t,n=e.children,i=e.hideAppBar,o=void 0!==i&&i,a=vi(e,fi);return r?(0,b.jsx)(Xn.S,{children:(0,b.jsx)(pi,bi(bi({},a),{},{children:n}))}):(0,b.jsx)(Xn.S,{children:(0,b.jsx)(ai,bi(bi({hideAppBar:o},a),{},{children:n}))})},gi=r(55259),_i=r(98929),ji=r(28536),xi=r(95095),wi=r(77388),Oi=r(63353),Si=(0,wi.u)((function(){return r.e(6188).then(r.bind(r,2943))})),Pi=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Si,{})})},Ci=(0,wi.u)((function(){return r.e(3626).then(r.bind(r,43626))})),ki=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ci,{})})},Ni=(0,wi.u)((function(){return r.e(88).then(r.bind(r,6506))})),Ii=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ni,{})})},Ai=(0,wi.u)((function(){return r.e(966).then(r.bind(r,45150))})),Ei=function(e){var t=e.pageTitle;return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ai,{pageTitle:t})})},Di=(0,wi.u)((function(){return r.e(1832).then(r.bind(r,71832))})),Ti=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Di,{})})},Li=(0,wi.u)((function(){return r.e(4541).then(r.bind(r,70068))})),Mi=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Li,{})})},Ri=(0,wi.u)((function(){return r.e(4322).then(r.bind(r,67015))})),Bi=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ri,{})})},Ui=(0,wi.u)((function(){return Promise.all([r.e(135),r.e(4858)]).then(r.bind(r,44858))})),Fi=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ui,{})})},zi=(0,wi.u)((function(){return r.e(184).then(r.bind(r,10184))})),Vi=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(zi,{})})},qi=(0,wi.u)((function(){return Promise.all([r.e(4623),r.e(4018),r.e(553),r.e(135),r.e(6196)]).then(r.bind(r,46196))})),Gi=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(qi,{})})},Hi=(0,wi.u)((function(){return r.e(7958).then(r.bind(r,57958))})),Wi=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Hi,{})})},Zi=(0,wi.u)((function(){return r.e(5099).then(r.bind(r,75099))})),Ji=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Zi,{})})},$i=(0,wi.u)((function(){return r.e(304).then(r.bind(r,304))})),Qi=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)($i,{})})},Ki=(0,wi.u)((function(){return Promise.all([r.e(1769),r.e(7247)]).then(r.bind(r,77247))})),Xi=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ki,{})})},Yi=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(6649),r.e(461)]).then(r.bind(r,70461))})),eo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Yi,{})})},to=(0,wi.u)((function(){return r.e(8531).then(r.bind(r,38531))})),ro=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(to,{})})},no=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(2606),r.e(7639)]).then(r.bind(r,71165))})),io=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(no,{})})},oo=(0,wi.u)((function(){return r.e(9404).then(r.bind(r,49404))})),ao=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(oo,{})})},so=(0,wi.u)((function(){return r.e(4185).then(r.bind(r,43253))})),co=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(so,{})})},lo=(0,wi.u)((function(){return r.e(2519).then(r.bind(r,44798))})),uo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(lo,{})})},po=(0,wi.u)((function(){return r.e(5381).then(r.bind(r,95381))})),fo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(po,{})})},mo=(0,wi.u)((function(){return r.e(3253).then(r.bind(r,42323))})),bo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(mo,{})})},ho=(0,wi.u)((function(){return Promise.all([r.e(4623),r.e(3750)]).then(r.bind(r,43750))})),vo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(ho,{})})},yo=(0,wi.u)((function(){return r.e(8457).then(r.bind(r,9866))})),go=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(yo,{})})},_o=(0,wi.u)((function(){return r.e(984).then(r.bind(r,60984))})),jo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(_o,{})})},xo=(0,wi.u)((function(){return r.e(1907).then(r.bind(r,31907))})),wo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(xo,{})})},Oo=(0,wi.u)((function(){return Promise.resolve().then(r.bind(r,11824))})),So=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Oo,{})})},Po=(0,wi.u)((function(){return r.e(5871).then(r.bind(r,96648))})),Co=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Po,{})})},ko=(0,wi.u)((function(){return r.e(7146).then(r.bind(r,7146))})),No=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(ko,{})})},Io=(0,wi.u)((function(){return r.e(4850).then(r.bind(r,76115))})),Ao=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Io,{})})},Eo=(0,wi.u)((function(){return r.e(3629).then(r.bind(r,73629))})),Do=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Eo,{})})},To=(0,wi.u)((function(){return r.e(5094).then(r.bind(r,55094))})),Lo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(To,{})})},Mo=function(){return(0,b.jsx)(D.l_,{to:"/members/onboarding"})},Ro=(0,wi.u)((function(){return r.e(8655).then(r.bind(r,25026))})),Bo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ro,{})})},Uo=(0,wi.u)((function(){return r.e(9716).then(r.bind(r,24660))})),Fo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Uo,{})})},zo=(0,wi.u)((function(){return r.e(8282).then(r.bind(r,97863))})),Vo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(zo,{})})},qo=(0,wi.u)((function(){return r.e(3920).then(r.bind(r,9371))})),Go=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(qo,{})})},Ho=(0,wi.u)((function(){return r.e(9105).then(r.bind(r,37105))})),Wo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ho,{})})},Zo=(0,wi.u)((function(){return r.e(5601).then(r.bind(r,15601))})),Jo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Zo,{})})},$o=(0,wi.u)((function(){return r.e(6825).then(r.bind(r,96825))})),Qo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)($o,{})})},Ko=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(2606),r.e(1573)]).then(r.bind(r,61573))})),Xo=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ko,{})})},Yo=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(5630)]).then(r.bind(r,57768))})),ea=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Yo,{})})},ta=(0,wi.u)((function(){return r.e(4976).then(r.bind(r,76825))})),ra=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(ta,{})})},na=(0,wi.u)((function(){return r.e(3232).then(r.bind(r,63232))})),ia=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(na,{})})},oa=(0,wi.u)((function(){return r.e(7786).then(r.bind(r,77786))})),aa=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(oa,{})})},sa=(0,wi.u)((function(){return r.e(4911).then(r.bind(r,84911))})),ca=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(sa,{})})},la=(0,wi.u)((function(){return r.e(2069).then(r.bind(r,82069))})),ua=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(la,{})})},da=(0,wi.u)((function(){return r.e(5794).then(r.bind(r,13527))})),pa=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(da,{})})},fa=(0,wi.u)((function(){return Promise.all([r.e(4623),r.e(4018),r.e(4845),r.e(553),r.e(9655)]).then(r.bind(r,99655))})),ma=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(fa,{})})},ba=r(46068),ha=function(e){var t=e.isPaywallTaxAvailable,r=void 0!==t&&t,n=e.isAffiliatesEnabled,i=void 0!==n&&n,o=e.isWorkflowsEnabled,a=void 0!==o&&o,s=e.isPaywallPaymentSettingsAvailable,c=void 0!==s&&s,l=e.isMarketingHubEmailBroadcastsEnabled,u=void 0!==l&&l;return(0,b.jsxs)(D.rs,{children:[(0,b.jsx)(ba.i,{component:jo,path:"/settings",exact:!0}),(0,b.jsx)(ba.i,{component:fo,path:"/settings/custom_domain",exact:!0}),(0,b.jsx)(ba.i,{component:wo,path:"/settings/home",exact:!0}),(0,b.jsx)(ba.i,{component:Mo,path:"/settings/onboarding",exact:!0}),(0,b.jsx)(ba.i,{component:co,path:"/settings/community_ai",exact:!0}),(0,b.jsx)(ba.i,{component:aa,path:"/settings/spaces",exact:!0}),(0,b.jsx)(ba.i,{component:ua,path:"/settings/topics",exact:!0}),(0,b.jsx)(ba.i,{component:ra,path:"/settings/posts/bulk_actions",exact:!0}),(0,b.jsx)(ba.i,{component:ao,path:"/settings/code_snippets",exact:!0}),(0,b.jsx)(ba.i,{component:pa,path:"/settings/weekly_digest",exact:!0}),(0,b.jsx)(ba.i,{component:Pi,path:"/settings/mobile_app",exact:!0}),(0,b.jsx)(ba.i,{component:Ao,path:"/settings/messaging",exact:!0}),(0,b.jsx)(ba.i,{component:ia,path:"/settings/sso",exact:!0}),(0,b.jsx)(ba.i,{component:go,path:"/settings/embed",exact:!0}),(0,b.jsx)(ba.i,{component:ea,path:"/settings/posts",exact:!0}),(0,b.jsx)(D.AW,{component:Xo,path:"/settings/plans",exact:!0}),(0,b.jsx)(D.AW,{component:io,path:"/settings/billing"}),(0,b.jsx)(ba.i,{component:ro,path:"/settings/api"}),(0,b.jsx)(ba.i,{component:Do,path:"/settings/moderation",exact:!0}),(0,b.jsx)(ba.i,{component:Lo,path:"/settings/moderation/edit",exact:!0}),(0,b.jsx)(ba.i,{component:Vo,path:"/settings/paywall_groups",exact:!0}),c&&(0,b.jsx)(ba.i,{component:Go,path:Ae.lA.paywalls.payment_settings,exact:!0}),r&&(0,b.jsx)(ba.i,{component:Jo,path:"/settings/paywall_tax_settings",exact:!0}),(0,b.jsx)(ba.i,{component:Qo,path:"/settings/paywalls",exact:!1}),i&&(0,b.jsx)(ba.i,{component:Qi,path:"/settings/affiliates_directory",exact:!0}),i&&(0,b.jsx)(ba.i,{component:Ji,path:"/settings/affiliates_commissions",exact:!0}),i&&(0,b.jsx)(ba.i,{component:Xi,path:"/settings/affiliates_settings",exact:!0}),(0,b.jsx)(ba.i,{component:Co,path:"/settings/member_billing"}),(0,b.jsx)(ba.i,{component:Wo,path:"/settings/paywall_subscriptions",exact:!1}),(0,b.jsx)(ba.i,{component:Fo,path:"/settings/paywall_charges",exact:!1}),(0,b.jsx)(ba.i,{component:Bo,path:"/settings/paywall_bulk_logs",exact:!0}),(0,b.jsx)(ba.i,{component:No,path:"/settings/member_tags",exact:!1}),(0,b.jsx)(ba.i,{component:uo,path:"/settings/coupons",exact:!0}),(0,b.jsx)(ba.i,{component:ca,path:"/settings/theme",exact:!0}),(0,b.jsx)(D.AW,{component:So,path:"/settings/live_streams",exact:!1}),(0,b.jsx)(ba.i,{component:Vi,path:"/members/manage",exact:!0}),(0,b.jsx)(ba.i,{component:Fi,path:"/members/invite"}),(0,b.jsx)(ba.i,{path:"/members/edit/:id",exact:!1,render:function(){return(0,b.jsx)(Ei,{pageTitle:(0,w.t)("settings.edit_member.title")})}}),(0,b.jsx)(ba.i,{component:Ti,path:"/members/invitation_links"}),(0,b.jsx)(ba.i,{component:Mi,path:"/members/invitation_links/:id/edit",exact:!0}),(0,b.jsx)(ba.i,{component:Bi,path:"/members/invitation_links/new",exact:!0}),(0,b.jsx)(ba.i,{path:"/members/invitation_links/:action",exact:!0,render:function(){return(0,b.jsx)(Ei,{pageTitle:(0,w.t)("settings.invitation_links.title")})}}),(0,b.jsx)(ba.i,{path:"/members/invitation_links/:id/:action",exact:!0,render:function(){return(0,b.jsx)(Ei,{pageTitle:(0,w.t)("settings.invitation_links.title")})}}),(0,b.jsx)(ba.i,{component:Gi,path:"/members/onboarding",exact:!0}),(0,b.jsx)(ba.i,{path:"/members/bulk_import",exact:!0,render:function(){return(0,b.jsx)(Ei,{pageTitle:(0,w.t)("settings.import_members.title")})}}),(0,b.jsx)(ba.i,{component:Ii,path:"/settings/members/bulk_import_tasks",exact:!0}),(0,b.jsx)(ba.i,{component:Wi,path:"/members/profile_fields"}),(0,b.jsx)(ba.i,{component:ki,path:"/settings/members/activity_logs",exact:!0}),(0,b.jsx)(ba.i,{component:eo,path:"/settings/analytics/:action?"}),a&&(0,b.jsx)(ba.i,{component:ma,path:"/settings/workflows"}),u&&(0,b.jsx)(ba.i,{component:vo,path:"/settings/emails"}),(0,b.jsx)(ba.i,{component:bo,path:"/settings/:component/:action/",exact:!0}),(0,b.jsx)(ba.i,{component:bo,path:"/settings/:component",exact:!0})]})},va=r(94645),ya=r(5295),ga=function(){var e=(0,P.wh)(),t=e.isLoading,r=e.currentCommunity,i=(0,_i.Aq)(r),o=(0,D.k6)(),a=(0,D.TH)().pathname,s=(0,va.I)(),c=gi.s.some((function(e){return a.startsWith(e)})),l=(0,Kn.x)(),u=(0,Qn.N)(),d=(0,ji.U)();if((0,n.useEffect)((function(){var e=o.listen((function(){window.scrollTo(0,0)}));return function(){return e()}})),t)return(0,b.jsx)(ya.a,{});if(!c)return null;var p=r.affiliates_feature_flag_enabled;return(0,b.jsx)(xi._p,{section:xi.kS.ADMIN,children:(0,b.jsx)(yi,{shouldHideMainHeader:!1,hideAppBar:i,children:(0,b.jsx)(ha,{isPaywallTaxAvailable:l,isAffiliatesEnabled:p,isWorkflowsEnabled:s,isPaywallPaymentSettingsAvailable:u,isMarketingHubEmailBroadcastsEnabled:d})})})},_a=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(5085),r.e(1650)]).then(r.bind(r,31650))})),ja=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(_a,{})})},xa=r(36911),wa=r(4979),Oa=r(26332),Sa=r(49942),Pa=(0,wi.u)((function(){return Promise.resolve().then(r.bind(r,28121))})),Ca=function(){return(0,b.jsx)(Yn.a,{disableRightSidebar:!0,children:(0,b.jsx)(Oa.W,{fullWidth:!0,fullHeight:!0,children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsxs)(Yn.a.Body,{children:[(0,b.jsx)(xa.S,{title:(0,w.t)("header_v3.bookmarks")}),(0,b.jsx)(wa.Z,{leftContent:(0,b.jsx)(Sa.y,{children:(0,w.t)("header_v3.bookmarks")}),hasBorder:!0}),(0,b.jsx)(Yn.a.Content,{fullWidth:!0,children:(0,b.jsx)("div",{className:"bg-primary m-4 mx-auto max-w-4xl overflow-auto lg:h-[calc(100vh-160px)]",children:(0,b.jsx)(Pa,{})})})]})})})})},ka=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(4046)]).then(r.bind(r,94046))})),Na=function(){return(0,b.jsx)(Yn.a,{disableRightSidebar:!0,children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(ka,{})})})},Ia=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(321),r.e(1322),r.e(8632),r.e(8462),r.e(1167),r.e(2432)]).then(r.bind(r,72432))})),Aa=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ia,{})})},Ea=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(331)]).then(r.bind(r,32326))})),Da=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ea,{})})},Ta=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(321),r.e(8632),r.e(5035)]).then(r.bind(r,28431))})),La=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ta,{})})},Ma=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(3083),r.e(3061),r.e(5378)]).then(r.bind(r,15593))})),Ra=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ma,{})})},Ba=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(321),r.e(1322),r.e(8632),r.e(3083),r.e(8462),r.e(1167),r.e(3061),r.e(6022)]).then(r.bind(r,76022))})),Ua=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ba,{})})},Fa=(0,wi.u)((function(){return r.e(2445).then(r.bind(r,45760))})),za=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Fa,{})})},Va=(0,wi.u)((function(){return r.e(7607).then(r.bind(r,40670))})),qa=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Va,{})})},Ga=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(7821)]).then(r.bind(r,77821))})),Ha=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ga,{})})},Wa=(0,wi.u)((function(){return r.e(743).then(r.bind(r,21117))})),Za=function(){return(0,b.jsx)(Yn.a,{disableRightSidebar:!0,children:(0,b.jsx)(Oa.W,{fullWidth:!0,fullHeight:!1,children:(0,b.jsx)(Yn.a.Body,{children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Wa,{})})})})})},Ja=(0,wi.u)((function(){return r.e(5619).then(r.bind(r,95619))})),$a=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ja,{})})},Qa=(0,wi.u)((function(){return r.e(5226).then(r.bind(r,10380))})),Ka=function(){return(0,b.jsx)(P.BD,{children:(0,b.jsx)(Yn.a,{disableRightSidebar:!0,children:(0,b.jsx)(Oa.W,{fullWidth:!0,fullHeight:!1,children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Qa,{})})})})})},Xa=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(2649)]).then(r.bind(r,72649))})),Ya=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Xa,{})})},es=r(16424),ts=(0,wi.u)((function(){return Promise.all([r.e(1056),r.e(8374)]).then(r.bind(r,52455))})),rs=function(){return(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(es.V,{children:(0,b.jsx)(ts,{})})})},ns=[Ae.WF.index(),Ae.WF.overview(),Ae.WF.info(),Ae.WF.access(),Ae.WF.billing()],is=function(){return(0,b.jsx)(ba.i,{component:rs,path:ns,exact:!0})},os=r(94572),as=r(63367),ss=function(){return(0,b.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-center space-y-3",children:[(0,b.jsx)(ke.Z.TitleLg,{weight:"font-semibold",children:(0,as.t)("leaderboard.not_enough_members.title")}),(0,b.jsx)(ke.Z.LabelSm,{weight:"font-regular",children:(0,b.jsx)("div",{className:"text-default",children:(0,as.t)("leaderboard.not_enough_members.description")})}),(0,b.jsx)(Ee.z,{variant:"secondary",children:(0,as.t)("leaderboard.not_enough_members.cta")})]})},cs=104,ls=function(e){var t=e.avatarUrl,r=e.name,n=e.progress,i=e.label,o=2*Math.PI*50,a=o-n/100*o;return(0,b.jsxs)("div",{className:"relative flex items-center justify-center rounded-full",style:{height:cs,width:cs},children:[(0,b.jsxs)("svg",{className:"absolute",width:cs,height:cs,style:{transform:"rotate(-90deg)"},children:[(0,b.jsx)("circle",{cx:52,cy:52,r:50,stroke:"#F7F9FA",strokeWidth:4,fill:"none"}),(0,b.jsx)("circle",{cx:52,cy:52,r:50,stroke:"#506CF0",strokeWidth:4,fill:"none",strokeDasharray:o,strokeDashoffset:a,strokeLinecap:"round"})]}),(0,b.jsx)("div",{className:"absolute z-0 rounded-full bg-white",style:{height:96,width:96},children:(0,b.jsx)(ze.s,{isFullRounded:!0,src:t,name:r,size:"24"})}),i&&(0,b.jsx)("div",{className:"border-input text-default bg-primary absolute -bottom-1 -right-1 z-10 flex h-8 w-8 items-center justify-center rounded-full border",children:(0,b.jsx)(ke.Z.LabelSm,{weight:"bold",children:i})})]})},us=function(e){var t=e.level,r=e.isLocked,n=e.membersPercentage;return(0,b.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,b.jsx)("div",{className:"border-input text-default bg-primary flex h-8 w-8 items-center justify-center rounded-full border",children:r?(0,b.jsx)(C.JO,{size:14,type:"16-lock"}):(0,b.jsx)(ke.Z.LabelSm,{weight:"semibold",children:t})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(ke.Z.LabelSm,{weight:"semibold",children:(0,b.jsx)("div",{className:"text-dark",children:(0,as.t)("leaderboard.level_n",{level:t})})}),(0,b.jsx)(ke.Z.LabelXs,{weight:"regular",children:(0,b.jsx)("div",{className:"text-default",children:(0,as.t)("leaderboard.n_percent_members",{count:n})})})]})]})},ds=[{level:1,isLocked:!1,membersPercentage:24},{level:2,isLocked:!1,membersPercentage:12},{level:3,isLocked:!1,membersPercentage:8},{level:4,isLocked:!0,membersPercentage:7},{level:5,isLocked:!0,membersPercentage:5},{level:6,isLocked:!0,membersPercentage:4},{level:7,isLocked:!0,membersPercentage:3},{level:8,isLocked:!0,membersPercentage:2},{level:9,isLocked:!0,membersPercentage:1}],ps=function(){return(0,b.jsx)("div",{className:"mt-6 grid grid-flow-row-dense grid-cols-1 gap-5 sm:grid-cols-2 md:grid-cols-3",children:ds.map((function(e){return(0,b.jsx)(us,{isLocked:e.isLocked,level:e.level,membersPercentage:e.membersPercentage},e.level)}))})},fs=function(){return(0,b.jsxs)("div",{className:"border-primary bg-primary rounded-2xl border p-6",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center justify-between md:flex-row",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center space-x-3 space-y-4 md:flex-row md:space-y-0",children:[(0,b.jsx)("div",{className:"bg-tertiary h-[100px] w-[100px] animate-pulse rounded-full"}),(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-3 md:items-start",children:[(0,b.jsx)("div",{className:"bg-tertiary h-5 w-24 animate-pulse rounded text-center text-transparent md:text-left"}),(0,b.jsx)("div",{className:"bg-tertiary h-3 w-48 animate-pulse rounded text-center text-transparent md:text-left"})]})]}),(0,b.jsx)("div",{className:"border-primary mt-4 w-[200px] animate-pulse border-t pt-4 text-center md:mt-0 md:border-l md:border-t-0 md:pl-4 md:pt-0 md:text-left",children:(0,b.jsxs)("div",{className:"flex flex-col items-center space-y-3 md:items-start",children:[(0,b.jsx)("div",{className:"bg-tertiary h-3 w-10 rounded "}),(0,b.jsx)("div",{className:"bg-tertiary w-18 h-2 rounded "})]})})]}),(0,b.jsx)("div",{className:"mt-6 grid grid-flow-row-dense grid-cols-2 gap-5 md:grid-cols-3",children:Array(9).fill(0).map((function(e){return(0,b.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,b.jsx)("div",{className:"bg-tertiary h-8 w-8 animate-pulse rounded-full"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"bg-tertiary h-3 w-12 animate-pulse rounded "}),(0,b.jsx)("div",{className:"bg-tertiary h-2 w-20 animate-pulse rounded "})]})]},e)}))})]})};function ms(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return bs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var hs=function(){var e=(0,P.wh)().currentCommunityMember;return ms((0,n.useState)(!1),1)[0]?(0,b.jsx)(fs,{}):(0,b.jsxs)("div",{className:"border-primary bg-primary rounded-2xl border p-6",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center justify-between md:flex-row",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center space-x-3 space-y-4 md:flex-row md:space-y-0",children:[(0,b.jsx)(ls,{avatarUrl:null===e||void 0===e?void 0:e.avatar_url,name:null===e||void 0===e?void 0:e.name,progress:79,label:1}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-dark text-center md:text-left",children:(0,b.jsx)(ke.Z.LabelLg,{weight:"semibold",children:null===e||void 0===e?void 0:e.name})}),(0,b.jsx)("div",{className:"text-default text-center md:text-left",children:(0,b.jsx)(ke.Z.LabelSm,{children:null===e||void 0===e?void 0:e.headline})})]})]}),(0,b.jsxs)("div",{className:"border-primary mt-4 w-[200px] border-t pt-4 text-center md:mt-0 md:border-l md:border-t-0 md:pl-4 md:pt-0 md:text-left",children:[(0,b.jsx)(ke.Z.LabelSm,{weight:"semibold",children:(0,b.jsx)("div",{className:"text-dark",children:(0,as.t)("leaderboard.level_n",{level:1})})}),(0,b.jsx)(ke.Z.LabelSm,{weight:"regular",children:(0,b.jsx)("div",{className:"text-default",children:(0,as.t)("leaderboard.n_likes_to_level_up",{count:7})})})]})]}),(0,b.jsx)(ps,{})]})},vs="https://xsgames.co/randomusers/avatar.php?g=male",ys=[{rank:1,avatarUrl:vs,name:"John Doe",headline:"Software Engineer",score:100},{rank:2,avatarUrl:vs,name:"Jane Doe",headline:"Chef de Cuisine",score:90},{rank:3,avatarUrl:vs,name:"John Smith",headline:"Product Manager",score:80},{rank:4,avatarUrl:vs,name:"Jane Smith",headline:"Data Scientist",score:70},{rank:5,avatarUrl:vs,name:"John Johnson",headline:"Software Engineer",score:60},{rank:6,avatarUrl:vs,name:"Jane Johnson",headline:"Senior Frontend Developer",score:50},{rank:7,avatarUrl:vs,name:"John Brown",headline:"Senior Backend Developer",score:40},{rank:8,avatarUrl:vs,name:"Jane Brown",headline:"Senior Fullstack Developer",score:30},{rank:9,avatarUrl:vs,name:"John White",headline:"Senior Marketing Manager",score:20},{rank:10,avatarUrl:vs,name:"Jane White",headline:"Senior Product Manager",score:10}],gs=function(e){var t=e.rank;return 1===t?(0,b.jsx)(C.JO,{className:"!w-8",size:32,type:"leaderboard-rank-1"}):2===t?(0,b.jsx)(C.JO,{className:"!w-8",size:32,type:"leaderboard-rank-2"}):3===t?(0,b.jsx)(C.JO,{className:"!w-8",size:32,type:"leaderboard-rank-3"}):(0,b.jsx)("div",{className:"text-light text-center",children:(0,b.jsx)(ke.Z.LabelSm,{weight:"semibold",children:t})})},_s=function(){return(0,b.jsx)("div",{className:"border-primary bg-primary mt-4 flex flex-col rounded-2xl border",children:ys.map((function(e,t){return(0,b.jsxs)("div",{className:ue()("flex items-center space-x-6 p-4 px-6",{"border-primary border-t":0!==t}),children:[(0,b.jsx)("div",{className:"flex min-w-[34px] items-center justify-center",children:(0,b.jsx)(gs,{rank:e.rank})}),(0,b.jsxs)("div",{className:"flex flex-1 items-start space-x-3",children:[(0,b.jsx)("img",{loading:"lazy",src:e.avatarUrl,alt:e.name,className:"h-10 w-10 rounded-full"}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(ke.Z.LabelMd,{weight:"semibold",children:(0,b.jsx)("div",{className:"text-dark",children:e.name})}),(0,b.jsx)(ke.Z.LabelSm,{weight:"regular",children:(0,b.jsx)("div",{className:"text-light",children:e.headline})})]})]}),(0,b.jsx)("div",{children:(0,b.jsx)(ke.Z.LabelSm,{weight:"medium",children:(0,b.jsx)("div",{className:"text-default",children:e.score})})})]},e.rank)}))})},js=function(){return(0,b.jsx)("div",{className:"border-primary bg-primary mt-4 flex flex-col rounded-2xl border",children:Array(10).fill(0).map((function(e,t){return(0,b.jsxs)("div",{className:ue()("flex items-center space-x-6 p-4 px-6",{"border-primary border-t":0!==t}),children:[(0,b.jsx)("div",{className:"bg-tertiary h-8 w-8 animate-pulse rounded-full"}),(0,b.jsxs)("div",{className:"flex flex-1 items-start space-x-3",children:[(0,b.jsx)("div",{className:"bg-tertiary h-10 w-10 animate-pulse rounded-full"}),(0,b.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,b.jsx)("div",{className:"bg-tertiary h-5 w-32 animate-pulse rounded "}),(0,b.jsx)("div",{className:"bg-tertiary w-18 h-3 animate-pulse rounded"})]})]}),(0,b.jsx)("div",{className:"bg-tertiary h-5 w-10 animate-pulse rounded"})]},e)}))})},xs=function(e){var t=e.label,r=e.queryParams,n=(0,D.TH)().search===r;return(0,b.jsx)(Oe.OL,{to:"/leaderboard/".concat(r),className:ue()("text-dark flex cursor-pointer items-center justify-center rounded-md px-5 py-2.5",{"bg-overlay-dark text-selector-active":n,"text-default":!n}),children:(0,b.jsx)(ke.Z.LabelXs,{weight:"medium",children:t})})},ws=[{label:(0,as.t)("leaderboard.date_ranges.7_days"),queryParams:"?period=7_days"},{label:(0,as.t)("leaderboard.date_ranges.30_days"),queryParams:"?period=30_days"},{label:(0,as.t)("leaderboard.date_ranges.all_time"),queryParams:"?period=all_time"}],Os=function(){var e=(0,D.TH)(),t=(0,D.k6)();return ws.some((function(t){var r=t.queryParams;return e.search===r}))||t.replace("/leaderboard/".concat(ws[0].queryParams)),(0,b.jsx)("div",{className:"flex items-center space-x-2",children:ws.map((function(e){var t=e.label,r=e.queryParams;return(0,b.jsx)(xs,{label:t,queryParams:r},r)}))})};function Ss(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ps(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ps(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Cs=function(){var e=Ss((0,n.useState)(!0),1)[0];return(0,b.jsxs)("div",{className:"py-8",children:[(0,b.jsx)(Os,{}),e?(0,b.jsx)(js,{}):(0,b.jsx)(_s,{})]})};function ks(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ns(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ns(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Is=function(){return ks((0,n.useState)(!1),1)[0]?(0,b.jsx)(ss,{}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(wa.Z,{leftContent:(0,b.jsx)(Sa.y,{children:(0,as.t)("leaderboard.title")})}),(0,b.jsxs)("div",{className:"mx-auto max-w-5xl p-9",children:[(0,b.jsx)(hs,{}),(0,b.jsx)(Cs,{})]})]})},As=r(66490),Es=r(66722),Ds=r(11076),Ts={blue:"bg-[#F4F6FF]",green:"bg-[#EBFAF5]",pink:"bg-[#FFF1F3]"},Ls={blue:"text-[#CFD8FE]",green:"text-[#B0EBD9]",pink:"text-[#FFC9D3]"},Ms={blue:"bg-[#CFD8FE]",green:"bg-[#B0EBD9]",pink:"bg-[#FFC9D3]"},Rs=["feature_1","feature_2","feature_3"],Bs=function(e){var t=e.color,r=e.feature,n=e.icon,i=e.iconSize,o=void 0===i?20:i,a="leaderboard.key_features.".concat(r);return(0,b.jsxs)("div",{className:ue()("col-span-6 rounded-[10px] p-16 xl:pb-0",Ts[t]),children:[(0,b.jsx)("div",{className:ue()("flex h-12 w-12 items-center justify-center rounded-full",Ms[t]),children:(0,b.jsx)(C.JO,{type:n,size:o})}),(0,b.jsx)("div",{className:"mt-5",children:(0,b.jsx)(ke.Z.TitleLg,{children:(0,w.t)("".concat(a,".title"))})}),(0,b.jsx)("div",{className:"text-default mt-5",children:(0,b.jsx)(ke.Z.BodyMd,{children:(0,w.t)("".concat(a,".description"))})}),(0,b.jsx)("div",{className:"text-light mt-5 flex flex-col space-y-4",children:Rs.map((function(e){return(0,b.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,b.jsx)("div",{className:"h-5 w-5",children:(0,b.jsx)(C.JO,{type:"20-checkmark-circle-fill-dark",size:20,className:Ls[t]})}),(0,b.jsx)(ke.Z.BodyMd,{children:(0,w.t)("".concat(a,".").concat(e))})]},e)}))})]})},Us=function(e){var t=e.src;return(0,b.jsx)("div",{className:"col-span-6 flex justify-center",children:(0,b.jsx)("img",{alt:"",loading:"lazy",src:t,className:"object-contain"})})},Fs=function(){return(0,b.jsxs)("div",{className:"border-primary flex w-full flex-col items-center rounded-lg border p-14",children:[(0,b.jsx)(ke.Z.TitleXl,{weight:"font-bold",color:"text-dark",children:(0,as.t)("leaderboard.title")}),(0,b.jsx)("div",{className:"mt-2 text-center",children:(0,b.jsx)(ke.Z.TitleSm,{color:"text-dark",children:(0,as.t)("leaderboard.alt_description")})}),(0,b.jsx)(Ee.z,{className:"mt-8",variant:"circle",children:(0,as.t)("leaderboard.activate")})]})},zs=function(){return(0,b.jsxs)("div",{className:"flex w-full flex-col items-center",children:[(0,b.jsx)(ke.Z.TitleXl,{weight:"font-bold",color:"text-dark",children:(0,as.t)("leaderboard.title")}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(ke.Z.TitleSm,{color:"text-dark",children:(0,as.t)("leaderboard.description")})}),(0,b.jsx)(Ee.z,{className:"mt-8",variant:"circle",children:(0,as.t)("leaderboard.activate")})]})},Vs=function(){return(0,b.jsxs)("div",{className:"bg-primary h-full",children:[(0,b.jsx)(wa.Z,{leftContent:(0,b.jsx)(Sa.y,{children:(0,as.t)("leaderboard.title")}),rightContent:(0,b.jsx)(Ee.z,{variant:"circle",children:(0,as.t)("leaderboard.activate")})}),(0,b.jsx)("main",{className:"mx-auto max-w-6xl",children:(0,b.jsxs)("div",{className:"flex h-full w-full flex-col space-y-16 p-14 ",children:[(0,b.jsx)(zs,{}),(0,b.jsxs)("div",{className:"grid grid-flow-row-dense grid-cols-6 gap-6 xl:auto-rows-fr xl:grid-cols-12",children:[(0,b.jsx)(Bs,{color:"blue",icon:"leaderboard-activity",feature:"track_activity"}),(0,b.jsx)(Us,{src:As}),(0,b.jsx)(Bs,{color:"green",icon:"leaderboard-progress",feature:"member_progress",iconSize:24}),(0,b.jsx)(Us,{src:Es}),(0,b.jsx)(Bs,{color:"pink",icon:"leaderboard-levelup",feature:"level_up"}),(0,b.jsx)(Us,{src:Ds})]}),(0,b.jsx)(Fs,{})]})})]})};function qs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Gs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Hs=function(){var e=qs((0,n.useState)(!1),1)[0];return(0,b.jsx)(Oa.W,{fullWidth:!0,children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:e?(0,b.jsx)(Vs,{}):(0,b.jsx)(Is,{})})})},Ws=r(98175),Zs=r(53448),Js=r(89609),$s=r(62504),Qs=r(70905),Ks=r(95585),Xs=r(99338),Ys=r(81593),ec=r(71710),tc=r(54528),rc=r(95220);function nc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ic(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ic(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oc=function(e){var t,r=e.spaceId,i=e.post,o=e.onPostResourceChange,a=e.onPostDestroy,s=e.autofocusReplyForm,c=void 0===s||s,l=e.shouldOpenCommentPage,u=void 0!==l&&l,d=(0,P.Zh)().record.is_comments_enabled,p=(0,Qs.N)().refetch,f=(0,de.useQueryClient)(),m=(null===(t=(0,D.$B)("/home"))||void 0===t?void 0:t.isExact)?[$s.Z]:["posts",r],h=function(e){var t=e.initialFocus,r=void 0===t||t,i=nc((0,n.useState)(!0),2),o=i[0],a=i[1],s=(0,n.useRef)(null),c=nc((0,n.useState)(r),2),l=c[0],u=c[1],d=(0,n.useCallback)((function(){var e=s.current;e&&"focus"in e&&e.focus()}),[s]),p=(0,n.useCallback)((function(){var e,t;a(!0),u(!0),s.current&&((0,rc.p)(s.current)?s.current.focus():null===(e=s.current.commands)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e,"end"))}),[]);return(0,n.useEffect)((function(){l&&d()}),[d,l]),{commentsFormRef:s,focusCommentsForm:d,showCommentsAndFocusOnForm:p,toggleComment:function(){u(!1),a((function(e){return!e}))},shouldShowComments:o,shouldAutofocusReplyForm:l}}({initialFocus:c}),v=h.commentsFormRef,y=h.showCommentsAndFocusOnForm,g=h.toggleComment,_=h.shouldShowComments,j=h.shouldAutofocusReplyForm;return(0,b.jsx)(Zs.u_.Body,{className:"!px-0 !pt-0",children:(0,b.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,b.jsx)(ec.H,{post:i,className:"md:!rounded-none"}),(0,b.jsxs)("div",{className:"px-5 md:px-8",children:[(0,b.jsx)(tc.m,{post:i,onChange:function(e,t){o(e,t),f.invalidateQueries(m)},refetchPosts:p,hideShareLink:!0,hideBookmarkButton:!0,hidePinnedToTopIcon:!1,onPostDestroy:a,hideAuthorHeadline:!1,tagsLimit:1,tagsShowMoreLabelVariant:"numbers",metaInfoWrapperClassName:"",isRenderedOutsideTheSpace:!1}),(0,b.jsxs)("div",{className:"space-y-5",children:[(0,b.jsx)(Ys.y,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)(Xs.S,{className:"!px-0",toggleComment:g,showCommentAndFocusCommentForm:y,shouldOpenCommentPage:u}),d&&_&&(0,b.jsx)(Ks.o,{commentsFormRef:v,autofocusReplyForm:j})]})]})]})]})})},ac=r(37903),sc=r(20633),cc=r(39099),lc=r(30658),uc=function(e){var t=e.onChange,r=e.spaceId,n=(0,lc.m)(),i=n.post,o=n.refetchPostDetails,a=(0,de.useQueryClient)(),s=(0,D.k6)(),c=(0,D.TH)().state,l=(null!==c&&void 0!==c?c:{}).prevLocation,u=function(){a.invalidateQueries(["posts",r])};return(0,b.jsxs)(Zs.u_.Header,{className:"flex w-full items-center",children:[(0,b.jsx)(ke.Z.TitleMd,{children:i.name||(0,w.t)("post.post_modal.title")}),(0,b.jsx)(Zs.u_.HeaderActions,{className:"!self-center",children:(0,b.jsxs)("div",{className:"flex gap-5",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(Ne.T,{content:(0,w.t)("post.post_modal.share_post_button_tooltip"),children:(0,b.jsx)(cc.P,{onChange:function(){t(),u()},menuButtonEl:"div",button:(0,b.jsx)(sc.h,{name:"20-share",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:24,ariaLabel:(0,w.t)("post.post_modal.share_post_aria_label")}),shouldRenderCustomMenuButton:!0})}),(0,b.jsx)(ac.e,{bookmarkType:"post",variant:"minimal-post-modal",record:i,onSuccess:function(){null===o||void 0===o||o(),u()}})]}),(0,b.jsx)("div",{className:"bg-overlay-dark w-px"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(Ne.T,{content:(0,w.t)("post.post_modal.open_post_in_full_page_button_tooltip"),children:(0,b.jsx)(sc.h,{name:"20-expand",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:24,onClick:function(){s.push(Ae.xu.show({slug:i.slug,spaceSlug:i.space_slug}))},ariaLabel:(0,w.t)("post.post_modal.open_post_in_full_page_aria_label")})}),(0,b.jsx)(Ne.T,{content:(0,w.t)("post.post_modal.close_post_modal_tooltip"),children:(0,b.jsx)(sc.h,{name:"20-close",iconSize:20,iconClassName:"!text-default group-hover:!text-dark",className:"group",buttonSize:24,onClick:function(){s.push(l)},ariaLabel:(0,w.t)("post.post_modal.close_button_aria_label")})})]})]})})]})},dc=function(){var e=(0,D.TH)().state,t=(null!==e&&void 0!==e?e:{}).prevLocation,r=(0,D.k6)(),n=(0,Js.v)(),i=n.isLoading,o=n.postResource,a=n.perPagePostIds,s=n.space;return i?null:(0,b.jsx)(P.mE,{spaceId:null===s||void 0===s?void 0:s.id,children:(0,b.jsx)(Ws._x,{perPagePostIds:a,children:(0,b.jsx)(P.DW,{post:o.data,usedIn:"minimal-post-modal",children:(0,b.jsxs)(Zs.u_,{isOpen:!0,onClose:function(){r.push(t)},contentPortalId:"post-modal-portal",children:[(0,b.jsx)(Zs.u_.Overlay,{}),(0,b.jsxs)(Zs.u_.Content,{size:"xl",children:[(0,b.jsx)(uc,{spaceId:s.id,onChange:null===o||void 0===o?void 0:o.onPostChange}),(0,b.jsx)(oc,{spaceId:s.id,post:o.data,onPostResourceChange:null===o||void 0===o?void 0:o.onPostChange,onPostDestroy:function(){r.push(t)}})]})]})})})})},pc=(0,wi.u)((function(){return r.e(8183).then(r.bind(r,48183))})),fc=function(){return(0,b.jsx)(Oa.W,{fullWidth:!0,children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(pc,{})})})},mc=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(7675),r.e(6464),r.e(3060),r.e(4453),r.e(6973)]).then(r.bind(r,36973))})),bc=function(){return(0,b.jsx)(Oa.W,{fullWidth:!0,noPadding:!0,children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(mc,{})})})},hc=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(3060),r.e(4820)]).then(r.bind(r,84820))})),vc=function(){var e=(0,os.h)().setDynamicLayoutProps;return(0,n.useEffect)((function(){e({fullWidth:!0,disableRightSidebar:!1})}),[e]),(0,b.jsx)(Oa.W,{fullWidth:!0,fullHeight:!1,children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(hc,{})})})},yc=(0,wi.u)((function(){return Promise.resolve().then(r.bind(r,12614))})),gc=function(){return(0,b.jsx)(Oa.W,{fullWidth:!0,children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(yc,{})})})},_c=r(87189),jc=(0,wi.u)((function(){return Promise.all([r.e(532),r.e(3060),r.e(7472)]).then(r.bind(r,74262))})),xc=function(){var e=(0,_c.U)(),t=(0,P.nT)(),r=t.isLoading,i=t.helpers.findBy({slug:e}),o=(0,os.h)().setDynamicLayoutProps;return(0,n.useEffect)((function(){o({disableRightSidebar:!1})}),[o]),r?null:(0,b.jsx)(P.mE,{spaceId:null===i||void 0===i?void 0:i.id,children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(jc,{})})})},wc=(0,wi.u)((function(){return r.e(1500).then(r.bind(r,96467))})),Oc=function(){return(0,b.jsx)(Yn.a.Body,{children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(wc,{})})})},Sc=r(61345),Pc=(0,wi.u)((function(){return r.e(812).then(r.bind(r,98156))})),Cc=function(){var e=(0,_c.U)(),t=(0,os.h)().setDynamicLayoutProps,r=(0,P.nT)().helpers.findBy({slug:e});return(0,n.useEffect)((function(){(0,Sc.Ug)(r)&&t({disableScroll:!0})}),[r,t]),(0,O.isEmpty)(r)?null:(0,b.jsx)(P.mE,{spaceId:null===r||void 0===r?void 0:r.id,children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Pc,{space:r})})})},kc=r(17182),Nc=(0,wi.u)((function(){return r.e(4293).then(r.bind(r,4293))})),Ic=function(){return(0,b.jsx)(Oa.W,{fullWidth:!0,children:(0,b.jsx)(kc.F.Body,{hasPaddingTopMobile:!1,children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Nc,{})})})})},Ac=(0,wi.u)((function(){return r.e(1546).then(r.bind(r,91546))})),Ec=function(){return(0,b.jsx)(Oa.W,{fullWidth:!0,children:(0,b.jsx)(n.Suspense,{fallback:(0,b.jsx)(Oi.w,{}),children:(0,b.jsx)(Ac,{})})})},Dc=["/c/:spaceSlug","/c/:spaceSlug/invite","/c/:spaceSlug/members","/c/:spaceSlug/customize","/c/:spaceSlug/customize/*","/c/:spaceSlug/sections/*","/c/:spaceSlug/edit-lesson/*"],Tc=function(){var e=(0,$n.I)().isV3Enabled,t=(0,D.TH)(),r=t.state,n=(null!==r&&void 0!==r?r:{}).prevLocation;return(0,b.jsx)(D.AW,{path:"/",children:(0,b.jsxs)(os.O,{disableRightSidebar:!0,children:[(0,b.jsxs)(D.rs,{location:n||t,children:[(0,b.jsx)(D.AW,{component:vc,path:e?"/feed":"/home",exact:!0}),e&&(0,b.jsx)(D.l_,{from:"/home",to:"/feed"}),(0,b.jsx)(ba.i,{component:Ec,path:"/spaces",exact:!0}),(0,b.jsx)(ba.i,{component:gc,path:"/members",exact:!0}),(0,b.jsx)(ba.i,{component:bc,path:"/events",exact:!0}),(0,b.jsx)(ba.i,{component:fc,path:"/courses",exact:!0}),(0,b.jsx)(ba.i,{component:Hs,path:"/leaderboard",exact:!0}),(0,b.jsx)(ba.i,{component:Oc,path:"/u/:publicUid"}),(0,b.jsx)(ba.i,{component:Ic,path:"/s/:spaceGroupSlug"}),(0,b.jsx)(ba.i,{component:Cc,path:Dc,exact:!0}),(0,b.jsx)(ba.i,{component:xc,path:"/c/:spaceSlug/:postSlug"})]}),n&&(0,b.jsx)(ba.i,{component:dc,path:"/c/:spaceSlug/:postSlug"})]})})};function Lc(e){return function(e){if(Array.isArray(e))return Mc(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Mc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rc=function(){return(0,b.jsx)(_.D,{})},Bc=Object.values(Ae.lA.members),Uc=function(){var e,t=(0,D.TH)(),r=(null!==(e=null===t||void 0===t?void 0:t.state)&&void 0!==e?e:{}).prevLocation,n=null!==r&&void 0!==r?r:t;return(0,b.jsx)(g.S,{renderFunc:Rc,children:(0,b.jsxs)(D.rs,{location:n,children:[(0,b.jsx)(ba.i,{component:Da,path:"/live/:roomSlug/not_supported"}),(0,b.jsx)(ba.i,{component:Ra,path:"/live/:roomSlug/record"}),(0,b.jsx)(ba.i,{component:Aa,path:"/live/:roomSlug/mobile"}),(0,b.jsx)(D.AW,{component:La,path:"/live/:roomSlug/public"}),(0,b.jsx)(ba.i,{component:Ua,path:"/live/:roomSlug"}),(0,b.jsx)(D.AW,{component:$a,path:"/public/unsubscribe"}),(0,b.jsx)(D.AW,{component:Ya,path:"/two_fa"}),(0,b.jsx)(D.AW,{component:qa,path:"/marketing_emails/unsubscribe"}),(0,b.jsx)(D.AW,{component:za,path:"/marketing_emails/marketing_email_preference"}),(0,b.jsx)(ba.i,{component:Na,path:"/getting-started",exact:!0}),(0,b.jsx)(ba.i,{component:Ha,path:["/messages/:uuid","/messages"]}),(0,b.jsx)(ba.i,{component:Ka,path:"/threads"}),(0,b.jsx)(ba.i,{component:Za,path:"/notifications"}),(0,b.jsx)(ba.i,{component:Ca,path:"/bookmarks"}),(0,b.jsx)(ba.i,{component:ga,path:["/settings"].concat(Lc(Bc))}),(0,b.jsx)(ba.i,{component:ja,path:"/account"}),(0,b.jsx)(ba.i,{component:is,path:"/admin/members"}),(0,b.jsx)(Tc,{})]})})},Fc=r(7549),zc=function(){var e=(0,N.D)();return(0,b.jsx)(Fc.H,{isLoadingAppData:e})},Vc=r(13995),qc=function(e){var t=e.notice,r=e.alert,n=e.shouldDisplayHeader,i=e.shouldDisplayCommunitySwitcher,o=e.hasMinimalLayout,a=(0,$n.I)().isV3Enabled,s=window.location.pathname!==(0,Ae.hD)();return a?((0,y.ss)(),(0,b.jsxs)("div",{className:"flex",children:[i&&(0,b.jsx)(g.S,{children:(0,b.jsx)(zc,{})}),(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)(A.I,{notice:t,alert:r}),(0,b.jsx)(I,{}),n&&!o&&s&&(0,b.jsx)(Vc.G,{}),(0,b.jsx)(Uc,{}),(0,b.jsx)(Jn,{}),(0,b.jsx)(x.J,{})]})]})):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.I,{notice:t,alert:r}),(0,b.jsx)(I,{}),n&&!o&&s&&(0,b.jsx)(Vc.G,{}),i&&(0,b.jsx)(g.S,{children:(0,b.jsx)(zc,{})}),(0,b.jsx)(Uc,{}),(0,b.jsx)(Jn,{}),(0,b.jsx)(x.J,{})]})},Gc=["notice","alert","display_community_switcher","display_header","minimal_layout"];function Hc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hc(Object(r),!0).forEach((function(t){Zc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jc(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(0,l.b)();var $c=(0,g.P)((function(e){var t=e.notice,r=e.alert,i=e.display_community_switcher,o=void 0!==i&&i,a=e.display_header,s=void 0===a||a,l=e.minimal_layout,d=void 0!==l&&l,p=Jc(e,Gc);return(0,n.useEffect)((function(){(0,y.M2)(),c()}),[]),(0,b.jsx)(u.e$,{backendProps:Wc({notice:t,alert:r,display_community_switcher:o,minimal_layout:d},p),children:(0,b.jsx)("div",{id:j.BW,className:"bg-secondary","data-testid":"main-app-provider",children:(0,b.jsx)(v,{children:(0,b.jsx)(qc,{notice:t,alert:r,shouldDisplayHeader:s,shouldDisplayCommunitySwitcher:o,hasMinimalLayout:d})})})})}),_.D)},13243:(e,t,r)=>{"use strict";r.d(t,{H:()=>X});var n=r(67294),i=r(94184),o=r.n(i),a=r(58533),s=r(24897),c=r(1320),l=r(59393),u=r(97012),d=r(84495),p=r(35877),f=r(2482),m=r(5295),b=r(25067),h=r(86013),v=r(30887),y=r(26953),g=r(16743),_=r(85893),j=function(e){var t=e.shouldShowChatThreadsBanner,r=e.hideBanner,n=(0,y.kK)();return t?(0,_.jsx)("div",{className:"border-primary bg-primary mx-3 mt-6 h-24 rounded-lg border px-6 py-5 shadow-sm md:mx-6",children:(0,_.jsxs)("div",{className:"flex flex-row items-center",children:[(0,_.jsx)("div",{className:"mr-3 h-10 w-12 rounded-lg bg-gray-100 md:mr-6 md:h-14 md:w-14",children:(0,_.jsx)("div",{className:"flex h-full w-full items-center justify-between",children:(0,_.jsx)(v.JO,{type:n?"16-chat-threads":"20-chat-threads",size:n?16:20,className:"!w-full"})})}),(0,_.jsxs)("div",{className:"w-full",children:[(0,_.jsxs)("div",{className:"flex w-full flex-row items-start justify-between",children:[(0,_.jsx)(g.Z.LabelLg,{weight:"semibold",children:(0,h.t)("threads.banner.title")}),(0,_.jsx)("button",{type:"submit",onClick:r,children:(0,_.jsx)(v.JO,{type:"20-close-sm",size:20})})]}),!n&&(0,_.jsx)(g.Z.LabelMd,{children:(0,h.t)("threads.banner.description")})]})]})}):null},x=function(){return(0,_.jsx)("div",{className:"bg-primary flex h-full items-center justify-center lg:h-[calc(100vh-64px)]",children:(0,_.jsxs)("div",{className:"flex w-full flex-col items-center justify-center space-y-2 md:w-[413px]",children:[(0,_.jsx)("div",{className:"p-2",children:(0,_.jsx)(v.JO,{type:"32-chat-threads",size:32})}),(0,_.jsx)(g.Z.LabelLg,{weight:"semibold",children:(0,h.t)("chat_threads_empty_page.title")}),(0,_.jsx)(g.Z.BodyMd,{textAlign:"text-center",children:(0,h.t)("chat_threads_empty_page.description")})]})})},w=r(96486),O=r(97650),S=r(24185),P=r(49326),C=r(87958),k=r(20633),N=r(51297),I=r(26045),A=r(70850),E=r(40160),D=r(74238),T=r(15218),L=function(e){var t=e.space,r=e.chatRoomName,n=e.parentMessage,i=e.chatRoomUrl,a=(0,D.TC)().currentAppearance,s=n.id,c=t||{},l=c.emoji,u=c.custom_emoji_url,d=c.custom_emoji_dark_url;return(0,_.jsx)(E.rU,{to:(0,P.co)({url:i,hash:"message_".concat(s),search:"message_id=".concat(s)}),children:(0,_.jsx)(g.Z.LabelSm,{as:"div",color:"text-selector-active",weight:"semibold",children:(0,_.jsxs)("div",{className:"flex items-center",children:[(0,_.jsx)(T.S,{className:"!h-5 !w-auto",emoji:l,customEmojiUrl:u,customEmojiDarkUrl:d,appearance:a}),(0,_.jsx)("span",{className:o()("hover:text-selector-active hover:underline",{"ml-1":l||u}),children:(0,w.truncate)(r,{length:80})})]})})})};function M(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.map((function(e){return e.parent_message.chat_thread_id}));return e.sort((function(e,t){return r?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)}))},V=function(e){var t=e.isRenderedOnHeader,r=e.children;return t?(0,_.jsx)("div",{className:"border-primary bg-primary rounded-lg border shadow-sm","data-testid":"thread-item",children:r}):r};function q(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H=function(e){var t=e.chatRoomData,r=e.newBadgeIds,i=e.handleWhenThreadInViewPort,a=e.thread,s=e.space,c=e.setSelectedReply,l=e.isRenderedOnHeader,u=(0,S.k6)(),p=t.roomName,f=t.uuid,m=t.embedded_space,b=t.lesson,v=(s||{}).slug,y=a.parent_message,j=a.replies,x=a.current_participant,E=y.chat_room_uuid,D=y.thread_participants_preview,T=y.total_thread_participants_count,M=y.replies_count,R=y.chat_thread_id,B=y.embedded,U=y.id,F=function(e){var t=e.isEmbedded,r=e.lesson,n=e.slug,i=e.chatRoomUuid;return t?r?P.H4.showLesson({spaceSlug:n,sectionId:r.courses_section_id,lessonId:r.id}):(0,P.kr)({spaceSlug:n}):(0,P.so)({uuid:i})}({isEmbedded:B,lesson:b,slug:v,chatRoomUuid:E}),z=b?b.name:function(e,t){var r="";return e.forEach((function(n,i){var o=i===e.length-1,a=i===e.length-2;if(1===t)r="".concat((0,h.t)("just")," ").concat(n.name);else if(a&&t<=3)r=r+n.name+" ".concat((0,h.t)("and")," ");else if(o&&t>3){var s=t-3;r=r+n.name+" ".concat((0,h.t)("and")," ")+s.toString()+(1===s?" ".concat((0,h.t)("other")):"".concat((0,h.t)("others")))}else o?r+=n.name:r=r+n.name+", "})),r}(D,T),G=M-j.length,H=G>0,W=r.has(R),Z=(0,n.useMemo)((function(){return(0,I.nR)([y].concat(q(j)),[])}),[y,j]),J=(0,d.gJ)({uuid:f,ids:Z,enabled:Z.length>0,shouldUpdateCache:!1}),$=J.isLoading,Q=J.participants;return $?null:(0,_.jsx)(n.Fragment,{children:(0,_.jsxs)(V,{isRenderedOnHeader:l,children:[(0,_.jsxs)("div",{className:o()({"flex w-full flex-row items-start justify-between":l,"mt-7 flex w-full flex-row justify-between first:mt-0":!l}),children:[(0,_.jsxs)("div",{className:"w-full",children:[(0,_.jsxs)("div",{className:o()({"mt-7 flex w-full flex-row justify-between first:mt-0":!l,"flex flex-row items-center justify-between px-5 pt-5":l}),children:[(0,_.jsx)(L,{space:s,chatRoomName:p,parentMessage:y,chatRoomUrl:F}),W&&(0,_.jsx)("div",{className:"bg-v2-danger flex h-4 items-center rounded px-1",children:(0,_.jsx)(g.Z.LabelXxs,{color:"text-white",children:(0,h.t)("threads.new")})})]}),(0,_.jsx)("div",{className:o()({"mb-2":!l,"px-5":l}),children:(0,_.jsx)(g.Z.LabelXs,{color:"text-light",children:(0,w.truncate)(z,{length:60})})})]}),l&&(0,_.jsx)("div",{className:"pr-5 pt-5",children:(0,_.jsx)(C.T,{interactive:!1,content:(0,h.t)("header_v3.reply_to_thread"),children:(0,_.jsx)(k.h,{iconClassName:"text-default",className:"hover:!bg-tertiary focus-visible:!bg-tertiary",name:"20-reply-to-thread",ariaLabel:(0,h.t)("header_v3.reply_to_thread"),onClick:function(){u.push((0,P.co)({url:F,hash:"message_".concat(U),search:"message_id=".concat(U)}))}})})})]}),(0,_.jsxs)("div",{className:o()({"border-primary bg-primary rounded-lg border shadow-sm":!l}),children:[(0,_.jsxs)("div",{className:o()({"py-1 first:rounded-t-lg":!l,"mt-2":l}),children:[(0,_.jsx)(N.R,{message:y,chatRoom:t,currentParticipant:x,participants:Q,isParentMessage:!0,chatThreadsEnabled:!0,isRenderedOnHeader:l,chatRoomUrl:F}),H&&(0,_.jsx)("button",{type:"submit",className:"ml-5 hover:underline",onClick:function(){return c({parentMessage:y,threadMessageId:j[0].id})},children:(0,_.jsx)(g.Z.LabelXs,{color:"text-selector-active",weight:"medium",children:G>1?(0,h.t)("threads.show_more_replies",{repliesCount:G}):(0,h.t)("threads.show_one_more_reply")})})]}),j.map((function(e){return(0,_.jsx)("div",{className:"border-primary py-1 first:rounded-t-lg last:rounded-b-lg",children:(0,_.jsx)(N.R,{message:e,chatRoom:t,currentParticipant:x,participants:Q,chatThreadsEnabled:!0,isRenderedOnHeader:l,chatRoomUrl:F})},e.id)})),(0,_.jsx)(O.df,{as:"div",onChange:function(e){return i(e,a)},children:(0,_.jsx)("div",{id:R,className:"invisible"})}),(0,_.jsx)(A.F,{chatRoom:t,parentMessageId:y.id,spaceId:null===m||void 0===m?void 0:m.id,userList:[]})]})]})},y.id)},W=r(11960),Z=function(e){var t=e.unreadChatThreadIds,r=e.isTopButton,n=void 0!==r&&r,i=(0,W.k)().shouldShowTrialBanner,a=t.length;return 0===a?null:(0,_.jsx)("div",{className:o()("sticky left-0 z-10 flex w-full items-center justify-center",{"top-20":n&&i,"top-[74px]":n&&!i,"bottom-6":!n}),children:(0,_.jsx)("button",{type:"submit",className:"bg-brand rounded-2xl px-2.5 py-1 text-xs font-semibold leading-5 text-white hover:opacity-90",onClick:function(){return e=t[0],void document.getElementById(e).scrollIntoView({behavior:"smooth",block:"center"});var e},children:1===a?(0,h.t)(n?"unread_thread_at_top":"unread_thread"):(0,h.t)(n?"unread_threads_at_top":"unread_threads",{unread_count:a})})})};function J(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"===typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var X=function(e){var t=e.isRenderedOnHeader,r=void 0!==t&&t,i=(0,u.N3)(),h=$((0,f.R)(l.i,!0),2),v=h[0],y=h[1],g=$((0,n.useState)({parentMessage:null,threadMessageId:null}),2),O=g[0],S=g[1],P=$((0,n.useState)(new Set),2),C=P[0],k=P[1],N=(0,d.rZ)().unreadChatThreadIds,I=(0,d.Mk)(),A=I.chatThreads,E=I.setChatThreads,D=I.isLoading,T=I.hasNextPage,L=I.fetchNextPage,R=I.isChatThreadsAvailable,B=I.onEventReceive,F=I.handleReactionFromWebsocket,V=(0,d.nw)({parentMessage:O.parentMessage,threadMessageId:O.threadMessageId,successCallback:function(){S({parentMessage:null,threadMessageId:null})}}).threadMessages,q=void 0===V?[]:V,G=(0,u.nT)(),W=G.records,Q=G.isLoading;(0,n.useEffect)((function(){k((function(e){return new Set([].concat(J(e),J(N)))}))}),[N]),(0,n.useEffect)((function(){q.length>0&&E(function(e,t){var r=t[0].parent_message_id;return e.map((function(e){return e.parent_message.id===r?U(U({},e),{},{replies:(0,w.uniqBy)([].concat(M(t),M(e.replies)),"id")}):e}))}(A,q))}),[q]),(0,s.s)({channel:"Chats::CommunityMemberThreadsChannel",onMessageReceive:function(e){"newMessage"===e.event&&K(e.json_message),B(e)},community_member_id:null===i||void 0===i?void 0:i.id,canCreateConnection:Boolean(null===i||void 0===i?void 0:i.id)},[]),(0,s.s)({channel:"ChatRoomChannel",onMessageReceive:function(e){"createReaction"!==e.event&&"destroyReaction"!==e.event||F(e)},community_member_id:null===i||void 0===i?void 0:i.id,canCreateConnection:Boolean(null===i||void 0===i?void 0:i.id)},[null===i||void 0===i?void 0:i.id]);var K=function(e){var t=e.chat_thread_id;if(t){var r=document.getElementById(t);(0,p.z)(r)&&!e.unread_flow&&(0,c.ex)(t)}},X=function(e,t){if(e){var r=t.parent_message;N.includes(r.chat_thread_id)&&(0,c.ex)(r.chat_thread_id)}};if((D||Q)&&!R)return(0,_.jsx)(b.gi,{variant:r?"chat-threads-list-header":"chat-threads-list-page"});if(!R)return(0,_.jsx)(x,{});var Y=function(e,t){var r=[],n=[];return e.forEach((function(e){var t=document.getElementById(e);t&&(t.getBoundingClientRect().top>0?n.push(e):r.push(e))})),n=z(n,t),{unreadThreadIdsAtTop:r=z(r,t,!0),unreadThreadIdsAtBottom:n}}(N,A),ee=Y.unreadThreadIdsAtTop,te=Y.unreadThreadIdsAtBottom;return(0,_.jsxs)("div",{className:"w-full",id:"threads-scroll-view",children:[(0,_.jsx)(Z,{unreadChatThreadIds:ee,isTopButton:!0}),(0,_.jsx)(j,{shouldShowChatThreadsBanner:v&&!r,hideBanner:function(){return y(!1)}}),(0,_.jsx)(a.Z,{style:{overflow:"auto"},scrollThreshold:.8,next:L,hasMore:T,dataLength:A.length,className:o()({"mb-14 px-3 py-6 md:px-6 lg:mb-0":!r,"mb-4 flex flex-col gap-y-2":r}),scrollableTarget:r?"chat-threads-header":"panel",loader:(0,_.jsx)(m.a,{center:!0}),children:A.map((function(e){var t=e.parent_message,n=e.current_participant,i=e.chat_room,o=i.embedded_space_id,a=i.name,s=i.kind,c=i.lesson,l=t.chat_room_uuid,u=t.id,d=W.find((function(e){return e.id===o})),p={uuid:l,current_participant:n,chat_room_kind:s,embedded_space:d,roomName:d?d.name:a,lesson:c};return(0,_.jsx)(H,{chatRoomData:p,newBadgeIds:C,handleWhenThreadInViewPort:X,thread:e,space:d,setSelectedReply:S,isRenderedOnHeader:r},u)}))}),(0,_.jsx)(Z,{unreadChatThreadIds:te})]})}},24587:(e,t,r)=>{"use strict";r.d(t,{C:()=>s});var n=r(67142),i=r(94184),o=r.n(i),a=r(85893),s=function(e){var t=e.user1,r=e.user2,i=e.className,s=void 0===i?"":i,c=[{name:(null===t||void 0===t?void 0:t.name)||"",src:(null===t||void 0===t?void 0:t.avatar_url)||""},{name:(null===r||void 0===r?void 0:r.name)||"",src:(null===r||void 0===r?void 0:r.avatar_url)||""}];return(0,a.jsx)("div",{className:o()("border-tertiary group-hover:border-hover mr-2.5",s),children:(0,a.jsx)(n.Lt,{users:c})})}},47372:(e,t,r)=>{"use strict";r.d(t,{t:()=>o});var n=r(86013),i=r(85893),o=function(){return(0,i.jsxs)("div",{className:"flex h-full flex-col items-center justify-center",children:[(0,i.jsx)("div",{className:"text-darkest mb-2 text-xl font-semibold",children:(0,n.t)("messaging.no_messages")}),(0,i.jsx)("div",{className:"text-default text-sm",children:(0,n.t)("messaging.type_name")})]})}},61180:(e,t,r)=>{"use strict";r.d(t,{hC:()=>n,F0:()=>i,Ro:()=>o});var n=function(e){window.setTimeout((function(){var t=document.querySelector(a(e));if(t){t.querySelector("input").setAttribute("checked",!0),t.classList.add("just-added"),t.parentNode.parentNode.classList.add("parent-just-added"),t.scrollIntoView()}}),500)},i=function(){var e=o();e&&n(e)},o=function(){return(window.location.hash||"").split("#comment_wrapper_")[1]},a=function(e){return"#".concat("comment_wrapper_").concat(e)}},62128:(e,t,r)=>{"use strict";r.d(t,{tV:()=>ne,B2:()=>ie,ZP:()=>oe});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r(49326),c=r(86078),l=r(94184),u=r.n(l),d=r(22229),p=r(45578),f=r.n(p),m=r(38870),b=r(55675),h=r(34128),v=r(66047),y=r(85893);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=(0,o.forwardRef)((function(e,t){var r=e.space,n=e.post,c=e.parent_comment_id,l=e.communityMember,d=e.onNewComment,p=(0,o.useRef)(null),f=w((0,o.useState)(0),2),g=f[0],j=f[1],O=w((0,o.useState)(""),2),S=O[0],P=O[1],C=w((0,o.useState)(!1),2),k=C[0],N=C[1];if(null===n||void 0===n||!n.is_comments_enabled||!l||null===r||void 0===r||!r.id)return null;var I=u()("post__reply",{"reply-to-parent":!!c,"reply-to-post":!c}),A=function(){var e,t=(e=i().mark((function e(t){var r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),S&&!k){e.next=3;break}return e.abrupt("return");case 3:return N(!0),r={comment:{body:S,parent_comment_id:c,post_id:n.id}},e.next=7,(0,h.t5)((0,s.k3)(),{method:"POST",body:JSON.stringify(r)});case 7:if(!(o=e.sent).ok){e.next=17;break}return P(""),e.next=12,o.json();case 12:a=e.sent,j(g+1),d&&d(_(_({},a.comment),{},{html:a.comment_html})),window.loadOembed&&window.loadOembed(),N(!1);case 17:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){x(o,n,i,a,s,"next",e)}function s(e){x(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,y.jsxs)("div",{role:"button",ref:p,className:I,onClick:function(){l||(window.location.href=(0,s.j)({params:{alert:"Hey, there! You need to sign in to write a comment."}}))},onKeyDown:function(e){"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&A(e)},tabIndex:0,children:[(0,y.jsx)(m.s,{src:l.avatar_url,name:l.name,size:"10"}),(0,y.jsxs)("form",{onSubmit:A,children:[(0,y.jsx)(v.Z,{ref:t,id:"comment-body-".concat(n.id),placeholder:(0,a.t)("write_a_comment"),name:"body",is_private_space:r.is_private,space_id:r.id,dataIsPrivateSpace:r.is_private,dataSpaceId:r.id,value:S,onChange:function(e){P(e.target.innerHTML)}},g),(0,y.jsx)("div",{className:"btn-post-reply absolute bottom-4 right-4",children:(0,y.jsx)(b.z,{variant:"primary",type:"submit",disabled:!S,children:(0,a.t)("comments.post")})})]})]})}));S.displayName="Form";var P=r(61180);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var L=function(e){var t=E((0,o.useState)(e.comments||[]),2),r=t[0],n=t[1],l=E((0,o.useState)(e.parent_comment_id?0:1),2),u=l[0],d=l[1],p=!e.parent_comment||parseInt(e.parent_comment.replies_count,10)>r.length,m=E((0,o.useState)(p),2),b=m[0],h=m[1],v=E((0,o.useState)(!e.parent_comment_id&&b),2),g=v[0],_=v[1],j=E((0,o.useState)(!1),2),x=j[0],w=j[1];(0,o.useEffect)((function(){var t=function(){var t,o=(t=i().mark((function t(){var o,a,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b){t.next=2;break}return t.abrupt("return");case 2:if(0!==u||!r.length){t.next=4;break}return t.abrupt("return");case 4:return o={page:u||1,per_page:10},e.parent_comment_id&&(o.parent_comment_id=e.parent_comment_id),t.next=10,fetch(s.av.comments.index({postId:e.post.id,params:o}));case 10:if(!(a=t.sent).ok){t.next=22;break}return t.next=14,a.json();case 14:c=t.sent,n(f()([].concat(I(r),I(c.records)),"id")),h(c.has_next_page),_(!1),e.onPageChange&&e.onPageChange(u),setTimeout(window.initialiseTippy,300),t.next=23;break;case 22:_(!1);case 23:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){A(o,n,i,a,s,"next",e)}function s(e){A(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();t()}),[u]),(0,o.useEffect)((function(){g||x||e.parent_comment_id||(w(!0),(0,P.F0)())}),[g,x,e.parent_comment_id]);var O=e.parent_comment_id?(0,a.t)("comments.list.show_more_replies"):(0,a.t)("comments.list.show_more_comments"),C=e.parent_comment_id?"load-more__replies":"btn btn-secondary load-more__comments";return(0,y.jsxs)(y.Fragment,{children:[r.map((function(t){return(0,y.jsx)(W,k(k({},e),{},{comment:t}),t.id)})),g&&(0,y.jsx)(c.m,{}),!g&&b&&(0,y.jsx)("div",{className:"load-more",children:(0,y.jsx)("a",{href:"#load-more",onClick:function(e){e.preventDefault(),d(u+1)},className:C,children:O})}),Boolean(null===e||void 0===e?void 0:e.showReplyForm)&&(0,y.jsx)(S,{post:e.post,space:e.space,communityMember:e.communityMember,parent_comment_id:e.parent_comment_id,onNewComment:function(e){n([].concat(I(r),[e]))},isPost:!0,ref:e.formRef})]})};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B=function(e){return e.post.is_comments_enabled?(0,y.jsx)(L,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)):null},U=["comment","communityMember","defaultShowReplyForm"];function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var W=function(e){var t=e.comment,r=e.communityMember,n=e.defaultShowReplyForm,i=void 0!==n&&n,a=H(e,U),c=(0,o.useRef)(null),l=window.location.href,p=(0,o.useCallback)((function(e){null!==e&&(0,d.J)(e)}),[l]),f=q((0,o.useState)(i),2),m=f[0],b=f[1],h=q((0,o.useState)(),2),v=h[0],g=h[1],_=(0,o.useRef)(null);(0,o.useEffect)((function(){if(c.current){var e=function(e){if(e.preventDefault(),r){b(!0);var t=e.currentTarget.dataset,n=t.sgid,i=t.content,o=t.name;n&&setTimeout((function(){if(_.current.focus(),_.current.shouldInsert(n)){var e=_.current.editorRef.current.editor.composition;e.attachments.forEach((function(t){e.removeAttachment(t)})),_.current.insertMention({sgid:n,content:i,name:o})}}),100)}else window.location.push((0,s.j)({params:{notice:I18n.t("comments.log_in_to_add_a_comment")}}))};return c.current.querySelectorAll('[data-action="toggle-reply-box"]').forEach((function(t){t.addEventListener("click",e)})),function(){c.current.querySelectorAll('[data-action="toggle-reply-box"]').forEach((function(t){t.removeEventListener("click",e)}))}}}),[c,b,m,v,_,_.current]);var j=u()("post--comment comment--".concat(t.id)),x="comment_wrapper_".concat(t.id);return(0,y.jsxs)("div",{ref:c,className:j,id:x,children:[(0,y.jsx)("div",{"data-controller":"trix-attachment-preview",children:(0,y.jsx)("div",{className:"text-dark",ref:p})}),Boolean(!(null!==t&&void 0!==t&&t.parent_comment_id))&&(0,y.jsx)("div",{className:"post__replies",children:(0,y.jsx)(B,z(z({},a),{},{communityMember:r,comments:t.replies,hasNextPage:t.replies_count>1,parent_comment_id:t.id,parent_comment:t,showReplyForm:m,onPageChange:g,formRef:_}))})]})},Z=["post"],J=["post","id"];function $(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var re=function(e){var t=e.post,r=e.id,n=te(e,J),l=Q((0,o.useState)(!0),2),u=l[0],d=l[1],p=Q((0,o.useState)(null),2),f=p[0],m=p[1];return(0,o.useEffect)((function(){var e=function(){var e,n=(e=i().mark((function e(){var n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s.av.comments.commentHierarchy({postId:t.id,id:r}));case 2:if(!(n=e.sent).ok){e.next=13;break}return e.next=6,n.json();case 6:o=e.sent,m(o),d(!1),setTimeout(window.initialiseTippy,300),(0,P.hC)(r),e.next=14;break;case 13:d(!1);case 14:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){$(o,n,i,a,s,"next",e)}function s(e){$(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();e()}),[]),u?(0,y.jsx)(c.m,{}):f?(0,y.jsx)(W,Y({comment:f,defaultShowReplyForm:!0,post:t,id:r},n),f.id):(0,y.jsx)("div",{className:"post__comment-not-found alert alert-warning",children:(0,a.t)("comments.hierarchy.not_found")})},ne=S,ie=B;const oe={Form:S,CommentsList:B,CommentHierarchy:function(e){var t=e.post,r=te(e,Z);return null!==t&&void 0!==t&&t.is_comments_enabled?(0,y.jsx)(re,Y({post:t},r)):null}}},44920:(e,t,r)=>{"use strict";r.d(t,{zU:()=>_e,iD:()=>ye,gg:()=>je,kc:()=>Ce});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r(23560),c=r.n(s),l=r(88767),u=r(1320),d=r(41609),p=r.n(d),f=r(97012),m=r(55675),b=r(71299),h=r(71362),v=r(61926),y=r(5295),g=r(21809),_=r(85893);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}var O=function(e){var t=w({},e);return(0,_.jsx)(v.l.Item,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({translationRoot:"settings.branding_form",hideDescription:!0,hideBorder:!0,fullWidth:!0,tooltipText:(0,a.t)("settings.branding_form.".concat(t.name,"_tooltip"))},t))},S=["name"];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var I=/^#[0-9A-Fa-f]{6}$/,A=function(e){var t=e.name,r=N(e,S);return(0,_.jsx)(O,C(C({name:t,variant:"extra-bottom-margin",rules:{required:(0,a.t)("settings.branding_form.prefs.brand_color_required"),pattern:{value:I,message:(0,a.t)("settings.branding_form.prefs.brand_color_invalid")}}},r),{},{children:(0,_.jsx)(v.l.ColorPicker,{name:t})}))};function E(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var D=function(e){var t=e.label;return(0,_.jsx)(m.z,{type:"button",variant:"secondary",full:!0,children:t})};const T=function(){var e,t,r=(0,f.wh)(),n=r.currentCommunity,o=r.isLoading,s=Ce().updateStepIfIncomplete,c=(0,g.p)(),d=c.success,j=c.error,x=(0,l.useMutation)((function(e){return u.$.update({community:e})}),{onSuccess:(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(I18n.t("settings.branding_form.saved_successfully")),e.next=3,s(ye.customize_branding);case 3:window.location.reload();case 4:case"end":return e.stop()}}),e)})),t=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){E(o,n,i,a,s,"next",e)}function s(e){E(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return t.apply(this,arguments)}),onError:function(e){j(e.message)}});if(o||p()(n))return(0,_.jsx)(y.a,{center:!0});var w={prefs:{brand_color:n.prefs.brand_color},logo:n.logo,icon:n.icon};return(0,_.jsxs)(v.l,{onSubmit:x.mutate,defaultValues:w,className:"branding-drawer__form",children:[(0,_.jsxs)("div",{className:"branding-drawer__container",children:[(0,_.jsx)(A,{name:"prefs.brand_color.light"}),(0,_.jsx)(O,{name:"logo",variant:"extra-bottom-margin",children:(0,_.jsx)("div",{className:"branding-cover-image branding-cover-image__logo",children:(0,_.jsx)(b.D,{name:"logo",alt:"",showAddCoverBtn:!0,customAddCoverBtn:(0,_.jsx)(D,{label:(0,a.t)("settings.branding_form.upload_logo")}),changeImageText:(0,a.t)("replace"),aspectRatio:4,hideUnsplash:!0,hideEmbedUrl:!0})})}),(0,_.jsx)(O,{name:"icon",variant:"extra-bottom-margin",children:(0,_.jsx)("div",{className:"branding-cover-image branding-cover-image__icon",children:(0,_.jsx)(b.D,{name:"icon",alt:"",showAddCoverBtn:!0,customAddCoverBtn:(0,_.jsx)(D,{label:(0,a.t)("settings.branding_form.upload_icon")}),changeImageText:(0,a.t)("replace"),aspectRatio:1,hideUnsplash:!0,hideEmbedUrl:!0})})})]}),(0,_.jsx)(h.d.Footer,{sticky:!0,children:(0,_.jsx)(m.z,{type:"submit",variant:"primary",disabled:x.isLoading,full:!0,children:x.isLoading?I18n.t("saving"):I18n.t("save")})})]})};var L=r(72675),M=function(){var e=(0,L.dd)();return(0,_.jsx)(h.d,{noWrapperPadding:!0,fixedHeader:!0,maskClosable:!1,title:(0,a.t)("settings.branding_form.title"),open:e.visible,onClose:e.hide,children:(0,_.jsx)(T,{})})},R=L.gk.create((function(){return(0,_.jsx)(M,{})})),B=r(4039),U=r(31889),F=r(65771),z=r(30887),V=r(34128),q=r(49326),G=r(84761),H=r(69853),W=r(1114),Z=r(7985);function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(){return Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q.apply(this,arguments)}var K,X,Y,ee=function(e){var t=Q({},e);return(0,_.jsx)(v.l.Item,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({hideDescription:!0,hideBorder:!0,fullWidth:!0,translationRoot:"account.profile_form",variant:"extra-bottom-margin"},t))},te=r(2789),re=function(){var e=(0,f.wh)().currentCommunity,t=void 0===e?{}:e,r=null===t||void 0===t?void 0:t.community_member_locale_setting_enabled,n=(0,Z.V)();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(te.C,{title:(0,a.t)("upload_a_profile_photo")}),(0,_.jsx)(ee,{name:"name",children:(0,_.jsx)(v.l.Input,{"data-testid":"profile_name"})}),(0,_.jsx)(ee,{name:"headline",children:(0,_.jsx)(v.l.Input,{"data-testid":"profile_headline"})}),(0,_.jsx)(ee,{name:"bio",children:(0,_.jsx)(v.l.TextArea,{name:"bio","data-testid":"profile_bio"})}),(0,_.jsx)(ee,{name:"profile_info.location",children:(0,_.jsx)(v.l.Input,{"data-testid":"profile_location"})}),(0,_.jsx)(ee,{label:(0,a.t)("time_zone"),name:"time_zone",children:(0,_.jsx)(v.l.SelectNative,{name:"time_zone",options:W.W})}),r&&(0,_.jsx)(ee,{label:(0,a.t)("locale"),name:"locale",children:(0,_.jsx)(v.l.SelectNative,{name:"locale",options:H.h})}),!n&&(0,_.jsx)(ee,{name:"preferences.make_my_email_public",inline:!0,children:(0,_.jsx)(v.l.ToggleSwitch,{name:"preferences.make_my_email_public",variant:"small"})}),(0,_.jsx)(ee,{name:"preferences.visible_in_member_directory",inline:!0,children:(0,_.jsx)(v.l.ToggleSwitch,{name:"preferences.visible_in_member_directory",variant:"small"})})]})},ne=r(87536),ie=r(88634),oe=function(e){var t=e.label,r=void 0===t?(0,a.t)("checkbox"):t,n=(0,ne.Gc)().control,i=(0,ie.wh)().currentCommunity.messaging_enabled,o=i?(0,a.t)("account.member_edit_profile_form.messaging_disabled_tooltip"):(0,a.t)("account.member_edit_profile_form.direct_messaging_turned_off");return(0,_.jsx)(ee,{name:"preferences.messaging_enabled",tooltipText:o,disabled:!i,inline:!0,children:(0,_.jsx)(ne.Qr,{name:"preferences.messaging_enabled",control:n,render:function(e){var t=e.field,n=t.onChange,o=t.value,a=t.name;return(0,_.jsxs)("div",{className:"toggle-switch toggle-switch--small",id:"messaging_enabled",children:[(0,_.jsx)("input",{type:"checkbox",name:a,id:"checkbox-".concat(a),checked:!o,onChange:function(e){return n(!e.target.checked)},disabled:!i}),(0,_.jsx)("label",{htmlFor:"checkbox-".concat(a),children:(0,_.jsx)("span",{className:"sr-only",children:r})})]})}})})},ae=r(616),se=["website","twitter_url","facebook_url","instagram_url","linkedin_url"],ce=function(){return(0,_.jsx)(_.Fragment,{children:se.map((function(e){return(0,_.jsx)(ee,{name:"profile_info.".concat(e),children:(0,_.jsx)(ae.R,{name:"profile_info.".concat(e)})},e)}))})},le=r(87561),ue=r(80812),de=le.Ry().shape({name:le.Z_().trim().required(ue.Z.t("account.profile_form.error.name")).max(255,ue.Z.t("account.profile_form.error.max_name")),headline:le.Z_().trim().max(255,ue.Z.t("account.profile_form.error.max_headline")).nullable().optional(),bio:le.Z_().trim().max(4096,ue.Z.t("account.profile_form.error.max_bio")).nullable().optional(),profile_info:le.Ry({website:le.Z_().url(ue.Z.t("account.profile_form.error.website")).nullable().optional(),twitter_url:le.Z_().url(ue.Z.t("account.profile_form.error.twitter_url")).nullable().optional(),facebook_url:le.Z_().url(ue.Z.t("account.profile_form.error.facebook_url")).nullable().optional(),instagram_url:le.Z_().url(ue.Z.t("account.profile_form.error.instagram_url")).nullable().optional(),linkedin_url:le.Z_().url(ue.Z.t("account.profile_form.error.linkedin_url")).nullable().optional()})}),pe=function(e){var t=e.onClose,r=e.onSuccess,n=(0,g.p)(),i=n.success,o=n.error,s=(0,f.wh)().currentCommunityMember,u=(0,l.useMutation)((function(e){return(0,V.aU)(q.av.profile.update({memberPublicId:s.public_uid}),{community_member:e})}),{onSuccess:function(){c()(r)&&r(),i((0,a.t)("profile_saved_successfully")),c()(t)&&t(),window.location.reload()},onError:function(e){o(e.message)}});return(0,_.jsxs)(v.l,{onSubmit:u.mutate,defaultValues:s,className:"create-space__form",validationSchema:de,children:[(0,_.jsx)(h.d.Header,{addHeaderPadding:!0,title:(0,a.t)("profile"),Actions:(0,_.jsxs)("button",{type:"submit",className:"close-button",onClick:t,children:[(0,_.jsx)(z.JO,{type:"close"}),(0,_.jsx)("span",{className:"sr-only",children:(0,a.t)("drawer.close_panel")})]}),fixed:!0}),(0,_.jsx)("div",{className:"create-space__container profile-form__wrapper",children:(0,_.jsxs)(G.U,{children:[(0,_.jsx)(G.U.Item,{title:(0,a.t)("account.profile_form.tabs.basic"),children:(0,_.jsx)(re,{currentCommunityMember:s})}),(0,_.jsx)(G.U.Item,{title:(0,a.t)("account.profile_form.tabs.social"),children:(0,_.jsx)(ce,{})}),(0,_.jsx)(G.U.Item,{title:(0,a.t)("account.profile_form.tabs.permissions"),children:(0,_.jsx)(oe,{})})]})}),(0,_.jsx)(h.d.Footer,{sticky:!0,children:(0,_.jsx)(m.z,{type:"submit",variant:"primary",disabled:u.isLoading,full:!0,children:u.isLoading?(0,a.t)("saving"):(0,a.t)("save")})})]})},fe=function(){var e=(0,L.dd)(),t=Ce().updateStepIfIncomplete;return(0,_.jsx)(h.d,{hideHeader:!0,noWrapperPadding:!0,open:e.visible,onClose:e.hide,children:(0,_.jsx)(pe,{onClose:e.hide,onSuccess:function(){t(ye.profile_completed)}})})},me=L.gk.create((function(){return(0,_.jsx)(fe,{})}));function be(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function he(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){be(o,n,i,a,s,"next",e)}function s(e){be(o,n,i,a,s,"throw",e)}a(void 0)}))}}function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ye=Object.freeze({basic_group:"basic_group",setup_paywall_group:"setup_paywall_group",invite_member_group:"invite_member_group",engage_community_group:"engage_community_group",join_circle_community_group:"join_circle_community_group",profile_completed:"profile_completed",customize_branding:"customize_branding",setup_spaces_group:"setup_spaces_group",browse_examples:"browse_examples",update_notifications:"update_notifications",default_space:"default_space",confirm_community_access:"confirm_community_access",create_paywall:"create_paywall",customize_onboarding:"customize_onboarding",invite_first_member:"invite_first_member",onboarding_completed:"onboarding_completed",download_app:"download_app",customize_home:"customize_home",create_event:"create_event",first_week_action:"first_week_action",start_conversation:"start_conversation",engagement_means:"engagement_means"}),ge=new Set([ye.customize_branding,ye.profile_completed]),_e=function(e){return ge.has(e)},je=Object.freeze({basic_group:{label:(0,a.t)("community_onboarding.basics"),queryParam:"basic_group"},setup_paywall_group:{label:(0,a.t)("community_onboarding.setup_a_paywall"),queryParam:"setup_paywall_group"},invite_member_group:{label:(0,a.t)("community_onboarding.invite_your_first_members"),queryParam:"invite_member_group"}}),xe=Object.freeze((ve(K={},ye.basic_group,[ye.profile_completed,ye.customize_branding,ye.confirm_community_access]),ve(K,ye.setup_spaces_group,[ye.browse_examples,ye.update_notifications,ye.default_space]),ve(K,ye.setup_paywall_group,[ye.create_paywall]),ve(K,ye.invite_member_group,[ye.customize_onboarding,ye.invite_first_member]),ve(K,ye.engage_community_group,[ye.download_app,ye.customize_home,ye.create_event,ye.first_week_action,ye.start_conversation,ye.engagement_means]),ve(K,"join_circle_community_group",[ye.join_circle_community_group]),K)),we=Object.freeze((ve(X={},ye.engage_community_group,null),ve(X,ye.join_circle_community_group,(function(e){var t=e.isCommunityOnTrial;return window.location.href=t?"/settings/plans":"https://community.circle.so/home"})),ve(X,ye.profile_completed,(function(e){var t=e.openEditProfileDrawer;return t&&t()})),ve(X,ye.customize_branding,(function(e){var t=e.openCustomiseBrandingDrawer;return t&&t()})),ve(X,ye.setup_spaces_group,null),ve(X,ye.browse_examples,null),ve(X,ye.default_space,null),ve(X,ye.update_notifications,null),ve(X,ye.confirm_community_access,null),ve(X,ye.create_paywall,(function(){return window.location.href="/settings/paywalls"})),ve(X,ye.customize_onboarding,(function(){return window.location.href="/settings/onboarding"})),ve(X,ye.invite_first_member,null),ve(X,ye.download_app,null),ve(X,ye.customize_home,null),ve(X,ye.create_event,null),ve(X,ye.first_week_action,null),ve(X,ye.start_conversation,null),ve(X,ye.engagement_means,null),X)),Oe=function(e){return!!e.key},Se=Object.freeze((ve(Y={},ye.basic_group,Oe),ve(Y,ye.setup_paywall_group,(function(e){return e.hasPaywalls})),ve(Y,ye.invite_member_group,Oe),ve(Y,ye.engage_community_group,Oe),ve(Y,ye.join_circle_community_group,(function(e){return!e.isCommunityOnTrial})),ve(Y,ye.profile_completed,Oe),ve(Y,ye.customize_branding,Oe),ve(Y,ye.setup_spaces_group,Oe),ve(Y,ye.browse_examples,Oe),ve(Y,ye.update_notifications,Oe),ve(Y,ye.default_space,Oe),ve(Y,ye.confirm_community_access,Oe),ve(Y,ye.create_paywall,(function(e){return e.hasPaywalls})),ve(Y,ye.customize_onboarding,Oe),ve(Y,ye.download_app,Oe),ve(Y,ye.customize_home,Oe),ve(Y,ye.create_event,Oe),ve(Y,ye.first_week_action,Oe),ve(Y,ye.start_conversation,Oe),ve(Y,ye.engagement_means,Oe),ve(Y,ye.invite_first_member,Oe),ve(Y,ye.onboarding_completed,Oe),Y)),Pe=function(e){for(var t=0,r=Object.keys(xe);t<r.length;t++){var n=r[t];if(xe[n].includes(e))return n}},Ce=function(){var e=(0,f.wh)().currentCommunityMember,t=(0,B.g)().hasPaywalls,r=(0,g.p)(),n=r.success,s=r.error,d=(0,F.E)().isCommunityOnTrial,p=(0,L.dd)(R),m=(0,L.dd)(me),b={isCommunityOnTrial:d,openCustomiseBrandingDrawer:p.show,openEditProfileDrawer:m.show},h=(0,l.useQuery)("onboarding",u.$.getOnboarding,{notifyOnChangeProps:"tracked",retry:2,enabled:!!(0,U.vb)(e)}),v=h.data,y=h.refetch,_=h.isLoading,j=(0,l.useMutation)((function(e){var t=e.step;return u.$.completeOnboardingStep({onboarding:ve({},t,!0)})})).mutateAsync,x=(0,o.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;return xe[e].reduce((function(e,r){return!!t[r]&&e}),!0)}),[v]),w=(0,o.useCallback)(function(){var e=he(i().mark((function e(t){var r,n,o,a,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.step,n=t.skipMutation,!(void 0!==n&&n)){e.next=5;break}c()(we[r])&&we[r](b),e.next=24;break;case 5:return o=!0,e.prev=6,a=Pe(r),e.next=10,j({step:r});case 10:if(l=e.sent,!x(a,l)){e.next=14;break}return e.next=14,j({step:a});case 14:return c()(we[r])&&(o=!1,we[r](b)),e.abrupt("return",l);case 18:e.prev=18,e.t0=e.catch(6),s(e.t0.message);case 21:return e.prev=21,o&&y(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[6,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),[j]),O=(0,o.useCallback)((function(){return j({step:ye.onboarding_completed},{onSuccess:function(){n((0,a.t)("onboarding_hide_success"))}})}),[j,n]),S=(0,o.useCallback)((function(e){return!!v&&Se[e]({key:v[e],hasPaywalls:t,isCommunityOnTrial:d})}),[v,t,d]),P=(0,o.useMemo)((function(){return!!v&&!v[ye.onboarding_completed]}),[v]),C=(0,o.useCallback)((function(){return!!v&&Object.keys(je).reduce((function(e,t){return!!x(t)&&e}),!0)}),[v,x]),k=function(){var e=he(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(t)){e.next=3;break}return e.next=3,w({step:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{onboardingData:v,updateStep:w,isGroupComplete:x,isLoading:_,refetchOnboarding:y,isOnboardingAvailable:P,completeWholeOnboarding:O,areOnBoardingStepGroupsComplete:C,isStepCompleted:S,updateStepIfIncomplete:k}}},31514:(e,t,r)=>{"use strict";r.d(t,{M:()=>f});var n=r(94184),i=r.n(n),o=r(28175),a=r(36422),s=r(85893),c=["isActive","href","name"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.isActive,r=void 0!==t&&t,n=e.href,l=void 0===n?"#":n,d=e.name,f=p(e,c),m=(0,o.I)().isV3Enabled;return(0,s.jsx)("a",{"data-testid":"community-switcher-link",className:i()("switcher__icon",{active:r,"!mb-4":m}),href:l,"aria-label":d,children:(0,s.jsx)(a.G,u({includeName:!1,name:d},f))})}},7549:(e,t,r)=>{"use strict";r.d(t,{H:()=>_});var n=r(67294),i=r(24185),o=r(55259),a=r(74238),s=r(14578),c=r(97819),l=r(95172),u=r(20254),d=r(14834),p=r(6382),f=r(31514),m=r(85893),b=function(e){var t=e.community,r=e.token,i=e.index,o=(0,a.TC)().isDarkAppearance,s=t.id,c=t.is_current_community,b=t.root_url,h=t.name,v=t.brand_color,y=t.community_member_id,g=t.dark_icon_url,_=t.light_icon_url,j=o?g||_:_||"",x=(0,d.f)(),w=x.newNotificationCount,O=x.fetchNewNotificationsCount,S=x.onNotificationEventReceive,P=(0,p.K)({community:t}).unreadChatCount,C=function(){var e=new URL(b);return e.searchParams.set("automatic_login","true"),e.searchParams.set("token",r),e.toString()};return(0,n.useEffect)((function(){O(s)}),[]),(0,u.I)(y,S),(0,l.y1)("alt+g+".concat(i+1),(function(){window.location.href=C()}),{enabled:i+1<9}),(0,m.jsx)(f.M,{isActive:c,href:C(),icon_attachment_url:j,includeName:!1,brand_color:v,name:h,notificationCount:c?0:w+P,index:i})},h=r(80478),v=function(e){var t=e.isLoadingAppData,r=void 0!==t&&t,n=(0,s.U)(),i=n.communities,o=n.token,a=n.isLoadingCommunities,l=(0,c.W)(),u=r||a;return(0,m.jsx)(h.b,{isLoading:u,isCustomColorTheme:l,id:"community-switcher",children:i.map((function(e,t){return(0,m.jsx)(b,{community:e,token:o,index:t},e.id)}))})};function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=function(e){var t=(0,i.TH)().pathname,r=o.s.some((function(e){return t.includes(e)})),s=t.startsWith("/two_fa"),c=(0,a.wC)().display_community_switcher;return(0,n.useEffect)((function(){r?document.body.classList.remove("has-community-switcher"):c&&document.body.classList.add("has-community-switcher")}),[t,r,c]),r||s?null:(0,m.jsx)(v,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}},80478:(e,t,r)=>{"use strict";r.d(t,{b:()=>w});var n=r(94184),i=r.n(n),o=r(24185),a=r(28175),s=r(1227),c=r(74238),l=r(25067),u=r(91681),d=r(86013),p=r(88634),f=r(49326),m=r(30887),b=r(87958),h=r(85893),v=function(){var e=(0,p.N3)(),t=null===e||void 0===e?void 0:e.is_admin,r=(0,p.wh)().currentCommunity,n=window.location.href+"?pendo=0oguJmJrou1SpPPXRwwyzbd4Wlo",i=window.location.toString().includes("settings/plans"),o="Expired Trial"===(null===r||void 0===r?void 0:r.plan_status),a=t&&i&&o?n:(0,f.b$)();return(0,h.jsx)("div",{className:"relative mb-4 flex h-8 w-8",children:(0,h.jsx)(b.T,{content:(0,d.t)("create_new_community"),placement:"right",arrow:!1,offset:[0,16],interactive:!1,children:(0,h.jsx)("a",{className:"bg-c-header-hover text-c-sidebar focus:text-c-sidebar hover:text-c-sidebar flex h-10 w-10 cursor-pointer items-center justify-center rounded-lg uppercase transition-colors duration-200",href:a,children:(0,h.jsx)(m.JO,{type:"plus-v2",size:16})})})})},y=["isLoading","isCustomColorTheme","children","className"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var w=function(e){var t=e.isLoading,r=void 0===t||t,n=e.isCustomColorTheme,d=void 0!==n&&n,p=e.children,f=e.className,m=x(e,y),b=(0,u.RE)(),g=(0,c.TC)().isDarkAppearance,j=(0,o.$B)({path:"/analytics",exact:!1}),w=!g&&!d,O=g&&!d,S=d,P=(0,a.I)().isV3Enabled,C=(0,s.f)();return(0,h.jsxs)("div",_(_({"data-testid":"community-switcher-presentation",className:i()("community__switcher",f)},m),{},{children:[(0,h.jsx)(l.gi,{variant:"community-switcher",show:r},"community-switcher-loader"),!r&&(0,h.jsxs)("div",{"data-testid":"switcher-wrapper",className:i()("scrollbar-hide",{switcher__wrapper:!P,"w-18 h-full p-4":P,"!bg-c-switcher border-primary overflow-x-hidden border-r":w,"!bg-c-switcher border-c-sidebar overflow-hidden border-r":O,"!bg-c-sidebar overflow-hidden border-r":S,"!top-12":!j&&!C&&!P,"!top-24":!j&&C}),style:b,children:[p,(0,h.jsx)(v,{},"new-community-button")]})]}))}},60761:(e,t,r)=>{"use strict";r.d(t,{H:()=>n.H,P:()=>a});var n=r(7549),i=r(74238),o=r(85893),a=function(e){var t=e.isLoadingAppData,r=void 0!==t&&t;return(0,o.jsx)(i.e$,{backendProps:{community_theme_settings:{default_appearance:"light"}},children:(0,o.jsx)(n.H,{isLoadingAppData:r})})}},78250:(e,t,r)=>{"use strict";r.d(t,{O:()=>s});var n=r(86013),i=r(85893),o={zIndex:1e3},a=function(e){var t=e.isThirdParty,r=void 0!==t&&t,a=r?(0,n.t)("cookie_warning.third_party_cookies_disabled"):(0,n.t)("cookie_warning.cookies_disabled"),s=r?(0,n.t)("cookie_warning.how_enable_third_party_cookies"):(0,n.t)("cookie_warning.how_enable_cookies");return(0,i.jsx)("div",{className:"h-full w-full",style:o,children:(0,i.jsx)("div",{className:"alert alert-warning alert-cookie-warning",role:"alert",children:(0,i.jsxs)("div",{className:"alert-wrapper",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20","aria-hidden":!0,className:"alert-icon flex-no-shrink fill-current",children:(0,i.jsx)("path",{d:"M2 2c0-1.1.9-2 2-2h12a2 2 0 0 1 2 2v18l-8-4-8 4V2z"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{children:a}),(0,i.jsx)("p",{children:(0,i.jsx)("a",{href:"https://www.whatismybrowser.com/guides/how-to-enable-cookies/auto",target:"_parent",children:s})})]})]})})})},s=function(){return document.cookie?null:window.location!==window.parent.location?(0,i.jsx)(a,{isThirdParty:!0}):(0,i.jsx)(a,{})}},12006:(e,t,r)=>{"use strict";r.d(t,{C:()=>l});var n=r(86013),i=r(84761),o=r(27299),a=r(85893),s=function(e){var t=e.data;return(0,a.jsx)("div",{children:(0,a.jsx)("pre",{children:JSON.stringify(t,null,2)})})},c="success",l=function(e){var t=e.debug_session,r=e.debug_session_logs;return(0,a.jsx)("div",{className:"custom-login-debug-sessions",children:(0,a.jsx)("div",{className:"custom-login-debug-sessions-content",children:(0,a.jsxs)(o.s,{children:[(0,a.jsx)("div",{className:"alert alert-warning alert-cookie-warning",role:"alert",children:(0,a.jsx)("div",{className:"alert-wrapper",children:(0,a.jsx)("div",{children:(0,n.t)("custom_logins.debug_session_logs.experimental_feature_warning")})})}),(0,a.jsx)("br",{}),t.status===c&&(0,a.jsx)("div",{className:"alert alert-success",role:"alert",children:(0,a.jsx)("div",{className:"alert-wrapper",children:(0,a.jsx)("div",{children:(0,n.t)("custom_logins.debug_session_logs.success_sso")})})}),t.status!==c&&(0,a.jsx)("div",{className:"alert alert-error",role:"alert",children:(0,a.jsx)("div",{className:"alert-wrapper",children:(0,a.jsx)("div",{children:(0,n.t)("custom_logins.debug_session_logs.fail_sso")})})}),(0,a.jsx)("br",{}),(0,a.jsx)("h3",{children:(0,n.t)("custom_logins.debug_session_logs.logs")}),(0,a.jsx)("br",{}),r.map((function(e){var t=(0,n.t)("custom_logins.debug_session_logs.".concat(e.step)),r=e.status===c?null:t;return(0,a.jsx)(i.U,{defaultActiveItemTitle:r,children:(0,a.jsx)(i.U.Item,{title:t,showIcon:!0,isDone:e.status===c,children:e.context.map((function(e,t){return(0,a.jsx)(s,{data:e},t)}))})},e)}))]})})})}},25022:(e,t,r)=>{"use strict";r.d(t,{u:()=>sa});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r.n(a),c=r(96486),l=r(23560),u=r.n(l),d=r(73955),p=r.n(d),f=r(88767),m=r(24185),b=r(97012),h=r(94184),v=r.n(h),y=r(40160),g=r(87536),_=r(61645),j=r(61345),x=r(67732),w=r(61926),O=r(85893),S=function(e){var t=e.space,r=e.onChange,n=(0,g.Gc)(),i=n.watch,s=n.setValue,c=n.formState.dirtyFields,l=i("visible_tabs"),u=i("display_view"),d=i("show_right_sidebar"),p=i("hide_member_sidebar"),f="cards"===u,m=(0,j.H3)(t)&&!f,b=!f,h=(0,x.v)().isMobileWebNewSpaceCustomizationUIEnabled;(0,o.useEffect)((function(){("show_right_sidebar"in c||"hide_member_sidebar"in c||"visible_tabs"in c||"display_view"in c)&&r(!0)}),[c.visible_tabs,c.display_view,c.show_right_sidebar,c.hide_member_sidebar]),(0,o.useEffect)((function(){null!==l&&void 0!==l&&l.includes("members")?s("hide_member_sidebar",!0):s("hide_member_sidebar",!1)}),[t]),(0,o.useEffect)((function(){m&&s("visible_tabs",p?["posts","members"]:["posts"])}),[p,m]);var v=(0,j.qy)(t),y=(0,j.Ds)(t),S=v?["posts"]:[],P=h||y,C=(0,O.jsx)(w.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.customize.layout.label"),name:"display_view",variant:"extra-bottom-margin",children:(0,O.jsx)(w.l.RadioGroup,{fullWidth:!1,labelOutside:!P,options:h?(0,_.Jr)({excludedOptions:S,postType:t.post_type}):(0,_.Nn)({excludedOptions:S,postType:t.post_type}),optionAlignment:P?"row":"center",className:"!grid !grid-cols-1 sm:!grid sm:!grid-cols-3"})});return v||y?(0,O.jsx)("div",{children:C}):(0,O.jsxs)("div",{children:[C,b&&(0,O.jsx)(w.l.Item,{inlineReverse:!0,hideBorder:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.customize.right_sidebar"),name:"show_right_sidebar",shouldToggleValueOnLabelClick:!0,children:(0,O.jsx)(w.l.ToggleSwitch,{variant:"small"})}),m?(0,O.jsx)(w.l.Item,{inlineReverse:!0,hideBorder:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.customize.show_sidebar_members_block"),name:"hide_member_sidebar",isDisabled:!d,shouldToggleValueOnLabelClick:!0,children:(0,O.jsx)(w.l.ToggleSwitch,{disabled:!d,variant:"small"})}):null]})},P=function(e){var t=e.onChange,r=e.space,n=e.isEventSpaceCalendarViewEnabled,i=(0,g.Gc)().formState.dirtyFields,s=(0,x.v)().isMobileWebNewSpaceCustomizationUIEnabled;(0,o.useEffect)((function(){"display_view"in i&&t(!0)}),[i.display_view]);var c=n?[]:["calendar"];return(0,O.jsx)(w.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.customize.layout.label"),name:"display_view",variant:"extra-bottom-margin",children:(0,O.jsx)(w.l.RadioGroup,{variant:"box",name:"display_view",fullWidth:!1,labelOutside:!s,options:s?(0,_.Jr)({excludedOptions:c,postType:r.post_type}):(0,_.Nn)({excludedOptions:c,postType:r.post_type}),optionAlignment:s?"row":"center",className:v()("!grid",n?"!grid-cols-1 !gap-x-6 sm:!grid-cols-3":"!grid-cols-2 !gap-x-7")})})},C=r(79718),k=r(53448),N=function(e){var t=e.onChange,r=e.space,n=(0,b.e2)().records,i=(0,k.UV)().contentPortalElement,c=(0,g.Gc)().formState.dirtyFields;return(0,o.useEffect)((function(){("space_group_id"in c||"name"in c||"emoji"in c||"custom_emoji"in c||"event_auto_rsvp_enabled"in c||"chat_room_description"in c||"show_next_event"in c)&&t(!0)}),[c.space_group_id,c.name,c.emoji,c.custom_emoji,c.chat_room_description,c.event_auto_rsvp_enabled,c.show_next_event]),(0,O.jsxs)("div",{className:"grid grid-cols-1 gap-0 md:mt-4 md:gap-4",children:[(0,O.jsx)(w.l.Item,{name:"name",hideDescription:!0,translationRoot:"spaces.form.create.basic_info",rules:{required:(0,a.t)("spaces.form.edit.name_required"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,O.jsx)(w.l.Input,{prefix:(0,O.jsx)(w.l.EmojiPickerV3Wrapper,{record:r})})}),(0,O.jsx)(w.l.Item,{name:"space_group_id",translationRoot:"spaces.form.create.basic_info",hideDescription:!0,rules:{required:(0,a.t)("spaces.form.edit.choose_space_group"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,O.jsx)(C.V,{variant:"form-input",spaceGroups:n,name:"space_group_id",appendTo:i})}),(0,j.Ug)(r)&&(0,O.jsx)(w.l.Item,{name:"chat_room_description",hideBorder:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.customize.add_description"),placeholder:(0,a.t)("spaces.form.edit.customize.description_placeholder"),variant:"extra-bottom-margin",children:(0,O.jsx)(w.l.TextArea,{})}),(0,j.V5)(r)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(w.l.Item,{name:"event_auto_rsvp_enabled",label:s().t("spaces.form.event_auto_rsvp_enabled"),hideBorder:!0,hideDescription:!0,inline:!0,shouldToggleValueOnLabelClick:!0,children:(0,O.jsx)(w.l.ToggleSwitch,{variant:"small"})}),(0,O.jsx)(w.l.Item,{name:"show_next_event",label:s().t("spaces.form.show_next_event"),hideBorder:!0,hideDescription:!0,inline:!0,shouldToggleValueOnLabelClick:!0,children:(0,O.jsx)(w.l.ToggleSwitch,{variant:"small"})})]})]})},I=r(55825),A=function(e){var t=e.className,r=e.children,n=e.id;return(0,O.jsx)(I.Ar.Main,{id:n,className:"!bg-primary",children:(0,O.jsx)("div",{className:v()("mx-auto max-w-[45rem] p-0 md:px-0 lg:py-8",t),children:r})})},E=r(10029),D=function(e){var t=e.space,r=e.onChange,n=(0,I.eW)().setIsSaveButtonDisabled,i=((0,b.wh)().currentCommunitySettings||{}).space_directory_enabled,s=(0,g.Gc)(),c=s.formState.dirtyFields,l=s.watch,u=s.setValue,d=l("cover_image"),p=(0,x.v)().isMobileWebNewSpaceCustomizationUIEnabled;(0,o.useEffect)((function(){u("cover_image_visible",!!d)}),[d,u]);var f=!((0,j.Ug)(t)||(0,j.EG)(t)||(0,j.qy)(t));return(0,o.useEffect)((function(){("cover_image_visible"in c||"thumbnail_image"in c)&&r(!0)}),[c.cover_image_visible,c.thumbnail_image]),(0,O.jsxs)("div",{children:[f&&(0,O.jsx)(w.l.Item,{inline:!p,hideBorder:!0,label:(0,a.t)("spaces.form.edit.customize.cover_image"),name:"cover_image",description:(0,a.t)("spaces.form.edit.customize.cover_image_description"),className:"gap-x-6",children:(0,O.jsx)(E.a,{name:"cover_image",aspectRatio:43/9,onProcessing:function(e){return n(!!e)}})}),(!(0,j.Ug)(t)&&!(0,j.qy)(t)||i)&&(0,O.jsx)(w.l.Item,{inline:!p,hideBorder:!0,label:(0,a.t)("spaces.form.edit.customize.thumbnail_image"),name:"thumbnail_image",description:(0,j.EG)(t)?(0,a.t)("spaces.form.edit.customize.course_thumbnail_image_description"):(0,a.t)("spaces.form.edit.customize.thumbnail_image_description"),className:"gap-x-6",children:(0,O.jsx)(E.a,{name:"thumbnail_image",aspectRatio:16/9,onProcessing:function(e){return n(!!e)}})})]})},T=r(62730),L=r(93014),M=r(49646),R=function(e){var t=e.onChange,r=(0,g.Gc)().formState.dirtyFields;return(0,o.useEffect)((function(){"topics"in r&&t(!0)}),[r,r.topics]),(0,O.jsx)(M.w,{containerClassName:"bg-primary border-primary rounded-md border",sortable:!0,creatable:!0,maxTopicsAllowed:L.tt,name:"topics"})},B=r(78897),U=r(16743),F=r(13112),z=r(21809),V=r(17260),q=r(20007),G=r(49326),H=r(76034),W=r(59393),Z=r(63099),J=r(71032),$=r(77616),Q=r(56868),K=r(97646);function X(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function Y(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){X(o,n,i,a,s,"next",e)}function s(e){X(o,n,i,a,s,"throw",e)}a(void 0)}))}}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re="customize_space.welcome_banner",ne=function(e){var t=e.isLoggedIn,r=e.setDirty,n=e.onChange,s=e.spaceId,l=(0,z.p)(),u="".concat(t?"logged_in":"logged_out","_title"),d="".concat(t?"logged_in":"logged_out","_cover"),p="".concat(t?"logged_in":"logged_out","_description"),f=(0,H.m)().reSetWelcomeBannerPreference,m=ee((0,Z.k)(!1),2),b=m[0],h=m[1],y=(0,g.Gc)(),_=y.formState.dirtyFields,j=y.setValue,x=y.getValues,S=(0,g.qo)({name:"logged_in_banner_enabled"}),P=(0,g.qo)({name:"logged_out_banner_enabled"}),C=x(t?"logged_in_media_is_video":"logged_out_media_is_video"),k=(0,g.qo)({name:p}),N=(0,g.qo)({name:u}),I=(0,g.qo)({name:d}),A=t?S:P,E=t?"logged_in_banner_enabled":"logged_out_banner_enabled",D=t?"enable_for_logged_in_members":"enable_for_logged_out_members";return(0,o.useEffect)((function(){(u in _||p in _)&&n(!0)}),[_[u],_[p]]),(0,o.useEffect)((function(){var e=function(e){var t=(e||{}).body;if(!t)return!0;var r=(t||{}).content;return!r||!r.some((function(e){if("paragraph"===e.type&&e.content)return!0}))}(k)&&(0,c.isEmpty)(N)&&(0,c.isEmpty)(I);t?r("loggedIn",!(!S||!e)):r("loggedOut",!(!P||!e))}),[null===k||void 0===k?void 0:k.body,t,S,P,N,I]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(K.sI,{label:(0,a.t)([re,D]),field:E,value:A,onChange:function(){j(E,!A)},className:"mb-2 w-full text-lg font-bold",variant:"large"}),(0,O.jsxs)("div",{className:v()("mx-auto mt-4 flex h-full flex-col",{"cursor-not-allowed opacity-20":!A}),children:[(0,O.jsx)(q.y,{title:(0,a.t)([re,"cover_image"]),name:d,description:(0,a.t)([re,"cover_image_description"]),aspectRatio:W.pI.OPEN_GRAPH,disabled:!A,removeAttachmentsPath:G.av.spaces.destroy_welcome_banner_cover({id:s}),removeAttachmentsParams:{banner_type:t?"logged_in_space_welcome_banner":"logged_out_space_welcome_banner"},isVideo:C,isSpaceWelcomeBanner:!0}),(0,O.jsx)("div",{className:"-mt-1",children:(0,O.jsx)(w.l.Item,{name:u,hideDescription:!0,translationRoot:re,variant:"extra-bottom-margin",hideBorder:!0,fullWidth:!0,hidePlaceholder:!0,children:(0,O.jsx)(w.l.Input,{disabled:!A})})}),(0,O.jsx)("div",{className:"-mt-1",children:(0,O.jsx)(w.l.Item,{name:p,hideDescription:!0,translationRoot:re,variant:"extra-bottom-margin",hideBorder:!0,fullWidth:!0,hidePlaceholder:!0,children:(0,O.jsxs)("div",{className:"border-primary active:border-darkest focus-within:border-darkest h-full max-h-[400px] overflow-y-auto rounded-lg border px-4 py-3",children:[(0,O.jsx)($.$,{placeholder:(0,a.t)("customize_space.welcome_banner.write_a_description"),name:"".concat(p,".body"),toolbars:[{portalId:"welcome-banner-description-toolbar",component:Q.o}],className:"max-h-[350px] min-h-[100px] overflow-y-auto",editorClassName:"h-full",sgidToObjectMap:(null===k||void 0===k?void 0:k.sgids_to_object_map)||{},disabledExtensions:["poll","ai_copilot","mention","cta"]}),(0,O.jsx)("div",{id:"welcome-banner-description-toolbar"})]})})}),t&&(0,O.jsx)("div",{className:"flex flex-col",children:(0,O.jsx)(w.l.Item,{name:"allow_close",description:(0,O.jsxs)("div",{className:"pr-8",children:[(0,a.t)([re,"allow_close_description"]),(0,O.jsx)("button",{type:"button",onClick:function(){A&&h()},className:"ml-1 cursor-pointer text-sm underline hover:opacity-80",children:(0,a.t)([re,"reset_preference_title"])})]}),translationRoot:re,variant:"default",inlineReverse:!0,hideBorder:!0,fullWidth:!0,hidePlaceholder:!0,className:"!items-start",children:(0,O.jsx)(w.l.ToggleSwitch,{name:"allow_close",variant:"small",wrapperClass:"!mt-1"})})}),(0,O.jsx)(J.c,{isOpen:b,onClose:h,onConfirm:Y(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(s);case 2:h(),l.success((0,a.t)("space_welcome_banner.preferences_update_success"));case 4:case"end":return e.stop()}}),e)}))),confirmText:(0,a.t)("confirm"),title:(0,a.t)([re,"reset_preference_title"]),children:(0,O.jsx)("div",{className:"mb-6",children:(0,a.t)([re,"reset_preference_description"])})})]})]})},ie={logged_in:(0,a.t)("customize_space.welcome_banner.tabs.members"),logged_out:(0,a.t)("customize_space.welcome_banner.tabs.non_members")},oe=function(e){var t=e.setDirty,r=e.onChange,n=e.space;return"open"!==(0,g.qo)({name:"visibility"})?(0,O.jsx)("div",{className:"flex h-full w-full flex-col items-center gap-4 md:py-4",children:(0,O.jsx)(ne,{isLoggedIn:!0,setDirty:t,onChange:r,spaceId:null===n||void 0===n?void 0:n.id})}):(0,O.jsx)("div",{className:"flex h-full w-full flex-col items-center gap-4 md:py-4",children:(0,O.jsx)("section",{className:"w-full flex-1",children:(0,O.jsxs)(V.O.Group,{children:[(0,O.jsxs)(V.O.List,{children:[(0,O.jsx)(V.O,{type:"button",children:ie.logged_in}),(0,O.jsx)(V.O,{type:"button",children:ie.logged_out})]}),(0,O.jsxs)(V.O.Panels,{className:"-mx-1.5",children:[(0,O.jsx)(V.O.Panel,{className:"px-2 py-6",children:(0,O.jsx)(ne,{isLoggedIn:!0,setDirty:t,onChange:r,spaceId:null===n||void 0===n?void 0:n.id})}),(0,O.jsx)(V.O.Panel,{className:"px-2 py-6",children:(0,O.jsx)(ne,{isLoggedIn:!1,setDirty:t,onChange:r,spaceId:null===n||void 0===n?void 0:n.id})})]})]})})})},ae=function(e){var t=e.onChange,r=(0,g.Gc)().formState.dirtyFields;return(0,o.useEffect)((function(){"require_topic_selection"in r&&t(!0)}),[r.require_topic_selection]),(0,O.jsx)("div",{children:(0,O.jsx)(w.l.Item,{inlineReverse:!0,hideBorder:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.topics.require_topic_selection"),tooltipText:(0,a.t)("spaces.form.edit.topics.require_topic_selection_tooltip"),name:"require_topic_selection",shouldToggleValueOnLabelClick:!0,children:(0,O.jsx)(w.l.ToggleSwitch,{name:"require_topic_selection",variant:"small"})})})},se=r(30887),ce=function(e){var t=e.title,r=e.children;return(0,O.jsxs)(U.Z.BodySm,{color:"text-default",textAlign:"left",children:[(0,O.jsxs)("span",{className:"font-medium",children:[t,": "]}),r]})},le=function(e){var t=e.accessDesc,r=e.visibilityDesc,n=e.isAccessOpen,i=void 0!==n&&n,o=e.isVisibilityOpen,s=void 0===o||o;return(0,O.jsxs)("div",{className:"mt-3 grid gap-2 text-left text-sm",style:{gridTemplateColumns:"min-content auto"},children:[(0,O.jsx)(se.JO,{type:i?"16-lock-unlocked":"16-lock",size:16,className:"text-default mt-px !self-start"}),(0,O.jsx)(ce,{title:(0,a.t)("customize_space.access"),children:t}),(0,O.jsx)(se.JO,{type:s?"16-eye-visible":"16-eye-hidden",size:16,className:"text-default mt-px !self-start"}),(0,O.jsx)(ce,{title:(0,a.t)("customize_space.visibility"),children:r})]})},ue=[{label:(0,a.t)("spaces.form.create.visibility_types.open"),value:"open",description:(0,O.jsx)(le,{accessDesc:(0,a.t)("customize_space.access_form.open_access"),visibilityDesc:(0,a.t)("customize_space.access_form.open_visibility"),isAccessOpen:!0})},{label:(0,a.t)("spaces.form.create.visibility_types.private"),value:"private",description:(0,O.jsx)(le,{accessDesc:(0,a.t)("customize_space.access_form.private_access"),visibilityDesc:(0,a.t)("customize_space.access_form.private_visibility")})},{label:(0,a.t)("spaces.form.create.visibility_types.secret"),value:"secret",description:(0,O.jsx)(le,{accessDesc:(0,a.t)("customize_space.access_form.secret_access"),visibilityDesc:(0,a.t)("customize_space.access_form.secret_visibility")})}],de=function(e){var t=e.onChange,r=(0,g.Gc)().formState.dirtyFields,n="private"===(0,g.qo)({name:"visibility"}),i=(0,x.v)().isMobileWebNewSpaceCustomizationUIEnabled;return(0,o.useEffect)((function(){"visibility"in r&&t(!0)}),[r.visibility]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(w.l.Item,{name:"visibility",hideDescription:!0,rules:{required:(0,a.t)("spaces.form.create.choose_visibility"),maxLength:255},hideBorder:!0,hideLabel:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,O.jsx)(w.l.RadioGroup,{variant:i?"box":"radio",name:"visibility",options:ue,optionAlignment:"left"})}),n&&(0,O.jsx)(w.l.Item,{inlineReverse:!0,hideBorder:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.customize.show_lock_icon_to_non_members"),tooltipText:(0,a.t)("spaces.form.edit.customize.show_lock_icon_to_non_members_description"),name:"show_lock_icon_for_non_members",shouldToggleValueOnLabelClick:!0,children:(0,O.jsx)(w.l.ToggleSwitch,{variant:"small"})})]})},pe=r(54132),fe=function(){return(0,O.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,O.jsx)(pe.b,{type:"info",title:(0,a.t)("customize_space.draft_warning.title"),description:(0,O.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,O.jsx)(U.Z.BodySm,{children:(0,a.t)("customize_space.draft_warning.description")}),(0,O.jsx)(le,{accessDesc:(0,a.t)("customize_space.draft_warning.access"),visibilityDesc:(0,a.t)("customize_space.draft_warning.visibility"),isVisibilityOpen:!1})]})}),(0,O.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,O.jsx)(U.Z.LabelLg,{weight:"semibold",children:(0,a.t)("customize_space.draft_warning.form_title")}),(0,O.jsxs)(U.Z.BodySm,{children:[(0,a.t)("customize_space.draft_warning.form_description"),":"]})]})]})},me=function(e){var t=e.space,r=e.onChange,n=(0,j.EG)(t)&&(0,j.H)(t);return(0,O.jsx)(F.q,{title:(0,a.t)("customize_space.access"),dataTestId:"customize-space-access",variant:"fullScreen",children:(0,O.jsxs)("div",{className:"flex flex-col gap-y-2",children:[n&&(0,O.jsx)(fe,{}),(0,O.jsx)(de,{onChange:r})]})})},be=function(e){var t=e.isOpen,r=e.onClose,n=e.onConfirm,i=e.spaceType,o=(0,g.qo)({name:"visibility"}),s=(0,g.Gc)().resetField;return(0,O.jsxs)(J.c,{isOpen:t,title:(0,a.t)("spaces.form.create.change_draft_confirmation.title"),onClose:r,onCancel:function(){s("visibility"),r()},onConfirm:n,confirmVariant:"primary",confirmText:(0,a.t)("spaces.form.create.change_draft_confirmation.confirm_button",{spaceType:i}),children:[(0,a.t)("spaces.form.create.change_draft_confirmation.".concat(o))," ",(0,a.t)("spaces.form.create.change_draft_confirmation.wont_be_able_to_change")]})};function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ye(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oe=function(e){var t=e.space,r=(0,o.useRef)(),n=(0,z.p)(),s=xe((0,o.useState)({loggedIn:!1,loggedOut:!1}),2),c=s[0],l=s[1],d=(0,B.mx)(),p=d.dirtyForms,f=d.setDirtyForms,m=(0,I.eW)(),h=m.onSave,v=m.onExit,g=(0,j.Ug)(t),_=(0,j.qy)(t),x=(0,b.wh)().currentCommunitySettings||{},w=x.space_directory_enabled,C=x.space_description_enabled,k=x.topics_enabled,E=x.event_topics_enabled,L=x.event_space_calendar_view_enabled,M=((0,j.H3)(t)||(0,j.Ds)(t))&&k,V=(0,j.V5)(t)&&E,q=M||V,G=function(e){var t=he((0,Z.k)(!1),2),r=t[0],n=t[1],i=he((0,Z.k)(!1),2),a=i[0],s=i[1];return(0,o.useEffect)((function(){a&&u()(e)&&e()}),[a,e]),{shouldShowDraftAccessConfirmaModal:r,toggleDraftAccessConfirmaModal:n,isDraftAccessConfirmed:a,toggleIsDraftAccessConfirmed:s}}((0,o.useCallback)((function(){null===r||void 0===r||r.current()}),[r])),H=G.shouldShowDraftAccessConfirmaModal,W=G.toggleDraftAccessConfirmaModal,J=G.isDraftAccessConfirmed,$=G.toggleIsDraftAccessConfirmed,Q=function(e){f(_e(_e({},p),{},{customize:_e(_e({},p.customize),{},je({},e,!0))}))},K=function(){var e,r=(e=i().mark((function e(r,o){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.visibility,!c.loggedIn&&!c.loggedOut){e.next=4;break}return n.error((0,a.t)("landing_page.settings.welcome_banner.errors.blank_welcome_banner")),e.abrupt("return");case 4:if(!(0,j.H)(t)||"draft"===s||J){e.next=8;break}return W(),e.abrupt("return",!1);case 8:return e.next=10,h({data:r});case 10:u()(o)&&o(r,{keepValues:!0}),f(B.Wm),v();case 13:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ye(o,n,i,a,s,"next",e)}function s(e){ye(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),X=(g||_)&&!w;return(0,O.jsx)(A,{children:(0,O.jsxs)(T.g,{onSubmit:function(e,t){var r=t.reset;return K(e,r)},space:t,className:"mx-auto flex h-full flex-col",formClassName:"flex flex-col pb-8 gap-8 md:gap-12",triggerFormSubmitRef:r,children:[(0,O.jsx)(F.q,{title:(0,a.t)("customize_space.general"),dataTestId:"customize-space-general",variant:"fullScreen",isFirstChild:!0,children:(0,O.jsx)(N,{onChange:function(){return Q("general")},space:t})}),(0,O.jsx)(me,{space:t,onChange:function(){return Q("access")}}),((0,j.H3)(t)||_||(0,j.Ds)(t))&&(0,O.jsx)(F.q,{title:(0,a.t)("customize_space.customize_layout"),dataTestId:"customize-space-layout",variant:"fullScreen",children:(0,O.jsx)("div",{className:"h-full",children:(0,O.jsx)(S,{space:t,onChange:function(){return Q("customizeLayout")}})})}),q&&(0,O.jsxs)(F.q,{title:(0,a.t)("customize_space.topics.title"),dataTestId:"customize-space-topics",variant:"fullScreen",isFirstChild:!0,children:[(0,O.jsx)("div",{className:"my-1 md:mb-4",children:(0,O.jsxs)(U.Z.BodyMd,{color:"text-light",children:[(0,a.t)("customize_space.topics.description"),(0,O.jsx)(y.OL,{onClick:v,to:"/settings/topics",className:"text-light hover:text-dark ml-0.5",children:(0,O.jsx)("u",{className:"ml-0.5",children:(0,a.t)("customize_space.topics.manage_topics")})})]})}),(0,O.jsx)(R,{spaceId:t.id,onChange:function(){return Q("topics")}}),(0,O.jsx)(ae,{onChange:function(){return Q("topics")}})]}),(0,j.V5)(t)&&(0,O.jsx)(F.q,{title:(0,a.t)("customize_space.customize_layout"),dataTestId:"customize-space-layout",variant:"fullScreen",children:(0,O.jsx)("div",{className:"h-full",children:(0,O.jsx)(P,{space:t,isEventSpaceCalendarViewEnabled:L,onChange:function(){return Q("customizeLayout")}})})}),!X&&(0,O.jsx)(F.q,{title:(0,a.t)("customize_space.space_images"),dataTestId:"customize-space-images",variant:"fullScreen",children:(0,O.jsx)(D,{space:t,onChange:function(){return Q("images")}})}),C&&(0,j.V5)(t)&&(0,O.jsx)("div",{id:"space-welcome-banner",children:(0,O.jsx)(F.q,{title:(0,a.t)("customize_space.welcome_banner.title"),dataTestId:"customize-space-welcome-banner",variant:"fullScreen",children:(0,O.jsx)(oe,{setDirty:function(e,t){l(_e(_e({},c),{},je({},e,t)))},onChange:function(){return Q("general")},space:t})})}),(0,O.jsx)(be,{isOpen:H,onClose:W,onConfirm:function(){W(),$()},onCancel:function(){Q("access")},spaceType:(0,j.EG)(t)?"Course":"Space"})]})})},Se=r(1320),Pe=r(31304),Ce=r.n(Pe),ke=r(71299),Ne=r(36883),Ie=[{name:"slug",label:(0,a.t)("spaces.form.edit.options.seo.slug"),description:(0,a.t)("spaces.form.edit.options.seo.slug_description",{host:window.location.host}),transformValue:function(e){return Ce()(e,{replacement:"-",remove:/[*+~.;()'"!:@#]/g,lower:!0})}},{name:"meta_tag_attributes[meta_title]",label:(0,a.t)("spaces.form.edit.options.seo.meta_title")},{name:"meta_tag_attributes[meta_description]",label:(0,a.t)("spaces.form.edit.options.seo.meta_description")},{name:"meta_tag_attributes[opengraph_title]",label:(0,a.t)("spaces.form.edit.options.seo.opengraph_title")},{name:"meta_tag_attributes[opengraph_description]",label:(0,a.t)("spaces.form.edit.options.seo.opengraph_description")}],Ae=function(e){var t=e.onChange,r=e.setImageToDelete,n=(0,g.Gc)(),i=n.getValues,s=n.formState.dirtyFields;return(0,o.useEffect)((function(){("slug"in s||"meta_tag_attributes"in s)&&t(!0)}),[s.slug,s.meta_tag_attributes]),(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4",children:Ie.map((function(e){var t=e.name,r=e.label,n=e.description,i=e.transformValue;return(0,O.jsx)(w.l.Item,{hideBorder:!0,hideDescription:!0,label:r,name:t,transformValue:i,tooltipText:n,variant:"extra-bottom-margin",children:(0,O.jsx)(w.l.Input,{})},t)}))}),(0,O.jsx)("div",{className:"grid grid-cols-1",children:(0,O.jsxs)("div",{className:"min-h-[255px] w-full",children:[(0,O.jsx)(w.l.Label,{hideBorder:!0,label:(0,a.t)("spaces.form.edit.options.seo.opengraph_image.label")}),(0,O.jsx)(ke.D,{name:"meta_tag_attributes[opengraph_image]",alt:(0,a.t)("spaces.form.edit.options.seo.opengraph_image.label"),className:"relative",showAddCoverBtn:!0,aspectRatio:W.pI.OPEN_GRAPH,changeImageText:(0,a.t)("spaces.form.edit.options.seo.opengraph_image.change"),onDelete:function(){t(!0),r(i("meta_tag_attributes[opengraph_image_id]"))},customAddCoverBtn:(0,O.jsx)(Ne.Z,{title:(0,a.t)("spaces.form.edit.options.seo.opengraph_image.add"),description:(0,a.t)("spaces.form.edit.options.seo.opengraph_image.description")})})]})})]})},Ee=function(e){var t=e.space;return(0,j.EG)(t)?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(U.Z.TitleSm,{weight:"bold",children:(0,a.t)("spaces.form.edit.options.course_notifications.title")}),(0,O.jsx)(w.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.options.course_notifications.new_comment_notification"),tooltipText:(0,a.t)("spaces.form.edit.options.course_notifications.new_comment_notification_tooltip"),name:"course_setting_attributes.new_comment_notification_enabled",className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,O.jsx)(w.l.ToggleSwitch,{variant:"small",name:"course_setting_attributes.new_comment_notification_enabled"})})]}):null},De=function(e){var t=e.space;return(0,j.EG)(t)?(0,O.jsx)(w.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.options.course_options.enforce_lessons_order"),tooltipText:(0,a.t)("spaces.form.edit.options.course_options.enforce_lessons_order_tooltip"),name:"course_setting_attributes.enforce_lessons_order",className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,O.jsx)(w.l.ToggleSwitch,{variant:"small",name:"course_setting_attributes.enforce_lessons_order"})}):null},Te=r(17366),Le=r(43377),Me=r(52991),Re=(0,o.forwardRef)((function(e,t){var r=e.isOpen,n=e.onClose,i=e.setNotificationsChanged,o=(0,g.Gc)().setValue;return(0,O.jsxs)(J.c,{isOpen:r,title:(0,a.t)("spaces.form.create.notifications_confirm_modal.title"),onClose:n,onCancel:function(){i(!1),o("update_all_members_notifications",!1),setTimeout((function(){return t.current()}))},cancelText:(0,a.t)("spaces.form.create.notifications_confirm_modal.new_members"),onConfirm:function(){i(!1),o("update_all_members_notifications",!0),setTimeout((function(){return t.current()}))},confirmVariant:"primary",confirmText:(0,a.t)("spaces.form.create.notifications_confirm_modal.all_members"),shouldSubmitOnCancel:!0,children:[(0,a.t)("spaces.form.create.notifications_confirm_modal.description"),(0,O.jsx)("div",{className:"hidden",children:(0,O.jsx)(w.l.Item,{hiddenField:!0,name:"update_all_members_notifications",hideDescription:!0,hideBorder:!0,hideLabel:!0,children:(0,O.jsx)(w.l.Input,{type:"hidden"})})})]})}));Re.displayName="NotificationsConfirmModal";var Be=["allow_members_to_add_others","allow_members_to_create_posts","allow_post_title","allow_cover_images","hide_from_featured_areas","pinned_posts_label","default_comment_sort","notification_type","chat_room_show_history"],Ue=(0,o.forwardRef)((function(e,t){var r=e.space,n=e.onChange,i=e.isOpenNotificationsConfirmModal,s=e.toggleNotificationsConfirmModal,c=e.setNotificationsChanged,l=(0,g.Gc)().formState.dirtyFields;return(0,o.useEffect)((function(){var e=Object.keys(l);Be.filter((function(t){return e.includes(t)})).length>0&&n(!0),e.includes("notification_type")&&c(!0)}),[l]),(0,O.jsxs)("div",{children:[(0,O.jsx)(Me.V,{}),(0,O.jsx)(Re,{isOpen:i,onClose:s,setNotificationsChanged:c,ref:t}),(0,O.jsx)(De,{space:r}),(0,O.jsx)(Ee,{space:r}),(0,O.jsx)(Te.Z,{space:r}),(0,j.H3)(r)&&(0,O.jsxs)("div",{className:"mt-10 flex-1",children:[(0,O.jsx)(U.Z.TitleSm,{weight:"semibold",children:(0,a.t)("spaces.form.edit.options.labels.label")}),(0,O.jsx)("div",{className:"grid grid-cols-1",children:(0,O.jsx)(w.l.Item,{hideBorder:!0,label:(0,a.t)("spaces.form.edit.options.labels.pinned_posts.label"),tooltipText:(0,a.t)("spaces.form.edit.options.labels.pinned_posts.description"),hideDescription:!0,name:"pinned_posts_label",variant:"extra-bottom-margin",children:(0,O.jsx)(w.l.Input,{placeholder:(0,a.t)("spaces.form.edit.pinned_posts")})})})]}),!(0,j.Ug)(r)&&!(0,j.EG)(r)&&(0,O.jsx)(Le.P,{space:r})]})}));function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){Ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return He(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ue.displayName="SpaceOptionsForm";var We=function(e){var t=e.space,r=Ge((0,o.useState)(null),2),n=r[0],c=r[1],l=(0,B.mx)(),d=l.dirtyForms,p=l.setDirtyForms,f=l.onSlugChange,m=(0,I.eW)(),b=m.onSave,h=m.onExit,v=(0,o.useRef)(),y=(0,z.p)(),g=Ge((0,Z.k)(!1),2),_=g[0],j=g[1],x=Ge((0,o.useState)(!1),2),w=x[0],S=x[1],P=function(){var e,r=(e=i().mark((function e(r,o){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=3;break}return j(),e.abrupt("return",!1);case 3:if(e.prev=3,!n){e.next=8;break}return e.next=7,Se.UK.deleteOpenGraphImage(n);case 7:c(!1);case 8:return e.next=10,b({data:r,onSuccess:function(e){e.slug!==t.slug&&f(e)}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),y.error(s().t("spaces.form.edit.error"));case 15:return e.prev=15,u()(o)&&o(r,{keepValues:!0}),p(B.Wm),h(),e.finish(15);case 20:case"end":return e.stop()}}),e,null,[[3,12,15,20]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){qe(o,n,i,a,s,"next",e)}function s(e){qe(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),C=function(e){p(ze(ze({},d),{},{options:ze(ze({},d.options),{},Ve({},e,!0))}))};return(0,O.jsx)(A,{children:(0,O.jsxs)(T.g,{onSubmit:function(e,t){var r=t.reset;return P(e,r)},space:t,className:"mx-auto flex h-full flex-col",formClassName:"flex flex-col pb-8 gap-4",triggerFormSubmitRef:v,children:[(0,O.jsx)(F.q,{title:(0,a.t)("customize_space.options"),dataTestId:"customize-space-options",variant:"fullScreen",children:(0,O.jsx)(Ue,{space:t,onChange:function(){return C("options")},ref:v,isOpenNotificationsConfirmModal:_,toggleNotificationsConfirmModal:j,setNotificationsChanged:S})}),(0,O.jsx)(F.q,{title:(0,a.t)("customize_space.seo"),dataTestId:"customize-space-seo",variant:"fullScreen",children:(0,O.jsx)(Ae,{space:t,onChange:function(){return C("seo")},setImageToDelete:c})})]})})},Ze=r(29710),Je=r(5295),$e=r(34128);function Qe(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tt=function(e){var t=e.space,r=e.spaceGroup,n=!!r.automatically_add_members_to_new_spaces,i=!!r.add_members_to_space_group_on_space_join;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(U.Z.TitleSm,{weight:"semibold",children:(0,a.t)("customize_space.paywalls.subtitle")}),(0,O.jsx)(U.Z.BodyMd,{color:"text-default",children:(0,O.jsxs)("ul",{className:"mt-3 space-y-0.5 px-2",children:[(0,O.jsx)("li",{children:(0,a.t)("customize_space.paywalls.description.li_1")}),(0,O.jsx)("li",{children:(0,a.t)("customize_space.paywalls.description.li_2")}),(n||i)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("li",{children:(0,a.t)("customize_space.paywalls.description.li_3")}),i&&(0,O.jsx)("li",{className:"ml-4",children:(0,a.t)("customize_space.paywalls.description.li_3_1")}),n&&(0,O.jsx)("li",{className:"ml-4",children:(0,a.t)("customize_space.paywalls.description.li_3_2")})]}),!(0,j.H)(t)&&(0,j.fL)(t)&&(0,O.jsx)("li",{children:(0,a.t)("customize_space.paywalls.description.li_4")}),(0,O.jsx)("li",{children:(0,a.t)("customize_space.paywalls.description.li_5")}),(0,O.jsxs)("li",{children:[(0,a.t)("customize_space.paywalls.description.li_6.prefix")," ",(0,O.jsx)("a",{href:"https://help.circle.so/c/paywall-setup/",target:"_blank",rel:"noreferrer",children:(0,a.t)("customize_space.paywalls.description.li_6.link")})]})]})})]})},rt=r(9242),nt=r(3108),it=r(29451),ot=r(26953),at=r(1002);function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ct(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lt=function(e){var t=e.paywall,r=e.showRemove,n=void 0!==r&&r,i=e.onRemove,s=e.refetchPaywalls,c=(0,b.wh)().currentCommunityMember,l=st((0,Z.k)(!1),2),u=l[0],d=l[1],p=(0,ot.en)(),f=st((0,o.useState)(!1),2),m=f[0],h=f[1],y=(0,it.I)().show;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(J.c,{isOpen:u,title:(0,a.t)("customize_space.paywalls.remove_modal.title"),onClose:d,onCancel:d,onConfirm:function(){return i(t),void d()},confirmVariant:"danger",children:(0,a.t)("customize_space.paywalls.remove_modal.description",{name:t.display_name})}),(0,O.jsxs)(at.Lt,{direction:"bottom-end",className:v()("text-dark flex justify-end",{"invisible group-hover:visible":p&&!m}),button:(0,O.jsx)("span",{className:"hover:bg-tertiary flex h-6 w-6 items-center justify-center rounded transition-colors",children:(0,O.jsx)(se.JO,{type:"20-menu-3-dot",className:"text-default",size:20})}),onToggle:h,children:[(0,O.jsx)(at.Lt.ItemWithLink,{onClick:function(e){e.preventDefault(),function(e){y({paywall:e,refetchPaywalls:s,paywallGroupsEnabled:c.policies.paywall_group_enabled})}(t)},children:(0,a.t)("edit")}),n&&(0,O.jsx)(at.Lt.ItemWithLink,{onClick:function(e){e.preventDefault(),d()},children:(0,a.t)("customize_space.paywalls.remove")})]})]})},ut=r(45034),dt=function(e){var t=e.paywall;return(0,O.jsx)(ut.C,{variant:"active"===t.status?"success":"default",children:(0,a.t)("settings.paywalls.status.".concat(t.status))})},pt="uppercase !px-0 !text-default !text-xxs !text-light",ft="h-14 group px-0 text-default",mt=[{dataIndex:"display_name",key:"display_name",title:(0,a.t)("customize_space.paywalls.table_columns.paywall"),shouldWrap:!0,className:pt,tdClassName:v()(ft,"!text-dark !font-medium")},{dataIndex:"unlocked_by",key:"unlocked_by",title:(0,a.t)("customize_space.paywalls.table_columns.unlocked_by"),shouldWrap:!0,className:pt,tdClassName:v()(ft,"!font-medium")},{dataIndex:"pricing",key:"pricing",title:(0,a.t)("customize_space.paywalls.table_columns.pricing"),className:pt,tdClassName:ft},{dataIndex:"status",key:"status",title:(0,a.t)("customize_space.paywalls.table_columns.status"),className:pt,tdClassName:ft},{dataIndex:"actions",key:"actions",title:" ",className:v()(ft,"w-2 !text-right"),tdClassName:v()(ft,"w-2 !text-right !py-0")}],bt=function(e,t){return e.space_ids.includes(t.id)},ht=function(e,t){var r=[];return bt(e,t)&&r.push("Space"),function(e,t){return e.space_group_ids.includes(t.space_group_id)}(e,t)&&r.push("Space Group"),r.join(", ")},vt=function(e){var t=e.paywalls,r=e.space,n=e.onRemove,i=e.refetchPaywalls;if(0===t.length)return null;var o=t.map((function(e){return{key:e.id,rowClassName:"group",display_name:e.display_name,unlocked_by:ht(e,r),pricing:(0,rt.QC)(e),status:(0,O.jsx)(dt,{paywall:e}),actions:(0,O.jsx)(lt,{paywall:e,showRemove:bt(e,r),refetchPaywalls:i,onRemove:n})}}));return(0,O.jsx)(nt.w,{variant:"no-border",className:"mt-2 lg:mt-2",columns:mt,dataSource:o})},yt=function(e){var t=e.paywalls,r=e.onClick,n=e.isLoading,i=e.appendTo,o=(0,m.k6)(),s=(0,I.eW)().onExit;return(0,O.jsx)("div",{className:"mt-4 lg:mt-7",children:(0,O.jsxs)(at.Lt,{size:"full",direction:"bottom",className:"w-full",buttonClassName:"flex justify-between px-4 w-full rounded-lg border border-primary h-11 items-center",menuWrapperClassName:"px-0 mt-1",popperOptions:{strategy:"absolute"},button:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(U.Z.LabelMd,{children:(0,a.t)("customize_space.paywalls.link_paywall")}),(0,O.jsx)(se.JO,{size:16,type:"caret-down-bold",useWithFillCurrentColor:!0,className:"text-dark -mr-1.5"})]}),appendTo:i,children:[n?(0,O.jsx)(at.Lt.Item,{children:(0,O.jsx)(Je.a,{center:!0})}):(0,O.jsxs)("div",{className:"max-h-40 overflow-scroll",children:[!t.length&&(0,O.jsx)("div",{className:"px-4 py-2",children:(0,O.jsx)(at.Lt.Item,{children:(0,O.jsx)(U.Z.LabelSm,{children:(0,a.t)("customize_space.paywalls.no_paywalls")})})}),t.map((function(e){return(0,O.jsxs)(at.Lt.ItemLink,{onClick:function(){return r(e)},disabled:n,children:[e.display_name," - ",(0,rt.QC)(e)]},e.id)}))]}),(0,O.jsxs)(at.Lt.ItemLink,{className:"hover:bg-secondary hover:text-dark flex w-full items-center gap-2.5 px-4 py-2",onClick:function(){o.push("/settings/paywalls"),s()},children:[(0,O.jsx)("span",{className:"flex",children:(0,O.jsx)(se.JO,{type:"16-plus-v2",size:16,className:"text-dark w-4"})}),(0,O.jsx)(U.Z.LabelSm,{children:(0,a.t)("customize_space.paywalls.create_paywall")})]})]})})},gt=function(){var e=(0,b.L2)().data,t=(0,b.e2)().helpers.findById(e.space_group_id),r=function(e){var t=e.space,r=(0,f.useQuery)(G.av.paywalls.index(),{enabled:!(null===t||void 0===t||!t.id),refetchOnWindowFocus:!1}),n=r.data,i=void 0===n?[]:n,o=r.isLoading,a=r.refetch,s=i.filter((function(e){return e.space_ids.includes(t.id)||e.space_group_ids.includes(t.space_group_id)})),c=i.filter((function(e){return!e.space_ids.includes(t.id)})),l=function(e){return{space_group_ids:e.space_group_ids,all_spaces:e.all_spaces,trial_days:e.trial_days}},u=(0,f.useMutation)((function(e){return(0,$e.aU)(G.av.paywalls.update({paywallId:e.id}),{paywall:Ye({space_ids:e.space_ids.filter((function(e){return e!==t.id}))},l(e))})}),{onSuccess:a}),d=u.mutate,p=u.isLoading,m=(0,f.useMutation)((function(e){return(0,$e.aU)(G.av.paywalls.update({paywallId:e.id}),{paywall:Ye({space_ids:[].concat(Qe(e.space_ids),[t.id])},l(e))})}),{onSuccess:a}),b=m.mutate,h=m.isLoading;return{paywalls:i,isLoading:o||p||h,removePaywall:d,addPaywall:b,refetchPaywalls:a,currentPaywalls:s,availablePaywalls:c}}({space:e}),n=r.isLoading,i=r.currentPaywalls,o=r.availablePaywalls,a=r.removePaywall,s=r.addPaywall,c=r.refetchPaywalls,l=(0,k.UV)().contentPortalElement;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(tt,{space:e,spaceGroup:t}),(0,O.jsx)(yt,{paywalls:o,onClick:s,isLoading:n,appendTo:l}),n?(0,O.jsx)(Je.a,{center:!0}):(0,O.jsx)(vt,{space:e,paywalls:i,isLoading:n,onRemove:a,refetchPaywalls:c})]})},_t=function(){var e=(0,b.wh)(),t=e.currentCommunity,r=e.currentCommunityMember;return e.isLoading?null:(0,O.jsxs)(A,{children:[(0,O.jsx)("div",{children:(0,O.jsx)(U.Z.TitleSm,{weight:"bold",children:(0,a.t)("customize_space.paywalls.title")})}),(0,O.jsx)("div",{className:"mt-5 lg:mt-9",children:t.has_payment_processor_enabled?(0,O.jsx)(gt,{}):(0,O.jsx)(Ze.R,{shouldHideHeader:!0,paymentProcessor:t.payment_processor,paywallGroupsEnabled:r.policies.paywall_group_enabled})})]})},jt=r(9711),xt=r(69179),wt=r(4093),Ot=r(40166),St=r(44141),Pt=r(35944),Ct=r(87958),kt=r(61642),Nt=r(48656),It=r(40284),At=r(62824),Et=r(5100),Dt=r(55675);function Tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Lt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.admin?"Admin":e.moderator&&r.includes(t)?"Moderator":"Member"},Rt=function(e){var t=e.space,r=(0,z.p)(),n=(0,f.useQueryClient)(),i=Tt((0,o.useState)(!1),2),s=i[0],c=i[1],l=Tt((0,o.useState)(!1),2),u=l[0],d=l[1],p=Tt((0,o.useState)(""),2),m=p[0],h=p[1],v=Tt((0,o.useState)(null),2),y=v[0],g=v[1],_=(0,b.wh)().currentCommunityMember,x=(0,Nt.H)(),w=x.showOwnProfileEdit,S=x.showMemberProfileEdit,P=(0,kt.I)({spaceId:t.id}),C=P.count,k=P.isLoading,N=(0,jt.z)(),I=(0,Ot.fd)({sort:Ot.zw.ROLE,filters:{space_id:t.id},query:m}),E=I.isLoading,D=I.hasNextPage,T=I.fetchNextPage,L=I.members,M=I.queryKey,R=t.space_members_limit_reached,B=void 0!==R&&R,F=t.space_members_limit,V=void 0===F?0:F,q=(0,St.z)({onError:function(e){r.error(e.message)},onSuccess:function(){n.invalidateQueries(M),r.success((0,a.t)("spaces.form.edit.members.members_removed"))},onSettled:function(){c(!1),d(!1),g(null)}}).mutate,G=(0,Pt.X)({onError:function(e){r.error(e.message)},onSuccess:function(){n.invalidateQueries(M),r.success((0,a.t)("spaces.form.edit.members.changed_role"))}}).mutate,H=u?(0,a.t)("spaces.form.edit.members.removing"):(0,a.t)("spaces.form.edit.members.remove_member");if(E)return(0,O.jsx)("div",{className:"flex w-screen justify-center",children:(0,O.jsx)(Je.a,{})});var W=L.map((function(e){var r=e.id,n=e.avatar_url,i=e.name,o=e.email,a=e.roles,s=e.moderating_space_ids,c=e.public_uid,l=e.current_space_member,u=void 0===l?null:l,d=e.last_seen_at;return{id:r,avatarUrl:n,name:i,email:o,role:Mt(a,t.id,s),publicUid:c,lastActive:d,currentSpaceMember:u}}));return(0,O.jsxs)(A,{id:"scrollable-container",className:"!max-w-6xl px-0 md:!px-6",children:[(0,O.jsxs)("div",{className:"flex flex-row flex-wrap items-center gap-4 md:gap-0",children:[(0,O.jsx)("div",{children:(0,O.jsxs)(U.Z.TitleSm,{weight:"bold",children:[(0,a.t)("customize_space.members")," ",!k&&"(".concat(C,")"),(0,j.H)(t)&&(0,O.jsx)(Ct.T,{content:(0,a.t)("courses.admin_summary.waitlist_tooltip"),placement:"right",children:(0,O.jsx)(se.JO,{type:"16-clock",className:"ml-2",size:16})})]})}),(0,O.jsxs)("div",{className:"flex w-full justify-between gap-4 md:flex-1 md:justify-end",children:[(0,O.jsx)(At.n,{spaceId:t.id}),(0,O.jsx)(Ct.T,{content:(0,a.t)("chat_space.member_limit_title",{member_limit:V}),disabled:!B,children:(0,O.jsx)(Dt.z,{variant:"secondary",onClick:function(){return N.show({spaceId:t.id})},disabled:B,children:(0,j.H)(t)?(0,a.t)("customize_space.add_waitlist"):(0,a.t)("customize_space.add_members")})})]})]}),(0,O.jsx)("div",{className:"border-primary mt-6 flex flex-row items-center border-y py-3 lg:mt-8",children:(0,O.jsx)(It.h,{onSearch:h,placeholder:(0,a.t)("spaces.form.edit.members.search_members")})}),(0,O.jsx)("div",{className:"h-full overflow-auto pt-4",children:(0,O.jsx)(wt.r,{searchTerm:m,members:W,dataLength:L.length,next:T,hasMore:D,shouldHideAddMemberButton:!0,onEdit:function(e){var t=e.id,r=e.publicUid;if((null===_||void 0===_?void 0:_.id)==t)return w();S({memberPublicId:r})},onAdd:function(){return N.show({spaceId:t.id})},onRemove:function(e){g(e),c(!0)},onRoleChange:function(e,r){var n=r===Et.K.MODERATOR;G({spaceId:t.id,memberId:e,isModerator:n})},scrollableTarget:"scrollable-container",shouldShowHeader:!0,cellVariant:"no-x-padding"})}),(0,O.jsx)(xt.G,{isOpen:s,onClose:function(){return c(!1)},onConfirm:function(){y&&s&&(d(!0),q({spaceId:t.id,memberId:y}))},disabled:u,confirmText:H})]})},Bt=r(71752),Ut=r(70996),Ft=function(e,t){var r=t.id,n=t.value;return t.resetOthers&&e.clear(),e.set(r,n),new Map(e)},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;return(0,o.useReducer)(Ft,e)},Vt=r(86078);function qt(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var Gt=function(e){var t,r,n=e.sections,o=e.variant,a=void 0===o?"primary":o,s=e.setIsNameEditable,l=(0,b.L2)().data,u=(0,f.useQueryClient)(),d=(0,f.useMutation)((function(e){return(0,$e.Cu)(G.av.courses.createSection({courseId:l.id}),e)}),{onSuccess:(t=i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.invalidateQueries((0,Bt.bD)(l.id));case 2:(0,c.defer)((function(){var e=document.querySelector("#section-item-".concat(t.id));e&&e.scrollIntoView({behavior:"smooth"}),s(t.id)}));case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){qt(o,n,i,a,s,"next",e)}function s(e){qt(o,n,i,a,s,"throw",e)}a(void 0)}))},function(e){return r.apply(this,arguments)})});return(0,O.jsx)(Dt.z,{variant:a,disabled:d.isLoading,onClick:function(){d.mutate({course_section:{name:"Untitled section - ".concat(n.length+1),drip_delay:0,lesson_order:[]}})},children:I18n.t(d.isLoading?"courses.edit.sections.adding":"courses.edit.sections.add_section")})},Ht=function(e){var t=e.sections,r=e.dispatchSectionsNameEditor;return(0,O.jsxs)("div",{className:"border-primary flex h-72 flex-col items-center justify-center rounded-lg border",children:[(0,O.jsx)("div",{children:(0,O.jsx)(U.Z.TitleSm,{weight:"semibold",children:I18n.t("courses.edit.sections.empty_state.title")})}),(0,O.jsx)("div",{className:"mt-1",children:(0,O.jsx)(U.Z.BodyMd,{children:I18n.t("courses.edit.sections.empty_state.description")})}),(0,O.jsx)("div",{className:"mt-3",children:(0,O.jsx)(Gt,{sections:t,variant:"secondary",setIsNameEditable:function(e){return r({id:e,value:!0})}})})]})},Wt=r(41727),Zt=r(45587),Jt=r(16219),$t=r(46479);function Qt(e){return function(e){if(Array.isArray(e))return Kt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(r),!0).forEach((function(t){er(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tr=function(e){var t=e.sections,r=e.setSections,n=e.setActiveDragItem,i=e.children,o=(0,b.L2)().data,a=(0,Wt.Dy)((0,Wt.VT)(Wt.we)),s=(0,f.useMutation)((function(e){return(0,$e.aU)(G.av.courses.reorder({courseId:o.id}),e)})),c=function(e){var t,r,n,i;return"section"===(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(r=t.current)||void 0===r?void 0:r.dragType)?e.id:null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n.current)||void 0===i?void 0:i.sectionSortId};return(0,O.jsx)(Wt.LB,{sensors:a,onDragStart:function(e){var t=e.active;return n(t)},onDragEnd:function(){s.mutate({new_order:t.map((function(e){return{section_id:e.id,lesson_ids:e.lessons.map((function(e){return e.id}))}}))}),n(null)},onDragOver:function(e){var n,i,o,a,s=e.active,l=e.over,u=null===s||void 0===s?void 0:s.id,d=null===l||void 0===l?void 0:l.id;if(u&&d&&u!==d){var p=null===s||void 0===s||null===(n=s.data)||void 0===n||null===(i=n.current)||void 0===i?void 0:i.dragType,f=null===l||void 0===l||null===(o=l.data)||void 0===o||null===(a=o.current)||void 0===a?void 0:a.dragType;if(p&&f){if("section"==p){if("lesson"==f)return;return r((function(e){var t=e.findIndex((function(e){return e.sortId==u})),r=e.findIndex((function(e){return e.sortId==d}));return(0,Zt.Rp)(e,t,r)}))}var m=c(l),b=c(s),h=b===m,v=b!==m,y=t.find((function(e){return e.sortId==b})).lessons.find((function(e){return e.sortId==u}));return r((function(e){return e.map((function(e){if(h&&e.sortId===m){var t=e.lessons.findIndex((function(e){return e.sortId===u})),r=e.lessons.findIndex((function(e){return e.sortId===d}));return r<0?e:Yt(Yt({},e),{},{lessons:(0,Zt.Rp)(e.lessons,t,r)})}if(v&&e.sortId===b)return Yt(Yt({},e),{},{lessons:e.lessons.filter((function(e){return e.sortId!==u}))});if(v&&e.sortId===m){var n=e.lessons.findIndex((function(e){return e.sortId===d}));return Yt(Yt({},e),{},{lessons:[].concat(Qt(e.lessons.slice(0,n)),[y],Qt(e.lessons.slice(n)))})}return e}))}))}}},children:i})},rr=r(24285),nr=r(48895),ir=r(79049),or=(0,r(30270).Ue)((function(e){return{isDirty:!1,setIsDirty:function(t){return e({isDirty:t})}}})),ar=r(86599),sr=r(87561),cr=r(78163),lr=r(15830),ur=r(42791),dr=r(76234),pr=r(40868),fr=[{group:(0,a.t)("dynamic_vars_groups.community"),label:"{{community.name}}",value:"{{community.name}}"},{group:(0,a.t)("dynamic_vars_groups.member"),label:"{{member.first_name}}",value:"{{member.first_name}}"},{group:(0,a.t)("dynamic_vars_groups.member"),label:"{{member.last_name}}",value:"{{member.last_name}}"},{group:(0,a.t)("dynamic_vars_groups.course"),label:"{{space.name}}",value:"{{space.name}}"},{group:(0,a.t)("dynamic_vars_groups.course"),label:"{{section.name}}",value:"{{section.name}}"},{group:(0,a.t)("dynamic_vars_groups.course"),label:"{{first_lesson_in_section.link}}",value:"{{first_lesson_in_section.link}}"}];function mr(e){var t=e.editor,r=e.isEditorFocused,n=e.portalId;if(!t)return null;var i=v()(r?"text-default dark:text-dark":"text-lightest dark:text-default");return(0,O.jsx)(dr.Z,{container:function(){return document.getElementById(n)},children:(0,O.jsx)(pr.m,{wrapperClassName:"px-8 w-80 pt-3",optionsClassName:"bottom-8",className:i,variables:fr,editor:t,tooltipPlacement:"top"})})}function br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return hr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vr=function(e){var t,r,n,i=e.section,s=e.initialFocusRef,c=or().setIsDirty,l=(0,g.Gc)(),u=l.formState.isDirty,d=l.getValues,p=br((0,o.useState)(!(0,cr.NU)(d("email_notification_body"))),2),f=p[0],m=p[1],b=!(null!==(t=i.serialized_email_notification_body)&&void 0!==t&&t.body)&&!i.email_notification_subject;(0,o.useEffect)((function(){c(u)}),[c,u]),(0,o.useEffect)((function(){b&&c(!0)}),[c,b]);var h="courses.edit.sections.notify_students_modal.form";return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(w.l.Item,{name:"email_notification_subject",className:"!items-center !py-0 px-8",label:(0,a.t)("".concat(h,".email_notification_subject")),labelWrapperClassName:"!w-auto grow-0",labelClassName:"!m-0",hideDescription:!0,inline:!0,children:(0,O.jsx)(w.l.Input,{maxLength:"255",ref:s,placeholder:(0,lr.wB)((0,a.t)([h,"email_notification_subject_placeholder"])),otherClassName:"!px-0 !autofill:bg-yellow-200",focusRequired:!1,autoComplete:"off",hideBorder:!0})}),(0,O.jsxs)("div",{className:"relative",children:[(0,O.jsx)("div",{id:"drip-email-notification-editor-toolbar"}),(0,O.jsx)($.$,{editorClassName:"mt-4 h-80 overflow-y-scroll px-8",onChangeCallback:function(e){m(!(0,cr.NU)({body:e}))},placeholder:(0,a.t)("".concat(h,".email_notification_body_placeholder")),name:"email_notification_body[body]",sgidToObjectMap:(null===(r=i.serialized_email_notification_body)||void 0===r?void 0:r.sgids_to_object_map)||{},inlineAttachments:(null===(n=i.serialized_email_notification_body)||void 0===n?void 0:n.inline_attachments)||[],disabledExtensions:["mention","poll","cta"],disabledSlashMenuCategories:["Embed"],aiCopilotTitle:i.name,shouldPreviewFilesAsLinks:!0,shouldShowTextModifiersMenu:!1,toolbars:[{portalId:"drip-email-notification-editor-toolbar",component:ur.j},{portalId:"drip-email-notification-variables-toolbar",component:mr}]}),f&&(0,O.jsx)("p",{className:"absolute bottom-2 right-8 text-red-500",children:(0,a.t)("".concat(h,".required"))})]}),(0,O.jsx)("div",{id:"drip-email-notification-variables-toolbar"})]})},yr=r(51420),gr=r(20336),_r=r(26022),jr=r(52701),xr=(0,yr.AW)((0,a.t)("courses.edit.sections.notify_students_modal.form.email_notification_body_default_text").replace(/[{}]/g,(function(e){return"".concat(e).concat(e)})),[gr.Z,_r.Z,jr.Z]);function wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(r),!0).forEach((function(t){Sr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pr(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var Cr="edit-course-type-form",kr="courses.edit.sections.notify_students_modal.form",Nr=function(e){var t,r,n,o=e.section,s=e.onSuccess,c=e.onSubmit,l=e.onError,u=e.initialFocusRef,d=e.isEdit,p=(0,z.p)(),m=p.success,b=p.error,h=(0,Bt.rF)(o.space_id).refetch,v=function(e){var t=e.section,r=e.options;return{emailNotificationMutation:(0,f.useMutation)((function(e){return(0,$e.aU)(G.av.courses.updateSection({sectionId:t.id,courseId:t.space_id}),e)}),r)}}({section:o,options:{onSuccess:(r=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:m((0,a.t)("".concat(kr,".save_success")),{duration:"short",shouldUseProgress:!1}),s();case 4:case"end":return e.stop()}}),e)})),n=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){Pr(o,n,i,a,s,"next",e)}function s(e){Pr(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return n.apply(this,arguments)}),onError:function(){b((0,a.t)("".concat(kr,".save_error"))),l()}}}),y=v.emailNotificationMutation,g=sr.Ry().shape({email_notification_subject:sr.Z_().required((0,a.t)("".concat(kr,".required"))),email_notification_body:sr.Ry().test({test:function(e){return(0,cr.NU)(e)},message:(0,a.t)("".concat(kr,".required"))})}),_={email_notification_subject:o.email_notification_subject||(0,a.t)("".concat(kr,".email_notification_subject_placeholder")).replace(/[{}]/g,(function(e){return"".concat(e).concat(e)})),email_notification_body:{body:(null===(t=o.serialized_email_notification_body)||void 0===t?void 0:t.body)||xr}};return(0,O.jsx)(w.l,{id:Cr,onSubmit:function(e){y.mutate({course_section:Or(Or({},e),!d&&{notify_students_enabled:!0})}),c()},preventAccidentalLeave:!0,validationSchema:g,className:"divide-primary divide-y",formClassName:void 0,defaultValues:_,children:(0,O.jsx)(vr,{section:o,initialFocusRef:u})})};function Ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ar(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ar(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Er=function(e){var t=e.section,r=e.isOpen,n=e.isOpenForEdit,i=e.onClose,s=e.shouldShowNotificationMessage,c=Ir((0,o.useState)(!1),2),l=c[0],u=c[1],d=(0,o.useRef)(null),p=or(),f=p.isDirty,m=p.setIsDirty,b=function(){f&&!confirm((0,a.t)("prevent_accidental_leave_message"))||i()};return(0,O.jsxs)(k.u_,{isOpen:r||n,onClose:b,contentPortalId:"course-type-picker-portal",initialFocus:d,children:[(0,O.jsx)(k.u_.Overlay,{}),(0,O.jsxs)(k.u_.Content,{size:"lg",children:[(0,O.jsxs)(k.u_.Header,{children:[(0,O.jsx)(k.u_.Title,{size:"sm",children:(0,a.t)("courses.edit.sections.notify_students_modal.title")}),(0,O.jsx)(k.u_.HeaderActions,{children:(0,O.jsx)(k.u_.CloseButton,{onClick:b})})]}),(0,O.jsxs)(k.u_.Body,{className:"!px-0",children:[s&&!n&&(0,O.jsxs)("div",{className:"border-primary bg-secondary flex items-start border px-8 py-6",children:[(0,O.jsx)("div",{className:"mr-3 pt-0.5",children:(0,O.jsx)(se.JO,{type:"20-alert",className:"w-4"})}),(0,O.jsxs)("div",{children:[(0,O.jsx)("p",{className:"mb-1",children:(0,O.jsx)(U.Z.LabelSm,{weight:"semibold",children:(0,a.t)("courses.edit.sections.notify_students_modal.notify_your_members_title")})}),(0,O.jsx)(U.Z.BodySm,{children:(0,a.t)("courses.edit.sections.notify_students_modal.notify_your_members_message")})]})]}),(0,O.jsx)(Nr,{section:t,isEdit:n,onSuccess:function(){m(!1),i(),setTimeout((function(){return u(!1)}),100)},onSubmit:function(){return u(!0)},onError:function(){u(!1),m(!0)},initialFocusRef:d})]}),(0,O.jsxs)(k.u_.Footer,{className:"flex justify-end border-t",children:[!l&&(0,O.jsx)(Dt.z,{type:"button",variant:"secondary",className:"mr-2",onClick:b,children:(0,a.t)("cancel")}),(0,O.jsx)(ar._,{type:"submit",variant:"circle",form:Cr,submitting:l,children:(0,a.t)("save")})]})]})]})};function Dr(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function Tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Mr="courses.edit.sections.notify_students_modal.form",Rr=function(e){var t,r,n=e.section,s=e.space,c=Tr((0,o.useState)(Boolean(n.notify_students_enabled)),2),l=c[0],u=c[1],d=Tr((0,o.useState)(!1),2),p=d[0],m=d[1],b=Tr((0,o.useState)(!1),2),h=b[0],v=b[1],y=(0,z.p)(),g=y.success,_=y.error,j=(0,Bt.rF)(n.space_id).refetch,x=function(e){var t=e.section,r=e.options;return{changeNotifyStudentsEnabledMutation:(0,f.useMutation)((function(e){return(0,$e.aU)(G.av.courses.updateSection({sectionId:t.id,courseId:t.space_id}),e)}),r)}}({section:n,options:{onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:g((0,a.t)("".concat(Mr,".save_success")),{duration:"short",shouldUseProgress:!1});case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){Dr(o,n,i,a,s,"next",e)}function s(e){Dr(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)}),onError:function(){_((0,a.t)("".concat(Mr,".save_error"))),u(!0)}}}),w=x.changeNotifyStudentsEnabledMutation;(0,o.useEffect)((function(){u(Boolean(n.notify_students_enabled))}),[n.notify_students_enabled]);var S,P=n.drip_notifications_sent_at&&(0,nr.w)({dateTime:new Date(n.drip_notifications_sent_at),format:"date_time_with_short_timezone"});return(0,Jt.MS)(s)&&(P?S=(0,a.t)("courses.edit.sections.notify_students_modal.sent_tooltip",{date:P}):n.is_dripped&&(S=(0,a.t)("courses.edit.sections.notify_students_modal.delayed_notification_tooltip"))),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:"group flex items-center",children:[(0,O.jsx)("input",{type:"checkbox",name:"section[".concat(n.id,"].notify_students_enabled"),checked:l,className:"hidden"}),(0,O.jsx)(Ct.T,{disabled:!S,content:S,children:(0,O.jsx)(ir.r,{checked:l,onChange:function(e){return function(e){e?m(!0):(u(!1),w.mutate({course_section:{notify_students_enabled:!1}}))}(e)},disabled:(0,Jt.MS)(s)&&!!P})}),!((0,Jt.MS)(s)&&P)&&(0,O.jsx)("button",{type:"submit",className:"hover:bg-tertiary invisible ml-3 rounded-md px-2 py-1 group-hover:visible",onClick:function(){return v(!0)},children:(0,a.t)("edit")})]}),(0,O.jsx)(Er,{isOpen:p,isOpenForEdit:h,onClose:function(){m(!1),v(!1)},section:n,shouldShowNotificationMessage:!!S})]})};function Br(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var Ur=function(e){var t,r,n=e.section,o=e.setIsNameEditable,a=(0,b.L2)().data,l=(0,f.useQueryClient)(),u=(0,f.useMutation)((function(e){return(0,$e.Cu)(G.av.courses.createLesson({courseId:a.id,sectionId:n.id}),e)}),{onSuccess:(t=i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.invalidateQueries((0,Bt.bD)(a.id));case 2:(0,c.defer)((function(){var e=document.querySelector("#lesson-item-".concat(t.id));e&&e.scrollIntoView({behavior:"smooth"}),o(t.id)}));case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){Br(o,n,i,a,s,"next",e)}function s(e){Br(o,n,i,a,s,"throw",e)}a(void 0)}))},function(e){return r.apply(this,arguments)})});return(0,O.jsx)(Dt.z,{disabled:u.isLoading,small:!0,variant:"secondary",onClick:function(){return u.mutate({course_lesson:{name:"Untitled lesson - ".concat(n.lessons.length+1),status:"draft",featured_media:null,rich_text_body:{}}})},children:(0,O.jsx)(U.Z.LabelSm,{children:s().t(u.isLoading?"courses.edit.sections.adding":"courses.edit.sections.add_lesson")})})};function Fr(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var zr=function(e){var t,r,n=e.show,o=e.name,s=e.onClose,c=e.courseId,l=e.sectionId,u=(0,Bt.rF)(c).refetch,d=(0,f.useMutation)((function(){return(0,$e.pC)(G.av.courses.deleteSection({courseId:c,sectionId:l}))}),{onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:s();case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){Fr(o,n,i,a,s,"next",e)}function s(e){Fr(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)})});return(0,O.jsx)(J.c,{isOpen:n,title:(0,a.t)("courses.edit.sections.delete_section"),onClose:s,onCancel:s,onConfirm:d.mutate,confirmVariant:"danger",disabled:d.isLoading,confirmText:d.isLoading?(0,a.t)("deleting"):(0,a.t)("confirm"),children:(0,a.t)("courses.edit.sections.delete_confirmation",{name:o})})};function Vr(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var qr=function(e){var t,r,n=e.show,o=e.name,s=e.onClose,c=e.courseId,l=e.sectionId,u=e.lessonId,d=(0,Bt.rF)(c).refetch,p=(0,f.useMutation)((function(){return(0,$e.pC)(G.av.courses.deleteLesson({courseId:c,sectionId:l,lessonId:u}))}),{onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:s();case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){Vr(o,n,i,a,s,"next",e)}function s(e){Vr(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)})});return(0,O.jsx)(J.c,{isOpen:n,title:(0,a.t)("courses.edit.sections.delete_lesson"),onClose:s,onCancel:s,onConfirm:p.mutate,confirmVariant:"danger",disabled:p.isLoading,confirmText:p.isLoading?(0,a.t)("deleting"):(0,a.t)("confirm"),children:(0,a.t)("courses.edit.sections.delete_confirmation",{name:o})})},Gr=r(20633),Hr=function(e){var t=e.name,r=e.setName,n=e.isLoading,i=e.onSubmit,s=e.onClose,c=e.useSemiboldFont,l=void 0!==c&&c,u=e.dataTestId,d=(0,o.useRef)(null);return(0,o.useEffect)((function(){d.current&&d.current.focus()}),[]),(0,O.jsxs)("form",{onSubmit:i,className:"flex w-full items-center pr-4",children:[(0,O.jsx)("input",{ref:d,className:v()("bg-primary border-input focus:border-secondary placeholder:text-light -my-1.5 -ml-2 mr-2 w-full rounded border px-2 py-1.5 text-sm placeholder:opacity-100 focus:outline-none",{"font-semibold":l}),onChange:function(e){return r(e.target.value)},value:t,onBlur:i,"data-testid":u}),n?(0,O.jsx)(se.JO,{type:"loader"}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Gr.h,{type:"submit",name:"16-check",onClick:i,className:"!border-v2-success mr-1.5 border",iconClassName:"!text-v2-success",ariaLabel:(0,a.t)("save_and_close")}),(0,O.jsx)(Gr.h,{type:"submit",className:"border-secondary border",name:"16-close",onClick:s,ariaLabel:(0,a.t)("close")})]})]})};function Wr(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function Zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $r=function(e){var t,r,n=e.lesson,a=e.section,s=e.onClose,c=(0,b.L2)().data,l=Zr((0,o.useState)(n.name),2),u=l[0],d=l[1],p=(0,f.useQueryClient)(),m=(0,z.p)(),h=(0,f.useMutation)((function(e){return(0,$e.aU)(G.av.courses.updateLesson({courseId:c.id,sectionId:a.id,lessonId:n.id}),e)}),{onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.invalidateQueries((0,Bt.bD)(c.id));case 2:s();case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){Wr(o,n,i,a,s,"next",e)}function s(e){Wr(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)}),onError:function(e){m.error(e.errorDetails)}});return(0,O.jsx)(Hr,{name:u,setName:d,isLoading:h.isLoading,onSubmit:function(){return h.mutate({course_lesson:{name:u}})},onClose:s,dataTestId:"lesson-title"})},Qr=r(72675);function Kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yr(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var en=function(e){var t,r,n=e.courseId,o=void 0===n?"":n,s=e.sectionId,l=void 0===s?"":s,u=e.lessonId,d=void 0===u?"":u,p=e.defaultName,m=void 0===p?"":p,b=e.type,h=void 0===b?"lesson":b,v=(0,Qr.dd)(),y=(0,f.useQueryClient)(),g=(0,z.p)(),_={onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.invalidateQueries((0,Bt.bD)(o));case 2:v.hide();case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){Yr(o,n,i,a,s,"next",e)}function s(e){Yr(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)}),onError:function(e){g.error(e.errorDetails)}},j=(0,f.useMutation)((function(e){return(0,$e.aU)(G.av.courses.updateLesson({courseId:o,sectionId:l,lessonId:d}),e)}),_),x=(0,f.useMutation)((function(e){return(0,$e.aU)(G.av.courses.updateSection({courseId:o,sectionId:l}),e)}),_);return(0,O.jsxs)(k.u_,{isOpen:v.visible,onClose:v.visible?v.hide:c.noop,children:[(0,O.jsx)(k.u_.Overlay,{}),(0,O.jsxs)(k.u_.Content,{size:"lg",children:[(0,O.jsxs)(k.u_.Header,{children:[(0,O.jsx)(k.u_.Title,{children:"lesson"===h?(0,a.t)("courses.edit.sections.rename_lesson"):(0,a.t)("courses.edit.sections.rename_section")}),(0,O.jsx)(k.u_.HeaderActions,{children:(0,O.jsx)(k.u_.CloseButton,{onClick:v.visible?v.hide:c.noop})})]}),(0,O.jsx)(k.u_.Body,{children:(0,O.jsx)(w.l,{onSubmit:function(e){var t=e.name;"lesson"===h?j.mutate({course_lesson:{name:t}}):"section"===h&&x.mutate({course_section:{name:t}})},defaultValues:{name:m},id:"course-section-lesson-rename-form",children:(0,O.jsx)(w.l.Item,{hideDescription:!0,hideBorder:!0,fullWidth:!0,name:"name",label:(0,a.t)("title"),rules:{required:(0,a.t)("courses.edit.sections.validations.name_is_required")},children:(0,O.jsx)(w.l.Input,{autoFocus:!0})})})}),(0,O.jsx)(k.u_.Footer,{children:(0,O.jsx)(Dt.z,{form:"course-section-lesson-rename-form",type:"submit",full:!0,extraLarge:!0,variant:"circle",children:j.isLoading||x.isLoading?(0,a.t)("saving_changes"):(0,a.t)("save_changes")})})]})]})},tn=Qr.gk.create((function(e){return(0,O.jsx)(en,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(r),!0).forEach((function(t){Xr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),rn=function(){return(0,Qr.dd)(tn)};function nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function on(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(r),!0).forEach((function(t){an(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function an(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sn(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ln(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ln(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var un=function(){return[{label:s().t("courses.edit.sections.statuses.draft"),value:"draft"},{label:s().t("courses.edit.sections.statuses.published"),value:"published"}]},dn=function(e){var t=e.lesson,r=e.section,n=(0,f.useQueryClient)(),a=(0,b.L2)().data,s=cn((0,o.useState)(t.status),2),c=s[0],l=s[1];(0,o.useEffect)((function(){l(t.status)}),[t.status]);var u,d,p=(0,f.useMutation)((function(e){return(0,$e.aU)(G.av.courses.updateLesson({lessonId:t.id,sectionId:r.id,courseId:a.id}),e)}),{onSuccess:(u=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.invalidateQueries((0,Bt.bD)(a.id));case 2:return e.next=4,n.invalidateQueries((0,Bt.hE)(t.id));case 4:case"end":return e.stop()}}),e)})),d=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=u.apply(e,t);function o(e){sn(i,r,n,o,a,"next",e)}function a(e){sn(i,r,n,o,a,"throw",e)}o(void 0)}))},function(){return d.apply(this,arguments)})});return(0,O.jsx)(at.Lt,{options:un(),onChange:function(e){l(e),p.mutate({course_lesson:on(on({},t),{},{status:e})})},buttonClassName:"w-28",button:(0,O.jsx)(at.Lt.ActiveLabelButton,{className:v()("flex justify-between rounded-md px-2 py-1 text-xs",{"bg-secondary":"draft"===c,"bg-green-100":"published"===c}),labelColor:"published"===c?"text-green-900":"text-dark",activeOptionValue:c,options:un()}),dataTestId:"lesson-status-dropdown"})};function pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(r),!0).forEach((function(t){mn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return hn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vn=(0,o.forwardRef)((function(e,t){var r=e.space,n=e.lesson,i=e.section,a=e.setSections,s=e.tableRowProps,c=e.dragHandleProps,l=e.isDragging,u=e.isOverlay,d=e.isNameEditable,p=e.setIsNameEditable,f=(0,m.k6)(),b=bn((0,o.useState)(!1),2),h=b[0],y=b[1],g=(0,ot.kK)(),_=rn(),j=function(){f.push(G.H4.editLesson({spaceSlug:r.slug,sectionId:i.id,lessonId:n.id}))};return(0,O.jsxs)($t.SC,fn(fn({id:"lesson-item-".concat(n.id),ref:t},s||{}),{},{className:v()("bg-primary group cursor-auto",{"opacity-50":l,"overflow-hidden rounded-md shadow-lg":u}),dataTestId:"course-lesson-row",children:[(0,O.jsx)($t.pj,fn(fn({className:"pl-3 pr-0 md:pl-10"},(0,Jt.XG)(r)&&{colSpan:3}),{},{children:(0,O.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,O.jsx)("div",fn(fn({className:"hover:bg-secondary flex h-6 w-6 cursor-move items-center justify-center rounded",ref:null===c||void 0===c?void 0:c.setActivatorNodeRef},(null===c||void 0===c?void 0:c.listeners)||{}),{},{children:(0,O.jsx)(se.JO,{type:"16-reorder",size:16})})),d&&!u?(0,O.jsx)($r,{lesson:n,section:i,setSections:a,onClose:function(){return p(!1)}}):(0,O.jsx)("button",{type:"submit",className:"hover:border-dark mr-4 cursor-pointer truncate border-b border-dashed border-transparent",title:n.name,onClick:function(){return p(!0)},children:(0,O.jsx)(U.Z.LabelSm,{children:n.name})})]})})),(0,O.jsx)($t.pj,{colSpan:"1",className:"!pr-6 text-right",children:(0,O.jsxs)("div",{className:"flex items-center justify-end gap-x-4",children:[!u&&(0,O.jsx)(Dt.z,{className:"!text-dark hover:bg-tertiary invisible rounded !px-2 !py-1 !font-normal sm:group-hover:visible",variant:"plain",onClick:j,children:I18n.t("courses.edit.sections.edit_lesson")}),(0,O.jsx)(dn,{lesson:n,section:i}),!u&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(at.Lt,{button:(0,O.jsx)("div",{className:"hover:bg-tertiary cursor-pointer rounded p-1 group-hover:visible sm:invisible",children:(0,O.jsx)(se.JO,{type:"menu-dots",className:"text-light",useWithFillCurrentColor:!0})}),dataTestId:"lesson-dropdown-menu",children:[(0,O.jsx)(at.Lt.ItemWithLink,{onClick:function(){f.push(G.H4.showLesson({spaceSlug:r.slug,sectionId:i.id,lessonId:n.id}))},children:I18n.t("courses.edit.lesson.view_lesson")}),(0,O.jsx)(at.Lt.ItemWithLink,{onClick:j,children:I18n.t("courses.edit.sections.edit_lesson")}),(0,O.jsx)(at.Lt.ItemWithLink,{onClick:function(){return g?_.show({courseId:r.id,sectionId:i.id,lessonId:n.id,defaultName:n.name}):setTimeout((function(){return p(!0)}),100)},children:I18n.t("courses.edit.sections.rename_lesson")}),(0,O.jsx)(at.Lt.ItemWithLink,{onClick:function(){return y(!0)},children:I18n.t("courses.edit.sections.delete_lesson")})]}),(0,O.jsx)(qr,{show:h,onClose:function(){return y(!1)},courseId:r.id,lessonId:n.id,sectionId:i.id,name:n.name})]})]})})]}))}));vn.displayName="LessonItem";var yn=["lesson","section","space"];function gn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(r),!0).forEach((function(t){jn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xn(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var wn=function(e){var t=e.lesson,r=e.section,n=e.space,i=xn(e,yn),o=(0,Zt.nB)({id:t.sortId,data:{dragType:"lesson",item:t,sectionSortId:r.sortId}}),a=o.attributes,s=o.listeners,c=o.setActivatorNodeRef,l=o.setNodeRef,u=o.transform,d=o.transition,p=o.isDragging,f={transform:rr.ux.Transform.toString(u),transition:d};return(0,O.jsx)(vn,_n({isDraggable:!0,isDragging:p,ref:l,lesson:t,section:r,space:n,tableRowProps:_n({style:f},a),dragHandleProps:{listeners:s,setActivatorNodeRef:c}},i))},On=r(31736),Sn=r(49729);function Pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Nn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var In="courses.edit.sections.drip_schedule.form",An=function(e){var t=(0,Jt.nl)(e),r=(0,Jt.Cc)(e);return(0,Jt.Hv)(r,t)},En=function(e){return["days","weeks"].map((function(t){return{label:(0,a.t)("".concat(In,".").concat(t),{count:e}),value:t}}))},Dn=function(e){var t=e.onChange,r=e.dripDelay,n=e.disabled,i=kn((0,o.useState)((0,Jt.nl)(r)),2),s=i[0],c=i[1],l=kn((0,o.useState)((0,Jt.Cc)(r)),2),u=l[0],d=l[1],p=kn((0,o.useState)(!1),2),f=p[0],m=p[1],b=kn((0,o.useState)(An(r)),2),h=b[0],v=b[1],y=(0,o.useRef)(null),g=(0,a.t)("".concat(In,".drip_delay_button_text"),{drip_delay:h}),_=(0,a.t)("".concat(In,".").concat(s),{count:u}),j=(0,a.t)("".concat(In,".drip_delay_message"),{drip_delay:(0,Jt.Hv)(u,s).toLowerCase()});(0,o.useEffect)((function(){v(An(r)),c((0,Jt.nl)(r)),d((0,Jt.Cc)(r))}),[r]);var x=function(e,t){var r=parseInt(e)||0,n=kn("weeks"===t?[0,100]:[0,999],2),i=n[0],o=n[1];r=Math.min(Math.max(r,i),o),d(r)};return(0,O.jsxs)("div",{children:[(0,O.jsxs)(Dt.z,{disabled:n,variant:"secondary",className:"flex w-full items-center justify-between !pr-2",forwardedRef:y,onClick:function(){m(!f)},children:[(0,O.jsx)("span",{children:g}),(0,O.jsx)(se.JO,{className:"text-dark",type:"20-chevron-down-sm",size:20})]}),(0,O.jsx)(On.ZP,{visible:f,onClickOutside:function(e,t){y.current instanceof HTMLButtonElement&&t.target instanceof HTMLElement&&(t.target===y.current||y.current.contains(t.target))||m(!1)},allowHTML:!0,interactive:!0,duration:0,arrow:!1,delay:0,theme:"drip-delay-dropdown",placement:"bottom-start",content:(0,O.jsxs)("div",{className:"bg-primary border-primary mb-6 w-64 rounded-md border !px-4 !pt-3 shadow-md",children:[(0,O.jsx)(U.Z.BodyMd,{weight:"font-semibold",children:(0,a.t)("".concat(In,".drip_delay"))}),(0,O.jsxs)("div",{className:"my-3 flex w-full items-center justify-between",children:[(0,O.jsx)("div",{className:"w-20",children:(0,O.jsx)(Sn.I,{min:0,max:1e3,value:u,onChange:function(e){x(e.target.value,s)},otherClassName:"!p-2",type:"number"})}),(0,O.jsx)(at.Lt,{className:"ml-2 grow",buttonClassName:"w-full",size:at.wk.SMALL,onChange:function(e){c(e),x(u,e)},button:(0,O.jsxs)(Dt.z,{large:!0,variant:"secondary",className:"!border-primary !flex w-full items-center justify-between !px-4 !pr-3 !font-normal",children:[(0,O.jsx)("span",{children:_}),(0,O.jsx)(se.JO,{className:"text-dark",type:"20-chevron-down-sm",size:20})]}),options:En(u)})]}),(0,O.jsx)(U.Z.BodySm,{children:j}),(0,O.jsx)(Dt.z,{variant:"circle",full:!0,className:"my-3",onClick:function(){var e="days"===s?u:7*u;t(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(r),!0).forEach((function(t){Cn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({drip_delay:e},0===e&&{notify_students_enabled:!1})),m(!1)},children:(0,a.t)("done")})]}),children:(0,O.jsx)("span",{})})]})},Tn=r(67685);function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Mn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rn=function(e){return e&&(0,nr.w)({dateTime:new Date(e),format:"date_time_with_short_timezone"})},Bn=function(e){var t,r=e.onChange,n=e.disabled,i=e.section,s=Ln((0,o.useState)(!1),2),c=s[0],l=s[1],u=Ln((0,o.useState)(Rn(i.dripped_at)),2),d=u[0],p=u[1],f=(0,o.useRef)(null);return i.is_dripped?t=(0,a.t)("courses.edit.sections.drip_schedule.form.section_already_available"):i.dripped_at||(t=(0,a.t)("courses.edit.sections.drip_schedule.form.section_immediately_available")),(0,O.jsxs)("div",{className:"!py-0",children:[(0,O.jsx)(Ct.T,{disabled:!t,content:t,children:(0,O.jsxs)(Dt.z,{forwardedRef:f,disabled:n||!!i.drip_notifications_sent_at,variant:"secondary",className:"flex w-full items-center justify-between !pr-2",onClick:function(){l(!c)},children:[(0,O.jsx)("span",{children:d||(0,a.t)("courses.edit.sections.drip_schedule.form.select_drip_date")}),(0,O.jsx)(se.JO,{className:"text-dark",type:"20-chevron-down-sm",size:20})]})}),(0,O.jsx)(Tn.M,{datePickerVisible:c,onClickOutside:function(e,t){f.current instanceof HTMLButtonElement&&t.target instanceof HTMLElement&&(t.target===f.current||f.current.contains(t.target))||l(!1)},onCancel:function(){p(Rn(null)),r({dripped_at:null}),l(!1)},cancelButtonText:(0,a.t)("courses.edit.sections.drip_schedule.form.clear_date"),value:i.dripped_at,onSave:function(e){p(Rn(e)),r({dripped_at:e}),l(!1)},saveButtonVariant:"circle"})]})};function Un(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var Fn=function(e){var t,r,n,o=e.space,s=e.section,c=(0,z.p)(),l=c.success,u=c.error,d=(0,f.useQueryClient)(),p=(0,Jt.MS)(o)?(0,a.t)("courses.edit.sections.drip_schedule.form.drip_date"):(0,a.t)("courses.edit.sections.drip_schedule.form.drip_delay"),m=function(e){var t=e.section,r=e.options;return{changeDripScheduleMutation:(0,f.useMutation)((function(e){return(0,$e.aU)(G.av.courses.updateSection({sectionId:t.id,courseId:t.space_id}),e)}),r)}}({section:s,options:{onSuccess:(r=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.invalidateQueries((0,Bt.bD)(s.space_id));case 2:l((0,a.t)("courses.edit.sections.drip_schedule.form.save_success",{drip_type:p}),{duration:"short",shouldUseProgress:!1});case 3:case"end":return e.stop()}}),e)})),n=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){Un(o,n,i,a,s,"next",e)}function s(e){Un(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return n.apply(this,arguments)}),onError:function(){u((0,a.t)("courses.edit.sections.drip_schedule.form.save_error",{drip_type:p.toLowerCase()}))}}}),b=m.changeDripScheduleMutation,h=function(e){b.mutate({course_section:e})};return(0,O.jsxs)(O.Fragment,{children:[(0,Jt.MS)(o)&&(0,O.jsx)(Bn,{onChange:h,section:s,disabled:b.isLoading}),(0,Jt.vv)(o)&&(0,O.jsx)(Dn,{onChange:h,dripDelay:null!==(t=s.drip_delay)&&void 0!==t?t:0,disabled:b.isLoading})]})};function zn(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function Vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return qn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Gn=function(e){var t,r,n=e.section,a=e.onClose,s=(0,b.L2)().data,c=Vn((0,o.useState)(n.name),2),l=c[0],u=c[1],d=(0,f.useQueryClient)(),p=(0,z.p)(),m=(0,f.useMutation)((function(e){return(0,$e.aU)(G.av.courses.updateSection({courseId:s.id,sectionId:n.id}),e)}),{onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.invalidateQueries((0,Bt.bD)(s.id));case 2:a();case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){zn(o,n,i,a,s,"next",e)}function s(e){zn(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)}),onError:function(e){p.error(e.errorDetails)}});return(0,O.jsx)(Hr,{name:l,setName:u,isLoading:m.isLoading,onSubmit:function(){return m.mutate({course_section:{name:l}})},onClose:a,useSemiboldFont:!0,dataTestId:"section-title"})};function Hn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(r),!0).forEach((function(t){Zn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qn=(0,o.forwardRef)((function(e,t){var r=e.space,n=e.section,i=e.setSections,a=e.isNameEditable,c=e.tableBodyProps,l=void 0===c?{}:c,u=e.dragHandleProps,d=e.isDragging,p=e.setIsNameEditable,f=e.isOverlay,m=Jn(zt(),2),b=m[0],h=m[1],y=Jn((0,o.useState)(!1),2),g=y[0],_=y[1],j=n.lessons.map((function(e){return e.sortId})),x=rn(),w=(0,ot.kK)();return(0,O.jsxs)($t.RM,Wn(Wn({className:v()("bg-primary cursor-auto transition-all duration-200 ease-in-out",{"opacity-50":d,"overflow-hidden rounded-md shadow-lg":f}),ref:t},l),{},{children:[(0,O.jsxs)($t.SC,{id:"section-item-".concat(n.id),className:"bg-secondary group",dataTestId:"course-section-row",children:[(0,O.jsx)($t.pj,{className:"px-1 md:px-5",children:(0,O.jsxs)("div",{className:"flex items-center gap-1",children:[(0,O.jsx)("div",Wn(Wn({className:"hover:bg-primary flex h-6 w-6 cursor-move items-center justify-center rounded",ref:null===u||void 0===u?void 0:u.setActivatorNodeRef},(null===u||void 0===u?void 0:u.listeners)||{}),{},{children:(0,O.jsx)(se.JO,{type:"16-reorder",size:16})})),a&&!f?(0,O.jsx)(Gn,{section:n,setSections:i,onClose:function(){return p(!1)}}):(0,O.jsx)("button",{type:"button",className:"hover:border-dark truncate border-b border-dashed border-transparent",onClick:function(){return p(!0)},children:(0,O.jsx)(U.Z.LabelSm,{weight:"semibold",children:n.name})})]})}),(0,Jt.XG)(r)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)($t.pj,{className:"pr-5",children:!f&&(0,O.jsx)(Fn,{section:n,space:r})}),(0,O.jsx)($t.pj,{className:"pr-5",children:!f&&((0,Jt.MS)(r)&&n.dripped_at||(0,Jt.vv)(r)&&n.drip_delay>0)&&(0,O.jsx)(Rr,{section:n,space:r})})]}),(0,O.jsx)($t.pj,{className:"pr-6 text-right",children:!f&&(0,O.jsxs)("div",{className:"flex items-center justify-end gap-x-4",children:[(0,O.jsx)(Ur,{section:n,setIsNameEditable:function(e){return h({id:e,value:!0})}}),(0,O.jsxs)(at.Lt,{button:(0,O.jsx)("div",{className:"hover:bg-tertiary cursor-pointer rounded p-1 group-hover:visible sm:invisible",children:(0,O.jsx)(se.JO,{type:"menu-dots",className:"text-light",useWithFillCurrentColor:!0})}),dataTestId:"section-dropdown-menu",children:[(0,O.jsx)(at.Lt.ItemWithLink,{onClick:function(){return w?x.show({type:"section",sectionId:n.id,courseId:r.id,defaultName:n.name}):setTimeout((function(){return p(!0)}),100)},children:s().t("courses.edit.sections.rename_section")}),(0,O.jsx)(at.Lt.ItemWithLink,{onClick:function(){return _(!0)},children:s().t("courses.edit.sections.delete_section")})]})]})}),(0,O.jsx)(zr,{show:g,onClose:function(){return _(!1)},courseId:r.id,sectionId:n.id,name:n.name})]}),(0,O.jsx)(Zt.Fo,{items:j,strategy:Zt.qw,children:n.lessons.map((function(e){return(0,O.jsx)(wn,{lesson:e,section:n,space:r,setSections:i,isNameEditable:b.get(e.id),setIsNameEditable:function(t){return h({id:e.id,value:t})}},e.id)}))})]}))}));Qn.displayName="SectionItem";var Kn=["section","space"];function Xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(r),!0).forEach((function(t){ei(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ei(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ti(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ri=function(e){var t=e.section,r=e.space,n=ti(e,Kn),i=(0,Zt.nB)({id:t.sortId,data:{dragType:"section",item:t}}),o=i.attributes,a=i.listeners,s=i.setActivatorNodeRef,c=i.setNodeRef,l=i.transform,u=i.transition,d=i.isDragging,p={transform:rr.ux.Transform.toString(l),transition:u};return(0,O.jsx)(Qn,Yn({isDraggable:!0,isDragging:d,ref:c,section:t,space:r,tableBodyProps:Yn({style:p},o),dragHandleProps:{listeners:a,setActivatorNodeRef:s}},n))};function ni(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ii(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(r),!0).forEach((function(t){oi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ni(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ai=function(e){var t=e.space,r=e.sections,n=e.dispatchSectionsNameEditor,i=(0,o.useMemo)((function(){return r.reduce((function(e,t){return e+t.lessons.length}),0)}),[r]);return(0,O.jsxs)($t.ss,{className:"divide-primary divide-y !border-t-0 p-6","data-testid":"customize-lessons-table-head",children:[(0,O.jsxs)($t.SC,{children:[(0,O.jsx)($t.pj,ii(ii({},(0,Jt.XG)(t)&&{colSpan:3}),{},{className:"px-6",children:(0,O.jsxs)(U.Z.TitleSm,{as:"span",weight:"semibold",children:[(0,a.t)("courses.edit.section_count",{count:(null===r||void 0===r?void 0:r.length)||0})," ",(0,a.t)("separator_dot")," ",(0,a.t)("courses.edit.lesson_count",{count:i})]})})),(0,O.jsx)($t.pj,{className:"px-6 text-right",children:(0,O.jsx)(Gt,{variant:"circle",sections:r,setIsNameEditable:function(e){return n({id:e,value:!0})}})})]}),(0,O.jsxs)($t.SC,{children:[(0,O.jsx)($t.pj,{className:"!py-3 px-6",colSpan:(0,Jt.XG)(t)?1:2,children:(0,O.jsx)(U.Z.LabelXs,{textTransform:"uppercase",children:(0,a.t)("courses.edit.sections.lesson_name")})}),(0,Jt.XG)(t)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)($t.pj,{children:(0,O.jsx)(U.Z.LabelXs,{textTransform:"uppercase",children:(0,a.t)("courses.edit.sections.schedule")})}),(0,O.jsx)($t.pj,{className:"!px-0 !py-3",colSpan:2,children:(0,O.jsxs)(U.Z.LabelXs,{textTransform:"uppercase",children:[(0,a.t)("courses.edit.sections.notify_students"),(0,O.jsx)(Ct.T,{content:(0,a.t)("courses.edit.sections.notify_students_tooltip"),className:"inline-flex",placement:"top-end",children:(0,O.jsx)(se.JO,{type:"question-mark",className:"ml-2 !w-3"})})]})})]})]})]})};function si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ci(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ci(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var li=function(e){var t,r,n,i,a,s,c,l,u=e.space,d=e.sections,p=e.setSections,f=e.dispatchSectionsNameEditor,m=e.sectionsNameEditor,b=si((0,o.useState)(null),2),h=b[0],v=b[1],y="lesson"===(null===h||void 0===h||null===(t=h.data)||void 0===t||null===(r=t.current)||void 0===r?void 0:r.dragType),g="section"===(null===h||void 0===h||null===(n=h.data)||void 0===n||null===(i=n.current)||void 0===i?void 0:i.dragType),_=y&&(null===h||void 0===h||null===(a=h.data)||void 0===a||null===(s=a.current)||void 0===s?void 0:s.item),j=g&&(null===h||void 0===h||null===(c=h.data)||void 0===c||null===(l=c.current)||void 0===l?void 0:l.item);return(0,O.jsxs)(tr,{sections:d,setSections:p,setActiveDragItem:v,children:[(0,O.jsxs)($t.iA,{variant:"no-border",className:"border-primary w-full overflow-hidden rounded-lg border",tableClassName:"table-fixed w-full",dataTestId:"sections-lessons-table",children:[(0,O.jsxs)("colgroup",{children:[(0,O.jsx)("col",{}),(0,Jt.XG)(u)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("col",{className:"w-72"}),(0,O.jsx)("col",{className:"w-24"})]}),(0,O.jsx)("col",{className:"w-72"})]}),(0,O.jsx)(ai,{space:u,sections:d,dispatchSectionsNameEditor:f}),(0,O.jsx)(Zt.Fo,{id:"sections-list",items:d.map((function(e){return e.sortId})),strategy:Zt.qw,children:d.map((function(e){return(0,O.jsx)(ri,{setSections:p,space:u,section:e,isNameEditable:m.get(e.id),setIsNameEditable:function(t){return f({id:e.id,value:t})}},e.id)}))})]}),(0,O.jsxs)(Wt.y9,{wrapperElement:"table",children:[_&&(0,O.jsx)(vn,{lesson:_,isOverlay:!0}),j&&(0,O.jsx)(Qn,{space:u,section:j,isOverlay:!0})]})]})};function ui(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return di(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return di(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function di(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var pi=function(e){var t=e.sections,r=e.setSections,n=e.sectionsAreLoading,i=e.space,o=ui(zt(),2),a=o[0],s=o[1];return(0,O.jsx)(A,{className:"!max-w-6xl md:!px-6",children:(0,O.jsxs)("div",{className:"flex flex-col",children:[(0,O.jsx)("div",{className:"mb-4 flex justify-between","data-testid":"customize-lessons-header",children:(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(U.Z.TitleMd,{children:I18n.t("courses.edit.sections.lessons")}),(0,O.jsx)(Ut.T,{space:i})]})}),n?(0,O.jsx)(Vt.m,{}):t.length?(0,O.jsx)(li,{space:i,sections:t,setSections:r,dispatchSectionsNameEditor:s,sectionsNameEditor:a}):(0,O.jsx)(Ht,{sections:t,dispatchSectionsNameEditor:s})]})})};function fi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return mi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(r),!0).forEach((function(t){vi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yi=function(e){var t=e.space,r=(0,Bt.rF)(t.id),n=r.data,i=r.isLoading,a=r.dataUpdatedAt,s=(0,o.useMemo)((function(){return((null===n||void 0===n?void 0:n.records)||[]).map((function(e){var t;return hi(hi({},e),{},{sortId:"section-".concat(e.id),lessons:null===e||void 0===e||null===(t=e.lessons)||void 0===t?void 0:t.map((function(e){return hi(hi({},e),{},{sortId:"lesson-".concat(e.id)})}))})}))}),[n,a]),c=fi((0,o.useState)(s),2),l=c[0],u=c[1];return(0,o.useEffect)((function(){u(s)}),[n,s,a]),(0,O.jsx)(pi,{sectionsAreLoading:i,sections:l,setSections:u,space:t})},gi=r(98843),_i=r(74238),ji=r(36211);function xi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(r),!0).forEach((function(t){Oi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ci=(0,o.createContext)(null);Ci.displayName="FormBlocksContext";var ki=function(){var e=(0,o.useContext)(Ci);if(!e)throw new Error("useFormBlocks must be used within a FormBlocksProvider");return e},Ni=function(e){var t=e.children,r=e.name,n=void 0===r?"blocks":r,i=Si((0,o.useState)(null),2),a=i[0],s=i[1],c=(0,g.Gc)().watch,l=(0,g.Dq)({name:n}),u=l.fields,d=l.update,p=l.replace,f=c(n),m=u.map((function(e,t){return wi(wi({},e),f[t])})),b=Boolean(a),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return-1;var t=m.find((function(t){return t.id===e}));return t?m.indexOf(t):-1};return(0,O.jsx)(Ci.Provider,{value:{blocks:m,isEditingBlock:b,blockBeingEdited:a,getBlockIndex:h,removeBlockBeingEdited:function(){return s(null)},setBlockBeingEdited:s,toggleBlockHidden:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e){var t=m.find((function(t){return t.id===e}));if(t){var r=m.indexOf(t);if(-1!==r){var n=wi(wi({},t),{},{hidden:!t.hidden});d(r,n)}}}},getBlockDataPath:function(){var e=h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");return-1===e?"":"".concat(n,".").concat(e,".data")},replaceBlocks:function(e){return p(e)}},children:t})},Ii=r(87301);function Ai(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(r),!0).forEach((function(t){Di(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ai(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Di(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ti=function(e){var t=e.children,r=e.space,n=void 0===r?{}:r,i=(0,Ii.z)(n),o=(0,g.cI)({defaultValues:{lock_screen_blocks:i}});return(0,O.jsx)(g.RV,Ei(Ei({},o),{},{children:(0,O.jsx)(Ni,{name:"lock_screen_blocks",children:t})}))},Li=function(e){var t=e.space,r=void 0===t?{}:t,n=(0,_i.sL)(),i=ki().blocks,o=r.emoji,a=void 0===o?"":o,s=r.name,c=void 0===s?"":s;return(0,O.jsx)(ji.n,{theme:n,headerSpaceEmoji:a,headerSpaceTitle:c,blocks:i})},Mi=r(79599),Ri=r(25153),Bi=r(84112),Ui=["children"],Fi=["children"],zi=["children"];function Vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(r),!0).forEach((function(t){Gi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hi(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Wi=(0,a.t)("courses.lockscreen.tabs.content"),Zi=(0,a.t)("courses.lockscreen.tabs.design"),Ji=[{label:Wi},{label:Zi}],$i=function(e){var t=e.children,r=Hi(e,Ui);return(0,O.jsx)(Bi.LU,qi(qi({tabs:Ji,initialTab:Wi,wrapperClassName:"px-0 overflow-x-auto"},r),{},{children:t}))},Qi=function(e){var t=e.children,r=Hi(e,Fi);return(0,O.jsx)(Bi.xf,qi(qi({tab:Wi,className:"overflow-y-visible"},r),{},{children:t}))},Ki=function(e){var t=e.children,r=Hi(e,zi);return(0,O.jsx)(Bi.xf,qi(qi({tab:Zi,className:"overflow-y-visible"},r),{},{children:t}))},Xi="#000000",Yi=function(e){var t=e.blockDataPath,r=(0,g.qo)({name:"".concat(t,".button_label")}),n=(0,g.qo)({name:"".concat(t,".button_link")});return(0,O.jsxs)($i,{children:[(0,O.jsxs)(Qi,{children:[(0,O.jsx)(w.l.Item,{name:"".concat(t,".heading"),hideBorder:!0,hideDescription:!0,label:(0,a.t)("courses.lockscreen.fields.heading"),children:(0,O.jsx)(w.l.Input,{})}),(0,O.jsx)(w.l.Item,{name:"".concat(t,".description"),hideBorder:!0,hideDescription:!0,label:(0,a.t)("courses.lockscreen.fields.description"),children:(0,O.jsx)(w.l.TextArea,{})}),(0,O.jsx)(w.l.Item,{name:"".concat(t,".button_label"),hideBorder:!0,hideDescription:!0,label:(0,a.t)("courses.lockscreen.fields.button_label"),rules:{required:n&&(0,a.t)("courses.lockscreen.errors.button_label_required")},children:(0,O.jsx)(w.l.Input,{})}),(0,O.jsx)(w.l.Item,{name:"".concat(t,".button_link"),hideBorder:!0,hideDescription:!0,label:(0,a.t)("courses.lockscreen.fields.button_link"),rules:{required:r&&(0,a.t)("courses.lockscreen.errors.button_link_required"),pattern:{value:Mi.OT,message:(0,a.t)("courses.lockscreen.errors.button_link_invalid")}},children:(0,O.jsx)(w.l.Input,{})})]}),(0,O.jsxs)(Ki,{children:[(0,O.jsx)("div",{className:"mb-5"}),(0,O.jsx)(Ri.Y,{label:(0,a.t)("courses.lockscreen.fields.background_image"),name:"".concat(t,".background_image"),aspectRatio:4,customAspectRatioHelpText:(0,a.t)("image_upload.recommended_size_lock_screen_background_image"),previewVariant:"cover",hideUnsplash:!1}),(0,O.jsx)(w.l.Item,{name:"".concat(t,".overlay_color"),label:(0,a.t)("courses.lockscreen.fields.overlay_color"),placeholder:Xi,hideBorder:!0,hideDescription:!0,children:(0,O.jsx)(w.l.ColorPicker,{})}),(0,O.jsx)(w.l.Item,{name:"".concat(t,".heading_color"),label:(0,a.t)("courses.lockscreen.fields.heading"),placeholder:Xi,hideBorder:!0,hideDescription:!0,children:(0,O.jsx)(w.l.ColorPicker,{})}),(0,O.jsx)(w.l.Item,{name:"".concat(t,".text_color"),label:(0,a.t)("courses.lockscreen.fields.text"),placeholder:Xi,hideBorder:!0,hideDescription:!0,children:(0,O.jsx)(w.l.ColorPicker,{})}),(0,O.jsx)(w.l.Item,{name:"".concat(t,".button_background_color"),label:(0,a.t)("courses.lockscreen.fields.button_background"),placeholder:Xi,hideBorder:!0,hideDescription:!0,children:(0,O.jsx)(w.l.ColorPicker,{})}),(0,O.jsx)(w.l.Item,{name:"".concat(t,".button_text_color"),label:(0,a.t)("courses.lockscreen.fields.button_label"),placeholder:Xi,hideBorder:!0,hideDescription:!0,children:(0,O.jsx)(w.l.ColorPicker,{})})]})]})};function eo(e){return function(e){if(Array.isArray(e))return to(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return to(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return to(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function to(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function no(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(r),!0).forEach((function(t){io(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function io(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oo=r(3803),ao=r(61989);function so(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return co(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return co(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function co(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lo=function(e){var t=e.blockDataPath,r=(0,b.L2)().data,n=(0,g.Gc)(),i=n.watch,s=n.setValue,l=(0,g.cl)().defaultValues,u=so((0,o.useState)(!0),2),d=u[0],p=u[1],f="".concat(t,".locked_page_description.trix_html"),m="".concat(t,".locked_page_description.rendered_html_with_layout"),h=so((0,o.useState)((0,c.get)(l,f)),2),v=h[0],y=h[1],_=i(f),j=(0,gi.z1)({space:r,options:{onSuccess:function(e){var t,r=null===e||void 0===e||null===(t=e.locked_page_description)||void 0===t?void 0:t.rendered_html_with_layout;s(m,r)}}}).mutate;return(0,o.useEffect)((function(){if(_!==v){if(_!==v&&d)return y(_),void p(!1);var e=(0,c.debounce)((function(){j({locked_page_description:_})}),500);return e(),e.cancel}}),[j,v,_,d]),(0,O.jsxs)("div",{className:"pb-2 pt-5",children:[(0,O.jsx)("div",{className:"text-dark mb-2 flex items-center",children:(0,O.jsx)(U.Z.LabelSm,{weight:"semibold",children:(0,a.t)("courses.lockscreen.fields.description")})}),(0,O.jsx)("div",{className:"trix-v2",children:(0,O.jsx)(ao.O,{className:"locked-page-description",name:f,id:f})}),(0,O.jsx)(oo.v,{className:"mt-2",children:(0,a.t)("courses.lockscreen.legacy_description_update_warning")})]})},uo={banner:function(e){var t=e.blockDataPath;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(U.Z.LabelLg,{weight:"semibold",children:(0,a.t)("courses.lockscreen.block_name.banner")}),(0,O.jsx)(Yi,{blockDataPath:t})]})},description:function(e){var t=e.blockDataPath,r=(0,g.Gc)(),n=r.watch,i=r.setValue,o="".concat(t,".sgids_to_object_map"),s=n(o)||{},c="".concat(t,".inline_attachments"),l=n(c)||[];return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:"mb-7 flex flex-col gap-2",children:[(0,O.jsx)(U.Z.LabelLg,{weight:"semibold",children:(0,a.t)("courses.lockscreen.block_name.description")}),(0,O.jsx)(U.Z.LabelSm,{children:(0,a.t)("courses.lockscreen.placeholder.slash_commands")})]}),(0,O.jsx)("div",{className:"border-primary h-96 resize-y overflow-y-auto rounded-lg border px-4 py-3",children:(0,O.jsx)($.$,{name:"".concat(t,".description_tiptap"),sgidToObjectMap:s,inlineAttachments:l,className:"h-full",editorClassName:"h-full",onLocalSgidToObjectMapChange:function(e){var t=no(no({},s),e);i(o,t)},onLocalAttachmentsChange:function(e){return i(c,[].concat(eo(l),eo(e)))},disabledExtensions:["mention","poll","cta"]})})]})},call_to_action:function(e){var t=e.blockDataPath;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(U.Z.LabelLg,{weight:"semibold",children:(0,a.t)("courses.lockscreen.block_name.call_to_action")}),(0,O.jsx)(Yi,{blockDataPath:t})]})},legacy_lock_screen:function(e){var t=e.blockDataPath;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(U.Z.LabelLg,{weight:"semibold",children:(0,a.t)("courses.lockscreen.block_name.legacy_lock_screen")}),(0,O.jsx)("div",{className:"mb-7"}),(0,O.jsxs)("div",{children:[(0,O.jsx)(w.l.Item,{name:"".concat(t,".locked_page_heading"),hideBorder:!0,hideDescription:!0,label:(0,a.t)("courses.lockscreen.fields.heading"),children:(0,O.jsx)(w.l.Input,{})}),(0,O.jsx)(lo,{blockDataPath:t}),(0,O.jsx)(w.l.Item,{name:"".concat(t,".locked_button_label"),hideBorder:!0,hideDescription:!0,label:(0,a.t)("courses.lockscreen.fields.button_label"),children:(0,O.jsx)(w.l.Input,{})}),(0,O.jsx)(w.l.Item,{name:"".concat(t,".locked_button_url"),hideBorder:!0,hideDescription:!0,label:(0,a.t)("courses.lockscreen.fields.button_link"),children:(0,O.jsx)(w.l.Input,{})})]})]})}},po=function(e){var t=e.type,r=e.id,n=(0,ki().getBlockDataPath)(r);if(!n)return null;var i=uo[t];return i?(0,O.jsx)(i,{blockDataPath:n}):null},fo=function(){var e=ki(),t=e.removeBlockBeingEdited,r=e.blockBeingEdited;if(!r)return null;var n=r.type,i=r.id;return(0,O.jsxs)("div",{className:"p-6",children:[(0,O.jsx)("button",{type:"submit",className:"text-dark -ml-2 mb-4 block h-7 w-7",onClick:t,children:(0,O.jsx)(se.JO,{type:"20-arrow-left",size:20})}),(0,O.jsx)(po,{type:n,id:i})]})},mo=r(95974),bo=r(66946),ho=function(e){var t=e.icon,r=e.label,n=e.noEdit,i=void 0!==n&&n,o=(0,bo.dw)().useDragHandle,s=(0,bo.dI)(),c=s.item,l=s.listeners,u=ki(),d=u.toggleBlockHidden,p=u.setBlockBeingEdited,f=c.hidden,m=[];return i||m.push({tooltip:(0,a.t)("courses.lockscreen.edit_block"),icon:"pencil",onClick:function(){return p(c)}}),m.push({tooltip:f?(0,a.t)("courses.lockscreen.show_block"):(0,a.t)("courses.lockscreen.hide_block"),icon:f?"16-eye-closed":"16-eye-open",onClick:function(){return d(c.id)}}),(0,O.jsx)(mo.TR,{item:{icon:t,label:r},actions:m,dragEventListeners:l,useDragHandle:o,className:v()({"bg-secondary text-light":f})})},vo=["blocks","onSort"];function yo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(r),!0).forEach((function(t){_o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jo(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var xo={banner:function(){return(0,O.jsx)(ho,{icon:"16-video-block",label:(0,a.t)("courses.lockscreen.banner")})},description:function(){return(0,O.jsx)(ho,{icon:"16-document-text",label:(0,a.t)("courses.lockscreen.description")})},call_to_action:function(){return(0,O.jsx)(ho,{icon:"16-call-to-action",label:(0,a.t)("courses.lockscreen.call_to_action")})},lessons:function(){return(0,O.jsx)(ho,{icon:"16-text",label:(0,a.t)("courses.lockscreen.lessons"),noEdit:!0})},legacy_lock_screen:function(){return(0,O.jsx)(ho,{icon:"16-document-text",label:(0,a.t)("courses.lockscreen.legacy_lock_screen")})}},wo=function(){var e=(0,bo.dI)().item,t=e.type,r=xo[t];return(0,O.jsx)(r,{block:e})},Oo=function(e){var t=e.blocks,r=e.onSort,n=jo(e,vo),i=(0,k.UV)().contentPortalElement;return(0,O.jsxs)(bo.cm,go(go({items:t,onSort:r},n),{},{children:[(0,O.jsx)(bo.cm.List,{children:t.map((function(e){return(0,O.jsx)(bo.cm.Item,{item:e,children:(0,O.jsx)(wo,{})},e.id)}))}),(0,O.jsx)(bo.cm.DragOverlay,{portalTo:i,children:(0,O.jsx)(wo,{})})]}))},So=function(){var e=ki(),t=e.blocks,r=e.replaceBlocks;return(0,O.jsxs)("div",{className:"p-6",children:[(0,O.jsx)(oo.v,{className:"mb-7",children:(0,a.t)("courses.lockscreen.only_visible_on_private")}),(0,O.jsx)("div",{className:"mb-4",children:(0,O.jsx)(U.Z.LabelLg,{weight:"semibold",children:(0,a.t)("courses.lockscreen.page_blocks")})}),(0,O.jsx)(Oo,{blocks:t,onSort:r})]})},Po=function(){return ki().isEditingBlock?(0,O.jsx)(fo,{}):(0,O.jsx)(So,{})};function Co(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ko(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(r),!0).forEach((function(t){No(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Co(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function No(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Io=function(e){var t=e.lock_screen_blocks,r=function(){var e,t,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find((function(e){return"legacy_lock_screen"===e.type}));return r?ko(ko({},r.data),{},{locked_page_description:(null===(e=r.data)||void 0===e||null===(t=e.locked_page_description)||void 0===t?void 0:t.trix_html)||""}):null}(t),n=Boolean(r),i=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return(0,c.omit)(e,"id")})).map((function(e){return"lessons"===e.type||"legacy_lock_screen"===e.type?ko(ko({},e),{},{data:{}}):e}))}(t);return n?ko({lock_screen_blocks:i},r):{lock_screen_blocks:i}},Ao=function(e){var t=e.space,r=void 0===t?{}:t,n=e.onSave,i=(0,I.eW)(),s=i.formId,l=i.addBeforeExit,u=i.removeBeforeExit,d=(0,g.Gc)(),p=d.handleSubmit,f=d.formState,m=d.reset,b=f.dirtyFields,h=Object.keys(b).length>0,v=(0,o.useCallback)((function(){return!h||window.confirm((0,a.t)("courses.lockscreen.modal.unsaved_changes"))}),[h]);(0,o.useEffect)((function(){return l(v),u}),[u,l,v]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(I.Ar.Sidebar,{children:(0,O.jsx)("form",{id:s,className:"react-form h-full w-full",onSubmit:p((function(e){if((0,c.isFunction)(n)){var t=Io(e);n(t),m(null,{keepValues:!0})}})),children:(0,O.jsx)(Po,{})})}),(0,O.jsx)(I.Ar.Main,{children:(0,O.jsx)(Li,{space:r})})]})},Eo=function(e){var t=e.space,r=void 0===t?{}:t,n=(0,z.p)(),i=n.success,o=n.error,s=(0,b.T4)({spaceId:r.id}).refetch,c=(0,gi.z1)({space:r,options:{onSuccess:function(){s(),i((0,a.t)("courses.lockscreen.toast.saved"))},onError:function(){o((0,a.t)("courses.lockscreen.toast.save_error"))}}}).mutate;return(0,O.jsx)(Ao,{space:r,onSave:c})},Do=function(e){var t=e.space,r=void 0===t?{}:t;return(0,O.jsx)(Ti,{space:r,children:(0,O.jsx)(Eo,{space:r})})},To=function(e){var t=e.space,r=e.scrollToId,n=(0,I.eW)().currentSection;return r&&(0,c.delay)((function(){var e;return null===(e=document.getElementById(r))||void 0===e?void 0:e.scrollIntoView()})),n===(0,a.t)("customize_space.paywalls.title")?(0,O.jsx)(_t,{space:t}):n===(0,a.t)("customize_space.customize")?(0,O.jsx)(Oe,{space:t}):n===(0,a.t)("customize_space.members")?(0,O.jsx)(Rt,{space:t}):n===(0,a.t)("customize_space.options")?(0,O.jsx)(We,{space:t}):n===(0,a.t)("customize_space.lessons")?(0,O.jsx)(yi,{space:t}):n===(0,a.t)("customize_space.lock_screen")?(0,O.jsx)(Do,{space:t}):null},Lo=r(30176),Mo=function(e){var t=e.space,r=e.scrollToId,n=(0,I.eW)().currentSection===(0,a.t)("customize_space.lock_screen"),i=n?"no-header":"only-main";return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(I.Ar,{variant:i,className:v()({"hidden lg:grid":n}),children:t&&(0,O.jsx)(To,{space:t,scrollToId:r})}),n&&(0,O.jsx)(Lo.R,{className:"lg:hidden",title:(0,a.t)("courses.lockscreen.mobile_unsupported.title"),description:(0,a.t)("courses.lockscreen.mobile_unsupported.description")})]})},Ro=r(73793),Bo=r(61652),Uo=function(){var e=(0,I.eW)(),t=e.onExit,r=e.isSaving,n=e.formId,i=e.isSaveButtonDisabled,o=function(){var e=(0,B.mx)(),t=e.dirtyForms,r=e.setDirtyForms,n=t||B.Wm,i=n.customize,o=n.options;return{isDirty:Object.values(i).some(Boolean)||Object.values(o).some(Boolean),resetDirtyFields:function(){r(B.Wm)}}}(),s=o.isDirty,c=o.resetDirtyFields,l=(0,x.v)().isMobileWebNewSpaceCustomizationUIEnabled;return(0,O.jsxs)("div",{className:"flex w-full flex-col items-start justify-between gap-y-2 md:flex-row md:items-center md:gap-y-0",children:[(0,O.jsx)(U.Z.LabelSm,{weight:"semibold",children:s&&(0,a.t)("unsaved_changes")}),(0,O.jsxs)("div",{className:v()({"grid w-full grid-cols-2 gap-4":l,"flex gap-4":!l}),children:[(0,O.jsx)(Dt.z,{variant:"secondary",onClick:function(){s&&c(),t()},full:l,children:(0,a.t)("cancel")}),(0,O.jsx)(Bo.k,{full:l,type:"submit",formId:n,disabled:r||i,variant:"circle",children:(0,a.t)("save_changes")})]})]})},Fo=r(14955),zo=r(12939),Vo=r(82102),qo=function(){var e=(0,I.eW)(),t=e.formId,r=e.isSaving;return(0,O.jsx)(I.h4.Actions,{className:"hidden justify-end lg:flex",children:(0,O.jsx)(I.h4.SaveButton,{type:"submit",formId:t,disabled:r,variant:"circle",children:(0,a.t)("save_changes")})})},Go=function(){var e=(0,I.eW)(),t=e.sections,r=e.currentSection,n=e.setCurrentSection,i=e.title,o=(0,ot.kK)(),s=(0,x.v)().isMobileWebNewSpaceCustomizationUIEnabled,c=sa(),l=(0,Vo.X)(),u=r===(0,a.t)("customize_space.lock_screen"),d=t.map((function(e){return{value:e,label:e}}));return(0,O.jsxs)(I.h4,{className:"flex !max-h-[initial] flex-col !items-start gap-4 !p-0 lg:grid lg:!items-center",style:{gridTemplateColumns:"1fr 1fr 1fr"},children:[(0,O.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,O.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[o&&s&&(0,O.jsx)(Gr.h,{name:"16-arrow-left",onClick:c.hide}),i&&(0,O.jsx)("span",{className:"flex w-full min-w-0",children:(0,O.jsx)(Ct.T,{content:i,className:"truncate text-lg font-semibold",interactive:!1,children:i})})]}),o&&(0,O.jsx)(Fo.o,{onClick:function(){c.hide(),l.hide()}})]}),(0,O.jsx)(I.h4.Actions,{className:"hidden w-full overflow-auto md:block lg:justify-center lg:overflow-visible",children:(0,O.jsx)(zo.S,{value:r,onChange:n,options:d})}),u&&(0,O.jsx)(qo,{})]})},Ho=function(e){var t=e.children,r=(0,I.eW)().currentSection,n=(0,x.v)().isMobileWebNewSpaceCustomizationUIEnabled,i=r===(0,a.t)("customize_space.lock_screen"),o=r===(0,a.t)("customize_space.members"),s=r===(0,a.t)("customize_space.lessons"),c=(0,ot.kK)(),l=[(0,a.t)("customize_space.customize"),(0,a.t)("customize_space.options")].includes(r),u=i||o||s,d=l&&n&&c;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Ro.x.Header,{className:v()({"!px-5 !py-4":n}),children:(0,O.jsx)(Go,{})}),(0,O.jsxs)(Ro.x.Body,{className:v()({"px-5 py-8":n}),wrapperClassName:v()({"max-w-full h-full":u}),children:[t,d&&(0,O.jsx)(Uo,{})]}),l&&!n&&(0,O.jsx)(Ro.x.Footer,{children:(0,O.jsx)(Uo,{})})]})},Wo=function(e){var t=e.isOpen,r=e.onSave,n=e.onClose,i=e.onExit,o=e.sections,a=e.initialSection,s=e.title,c=e.formId,l=void 0===c?"edit-space-form":c,u=e.contentPortalId,d=void 0===u?"customize-space-portal":u,p=e.children;return(0,O.jsx)(Ro.x,{isOpen:t,onClose:n,shouldShowCloseButton:!0,contentPortalId:d,children:(0,O.jsx)(I.MW,{formId:l,sections:o,initialSection:a,title:s,onSave:r,onExit:i,children:(0,O.jsx)(Ho,{children:p})})})},Zo=function(e){var t=e.isOpen,r=e.onExit,n=e.onClose,i=e.onSave,o=e.space,a=e.sections,s=e.initialSection,c=e.onSlugChange,l=e.scrollToId;return o?(0,O.jsx)(b.mE,{spaceId:o.id,children:(0,O.jsx)(b.DJ,{onSlugChange:c,children:(0,O.jsx)(Wo,{isOpen:t,onClose:n,onExit:r,onSave:i,sections:a,initialSection:s,title:null===o||void 0===o?void 0:o.name,children:(0,O.jsx)(Mo,{space:o,scrollToId:l})})})}):null},Jo=r(12204),$o=function(e){var t=e.space,r=e.formDefaultValues,n=e.updateSpace,i=void 0===n?c.noop:n,a=(0,g.Gc)(),s=a.handleSubmit,l=a.control,u=a.formState,d=(0,g.qo)({control:l,defaultValue:r}),p=(0,c.debounce)(s(i),200);return(0,o.useEffect)((function(){Object.keys(u.dirtyFields).length>0&&p()}),[d,u.dirtyFields]),(0,O.jsx)(Jo.l,{space:t,isShownInRailBar:!0})},Qo=r(73761),Ko=r(37292),Xo=r(71362);function Yo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ea(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ta(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function ra(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ta(o,n,i,a,s,"next",e)}function s(e){ta(o,n,i,a,s,"throw",e)}a(void 0)}))}}function na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ia(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ia(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oa=function(e){var t=e.spaceId,r=e.refetch,n=e.initialSection,s=e.shouldRedirectOnSlugChange,l=void 0===s||s,d=e.scrollToId,h=(0,m.k6)(),v=(0,f.useQueryClient)(),y=(0,b.wh)().currentCommunitySettings,g=void 0===y?{}:y,_=na((0,o.useState)(p()()),2),x=_[0],S=_[1],P=(0,b.T4)({spaceId:t}),C=P.space,k=P.refetch,N=(0,b.nT)().actions.refresh,I=(0,j.fO)(),A=(0,Qr.dd)(),E=(0,z.p)().success,D=g.customize_space_full_screen_enabled,T=Boolean(D),L=(0,o.useMemo)((function(){if(!(0,c.isEmpty)(C))return(0,Qo.fj)(C)}),[C]),M=function(){var e=ra(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.invalidateQueries([b.Xe,t]);case 2:return e.next=4,v.invalidateQueries([Ko.J,t]);case 4:return e.next=6,k();case 6:return e.next=8,N();case 8:if(!u()(r)){e.next=11;break}return e.next=11,r();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=ra(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E((0,a.t)("changes_saved")),e.next=3,M();case 3:S(p()());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=(0,f.useMutation)((function(e){var t=(0,Qo.$o)(e);return(0,$e.aU)((0,G.C1)(String(null===C||void 0===C?void 0:C.id)),{space:t})}),{onSuccess:R}),U=function(e){var t=e.isCourseSpace,r=[];return void 0!==t&&t&&r.push((0,a.t)("customize_space.lessons")),r.push((0,a.t)("customize_space.customize")),r.push((0,a.t)("customize_space.paywalls.title")),r.push((0,a.t)("customize_space.lock_screen")),r.push((0,a.t)("customize_space.members")),r.push((0,a.t)("customize_space.options")),r}({isCourseSpace:(0,j.EG)(C)});return T?(0,O.jsx)(Zo,{isOpen:A.visible,space:C,sections:U,initialSection:n||U[0],scrollToId:d,onSlugChange:function(e){l&&h.push(I(e))},onSave:function(e){var t=e.data,r=e.onSuccess;B.mutate(t,{onSuccess:r})},onExit:function(){M(),A.hide()},onClose:function(){return A.hide()}}):(0,O.jsx)(Xo.d,{fixedHeader:!0,noWrapperPadding:!0,title:(0,a.t)("spaces.customize"),open:A.visible,onClose:A.hide,children:C&&L&&(0,O.jsx)(w.l,{className:"h-full",formClassName:"h-full",onSubmit:function(){return B.mutate()},defaultValues:L,children:(0,O.jsxs)("div",{className:"flex h-full flex-col",children:[(0,O.jsx)("div",{className:"flex-1 px-6",children:(0,O.jsx)($o,{formDefaultValues:L,space:C})}),(0,O.jsx)(Xo.d.Footer,{sticky:!0,children:(0,O.jsx)(Dt.z,{onClick:function(){return B.mutate()},variant:"primary",disabled:B.isLoading,full:!0,type:"submit",children:B.isLoading?(0,a.t)("saving"):(0,a.t)("save")})})]})},x)})},aa=Qr.gk.create((function(e){return(0,O.jsx)(oa,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(r),!0).forEach((function(t){ea(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),sa=function(){return(0,Qr.dd)(aa)}},42309:(e,t,r)=>{"use strict";r.d(t,{m:()=>s});var n=r(94184),i=r.n(n),o=r(70544),a=r(85893),s=function(e){var t=e.dateString,r=e.isSquare,n=void 0!==r&&r,s=(0,o.N)(t),c=s.dayOfMonth,l=s.shortMonthString;return(0,a.jsxs)("div",{className:i()("bg-secondary flex cursor-default flex-col items-center justify-center rounded-md py-1.5",{"h-12 w-12":n,"w-10":!n}),children:[(0,a.jsx)("div",{className:"text-dark text-center text-base font-bold leading-5",children:c}),(0,a.jsx)("div",{className:"text-dark text-center font-medium uppercase",style:{fontSize:"9px"},children:l})]})}},25011:(e,t,r)=>{"use strict";r.d(t,{j:()=>o});var n=r(16743),i=r(85893),o=function(e){var t=e.title,r=e.description,o=e.children;return(0,i.jsxs)("div",{className:"space__gated !bg-primary !border-primary mx-auto","data-testid":"post_section",children:[t&&(0,i.jsx)(n.Z.TitleSm,{weight:"semibold",children:t}),r&&(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)(n.Z.BodyMd,{children:r})}),o]})}},58521:(e,t,r)=>{"use strict";r.d(t,{J:()=>m});var n=r(67294),i=r(86013),o=r(6645),a=r(44410),s=r(59393),c=r(49326),l=r(55675),u={AT:"Austria",BE:"Belgium",BG:"Bulgaria",HR:"Croatia",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",HU:"Hungary",IE:"Ireland",IT:"Italy",LV:"Latvia",LT:"Lithuania",LU:"Luxembourg",MT:"Malta",NL:"Netherlands",PL:"Poland",PT:"Portugal",RO:"Romania",SK:"Slovakia",SI:"Slovenia",ES:"Spain",SE:"Sweden",GB:"United Kingdom",CH:"Switzerland"},d=r(85893);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(){var e,t=!(null===(e=window.webview)||void 0===e||!e.isComingFromReactNativeWebview),r=p((0,o.Z)([s.nV]),2),f=r[0],m=r[1],b=p((0,n.useState)(!0),2),h=b[0],v=b[1],y=p((0,n.useState)(window.CLOUDFLARE_COUNTRY_CODE),2),g=y[0],_=y[1],j=f[s.nV],x=function(e){var t;m(s.nV,e,{expires:(t=new Date,t.setTime(t.getTime()+31536e6),t),domain:window.location.hostname.includes(s.eG)?s.eG:window.location.hostname,path:"/",sameSite:"None",secure:["production","staging"].includes(window.RAILS_ENV)})};return(0,n.useEffect)((function(){j||null!==g&&void 0!==g&&g.length||fetch("https://cloudflare-quic.com/b/headers").then((function(e){return e.json()})).then((function(e){return _(e.headers["Cf-Ipcountry"])})).catch((function(e){console.error(e)}))})),(0,n.useEffect)((function(){var e;e=Object.keys(u),v(!e.includes(g))}),[g]),!document.cookie||h||j||t?null:["production","staging"].includes(window.RAILS_ENV)?(0,d.jsx)(a.Z,{children:(0,d.jsxs)("div",{className:"border-primary bg-primary fixed bottom-0 z-[1060] w-full gap-4 border p-4 shadow-lg md:bottom-8 md:right-8 md:flex md:w-auto md:max-w-3xl md:rounded",children:[(0,d.jsx)("div",{className:"mb-4 leading-4 md:mb-0",children:(0,d.jsxs)("p",{className:"text-dark text-sm",children:[(0,i.t)(["gdpr.cookie_banner.description"]),(0,d.jsx)("br",{}),(0,i.t)("gdpr.cookie_banner.privacy_policy.prefix"),(0,d.jsx)("a",{href:c.ae.privacy_policy(),target:"_blank",rel:"noreferrer",children:(0,i.t)("gdpr.cookie_banner.privacy_policy.link")}),(0,i.t)("gdpr.cookie_banner.privacy_policy.suffix")]})}),(0,d.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,d.jsx)(l.z,{onClick:function(){return x(!1)},variant:"secondary",children:(0,i.t)("gdpr.cookie_banner.decline_button")}),(0,d.jsx)(l.z,{onClick:function(){return x(!0)},variant:"primary",children:(0,i.t)("gdpr.cookie_banner.accept_button")})]})]})}):null}},13997:(e,t,r)=>{"use strict";r.d(t,{_:()=>u});var n=r(12814),i=r(88767),o=r(81303),a=r(59393),s=r(75752),c=r(85893),l=new i.QueryClient(s.Vr),u=function(){var e=(0,o.D)();return(0,n.Z)(a.hn.OPEN_SEARCH_MODAL,(function(t){t.preventDefault(),e.show()})),(0,c.jsx)(i.QueryClientProvider,{client:l})}},36732:(e,t,r)=>{"use strict";r.d(t,{v:()=>h});var n=r(67294),i=r(86013),o=r(63001),a=r(97012),s=r(29647),c=r(72831),l=r(38870),u=r(23322),d=r(85893);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(){var e=(0,u.R)(),t=e.posts,r=e.fetchPosts,p=(0,a.wh)(),m=(0,o.r)().show;return(0,n.useEffect)((function(){r()}),[]),t.length>0?(0,d.jsxs)("div",{className:"sidebar__block sidebar__right trending-posts block",children:[(0,d.jsx)("div",{className:"block__title",children:(0,d.jsx)("h4",{children:(0,i.t)("trending_posts")})}),(0,d.jsx)("div",{className:"block__content",children:(0,d.jsx)("ul",{className:"trending-posts__post-list",children:t.map((function(e){var t,r=(0,s.H)({publicUid:null!==(t=e.author.public_uid)&&void 0!==t?t:"",showMemberProfileDrawer:function(e){m(e)},isProfileDrawerEnabled:(0,c.i)(p),params:{}});return(0,d.jsx)("li",{children:(0,d.jsxs)("div",{className:"trending-posts__post",children:[!e.hide_meta_info&&(0,d.jsx)("div",{className:"trending-posts__avatar",children:(0,d.jsx)("a",f(f({},r),{},{children:(0,d.jsx)(l.s,{src:e.author.avatar_url,name:e.author.name,size:"10"})}))}),(0,d.jsxs)("div",{className:"trending-posts__content",children:[(0,d.jsx)("a",{href:e.show_path,className:"trending-posts__post-name",children:e.name}),!e.hide_meta_info&&(0,d.jsx)("a",f(f({},r),{},{className:"trending-posts__author-name",children:e.author.name}))]})]})},e.id)}))})})]}):null},h=function(){return(0,d.jsx)("div",{className:"homepage__sidebar",children:(0,d.jsx)(b,{})})}},41671:(e,t,r)=>{"use strict";r.d(t,{z:()=>c});var n=r(67294),i=r(23322),o=r(55797),a=r(32373),s=r(85893),c=function(){var e=(0,i.R)(),t=e.spaces,r=e.fetchSpaceSuggestions,c=e.spacesHasNextPage;(0,n.useEffect)((function(){r({page:1,perPage:3})}),[]);return t.length>2?(0,s.jsx)("div",{className:"carousel carousel--suggested-spaces",children:(0,s.jsx)(o.l,{cards:t,renderCardsOnpage:function(e){var r=e.fromIndex,n=void 0===r?0:r,i=e.toIndex,o=void 0===i?2:i;return t.slice(n,o).map((function(e){return(0,s.jsx)(a.p,{id:e.id,url:e.url,emoji:e.emoji,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url,name:e.name,totalMembers:e.total_members},e.id)}))},cardsPerPage:3,cardsHaveNextPage:c,fetchCards:r})}):(0,s.jsx)("div",{})}},93279:(e,t,r)=>{"use strict";r.d(t,{c:()=>p});var n=r(67294),i=r(23322),o=r(30887),a=r(94184),s=r.n(a),c=r(85893),l=function(e){var t=e.title,r=e.description;return(0,c.jsxs)("div",{className:s()("welcome-banner__content-wrapper",{"has-title":t.length>0}),children:[t&&(0,c.jsx)("h1",{className:"welcome-banner__title","data-testid":"welcome-banner-title",children:t}),r&&(0,c.jsx)("div",{className:"welcome-banner__content",children:(0,c.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})})]})},u=r(98222),d=function(e){var t=e.isVideo,r=void 0!==t&&t,n=e.mediaUrl;return r?(0,c.jsx)("div",{className:"welcome-banner__video",children:(0,c.jsx)("div",{className:"video-content",children:(0,c.jsx)(u.n,{url:n})})}):(0,c.jsx)("div",{className:"welcome-banner__image",children:(0,c.jsx)("div",{className:"image-content",children:(0,c.jsx)("img",{loading:"lazy",alt:"",src:n})})})},p=function(e){var t=e.community_member_id,r=(0,i.R)(),a=r.isWelcomeBannerVisible,s=r.bannerData,u=r.fetchBannerData,p=r.setWelcomeBannerPreference,f=s.is_video,m=s.media_url,b=s.title,h=s.description,v=s.allow_close;(0,n.useEffect)((function(){u()}),[]);return a?(0,c.jsx)("div",{className:"welcome-banner",children:(0,c.jsxs)("div",{className:"welcome-banner__inside",children:[v&&(0,c.jsx)("button",{type:"button",className:"welcome-banner__close",onClick:function(){p({communityMemberId:t,display:!1})},children:(0,c.jsx)(o.JO,{type:"close"})}),m&&(0,c.jsx)("div",{className:"welcome-banner__feature",children:(0,c.jsx)(d,{isVideo:f,mediaUrl:m})}),(b||h)&&(0,c.jsx)(l,{title:b,description:h})]})}):null}},53770:(e,t,r)=>{"use strict";r.d(t,{U:()=>p});var n=r(67294),i=r(86013),o=r(23322),a=r(32917),s=r(32373),c=r(85893),l=function(){return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"homepage__nav",children:(0,c.jsx)("h2",{className:"homepage__title","data-testid":"space-title-name",children:(0,i.t)("home_page.title")})}),(0,c.jsx)("div",{className:"space__gated locked-pane","data-testid":"post_section",children:(0,c.jsx)("h3",{children:(0,i.t)("landing_page.settings.empty_suggested_spaces_text")})})]})},u=function(){var e=(0,o.R)(),t=e.spaces,r=void 0===t?[]:t,u=e.fetchSpaceSuggestions,d=e.participatingSpacesIds,p=e.spacesHasNextPage,f=e.setParticipatingSpacesIds,m=(d||{}).size,b=void 0===m?0:m,h=(null===r||void 0===r?void 0:r.length)||0;(0,n.useEffect)((function(){u({page:1})}),[]);var v=function(e){var t=new Set(d);t.add(e),f(t)},y=(0,n.useMemo)((function(){return Math.max(3-b,0)}),[b]);return(0,n.useMemo)((function(){return h>=y}),[h,y])?(0,c.jsxs)("div",{className:"suggested-spaces",children:[(0,c.jsxs)("div",{className:"suggested-spaces__header",children:[(0,c.jsxs)("div",{className:"header__left",children:[(0,c.jsx)("div",{className:"header__title",children:y>0?(0,c.jsx)("h2",{children:(0,i.t)("home_page.suggested_spaces.join_count_spaces",{count:y})}):(0,c.jsx)("h2",{children:(0,i.t)("home_page.suggested_spaces.you_are_ready")})}),(0,c.jsx)("div",{className:"header__subtitle",children:y>0?(0,i.t)("home_page.suggested_spaces.to_get_started"):(0,i.t)("home_page.suggested_spaces.click_continue")})]}),(0,c.jsx)("div",{className:"header__right",children:(0,c.jsx)("button",{type:"button",className:"btn btn-primary",disabled:d.size<3,onClick:function(){return window.location.reload()},children:(0,i.t)("home_page.suggested_spaces.continue")})})]}),(0,c.jsx)("div",{className:"suggested-spaces__listing",children:r.map((function(e){return(0,c.jsx)(s.p,{id:e.id,url:e.url,emoji:e.emoji,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url,name:e.name,totalMembers:e.total_members,handleJoinSpace:v},e.id)}))}),p&&(0,c.jsx)(a.C,{fetchNewPage:function(e){return u({page:e})},initialPage:2})]}):(0,c.jsx)(l,{})},d=r(93279),p=function(e){var t=e.community_member_id,r=e.display_welcome_banner;return(0,c.jsxs)("div",{children:[r&&(0,c.jsx)(d.c,{communityMemberId:t}),(0,c.jsx)(u,{})]})}},20007:(e,t,r)=>{"use strict";r.d(t,{y:()=>E});var n=r(64687),i=r.n(n),o=r(67294),a=r(96486),s=r(87536),c=r(49326),l=r(32070),u=r(34128),d=r(25415),p=r(31384),f=r(94184),m=r.n(f),b=r(41389),h=r(16743),v=r(85893);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){var t=e.isLoading,r=e.handleUpload,n=e.name,i=e.description,o=e.disabled,a=(0,b.uI)({onDropAccepted:r,onDropRejected:function(e){console.error(e)},noClick:!0,disabled:t,accept:{"image/*":[".jpeg",".gif",".png",".jpg"],"video/*":[".mp4",".mov",".m4v"]},maxFiles:1,multiple:!1}),s=a.getRootProps,c=a.getInputProps,l=a.isDragActive;return(0,v.jsx)("div",g(g({className:m()("border-primary flex h-64 w-full items-center justify-center rounded-lg border border-dashed",{"text-secondary bg-secondary":!l,"text-messaging-info-blue border-blue-300 bg-blue-50":l})},s()),{},{onPaste:function(e){var t,n;if((null===(t=e.clipboardData)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)>0){e.preventDefault();var i=Array.from(e.clipboardData.files);r(i)}},children:(0,v.jsxs)("div",{className:"flex max-w-xs flex-col items-center",children:[(0,v.jsx)("div",{children:(0,v.jsx)(h.Z.LabelLg,{weight:"medium",children:I18n.t("home_page.edit_form.welcome_banner.drop_image")})}),(0,v.jsx)("input",g({},c())),(0,v.jsx)("div",{className:"mt-3 px-4 text-center leading-none",children:(0,v.jsx)(h.Z.LabelSm,{weight:"regular",color:"text-light",children:i})}),(0,v.jsxs)("label",{htmlFor:n,className:"mt-6",children:[(0,v.jsx)("span",{className:m()("h-[34px] rounded-md font-bold leading-5 text-darkest border border-secondary bg-primary hover:bg-tertiary !font-medium py-[6px] px-[18px] text-sm cursor-pointer",{"cursor-not-allowed":o}),children:I18n.t("home_page.edit_form.welcome_banner.upload")}),(0,v.jsx)("input",{accept:"image/*, video/*",type:"file",id:n,name:n,className:"hidden",disabled:o,onChange:function(e){return!o&&r(e.target.files)}})]})]})}))},x=function(e){var t=e.title,r=e.children;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("label",{htmlFor:"cover-image",className:"mb-2",children:t}),(0,v.jsx)("div",{className:"relative mb-2 flex flex-row items-start justify-between whitespace-pre-wrap",children:r})]})},w=r(86013),O=r(56310),S=r.n(O),P=r(30887),C=r(87958),k=function(e){var t=e.url,r=e.type,n=void 0===r?"image":r,i=e.onRemove,o=e.disabled,a=e.isSpaceWelcomeBanner,s=n.includes("image");return(0,v.jsxs)(v.Fragment,{children:[s?(0,v.jsx)("img",{loading:"lazy",src:t,alt:(0,w.t)("cover_image"),className:m()("w-full rounded-md",{"h-auto":!a,"h-[256px] object-cover":a})}):(0,v.jsx)("div",{className:"h-auto rounded-md",children:(0,v.jsx)(S(),{url:t,width:"100%",height:"100%",controls:!0})}),!o&&(0,v.jsx)(C.T,{content:(0,w.t)("home_page.remove_banner"),children:(0,v.jsx)("button",{type:"button",className:"border-primary bg-tertiary group absolute right-0 top-0 -m-2 flex h-[22px] w-[22px] cursor-pointer items-center justify-center rounded-full border",onClick:i,"aria-label":(0,w.t)("home_page.remove_banner"),children:(0,v.jsx)(P.JO,{type:"20-close-sm","aria-hidden":!0,size:20})})})]})};function N(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=e.name,r=void 0===t?"cover_image":t,n=e.title,f=e.description,m=e.disabled,b=void 0!==m&&m,h=e.removeAttachmentsPath,y=void 0===h?"":h,g=e.removeAttachmentsParams,_=void 0===g?{}:g,w=e.isVideo,O=void 0!==w&&w,S=e.isSpaceWelcomeBanner,P=void 0!==S&&S,C=(0,s.Gc)(),A=C.getValues,E=C.setValue,D=I((0,o.useState)(0),2),T=D[0],L=D[1],M=I((0,o.useState)(!1),2),R=M[0],B=M[1],U=A(r),F={};if((0,a.isObject)(U))F=U;else if(!((0,a.isObject)(U)||(0,a.isNull)(U)||(0,a.isUndefined)(U))){F={url:(0,c.C9)({filename:r,signed_id:U}),type:O?"video":"image"}}var z=I((0,o.useState)(F),2),V=z[0],q=z[1],G=V.url,H=V.type,W=function(e){B(!0),L(e)},Z=function(e,t,n){q({url:e,type:null===n||void 0===n?void 0:n.split("/")[0]}),E(r,t),B(!1)},J=function(){var e,t=(e=i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),t=y||(0,c._E)(),n=(0,a.isEmpty)(_)?{field_name:p.lb[r]}:_,e.next=5,(0,u.pC)(t,n);case 5:e.sent.success&&(E(r,{url:null,type:"image"}),q({})),B(!1);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){N(o,n,i,a,s,"next",e)}function s(e){N(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return R?(0,v.jsx)(x,{title:n,children:(0,v.jsx)("div",{className:"text-default bg-secondary border-primary flex h-64 w-full items-center justify-center rounded-md border border-dashed",children:(0,v.jsx)(l.D,{percentage:T,size:32,strokeWidth:3})})}):(0,v.jsx)(x,{title:n,children:G?(0,v.jsx)(k,{url:G,type:H,onRemove:J,disabled:b,isSpaceWelcomeBanner:P}):(0,v.jsx)(j,{isLoading:R,handleUpload:function(e){try{new d.Q(e[0],Z,"","",W).start()}catch(t){console.error(t)}},name:r,description:f,disabled:b})})}},31384:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{PM:()=>a,A1:()=>s,lb:()=>c});var a=function(e){var t=e.community,r=e.community_setting,n=r.meta_tags;return i(i({logged_in_description:t.logged_in_user_home_page_banner_description,logged_in_media:t.logged_in_user_home_page_banner_media,logged_in_title:r.logged_in_user_home_page_banner.title,allow_close:r.logged_in_user_home_page_banner.allow_close,logged_in_banner_enabled:r.logged_in_user_home_page_banner.enabled,logged_out_description:t.logged_out_user_home_page_banner_description,logged_out_media:t.logged_out_user_home_page_banner_media,logged_out_title:r.logged_out_user_home_page_banner.title,logged_out_banner_enabled:r.logged_out_user_home_page_banner.enabled,trending_posts_window_in_days:r.trending_posts_window_in_days,default_post_sort_logged_in_user:r.default_post_sort_logged_in_user,default_post_sort_logged_out_user:r.default_post_sort_logged_out_user,include_non_member_space_posts:r.include_non_member_space_posts},n),{},{opengraph_image:n.opengraph_image})},s=function(e,t){var r=t.community,n=t.community_setting,o=n.meta_tags;return i(i({},t),{},{community:i(i({},r),{},{logged_in_user_home_page_banner_description:e.logged_in_description,logged_out_user_home_page_banner_description:e.logged_out_description,logged_in_user_home_page_banner_media:e.logged_in_media,logged_out_user_home_page_banner_media:e.logged_out_media}),community_setting:i(i({},n),{},{trending_posts_window_in_days:e.trending_posts_window_in_days,default_post_sort_logged_in_user:e.default_post_sort_logged_in_user,default_post_sort_logged_out_user:e.default_post_sort_logged_out_user,include_non_member_space_posts:e.include_non_member_space_posts,logged_in_user_home_page_banner:i(i({},n.logged_in_user_home_page_banner),{},{title:e.logged_in_title,enabled:e.logged_in_banner_enabled,allow_close:e.allow_close}),logged_out_user_home_page_banner:i(i({},n.logged_out_user_home_page_banner),{},{title:e.logged_out_title,enabled:e.logged_out_banner_enabled}),meta_tags:i(i({},o),{},{meta_title:e.meta_title,meta_description:e.meta_description,opengraph_title:e.opengraph_title,opengraph_description:e.opengraph_description,opengraph_image:e.opengraph_image})})})},c={logged_in_media:"logged_in_user_home_page_banner_media",logged_out_media:"logged_out_user_home_page_banner_media"}},62504:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b,N:()=>h});var n=r(64687),i=r.n(n),o=r(67294),a=r(96486),s=r(88767),c=r(34128),l=r(49326),u=r(31023),d=r(393),p=r(72810),f=r(97012);function m(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var b="home-page-posts",h=function(e){var t,r=(0,f.nT)(),n=(null===r||void 0===r||null===(t=r.helpers)||void 0===t?void 0:t.isDataLoading)||a.noop,h=(0,f.wh)(),v=Boolean(null===h||void 0===h?void 0:h.isLoading),y=(0,p.t)().sort,g=void 0===y?e:y,_=(0,u.d)(),j=_.removeRecord,x=_.findAndReplaceRecord,w=(0,s.useQueryClient)(),O=(0,o.useMemo)((function(){return Boolean(n()||v)}),[n,v]),S=(0,o.useMemo)((function(){return[b,{sort:g}]}),[g]),P=(0,s.useInfiniteQuery)(S,(function(e){var t,r=e.pageParam;return t=void 0===r?1:r,(0,c.UT)(l.av.homePagePosts.index({params:{page:t,sort:g}}))}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),C=P.fetchNextPage,k=P.data,N=P.hasNextPage,I=P.isLoading,A=P.refetch,E=(0,o.useCallback)(function(){var e,t=(e=i().mark((function e(t){var r,n,o=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(o.length>1&&void 0!==o[1]?o[1]:{}).refetch,n=t,void 0!==r&&!r){e.next=6;break}return e.next=5,w.fetchQuery(l.av.posts.show({spaceId:t.space_id,postSlug:t.slug}));case 5:n=e.sent;case 6:return e.abrupt("return",x(n,S));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[w,x,S]),D=(0,o.useCallback)((function(e){j(e,S)}),[j,S]),T=(0,d.D)(),L=(0,o.useMemo)((function(){return k?(0,a.uniqBy)((0,a.flatten)(k.pages.map((function(e){return e.records}))),"id"):[]}),[k]),M=(0,o.useMemo)((function(){return k?k.pages.map((function(e){return e.records.map((function(e){return e.id}))})):[]}),[k]);return{fetchNextPage:C,hasNextPage:Boolean(N),isLoading:I,isLoadingAppData:T,onPostChange:E,onPostDestroy:D,perPagePostIds:M,posts:L,refetchPosts:A,shouldShowLoader:O}}},52422:(e,t,r)=>{"use strict";r.d(t,{w:()=>l});var n=r(86013),i=r(87958),o=r(45034),a=r(16743),s=r(85893),c=function(e){var t=e.tooltipText,r=e.text;return!e.hide&&(0,s.jsx)(i.T,{content:t,className:"cursor-pointer pr-3",children:(0,s.jsx)(a.Z.LabelSm,{color:"text-default",children:r})})},l=function(e){var t=e.invitationLinkName,r=e.invitationLinkActive,i=e.membersCount,l=e.spaces,u=e.spaceGroups,d=e.shouldShowPaywall,p=e.paywallString,f=e.paywallCouponString,m=r?"success":"default";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(a.Z.LabelLg,{children:t}),(0,s.jsx)(o.C,{variant:m,children:(0,s.jsx)("div",{className:"px-2 py-1",children:r?(0,n.t)("invitation_links.summary.badge.active"):(0,n.t)("invitation_links.summary.badge.revoked")})})]}),(0,s.jsx)("div",{className:"pt-1",children:(0,s.jsx)(a.Z.LabelSm,{color:"text-dark",children:(0,n.t)("invitation_links.members_joined",{count:i})})}),(0,s.jsxs)("div",{className:"flex pt-2",children:[(0,s.jsx)(c,{tooltipText:l.join(", "),text:(0,n.t)("invitation_links.summary.spaces",{count:l.length}),hide:l.length<=0}),(0,s.jsx)(c,{tooltipText:u.join(", "),text:(0,n.t)("invitation_links.summary.space_groups",{count:u.length}),hide:u.length<=0}),(0,s.jsx)(c,{tooltipText:p,text:(0,n.t)("invitation_links.summary.paywall"),hide:!d}),(0,s.jsx)(c,{tooltipText:f,text:(0,n.t)("invitation_links.summary.paywall_coupon"),hide:!d||!f})]})]})}},70117:(e,t,r)=>{"use strict";r.d(t,{Q:()=>B});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r(55675),c=r(34128),l=r(49326),u=r(56202),d=r(74442),p=r(86078),f=r(50119),m=r(53225),b=r(72748),h=r(66047),v=r(85785),y=r(54022),g=r(39816),_=r(25415),j=r(85893);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O="landing_page.settings.welcome_banner",S=function(e){var t=e.keyField,r=e.title,n=e.media,i=e.description,s=e.allowClose,c=e.enabled,l=e.onTitleChange,p=e.onBannerDescriptionChange,f=e.displayAllowClose,m=e.onAllowCloseChange,w=e.onRemoveMedia,S=e.onEnabledChange,P=e.setMediaSettings,C=(0,u.o)().reSetWelcomeBannerPreference,k=x((0,o.useState)(!1),2),N=k[0],I=k[1],A=x((0,o.useState)({}),2),E=A[0],D=A[1],T=x((0,o.useState)(0),2),L=T[0],M=T[1],R=x((0,o.useState)(!1),2),B=R[0],U=R[1];(0,g.a)(N);var F=function(e){U(!0),M(e)},z=function(e,t,r,n){D({url:e,type:r}),U(!1);var i=n.split("community")[1].replace(/^\[(.+)\]$/,"$1");P(i,t)},V=function(){D({}),w()},q=function(){return(0,j.jsxs)("div",{className:"form-group full-width media-uploader",id:"field-".concat(t),children:[(0,j.jsx)(d.Q,{field:t,label:(0,a.t)("".concat(O,".media")),description:(0,a.t)("".concat(O,".media_description"))}),(0,j.jsx)(y.o,{id:t,name:t,media:n,previewMedia:E,onMediaUpload:function(e){return function(e,t){try{new _.Q(e.target.files[0],z,"media-uploader",t||"",F).start()}catch(r){console.error(r)}}(e,"community[".concat(t,"_media]"))},isLoading:B,progress:L,onRemoveMedia:V})]})},G=function(){I(!1)},H=function(){I(!0)},W=function(e){e.preventDefault(),C(),I(!1)};return(0,j.jsxs)("div",{className:"form-section__content",children:[(0,j.jsxs)("div",{className:"form-group full-width",id:"field-".concat(t,"-show-banner"),children:[(0,j.jsx)(d.Q,{field:t,label:(0,a.t)("".concat(O,".header")),description:(0,a.t)("".concat(O,".header_description"))}),(0,j.jsx)("div",{className:"form-input",children:(0,j.jsx)("div",{className:"form-meta-button",children:(0,j.jsx)(b.Z,{field:"field-".concat(t,"-enabled"),value:c,onToggleChange:S})})})]}),c&&(0,j.jsxs)("div",{className:"form-section__background",children:[q(),(0,j.jsxs)("div",{className:"form-group full-width",children:[(0,j.jsx)(d.Q,{field:"".concat(t,"-title"),label:(0,a.t)("".concat(O,".title"))}),(0,j.jsx)("div",{className:"form-input",children:(0,j.jsx)("input",{className:"form-control placeholder:text-light placeholder:opacity-100",value:r||"",onChange:l})})]}),(0,j.jsxs)("div",{className:"form-group full-width",children:[(0,j.jsx)(d.Q,{field:"".concat(t,"-description"),label:(0,a.t)("".concat(O,".description"))}),(0,j.jsx)("div",{className:"form-input",children:(0,j.jsx)(h.Z,{id:"rich-text-description-".concat(t),placeholder:(0,a.t)("".concat(O,".write_a_description")),name:"rich-text-description-".concat(t),value:i||"",onChange:p,is_private_space:!1,preventAccidentalLeave:!1},"rich-text-description-".concat(t))})]}),f&&(0,j.jsxs)("div",{className:"form-group full-width",id:"field-".concat(t,"-allow-close"),children:[(0,j.jsxs)("div",{className:"form-meta",children:[(0,j.jsx)("label",{htmlFor:"".concat(t,"-allow-close"),children:(0,a.t)("".concat(O,".allow_close_title"))}),(0,j.jsxs)("div",{className:"field-description",children:[(0,a.t)("".concat(O,".allow_close_title_description")),"\xa0",(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("button",{type:"button",onClick:H,className:"homepage-reset-banner-link w-full text-left",children:(0,a.t)("".concat(O,".reset_preference_title"))}),Boolean(N)&&(0,j.jsx)(v.c,{show:N,closeOnEscape:!0,closeOnOutsideClick:!0,onClose:G,onConfirmation:W,headerText:(0,a.t)("".concat(O,".reset_preference_title")),bodyText:(0,a.t)("".concat(O,".reset_preference_description")),className:"reset-banner-modal"})]})]})]}),(0,j.jsx)("div",{className:"form-input",children:(0,j.jsx)("div",{className:"form-meta-button",children:(0,j.jsx)(b.Z,{field:"allow_close",value:s,onToggleChange:m})})})]})]})]})},P=function(e){var t=e.fieldName,r=e.displayAllowClose,n=void 0===r||r,i=e.community,o=e.community_setting,a=e.setMediaSettings,s=e.onBannerDescriptionChange,c=e.onCommunitySettingChange,l=e.onRemoveMedia,u=o[t],d=u.enabled,p=u.title,f=u.allow_close;return(0,j.jsx)(S,{keyField:t,title:p,enabled:d||!1,description:i["".concat(t,"_description")],media:i["".concat(t,"_media")],setMediaSettings:a,onBannerDescriptionChange:function(e){return s(e,"".concat(t,"_description"))},allowClose:f||!1,onTitleChange:function(e){return c(t,"title",e.target.value)},onAllowCloseChange:function(e){return c(t,"allow_close",e)},onEnabledChange:function(e){return c(t,"enabled",e)},displayAllowClose:n,onRemoveMedia:function(e){return l(e,"".concat(t,"_media"))}})},C=(0,a.t)("landing_page.settings"),k=function(e){var t=e.fieldName,r=e.options,n=e.community,i=e.onOptionSelect,o="".concat(t,"_id");return(0,j.jsxs)("div",{className:"form-group",id:"field-".concat(o),children:[(0,j.jsx)(d.Q,{field:o,label:C[t],description:C["".concat(t,"_description")]}),(0,j.jsx)(m.K,{options:r,selected:n[o],customKey:o,onOptionSelect:function(e){return i(e,o,"community")}})]})};function N(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){D(o,n,i,a,s,"next",e)}function s(e){D(o,n,i,a,s,"throw",e)}a(void 0)}))}}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var B=function(){var e=L((0,o.useState)(!1),2),t=e[0],r=e[1],n=L((0,o.useState)({logged_in:!0,logged_out:!0,meta_details:!0}),2),h=n[0],v=n[1],y=L((0,o.useState)(new Set),2),g=y[0],_=y[1],x=(0,u.o)(),w=x.dataLoaded,O=x.settings,S=x.metaData,C=x.loggedInUserSpaceOptions,I=x.loggedOutUserSpaceOptions,D=x.setSettings,M=x.fetchLandingPageSettings,R=x.setLoggedInUserSpaceOptions,B=x.setLoggedOutUserSpaceOptions,U=O.community,F=O.community_setting,z=U.home_page_enabled,V=U.default_existing_member_space_id,q=U.default_new_member_space_id,G=U.default_logged_out_space_id,H=F.trending_posts_window_in_days,W=F.include_non_member_space_posts,Z=F.meta_tags,J=S.postSortOptions,$=S.trendingPostWindowLimit,Q=S.homePageOption,K=(0,a.t)("landing_page.settings");(0,o.useEffect)((function(){M()}),[]);var X=function(){var e=new Set;return H>$&&e.add((0,a.t)("landing_page.settings.trending_posts_window_limit_exceed",{limit:$})),["logged_in_user_home_page_banner","logged_out_user_home_page_banner"].forEach((function(t){var r=F[t],n=r.enabled,i=r.title;if(n){var o=U["".concat(t,"_media")],a=o.url&&o.url.length>0||o.length>0;0!==i.length||0!==U["".concat(t,"_description")].length||a||e.add(K.welcome_banner.errors.blank_welcome_banner)}})),!(e.size>0)||(_(e),!1)},Y=function(){var e=T(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),X()?(r(!0),n=(0,c.wG)({landing_page_settings:O}),fetch((0,l.H5)(),{method:"POST",body:n,credentials:"same-origin",mode:"no-cors",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(){r(!1),window.location.reload()})).catch((function(e){console.error(e)}))):window.scrollTo(0,0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=T(i().mark((function e(t,n){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,fetch((0,l._E)(),{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({field_name:n})});case 3:e.sent.ok&&(o={community:A(A({},U),{},E({},n,{})),community_setting:F},D(o),r(!1));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),te=function(e,t){var r={community:A(A({},U),{},E({},e,t)),community_setting:F};D(r)},re=function(e,t,r){var n={community:U,community_setting:A(A({},F),{},E({},e,t?A(A({},F[e]),{},E({},t,r)):r))};D(n)},ne=function(e,t){var r={community:A(A({},U),{},E({},t,e.target.innerHTML)),community_setting:F};D(r)},ie=function(e,t,r){var n=O;n="community"===r?{community:A(A({},U),E({},t,e.value)),community_setting:F}:{community:U,community_setting:A(A({},F),E({},t,e.value))},D(n)},oe=function(e){var t=Q.value;if(!0===e){var r={home_page_enabled:e,default_existing_member_space_id:t,default_new_member_space_id:t,default_logged_out_space_id:t},n={community:A(A({},U),r),community_setting:F};R([Q].concat(N(C))),B([Q].concat(N(I))),D(n)}else{var i={home_page_enabled:e},o=C.filter((function(e){return e.value!==t})),a=I.filter((function(e){return e.value!==t}));V===Q.value&&(i.default_existing_member_space_id=o[0].value),q===Q.value&&(i.default_new_member_space_id=o[0].value),G===Q.value&&(i.default_logged_out_space_id=o[0].value);var s={community:A(A({},U),i),community_setting:F};D(s),R(o),B(a)}},ae=function(){return(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)(d.Q,{field:"trending_posts_window_in_days_title",label:K.trending_posts_window_in_days_title,description:K.trending_posts_window_in_days_description}),(0,j.jsx)("div",{className:"form-input",children:(0,j.jsx)("input",{className:"form-control placeholder:text-light placeholder:opacity-100",value:H,onChange:function(e){return re("trending_posts_window_in_days",null,e.target.value)}})})]})},se=["logged_in","logged_out"].map((function(e){var t="default_post_sort_".concat(e,"_user");return(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)(d.Q,{field:t,label:K[t],description:K["".concat(t,"_description")]}),(0,j.jsx)(m.K,{options:J,selected:F[t],customKey:t,onOptionSelect:function(e){return ie(e,t,"community_setting")},searchable:!1})]},t)})),ce=function(){return(0,j.jsxs)("div",{className:"form-group full-width",children:[(0,j.jsx)(d.Q,{field:"include_non_member_space_posts",label:K.include_non_member_space_posts_title,description:K.include_non_member_space_posts_description}),(0,j.jsx)("div",{className:"form-input",children:(0,j.jsx)("div",{className:"form-meta-button",children:(0,j.jsx)(b.Z,{field:"include_non_member_space_posts",value:W,onToggleChange:function(e){return re("include_non_member_space_posts",null,e)}})})})]})},le=["logged_in","logged_out"].map((function(e){var t=h[e];return(0,j.jsxs)("div",{className:"form-section",children:[(0,j.jsx)("div",{className:"form-section__header has-toggle",children:(0,j.jsx)("button",{type:"button",className:"block-toggle ".concat(t?"open":"hidden"),onClick:function(r){r.preventDefault(),v(A(A({},h),{},E({},e,!t)))},children:K["".concat(e,"_defaults_title")]})}),t&&("logged_in"===e?(0,j.jsxs)("div",{className:"form-section__content",children:[(0,j.jsx)(k,{fieldName:"default_existing_member_space",options:C,community:U,onOptionSelect:ie}),(0,j.jsx)(k,{fieldName:"default_new_member_space",options:C,community:U,onOptionSelect:ie}),z&&(0,j.jsx)(P,{fieldName:"logged_in_user_home_page_banner",community:U,community_setting:F,setMediaSettings:te,onBannerDescriptionChange:ne,onCommunitySettingChange:re,onRemoveMedia:ee})]}):(0,j.jsxs)("div",{className:"form-section__content",children:[(0,j.jsx)(k,{fieldName:"default_logged_out_space",options:I,community:U,onOptionSelect:ie}),z&&(0,j.jsx)(P,{fieldName:"logged_out_user_home_page_banner",community:U,community_setting:F,setMediaSettings:te,onBannerDescriptionChange:ne,onCommunitySettingChange:re,onRemoveMedia:ee})]}))]},"".concat(e,"-section"))}));return w?(0,j.jsxs)("form",{onSubmit:Y,children:[g.size>0&&(0,j.jsx)("div",{className:"form-errors",children:g}),(0,j.jsx)("div",{className:"form-section",children:(0,j.jsxs)("div",{className:"form-section__content border-top",children:[(0,j.jsxs)("div",{className:"form-section",children:[(0,j.jsx)("div",{className:"form-group__toggle",children:(0,j.jsxs)("div",{className:"form-group full-width",id:"field-home_page_enabled",children:[(0,j.jsx)(d.Q,{field:"home_page_enabled",label:K.home_page_enabled,description:K.home_page_enabled_description}),(0,j.jsx)("div",{className:"form-input",children:(0,j.jsx)("div",{className:"form-meta-button",children:(0,j.jsx)(b.Z,{field:"home_page_enabled",value:z,onToggleChange:oe})})})]})}),z&&(0,j.jsxs)("div",{className:"form-group__hidden ",children:[ae(),se,ce()]})]}),le,z&&(0,j.jsxs)("div",{className:"form-section",children:[(0,j.jsx)("div",{className:"form-section__header has-toggle",children:(0,j.jsx)("button",{type:"button",className:"block-toggle ".concat(h.meta_details?"open":"hidden"),onClick:function(e){e.preventDefault(),v(A(A({},h),{},{meta_details:!h.meta_details}))},children:K.meta_tag.meta_tag_section_title})}),h.meta_details&&(0,j.jsx)(f.p,{metaTagDetails:Z,localizedData:K,onCommunitySettingChange:re})]},"meta-data-section")]})}),(0,j.jsx)("div",{className:"flex justify-end",children:(0,j.jsx)(s.z,{variant:"circle",type:"submit",disabled:t,children:t?(0,a.t)("submitting"):(0,a.t)("save_changes")})})]}):(0,j.jsx)(p.m,{})}},44422:(e,t,r)=>{"use strict";r.d(t,{x:()=>k});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r(40160),c=r(24185),l=r(13997),u=r(97012),d=r(74238),p=r(20633),f=r(85893),m=function(e){var t=e.currentCommunity,r=void 0===t?{}:t,n=(0,d.TC)().isDarkAppearance,i=r.name,o=r.logo_url,s=r.dark_logo_url,c=o;return n&&s&&(c=s),c?(0,f.jsx)("a",{href:"/",className:"community__brand",children:(0,f.jsx)("div",{className:"community__logo",children:(0,f.jsx)("img",{loading:"lazy",alt:(0,a.t)("community_logo_alt",{community_name:i}),src:c})})}):(0,f.jsxs)("a",{href:"/",className:"community__brand",children:[(0,f.jsx)("div",{className:"brand-icon brand-icon__initial"}),(0,f.jsx)("div",{className:"name",children:i})]})},b=r(63001),h=r(31889),v=r(49326),y=r(38870),g=r(1002),_=function(){var e=(0,u.wh)(),t=e.currentUser,r=e.currentCommunityMember,n=(0,c.TH)(),i=(0,u.ic)(),o=(0,b.r)().show,s=(0,h.vb)(r),l=(null===r||void 0===r?void 0:r.policies)||{},d=l.can_access_billing,m=l.can_access_authentication_page,_=[{action:function(){return o({memberPublicId:null===r||void 0===r?void 0:r.public_uid})},label:(0,a.t)("my_profile")},{to:v.du.profile(n),label:(0,a.t)("edit_profile")},{to:v.du.notifications(n),label:(0,a.t)("notification")},m&&{to:v.du.authentication(n),label:(0,a.t)("authentication")},d&&{to:v.du.billing(n),label:(0,a.t)("billing")},s&&[{action:function(){return window.location.href="/analytics"},label:(0,a.t)("analytics_title")},{to:"/members/manage",label:(0,a.t)("members")},{to:"/settings",label:(0,a.t)("settings_title")}]].flat().filter(Boolean);return t?(0,f.jsx)(g.Lt,{className:"user-menu z-[9999]",button:(0,f.jsx)(y.s,{name:null===r||void 0===r?void 0:r.name,src:null===r||void 0===r?void 0:r.avatar_url,size:"8"}),appendTo:document.getElementById("mainHeader")||document.body,children:(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"bg-secondary -mt-2 mb-1.5 w-full py-1",children:(0,f.jsx)(g.Lt.ItemWithLink,{to:"/u/".concat(null===r||void 0===r?void 0:r.public_uid,"?show_back_link=true"),children:null===r||void 0===r?void 0:r.name})}),_.map((function(e){return(0,f.jsx)(g.Lt.ItemWithLink,{to:e.to,onClick:e.action,children:e.label},e.label)})),(0,f.jsx)(g.Lt.Separator,{}),(0,f.jsx)(g.Lt.ItemLink,{onClick:function(){return window.location.href="/users/sign_out"},children:(0,a.t)("sign_out")})]})}):(0,f.jsx)("div",{className:"user-join__mobile",children:(0,f.jsx)("div",{className:"user-join__menu",children:(0,f.jsxs)(g.Lt,{button:(0,f.jsx)(p.h,{name:"20-user",iconSize:20,buttonSize:28,ariaLabel:(0,a.t)("log_in"),iconClassName:"!w-5 !h-5 !text-dark"}),className:"z-[9999]",appendTo:document.getElementById("mainHeader")||document.body,children:[(0,f.jsx)(g.Lt.ItemLink,{onClick:function(){return window.location.href=v.zo.signIn()},children:(0,a.t)("log_in")}),i((function(e){var t=e.communitySignupUrl;return(0,f.jsx)(g.Lt.ItemLink,{onClick:function(){return window.location.href=t},children:(0,a.t)("sign_up")})}))]})})})},j=function(){var e=(0,d.wC)().minimal_layout,t=(0,u.wh)(),r=t.currentCommunity,n=void 0===r?{}:r,i=t.currentCommunitySettings,b=Boolean((0,c.$B)("/c/:spaceSlug/:postSlug")),h=Boolean(null===i||void 0===i?void 0:i.post_details_mobile_header_enabled);return b&&h?null:(0,f.jsx)("div",{className:"sticky top-0 z-30",children:(0,f.jsx)("header",{id:"mainHeader",className:"header header-v2",children:(0,f.jsxs)("div",{className:"header__inside",children:[!e&&(0,f.jsx)("div",{className:"header__menu",children:(0,f.jsx)(p.h,{name:"hamburger","data-action":"click->mobile-sidebar#toggle",ariaLabel:(0,a.t)("toggle_menu"),className:"toggle-button",buttonSize:28,iconSize:20,iconClassName:"!w-5 !h-5 !text-dark"})}),(0,f.jsx)("div",{className:o()("header__left",{"!justify-start":e}),children:(0,f.jsx)(m,{currentCommunity:n})}),(0,f.jsxs)("div",{className:"header__actions",children:[(0,f.jsx)(l._,{}),(0,f.jsx)("div",{className:"header__action",children:(0,f.jsx)("a",{href:"/analytics",children:(0,f.jsx)("svg",{className:"icon icon-analytics ",viewBox:"0 0 24 24",children:(0,f.jsx)("use",{xlinkHref:"#icon-analytics"})})})}),(0,f.jsx)("div",{className:"header__action ",children:(0,f.jsx)(s.rU,{to:"/members/manage",children:(0,f.jsx)("svg",{className:"icon icon-members ",viewBox:"0 0 24 24",children:(0,f.jsx)("use",{xlinkHref:"#icon-members"})})})}),(0,f.jsx)("div",{className:"header__action ",children:(0,f.jsx)(s.rU,{to:"/settings",children:(0,f.jsx)("svg",{className:"icon icon-settings ",viewBox:"0 0 24 24",children:(0,f.jsx)("use",{xlinkHref:"#icon-settings"})})})}),(0,f.jsx)("div",{className:"header__user relative z-30",children:(0,f.jsx)(_,{})})]})]})})})},x=r(22229),w=r(393),O=r(87189),S=r(61345),P=r(25067),C=r(80938),k=function(){var e=window.location.href,t=(0,n.useCallback)((function(e){null!==e&&(0,x.J)(e)}));(0,n.useEffect)((function(){(0,x.J)(t.current)}),[e]);var r=(0,O.U)(),i=(0,u.nT)().helpers.findBy({slug:r}),o=(0,C.p)(),a=(0,w.D)();return o?a?(0,f.jsx)("header",{className:"header",children:(0,f.jsx)(P.gi,{variant:"app-bar-v2",showMemberAvatarsRow:!!i&&((0,S.V5)(i)||(0,S.H3)(i))})}):(0,f.jsx)(j,{}):null}},63554:(e,t,r)=>{"use strict";r.d(t,{X:()=>o});var n=r(31696),i=r(85893),o=function(){var e=(0,n._)().data,t=(e=void 0===e?{}:e).browser_notifications_html;return(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})}},48339:(e,t,r)=>{"use strict";r.d(t,{W:()=>l});var n=r(88767),i=r(81535),o=r(75752),a=r(21809),s=r(85893),c=new n.QueryClient(o.Vr),l=function(){return(0,s.jsx)(n.QueryClientProvider,{client:c,children:(0,s.jsx)(a.V,{children:(0,s.jsx)(i.f,{})})})}},81535:(e,t,r)=>{"use strict";r.d(t,{f:()=>p});var n=r(94184),i=r.n(n),o=r(86013),a=r(44920),s=r(16743),c=r(19736),l=r(30887),u=r(5295),d=r(85893),p=function(){var e=(0,a.kc)(),t=e.onboardingData,r=e.isLoading,n=e.isOnboardingAvailable;if(r)return(0,d.jsx)(u.a,{});if(!r&&!n)return null;var i=Object.keys(a.gg);return(0,d.jsx)("div",{className:"sidebar__block sidebar__onboarding-steps !bg-primary !border-primary block border",children:(0,d.jsxs)("div",{className:"block__inside !bg-primary !shadow-none",children:[(0,d.jsx)("div",{className:"block__title",children:(0,d.jsx)(s.Z.TitleMd,{as:"h3",children:(0,o.t)("onboarding_title")})}),(0,d.jsx)("ul",{className:"ul--steps",children:i.map((function(e){var r=a.gg[e];return(0,d.jsx)(f,{text:r.label,href:(0,c.zt)({item:r.queryParam}),complete:t[e]},e)}))})]})})},f=function(e){var t=e.complete,r=e.href,n=e.text,o=e.children;return(0,d.jsx)("li",{className:i()({"li--complete":t}),children:o||(0,d.jsxs)("a",{href:r,className:i()({"!text-dark":!t}),children:[(0,d.jsx)(m,{complete:t}),n]})})},m=function(e){var t=e.complete;return(0,d.jsx)(l.JO,{viewBox:"0 0 16 16",size:"16",type:t?"circle-checked-old":"circle-unchecked-old"})}},45836:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var n={standard:"standard",fullscreen:"fullscreen",minimal:"minimal",empty:"empty"}},94572:(e,t,r)=>{"use strict";r.d(t,{O:()=>R,h:()=>B});var n=r(67294),i=r(97012),o=r(28175),a=r(74238),s=r(94184),c=r.n(s),l=r(81196),u=r(30588),d=r(85893),p=function(e){var t=e.children,r=e.bodyClassNames,n=void 0===r?"":r;return(0,l.H)(c()(n,"trix-v2")),(0,u.w)(),(0,d.jsx)("div",{className:"standard-layout-v2",children:t})},f=r(86013),m=r(36422),b=r(30887);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=r(36911),_=function(e){var t=e.title,r=e.children;return(0,d.jsx)(g.S,{title:t,children:(0,d.jsx)("div",{className:"react-layout-fullscreen",children:r})})};_.Content=function(e){var t=e.children;return(0,d.jsx)("div",{className:"react-layout-fullscreen-content",children:(0,d.jsx)("div",{className:"react-layout-fullscreen-wrapper",children:t})})},_.Header=function(e){var t=e.title,r=e.beforeTitle,n=e.afterTitle;return(0,d.jsx)("div",{className:"react-layout-fullscreen-header",children:(0,d.jsxs)("div",{className:"react-layout-fullscreen-wrapper",children:[r&&(0,d.jsx)("div",{className:"react-layout-fullscreen-header-before",children:r}),(0,d.jsxs)("div",{className:"react-layout-fullscreen-header-heading",children:[(0,d.jsx)("h1",{className:"heading-h1",children:t}),n]})]})})},_.Tabs=function(e){var t=e.children;return(0,d.jsx)("div",{className:"react-layout-fullscreen-tabs",children:(0,d.jsx)("div",{className:"react-layout-fullscreen-wrapper",children:(0,d.jsx)("nav",{"aria-label":(0,f.t)("full_screen_layout.tabs"),children:t})})})},_.Topbar=function(e){var t=e.onClose,r=e.actions,n=e.buttonPosition,o=void 0===n?"end":n,a=e.showCommunityIcon,s=void 0===a||a,l=(0,i.wh)().currentCommunity;return(0,d.jsxs)("div",{className:c()("react-layout-fullscreen-topbar",{"react-layout-fullscreen-topbar--reverse":"start"===o}),children:[s&&l&&(0,d.jsx)("div",{className:"react-layout-fullscreen-topbar__community-icon",children:(0,d.jsx)(m.G,v({brand_color:l.prefs.brand_color,brand_text_color:l.prefs.brand_text_color},l))}),(0,d.jsx)("div",{className:"react-layout-fullscreen-topbar__actions",children:r}),(0,d.jsxs)("button",{type:"submit",className:"btn-close",onClick:t,children:[(0,d.jsx)(b.JO,{type:"close"}),(0,d.jsx)("span",{className:"sr-only",children:(0,f.t)("full_screen_layout.close_panel")})]})]})};var j=r(44422),x=r(29808),w=r(26953),O=r(13995),S=function(e){var t=e.children,r=e.bodyClassNames,n=void 0===r?"":r,o=(0,i.wh)().currentCommunityMember;(0,l.H)(c()(n,"trix-v2 minimal-layout"));var a=(0,w.ef)();return(0,d.jsx)("div",{id:"panel",className:"minimal-layout__wrapper",children:(0,d.jsxs)("div",{className:"community__content !bg-secondary",children:[(0,d.jsx)(O.G,{isRenderedOutsideSpace:!0}),(0,d.jsx)(j.x,{}),(0,d.jsx)("div",{className:"standard-layout-v2 no-right-sidebar",children:t}),Boolean(!!o&&a)&&(0,d.jsx)(x.H,{})]})})},P=r(53301),C=r(45836),k=r(32615),N=["disabledSidebar"];function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var M=(0,n.createContext)(void 0);M.displayName="DynamicLayoutContext";var R=function(e){var t,r,s,c,l,u,f=e.disabledSidebar,m=L(e,N),b=(0,i.wh)().isLoading,h=(0,a.wC)().minimal_layout,v=D((0,n.useState)({}),2),y=v[0],g=v[1],j=D((0,n.useState)(h?C.C.minimal:C.C.standard),2),x=j[0],O=j[1],I=(0,o.I)().isV3Enabled,E=(t=(0,k.H)(),r=t.isSpaceRoute,s=t.isSpaceGroupRoute,c=t.isFeedRoute,l=(0,w.a7)(),!r&&!s&&!c&&l),T=I?E:f;switch(x){case C.C.fullscreen:u=_;break;case C.C.standard:u=P.a;break;case C.C.minimal:u=S;break;case C.C.empty:u=p;break;default:u=P.a}return b?null:(0,d.jsx)(M.Provider,{value:{layoutType:x,setLayoutType:O,setStandardLayout:function(){return O(C.C.standard)},setMinimalLayout:function(){return O(C.C.minimal)},setEmptyLayout:function(){return O(C.C.empty)},setDynamicLayoutProps:g,resetDynamicLayoutProps:function(){return g({})}},children:(0,d.jsx)(u,A(A(A({},m),y),{},{disableSidebar:T}))})},B=function(){return(0,n.useContext)(M)}},72452:(e,t,r)=>{"use strict";r.d(t,{u:()=>R});var n=r(94184),i=r.n(n),o=r(86013),a=r(96486),s=r(59393),c=r(30887),l=r(50308),u=r.n(l),d=r(40160),p=r(85893),f=["children","className"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var y=function(e){var t=e.children,r=e.className,n=v(e,f);return function(e){return"to"in e}(n)?(0,p.jsx)(d.rU,b(b({className:i()("text-dark flex w-full justify-center p-5",r),onClick:n.onClick||u()},n),{},{children:t})):function(e){return!("to"in e)}(n)?(0,p.jsx)("button",b(b({type:"submit",className:i()("text-dark flex w-full justify-center p-5",r),onClick:n.onClick||u()},n),{},{children:t})):null},g=function(e){var t=e.children;return(0,p.jsx)("span",{className:"text-xxs bg-brand absolute right-[-12px] top-[-6px] block rounded-full border-2 border-white px-[6px] py-[4px] text-center font-bold leading-none text-white",children:t})},_=r(24185),j=r(97012),x=r(61345),w=function(e){var t=e.newPostUrl,r=e.newPostUseDataRemote;return(0,p.jsx)("a",{href:t,"data-remote":r,className:"text-dark flex w-full justify-center p-5",children:(0,p.jsx)(c.JO,{"aria-label":(0,o.t)("mobile_nav.quick_post"),type:"bar-plus",size:24,useWithFillCurrentColor:!0})})},O=r(69589),S=r(37469),P=function(){var e=(0,O.m)().spaceId,t=(0,S.L)();return(0,p.jsx)("button",{type:"button",onClick:function(){return t.show({spaceId:e})},className:"text-dark flex w-full justify-center p-5",children:(0,p.jsx)(c.JO,{"aria-label":(0,o.t)("events.create.title"),type:"bar-plus",size:24,useWithStrokeCurrentColor:!0})})},C=r(66927),k=function(e){var t=e.spaceId,r=(0,C.e)();return(0,p.jsx)("button",{type:"button",className:"text-dark flex w-full justify-center p-5",onClick:function(){r.show({spaceId:t,onClose:function(){r.remove()}})},children:(0,p.jsx)(c.JO,{"aria-label":(0,o.t)("mobile_nav.quick_post"),type:"bar-plus",size:24,useWithFillCurrentColor:!0})})},N=r(42590),I=function(){return(0,p.jsx)(N.h,{render:function(e){var t=e.onClick;return(0,p.jsx)("button",{type:"button",className:"text-dark flex w-full justify-center p-5",onClick:t,children:(0,p.jsx)(c.JO,{"aria-label":(0,o.t)("mobile_nav.quick_post"),type:"bar-plus",size:24,useWithFillCurrentColor:!0})})}})},A=function(e){var t=e.newPostUrl,r=e.newPostUseDataRemote,n=void 0!==r&&r,i=e.shouldNewPostOpenModal,o=void 0!==i&&i,a=((0,_.$B)("/c/:spaceSlug")||{}).params,s=(a=void 0===a?{spaceSlug:""}:a).spaceSlug,c=(0,j.nT)().helpers.findBy({slug:s})||{};return(0,x.V5)(c)?(0,p.jsx)(P,{}):(0,x.Ds)(c)?(0,p.jsx)(k,{spaceId:c.id}):o?(0,p.jsx)(I,{}):(0,p.jsx)(w,{newPostUrl:t,newPostUseDataRemote:n})},E=["className","newPostUrl","newPostUseDataRemote","onHomeClick","onNotificationsClick","onSearchClick","shouldNewPostOpenModal","shouldShowMessagingRoutes","style","unreadChatCount","unreadNotificationCount"];function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var R=function(e){var t=e.className,r=void 0===t?"":t,n=e.newPostUrl,l=void 0===n?"":n,u=e.newPostUseDataRemote,d=void 0!==u&&u,f=e.onHomeClick,m=e.onNotificationsClick,b=e.onSearchClick,h=e.shouldNewPostOpenModal,v=void 0!==h&&h,_=e.shouldShowMessagingRoutes,j=void 0!==_&&_,x=e.style,w=void 0===x?{}:x,O=e.unreadChatCount,S=void 0===O?0:O,P=e.unreadNotificationCount,C=void 0===P?0:P,k=M(e,E);return(0,p.jsx)("div",T(T({id:s.B7,className:i()("bg-primary fixed bottom-0 z-10 w-full",r),style:T({boxShadow:"0px 0px 10px 0px rgb(0 0 0 / 11%)"},w)},k),{},{children:(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)("button",{type:"submit",onClick:function(e){return(0,a.isFunction)(f)&&f(e)},className:"text-dark flex w-full cursor-pointer justify-center p-5",children:(0,p.jsx)(c.JO,{"aria-label":(0,o.t)("mobile_nav.home"),type:"home",size:24,useWithStrokeCurrentColor:!0})}),(0,p.jsx)(y,{onClick:function(e){return(0,a.isFunction)(b)&&b(e)},children:(0,p.jsx)(c.JO,{"aria-label":(0,o.t)("mobile_nav.search"),type:"search",size:24,useWithFillCurrentColor:!0})}),(0,p.jsx)(A,{newPostUseDataRemote:d,newPostUrl:l,shouldNewPostOpenModal:v}),(0,p.jsx)(y,{onClick:function(e){return(0,a.isFunction)(m)&&m(e)},children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(c.JO,{"aria-label":(0,o.t)("mobile_nav.notifications"),type:"bell",size:24,useWithFillCurrentColor:!0}),C>0&&(0,p.jsx)(g,{children:C})]})}),j&&(0,p.jsx)(y,{to:"/messages",children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(c.JO,{"aria-label":(0,o.t)("mobile_nav.messages"),type:"dm",size:24,useWithFillCurrentColor:!0}),S>0&&(0,p.jsx)(g,{children:S})]})})]})}))}},29808:(e,t,r)=>{"use strict";r.d(t,{H:()=>v});var n=r(37933),i=r(72452),o=r(67294),a=r(24185),s=r(61345),c=r(49326),l=r(59665),u=r(37179),d=r(97012),p=r(6382),f=r(23744);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=r(85893),v=function(){var e=function(){var e,t=null===(e=(0,a.$B)("/home"))||void 0===e?void 0:e.isExact,r=((0,a.$B)("/c/:spaceSlug")||{}).params,n=(r=void 0===r?{}:r).spaceSlug,i=(0,d.nT)().helpers.findBy({slug:n})||{},b=(0,s.V5)(i),h=m((0,o.useState)(),2),v=h[0],y=h[1],g=m((0,o.useState)(),2),_=g[0],j=g[1],x=(0,d.wh)().currentCommunitySettings,w=(0,u.I)().spotlightSearch,O=(0,f.g)(),S=(0,l.R)(),P=S.newNotificationCount,C=S.toggleNotificationDrawer,k=S.resetNewNotificationsCount,N=(0,p.K)().unreadChatCount,I=!b&&!(null===x||void 0===x||!x.reactified_new_post_on_mobile_enabled);return(0,o.useEffect)((function(){var e;t||!n?(e="/c/new_post_in_space",j(!0)):(e=b?(0,c.ed)({spaceSlug:i.slug}):c.xu.new({spaceSlug:i.slug}),j(!1)),y(e)}),[t,i.slug,b]),{newPostUrl:v,newPostUseDataRemote:_,shouldNewPostOpenModal:I,unreadChatCount:N,unreadNotificationCount:P,onNotificationsClick:function(){C(),k()},onSearchClick:function(){w.show()},shouldShowMessagingRoutes:O}}(),t=e.newPostUrl,r=e.newPostUseDataRemote,b=e.shouldNewPostOpenModal,v=e.unreadChatCount,y=e.unreadNotificationCount,g=e.onNotificationsClick,_=e.onSearchClick,j=e.shouldShowMessagingRoutes,x=(0,n.C)().goToCommunityRootPath;return(0,h.jsx)(i.u,{onSearchClick:_,onNotificationsClick:g,onHomeClick:x,unreadNotificationCount:y,unreadChatCount:v,newPostUseDataRemote:r,newPostUrl:t,shouldNewPostOpenModal:b,shouldShowMessagingRoutes:j})}},79255:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var n=r(67294),i=r(24185),o=r(64632),a=r(87506),s=r(31696),c=r(73097),l=r(9946),u=r(85893);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){var t=e.renderLeftSidebar,r=(0,i.k6)(),p=(0,s._)().data,f=(p=void 0===p?{}:p).mobile_drawer_html,m=d((0,n.useState)(!1),2),b=m[0],h=m[1],v=(0,o.l)().config,y=t;!t&&null!==v&&void 0!==v&&v.renderLeftSidebar&&(y=v.renderLeftSidebar);var g=(0,n.useCallback)((function(e){null!==e&&h(!0)}),[h]),_=(0,n.useCallback)((function(){var e;(document.body.scrollLeft||document.documentElement.scrollLeft)>148&&(null===(e=window.mobileDrawer)||void 0===e||e.close())}),[]);return(0,c.w)((function(e){var t,r,n,i=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.innerWidth;i&&(i>1024&&(null===(r=window)||void 0===r||null===(n=r.mobileDrawer)||void 0===n||n.close()))})),(0,n.useEffect)((function(){return b&&document.body.addEventListener("scroll",_),function(){document.body.removeEventListener("scroll",_)}}),[_,b]),(0,n.useEffect)((function(){return r.listen((function(){var e;null===(e=window.mobileDrawer)||void 0===e||e.close()}))}),[r]),f?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{ref:g,dangerouslySetInnerHTML:{__html:f}}),b&&(0,u.jsx)(l.h,{selectorQuery:"#react-mobile-community-sidebar",children:y?y():(0,u.jsx)(a.K,{})})]}):null}},36911:(e,t,r)=>{"use strict";r.d(t,{S:()=>c});var n=r(96486),i=r(64593),o=r(81196),a=r(97012),s=r(85893),c=function(e){var t=e.title,r=e.bodyClassNames,c=void 0===r?"":r,l=e.children,u=(0,a.wh)().currentCommunity,d=(0,n.compact)([t,null===u||void 0===u?void 0:u.name]).join(" | ");return(0,o.H)(c),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.q,{children:(0,s.jsx)("title",{children:d})}),l]})}},71283:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var n=r(94184),i=r.n(n),o=r(97012),a=r(85893),s=function(e){var t=e.hasPaddingTopMobile,r=void 0===t||t,n=e.isMinimalLayout,s=e.children,c=e.className,l=e.wrapperClassName,u=(0,o.wh)().currentCommunitySettings,d=null===u||void 0===u?void 0:u.tailwind_posts_enabled;return(0,a.jsx)("div",{className:i()("main h-full",{"bg-secondary":!n},c),children:(0,a.jsx)("div",{className:i()("main__wrapper h-full sm:mx-6 md:pt-6 lg:mx-6",{"pt-0":!r,"px-4 sm:px-0":n,"post-v2":!d},l),children:s})})}},95703:(e,t,r)=>{"use strict";r.d(t,{O:()=>s});var n=r(94184),i=r.n(n),o=r(86013),a=r(85893),s=function(e){var t=e.className,r=e.children,n=e.hidden;return void 0!==n&&n?null:(0,a.jsx)("aside",{"aria-label":(0,o.t)("right_sidebar"),className:i()("sidebar sidebar--right",t),"data-testid":"sidebar-right",children:(0,a.jsx)("div",{className:"sidebar__content","data-draggable":"false",children:r})})}},17182:(e,t,r)=>{"use strict";r.d(t,{F:()=>P});var n=r(94184),i=r.n(n),o=r(24185),a=r(44422),s=r(63554),c=r(29808),l=r(71283),u=r(40160),d=r(85893),p=r(67294),f=r(55408),m=function(e){var t=e.children,r=(0,f.S)();return(0,d.jsx)("div",{className:"sidebar sidebar--left",children:(0,d.jsx)("div",{className:"sidebar__content","data-draggable":"false",children:(0,p.cloneElement)(t,{onClickRemoveOnboarding:r.show})})})},b=r(95703),h=r(87506),v=r(61345),y=r(81196),g=r(26953),_=r(97012),j=r(31696),x=r(79255);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(e){var t,r,n=e.disableSidebar,l=void 0!==n&&n,u=e.disableRightSidebar,p=void 0!==u&&u,f=e.children,b=e.bodyClassNames,w=void 0===b?"":b,S=e.renderLeftSidebar,P=void 0===S?null:S,C=e.hideAppBar,k=void 0!==C&&C,N=(0,_.wh)().currentCommunityMember,I={},A=(0,j._)().data,E=(A=void 0===A?{}:A).mobile_drawer_html;!l&&E&&(I["data-controller"]="mobile-sidebar"),(0,y.H)(i()("is-standard-layout react-standard-layout",w));var D=(0,g.a7)(),T=((0,o.$B)("/c/:spaceSlug")||{}).params,L=(T=void 0===T?{}:T).spaceSlug,M=((0,o.$B)("/c/:spaceSlug/:postSlug")||{}).params,R=(M=void 0===M?{}:M).postSlug,B=null===(t=(0,o.$B)("/home"))||void 0===t?void 0:t.isExact,U=null===(r=(0,o.$B)("/c/:spaceSlug"))||void 0===r?void 0:r.isExact,F=function(e){var t=e.postSlug,r=e.space;return!!e.disableRightSidebar||(!t||"members"===t||!(0,v.V5)(r))&&r.hide_right_sidebar}({disableRightSidebar:p,postSlug:R,space:(0,_.nT)().helpers.findBy({slug:L})||{}}),z=Boolean(!!N&&!D&&!(!B&&!U));return(0,d.jsxs)("div",O(O({className:"community__wrapper bg-secondary"},I),{},{children:[(0,d.jsx)("div",{id:"mobile-dropdown-container"}),!l&&(0,d.jsx)(x.A,{renderLeftSidebar:P}),(0,d.jsxs)("div",{id:"panel",className:i()("community__content trix-v2",{"community__content--no-sidebar":l}),"data-target":"mobile-sidebar.panel",children:[!l&&!k&&(0,d.jsx)(a.x,{}),(0,d.jsxs)("div",{className:i()("standard-layout",{"has-sidebar":!l,"no-right-sidebar":F}),children:[!l&&(0,d.jsx)(m,{children:P?P():(0,d.jsx)(h.K,{})}),f,(0,d.jsx)(s.X,{}),z&&(0,d.jsx)(c.H,{})]})]})]}))};P.Header=function(e){var t=e.sticky,r=e.children;return(0,d.jsx)("div",{className:i()("main__header",{"main__header--sticky":t}),children:r})},P.Breadcrumb=function(e){var t=e.hidden,r=void 0!==t&&t,n=e.backLink,i=void 0===n?"":n,o=e.backLinkText,a=void 0===o?I18n.t("back"):o;return r||!i?null:(0,d.jsx)("div",{className:"header__name",children:Boolean(i)&&(0,d.jsx)("div",{className:"header__breadcrumb",children:(0,d.jsx)(u.rU,{to:i,children:a})})})},P.Content=function(e){var t=e.children,r=e.className;return(0,d.jsx)("div",{className:i()("main__content mx-auto h-full max-w-5xl",r),children:t})},P.Body=l.u,P.Left=m,P.Right=b.O},55418:(e,t,r)=>{"use strict";r.d(t,{a:()=>p});var n=r(94184),i=r.n(n),o=r(86013),a=r(40160),s=r(4979),c=r(49942),l=r(30887),u=r(97012),d=r(85893),p=function(e){var t=e.hidden,r=void 0!==t&&t,n=e.backLink,p=void 0===n?"":n,f=e.backLinkText,m=void 0===f?(0,o.t)("back"):f,b=e.customRightContent,h=(0,u.wh)().isViewOnlyMasquerading;return r||!p?null:(0,d.jsx)(s.Z,{leftContent:(0,d.jsx)(c.y,{children:(0,d.jsxs)(a.rU,{to:p,className:i()("text-dark group flex items-center text-base sm:text-xl",{"!pointer-events-auto":h}),children:[(0,d.jsx)(l.JO,{type:"20-arrow-left",size:20,className:"text-dark group-hover:text-brand mr-2"}),m]})}),rightContent:b||null})}},22074:(e,t,r)=>{"use strict";r.d(t,{y:()=>d});var n=r(94184),i=r.n(n),o=r(85893),a=["disableSidebar","children","className"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=function(e){var t=e.disableSidebar,r=void 0!==t&&t,n=e.children,s=e.className,l=u(e,a);return(0,o.jsx)("div",c(c({id:"panel","data-testid":"community-content",className:i()("community__content trix-v2 bg-secondary h-[calc(100vh-48px)] w-full flex-1 overflow-y-auto print:overflow-visible",{"community__content--no-sidebar":r},s),"data-target":"mobile-sidebar.panel"},l),{},{children:n}))}},72095:(e,t,r)=>{"use strict";r.d(t,{z:()=>p});var n=r(94184),i=r.n(n),o=r(28175),a=r(85893),s=["children","className"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=function(e){var t=e.children,r=e.className,n=void 0===r?"":r,c=d(e,s),u=(0,o.I)().isV3Enabled;return(0,a.jsx)("div",l(l({className:i()("bg-secondary",n,{community__wrapper:!u}),"data-testid":"community-wrapper"},c),{},{children:t}))}},12362:(e,t,r)=>{"use strict";r.d(t,{V:()=>f});var n=r(94184),i=r.n(n),o=r(86013),a=r(65945),s=r(85893),c=["children","fullWidth","fullHeight","noPadding"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.children,r=e.fullWidth,n=e.fullHeight,l=void 0===n||n,d=e.noPadding,f=p(e,c);return(0,s.jsxs)("main",u(u({"aria-label":(0,o.t)("main_content")},f),{},{className:i()("standard-layout-v2__content bg-secondary",{"standard-layout-v2__content--full":r,"standard-layout-v2__content--no-padding":d,"h-full":l}),children:[(0,s.jsx)("div",{className:i()("bg-secondary",{"h-full":l}),children:t}),(0,s.jsx)(a.n,{id:"rail-bar-content"})]}))}},67639:(e,t,r)=>{"use strict";r.d(t,{v:()=>b});var n=r(94184),i=r.n(n),o=r(11960),a=r(28175),s=r(1227),c=r(26953),l=r(85893),u=["children","isBgSecondary","isBgPrimary","className"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var b=function(e){var t=e.children,r=e.isBgSecondary,n=void 0!==r&&r,d=e.isBgPrimary,f=void 0!==d&&d,b=e.className,h=m(e,u),v=(0,o.k)().shouldShowTrialBanner,y=(0,c.j)(),g=(0,s.f)(),_=(0,a.I)().isV3Enabled?{"lg:!min-h-[calc(100vh-64px)]":v||y,"lg:!min-h-[calc(100vh-112px)]":y&&g||y&&v,"lg:!min-h-[calc(100vh-160px)]":v&&y&&g}:{"lg:!min-h-[calc(100vh-48px)]":v||y,"lg:!min-h-[calc(100vh-96px)]":y&&g||y&&v,"lg:!min-h-[calc(100vh-144px)]":v&&y&&g};return(0,l.jsx)("div",p(p({className:i()("standard-layout-v2__content-wrapper",{"!bg-secondary":n,"bg-primary":f},_,b)},h),{},{children:t}))}},18890:(e,t,r)=>{"use strict";r.d(t,{y:()=>d});var n=r(94184),i=r.n(n),o=r(85893),a=["url","alt","thumbnail"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=function(e){var t=e.url,r=e.alt,n=void 0===r?"":r,s=e.thumbnail,l=void 0!==s&&s,d=u(e,a);return(0,o.jsx)("div",c(c({},d),{},{className:i()("bg-primary block lg:relative",l?"h-auto":"h-auto md:h-[30vh]"),children:(0,o.jsx)("img",{loading:"lazy",src:t,alt:n,className:i()("h-full w-full",l?"object-contain":"object-cover")})}))}},65945:(e,t,r)=>{"use strict";r.d(t,{n:()=>i});var n=r(85893),i=function(e){var t=e.id,r=void 0===t?"rail-bar-header":t;return(0,n.jsx)("div",{id:r})}},30477:(e,t,r)=>{"use strict";r.d(t,{Y:()=>i});var n=r(85893),i=function(e){var t=e.children;return(0,n.jsx)("div",{className:"md:hidden",children:t})}},41527:(e,t,r)=>{"use strict";r.d(t,{H:()=>p});var n=r(94184),i=r.n(n),o=r(86013),a=r(85893),s=["children","className"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=function(e){var t=e.children,r=e.className,n=d(e,s);return(0,a.jsx)("aside",l(l({"aria-label":(0,o.t)("left_sidebar"),className:i()("standard-layout-v2__sidebar",r),"data-testid":"standard-layout-v2-sidebar"},n),{},{children:(0,a.jsx)("nav",{children:t})}))}},4979:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});r(67294);var n=r(43422),i=r(9946),o=r(85893),a=["children"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d="standard-layout-header-child",p=function(e){var t=e.children,r=u(e,a);return(0,o.jsxs)(i.h,{selectorQuery:"#standard-layout-header",children:[(0,o.jsx)(n.b,c(c({},r),{},{id:d})),t]})}},43422:(e,t,r)=>{"use strict";r.d(t,{b:()=>f});var n=r(94184),i=r.n(n),o=r(97012),a=r(28175),s=r(85893),c=["leftContent","rightContent","filters","headline","hasBorder","className"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.leftContent,r=e.rightContent,n=e.filters,l=e.headline,d=e.hasBorder,f=void 0===d||d,m=e.className,b=p(e,c),h=Boolean(n),v=Boolean(l),y=(0,o.wh)().isViewOnlyMasquerading,g=(0,a.I)().isV3Enabled;return(0,s.jsxs)("div",u(u({},b),{},{className:i()("bg-primary w-full lg:sticky lg:top-0 lg:z-10",m),children:[(0,s.jsxs)("div",{className:i()("flex items-center px-6",{"border-primary border-b":f,"!cursor-not-allowed":y,"h-16 lg:px-6":!g,"h-18 lg:px-9":g}),children:[(0,s.jsx)("div",{className:i()("flex-1",{"!pointer-events-none":y}),"data-testid":"space-settings",children:t}),(0,s.jsx)("div",{className:i()("relative flex",{"!pointer-events-none":y}),children:r})]}),h&&n,v&&l]}))}},66365:(e,t,r)=>{"use strict";r.d(t,{n:()=>f});var n=r(94184),i=r.n(n),o=r(86013),a=r(80938),s=r(85893),c=["children","className"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.children,r=e.className,n=p(e,c),l=(0,a.p)();return(0,s.jsx)("header",u(u({id:"standard-layout-header","aria-label":(0,o.t)("page_header"),className:i()("z-20 sm:relative sm:top-0 lg:sticky",l?"top-16":"top-0",r)},n),{},{children:t}))}},51299:(e,t,r)=>{"use strict";r.d(t,{m:()=>p});var n=r(94184),i=r.n(n),o=r(28175),a=r(85893),s=["disableSidebar","disableLayoutRightSidebar","hasSettingsSidebar","children"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=function(e){var t=e.disableSidebar,r=void 0!==t&&t,n=e.disableLayoutRightSidebar,c=void 0!==n&&n,u=e.hasSettingsSidebar,p=void 0!==u&&u,f=e.children,m=d(e,s),b=(0,o.I)().isV3Enabled;return(0,a.jsx)("div",l(l({className:i()("standard-layout-v2 bg-secondary",{"standard-layout-v2--has-sidebar":!r,"standard-layout-v2--has-sidebar-v3":!r&&b,"standard-layout-v2--has-settings-sidebar":p,"standard-layout-v2--no-right-sidebar":c}),"data-testid":"standard-layout-v2-wrapper"},m),{},{children:f}))}},53301:(e,t,r)=>{"use strict";r.d(t,{a:()=>de});var n=r(94184),i=r.n(n),o=r(12814),a=r(24185),s=r(63554),c=r(29808),l=r(85893),u=r(55418),d=r(12362),p=r(18890),f=r(86013),m=r(81303),b=r(87506),h=r(61345),v=r(70905),y=r(81196),g=r(72810),_=r(67294),j=r(61484),x=r(97012),w="circle-app-banner",O=/Android|webOS|Nokia|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,S=/Android/i,P=r(44133);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(){var e=(0,P._)(w).getValue,t=I((0,_.useState)({isMobile:!1,isMobileOsAndroid:!1}),2),r=t[0],n=t[1],i=I((0,_.useState)(!1),2),o=i[0],s=i[1],c=I((0,_.useState)(!1),2),l=c[0],u=c[1],d="/getting-started"===(0,a.TH)().pathname,p=r.isMobile&&r.isMobileOsAndroid,f=o&&l&&p&&!d;return(0,_.useEffect)((function(){var t,r=navigator.userAgent;t=document.querySelector('meta[name="google-play-app"]'),s(!!t),function(e){var t=O.test(e);n((function(e){return k(k({},e),{},{isMobile:t})}))}(r),function(e){var t=S.test(e);n((function(e){return k(k({},e),{},{isMobileOsAndroid:t})}))}(r),function(){var t=e();if(t){var r=new Date(t.dismissedAt),n=new Date,i=Math.abs(n-r);Math.ceil(i/864e5)>15&&u(!0)}else u(!0)}()}),[]),{shouldRenderAppBanner:f}},D=r(73793),T=r(55675),L=r(16743);function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var B=(0,f.t)("circle"),U=function(){var e=M((0,_.useState)(!1),2),t=e[0],r=e[1],n=(0,x.wh)().currentCommunity,i=void 0===n?{}:n,o=i.name,a=i.has_branded_app,s=i.android_store_id,c=i.icon_url,u=a&&c,d=E().shouldRenderAppBanner,p=(0,P._)(w).setValue,m=function(){r(!1),p({dismissedAt:new Date})};if((0,_.useEffect)((function(){r(!0)}),[]),!d)return null;var b=u?c:j,h=u?(0,f.t)("app_banner.logo_alt",{community_name:o}):(0,f.t)("app_banner.logo_alt",{community_name:B}),v=a?(0,f.t)("app_banner.title",{community_name:o}):(0,f.t)("app_banner.title",{community_name:B}),y=a?(0,f.t)("app_banner.description",{community_name:o}):(0,f.t)("app_banner.description",{community_name:B});return(0,l.jsx)(D.x,{shouldCloseOnOutsideClick:!0,shouldShowCloseButton:!1,isOpen:t,contentPortalId:"app-banner-portal",size:"auto",position:"bottom",onClose:m,className:"!h-auto",children:(0,l.jsx)(D.x.Body,{className:"px-8 py-10",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("div",{className:"border-primary mb-6 flex h-20 w-20 items-center rounded-xl border",children:(0,l.jsx)("img",{loading:"lazy",src:b,alt:h,className:"mx-auto h-14 w-14 rounded-xl object-cover"})}),(0,l.jsxs)("div",{className:"mb-8 flex flex-col space-y-2 text-center",children:[(0,l.jsx)(L.Z.TitleSm,{weight:"semibold",color:"text-dark",children:v}),(0,l.jsx)(L.Z.LabelSm,{color:"text-default",children:y})]}),(0,l.jsx)(T.z,{full:!0,extraLarge:!0,className:"mb-4",onClick:function(){a&&s?window.open("https://play.google.com/store/apps/details?id="+s,"_blank"):window.open("https://circle.so/android","_blank")},children:(0,f.t)("app_banner.download_app_cta")}),(0,l.jsx)(T.z,{variant:"plain",onClick:m,children:(0,f.t)("app_banner.continue_in_browser_cta")})]})})})},F=r(59393),z=r(10405),V=r(31696),q=r(98929),G=r(46770),H=r(28175),W=r(1227),Z=r(44422),J=r(79255),$=r(22074),Q=r(72095),K=r(67639),X=r(65945),Y=r(30477),ee=r(41527),te=r(51299),re=r(11960),ne=r(49326),ie=function(){var e=(0,re.k)(),t=e.isCommunityOnTrial,r=e.trialDaysRemainingInWords,n=e.trialEndDateFormatted,i=e.shouldSeeBrazilTrialBanner;return(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsx)("div",{children:i?(0,l.jsx)("div",{children:(0,f.t)("trial_banner.brazil.title")}):(0,l.jsxs)("div",{children:[(0,f.t)("trial_banner.trial_ends_in",{trialDaysRemainingInWords:r,trialEndDateFormatted:n}),(0,l.jsx)("a",{className:"ml-1 cursor-pointer text-white underline hover:text-white/75",href:(0,ne.xn)(),children:(0,f.t)("trial_banner.upgrade_plan")})," ",(0,f.t)("trial_banner.before_trial_expires")]})})})},oe=r(94340),ae=function(){var e=(0,x.wh)().displayCommunitySwitcher,t=(0,re.k)(),r=t.shouldShowTrialBanner,n=t.isSubscriptionCancelled;return r?(0,l.jsxs)(oe.E,{className:i()({"left-[60px]":e}),children:[(0,l.jsx)(ie,{}),n&&(0,l.jsxs)("div",{children:[(0,f.t)("trial_banner.renew_subscription")," ",(0,l.jsx)("a",{href:(0,ne.xn)(),children:(0,f.t)("trial_banner.renew_subscription")}),(0,f.t)("trial_banner.to_access_community")]})]}):null},se=r(32615);function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var de=Object.assign((function(e){var t,r,n,u,d=e.bodyClassNames,p=void 0===d?"":d,f=e.children,_=e.disableRightSidebar,j=void 0!==_&&_,w=e.disableScroll,O=void 0!==w&&w,S=e.disableSidebar,P=void 0!==S&&S,C=e.hideAppBar,k=void 0!==C&&C,N=e.id,I=e.renderLeftSidebar,A=(0,x.wh)(),E=A.currentCommunityMember,D=A.currentCommunity,T=(0,v.P)().posts,L={id:N},M=(0,V._)(),R=null===M||void 0===M||null===(t=M.data)||void 0===t?void 0:t.mobile_drawer_html,B=(0,W.f)(),re=(0,H.I)().isV3Enabled,ne=(0,z.T)().isSettingsRoute,ie=function(){var e=(0,x.wh)().currentCommunityMember,t=(0,se.H)(),r=t.isHomePage,n=t.isSpaceShowPage,i=t.isMemberDirectoryPage,o=t.isMessagesPage;return!!e&&(r||n||i||o)}();!P&&R&&(L["data-controller"]="mobile-sidebar"),(0,y.H)(i()("is-standard-layout-v2 react-standard-layout bg-secondary",p,{"is-standard-layout-v2--v3-enabled":re}));var oe=(0,g.t)(),ce=(0,a.$B)("/c/:spaceSlug/:postSlug"),de=null===ce||void 0===ce||null===(r=ce.params)||void 0===r?void 0:r.postSlug,pe=null===(n=(0,a.$B)("/home"))||void 0===n?void 0:n.isExact,fe=(0,x.L2)().data,me=(0,q.Z1)(D)&&!(0,G.UU)(oe),be=(0,q.Aq)(D),he=fe||{},ve=(0,x.wh)().currentCommunitySettings,ye=null===ve||void 0===ve?void 0:ve.tailwind_posts_enabled,ge=(0,m.D)(),_e=function(){var e=(0,H.I)().isV3Enabled;return{topBarStyles:e?"lg:h-[calc(100vh-64px)]":"lg:h-[calc(100vh-48px)]",topBarStylesWithMasquerade:e?"lg:h-[calc(100vh-48px-64px)]":"lg:h-[calc(100vh-48px-48px)]"}}(),je=_e.topBarStyles,xe=_e.topBarStylesWithMasquerade,we=function(e){var t,r,n,i=e.postSlug,o=e.space,a=e.disableRightSidebar,s=e.currentCommunityMember,c=e.pinnedPosts;if(e.isHomePage)return!1;if(a)return!0;if(!((null===o||void 0===o||null===(t=o.visible_tabs)||void 0===t?void 0:t.members)||(null===o||void 0===o||null===(r=o.visible_tabs)||void 0===r?void 0:r.past)||(null===o||void 0===o||null===(n=o.visible_tabs)||void 0===n?void 0:n.upcoming)||(null===c||void 0===c?void 0:c.length)>0))return!0;var l=o.is_private&&!o.is_space_member&&!(null!==s&&void 0!==s&&s.is_admin);return(!i||"members"===i||!(0,h.V5)(o))&&(!!l||o.hide_right_sidebar)}({disableRightSidebar:j,postSlug:de,space:he,pinnedPosts:T,isHomePage:pe,currentCommunityMember:E});(0,o.Z)(F.hn.OPEN_SEARCH_MODAL,(function(){ge.show()}));var Oe=(0,h.Ug)(he)||(0,h.Hn)(he)||be,Se=be&&me;return(0,l.jsxs)(Q.z,le(le({},L),{},{children:[(0,l.jsx)("div",{"data-testid":"mobile-drawer-wrapper",children:!P&&(0,l.jsx)(J.A,{})}),(0,l.jsxs)("div",{className:i()("bg-secondary flex w-full flex-col",(u={},ue(u,je,!Se&&!B||Se&&B),ue(u,xe,!Se&&B),ue(u,"h-screen",!O),ue(u,"h-full",O),ue(u,"post-v2",!ye),u)),"data-testid":"standard-layout-v2",children:[(0,l.jsx)(ae,{}),(0,l.jsx)(U,{}),(0,l.jsxs)($.y,{disableSidebar:P,children:[!k&&(0,l.jsx)(Z.x,{}),(0,l.jsxs)(te.m,{disableSidebar:P,disableLayoutRightSidebar:we,hasSettingsSidebar:ne&&!me&&!be,children:[(!P||!re)&&(0,l.jsx)(ee.H,{children:I?I():(0,l.jsx)(b.K,{})}),(0,l.jsx)(K.v,{isBgSecondary:!Oe,isBgPrimary:Oe,children:f}),(0,l.jsx)("div",{className:"standard-layout-v2__railbar",children:(0,l.jsx)(X.n,{})}),(0,l.jsx)(s.X,{}),(0,l.jsx)("div",{id:"mobile-dropdown-container"}),ie&&(0,l.jsx)(Y.Y,{children:(0,l.jsx)(c.H,{})})]})]})]})]}))}),{Header:function(e){var t=e.sticky,r=e.children;return(0,l.jsx)("div",{className:i()("main__header",{"main__header--sticky":t}),children:r})},Breadcrumb:u.a,Content:d.V,Body:function(e){var t=e.className,r=e.children;return(0,l.jsx)("div",{className:"main",children:(0,l.jsx)("div",{className:i()("main__wrapper",t),children:r})})},Right:function(e){var t=e.children,r=e.hidden;return void 0!==r&&r?null:(0,l.jsx)("aside",{"aria-label":(0,f.t)("right_sidebar"),className:"sidebar sidebar--right","data-testid":"sidebar-right",children:(0,l.jsx)("div",{className:"sidebar__content","data-draggable":"false",children:t})})},CoverImage:p.y})},26332:(e,t,r)=>{"use strict";r.d(t,{W:()=>f});var n=r(66365),i=r(97012),o=r(53301),a=r(59393),s=r(85893);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}var p=function(e){var t=d({},e);return(0,s.jsx)("div",l(l({},t),{},{id:a.vH}))},f=function(e){var t=e.children,r=e.fullHeight,a=void 0===r||r,c=e.fullWidth,l=void 0!==c&&c,u=e.noPadding,d=void 0!==u&&u;return(0,i.wh)().isLoading?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.n,{}),(0,s.jsx)(p,{}),(0,s.jsx)(o.a.Content,{fullWidth:l,fullHeight:a,noPadding:d,children:t})]})}},80938:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(84702),i=r(26953),o=function(){var e=(0,i.j)(),t=(0,n.I)();return!e&&!t}},24702:(e,t,r)=>{"use strict";r.d(t,{h:()=>l});var n=r(86013),i=r(19175),o=r(97012),a=r(31889),s=r(55675),c=r(85893),l=function(e){var t=e.variant,r=void 0===t?"primary":t,l=e.small,u=void 0===l||l,d=(0,o.wh)(),p=d.currentCommunityMember,f=d.isLoading,m=(0,i.t)();return f||!(0,a.vb)(p)?null:(0,c.jsx)(s.z,{variant:r,onClick:function(){m.show()},small:u,children:(0,c.jsx)("span",{children:(0,n.t)("live_streams.now_live.go_live")})})}},16492:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var n=r(94184),i=r.n(n),o=r(38870),a=r(85893),s=function(e){var t=e.name,r=e.src,n=e.size,s=void 0===n?"sm":n,c=e.variant,l=void 0===c?"rounded-square":c,u="10";return"lg"===s&&(u="16"),"md"===s&&(u="7"),(0,a.jsx)("div",{className:i()("participant-avatar relative",{"participant-avatar--lg":"lg"===s,"participant-avatar--md":"md"===s,"participant-avatar--sm":"sm"===s,"participant-avatar--circle":"circle"===l,"participant-avatar--full":"full"===l,"participant-avatar--rounded-square":"rounded-square"===l}),children:(0,a.jsx)(o.s,{name:t,src:r,size:u})})}},16025:(e,t,r)=>{"use strict";r.d(t,{B:()=>d,h:()=>p});var n=r(67294),i=r(58471),o=r(95591),a=r(48929),s=r(11909),c=r(85893),l=function(e){var t=e.participant,r=(0,i.aV)(t),n=r.microphonePublication,o=r.isLocal;return null===n||void 0===n||!n.track||null===n||void 0===n||!n.isSubscribed||null!==n&&void 0!==n&&n.isMuted||null===n||void 0===n||!n.isEnabled?null:(0,c.jsx)(i.t9,{track:n.track,isLocal:o})},u=(0,n.createContext)({});u.displayName="LivekitContext";var d=function(e){var t=e.children,r=(0,a.cy)(),d=r.videoInputId,p=r.audioInputId,f={adaptiveStream:!0,dynacast:!0,publishDefaults:{audioBitrate:o.gW.music,videoCodec:"vp8"},videoCaptureDefaults:{resolution:o.OM.h1080.resolution,deviceId:d},audioCaptureDefaults:{deviceId:p},screenShareEncoding:o.Ri.h1080fps30.encoding},m=(0,i.NW)(f),b=m.connect,h=m.participants,v=m.isConnecting,y=m.connectionState,g=m.room,_=m.audioTracks,j=m.metadata,x=m.error;!function(e){null===e||void 0===e||e.forEach((function(e){var t=s.VM.HLS_SPECTATOR,r=null;try{var n=JSON.parse(e.metadata);null!==n&&void 0!==n&&n.role&&(t=n.role),r=null===n||void 0===n?void 0:n.user_id}catch(i){console.error("Could not parse participant metadata: ",i.message)}e.roleName=t,e.customerUserId=r,e.id=e.sid}))}(h);var w=null===g||void 0===g?void 0:g.localParticipant,O=(0,n.useMemo)((function(){if(null===w||void 0===w||!w.metadata)return{};try{return JSON.parse(w.metadata)}catch(e){return console.error("Could not parse participant metadata: ",e.message),{}}}),[null===w||void 0===w?void 0:w.metadata]),S=null===h||void 0===h?void 0:h.find((function(e){return e.isScreenShareEnabled})),P={roomOptions:f,connect:b,participants:h,screenSharingParticipant:S,isSomeoneScreenSharing:!!S,localParticipant:w,localMetadata:O,isConnecting:v,isReconnecting:y===o.em.Reconnecting,isConnected:y===o.em.Connected,isDisconnected:y===o.em.Disconnected,room:g,audioTracks:_,metadata:j,error:x};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(u.Provider,{value:P,children:t}),null===h||void 0===h?void 0:h.map((function(e){return(0,c.jsx)(l,{participant:e},"participant-audio-".concat(e.id))}))]})},p=function(){return(0,n.useContext)(u)}},7307:(e,t,r)=>{"use strict";r.d(t,{Tv:()=>n,Pw:()=>i,oj:()=>o});var n=function(){return!!navigator.mediaDevices},i=function(){var e;return!(null===(e=navigator.permissions)||void 0===e||!e.query)},o=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getUserMedia.apply(e,r)}},30062:(e,t,r)=>{"use strict";r.d(t,{gs:()=>y,Zp:()=>w,qr:()=>X,Tq:()=>O,Ux:()=>ce,hB:()=>A,b1:()=>te,YR:()=>re,yE:()=>ee,wc:()=>L,pB:()=>D,RS:()=>E,CV:()=>de,kk:()=>M,y2:()=>Y,DI:()=>oe,RN:()=>U,nc:()=>F,$f:()=>G,Ak:()=>K,GK:()=>fe,HV:()=>J,tv:()=>se,Vb:()=>Z});var n=r(64687),i=r.n(n),o=r(67294),a=r(85783),s=r(84895),c=r(86013),l=r(11909),u=r(21809),d=r(29682);function p(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)}))}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){h(o,n,i,a,s,"next",e)}function s(e){h(o,n,i,a,s,"throw",e)}a(void 0)}))}}var y=function(e){var t=(0,u.p)().error,n=(0,a._U)(s.m$),p=(0,a._U)(s.uX),b=(0,a.cw)(),h=(0,d.I3)(d.vi),y=h.videoInputId,g=h.audioInputId,_=h.audioOutputId,j=h.microphoneEnabled,x=h.cameraEnabled,w=h.blurEnabled,O=(0,a._U)(s.UP),S=(null===O||void 0===O?void 0:O.roleName)===l.VM.MODERATOR,P=function(){var e,t=m((0,o.useState)(null),2),n=t[0],c=t[1];(0,o.useEffect)((function(){var e=function(){var e=f(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([r.e(3348),r.e(828),r.e(9223)]).then(r.bind(r,43348));case 3:t=e.sent,n=new t.HMSVirtualBackgroundPlugin("blur",!0),c(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error loading virtual background plugin",e.t0),c(null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var l=(0,a._U)(s.UP),u=n?n.getName():"",d=(0,a._U)((0,s.IX)(u)),p=!(null===l||void 0===l||!l.videoTrack),b=(0,a.cw)(),h=(0,o.useMemo)((function(){return n?b.validateVideoPluginSupport(n):{isSupported:!1,errMsg:"Plugin not loaded"}}),[b,p,n]),v=(0,o.useCallback)(f(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,b.addPluginToVideoTrack(n,15);case 4:case"end":return e.stop()}}),e)}))),[b,n]),y=(0,o.useCallback)(f(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,b.removePluginFromVideoTrack(n);case 4:case"end":return e.stop()}}),e)}))),[b,n]);return{virtualBackground:n,isVirtualBackgroundEnabled:d,enableVirtualBackground:v,disableVirtualBackground:y,isSupported:h.isSupported,virtualBackgroundErrorMessage:null!==(e=h.errMsg)&&void 0!==e?e:""}}(),C=P.enableVirtualBackground,k=P.disableVirtualBackground,N=P.isVirtualBackgroundEnabled,I=P.isSupported,A=P.virtualBackgroundErrorMessage,E=!(null===O||void 0===O||!O.audioTrack),D=!(null===O||void 0===O||!O.videoTrack);(0,o.useEffect)((function(){v(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(y&&n&&e&&D)){t.next=10;break}return t.prev=1,t.next=4,b.setVideoSettings({deviceId:y});case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),r=t.t0 instanceof Error?t.t0.message:"",console.error("Could not set video device id: ",r);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()}),[y,n,e,b,D]),(0,o.useEffect)((function(){v(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(g&&p&&e&&E)){t.next=10;break}return t.prev=1,t.next=4,b.setAudioSettings({deviceId:g});case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),r=t.t0 instanceof Error?t.t0.message:"",console.error("Could not set microphone device id: ",r);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()}),[g,p,e,b,E]),(0,o.useEffect)((function(){var t,r=0,n=function(){var o=v(i().mark((function o(){var a;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(Boolean(e&&_&&E)){i.next=3;break}return i.abrupt("return");case 3:return i.prev=3,i.next=6,b.setAudioOutputDevice(_);case 6:i.next=13;break;case 8:i.prev=8,i.t0=i.catch(3),a=i.t0 instanceof Error?i.t0.message:"",console.error("Could not set output device id: ",a),r<3?(console.error("Retrying output assignment in ".concat(1e3," milliseconds")),t=setTimeout((function(){r+=1,n()}),1e3)):console.error("Max retries for output device assignment reached, could not assign output device.");case 13:case"end":return i.stop()}}),o,null,[[3,8]])})));return function(){return o.apply(this,arguments)}}();return n(),function(){return clearTimeout(t)}}),[_,b,e,E]),(0,o.useEffect)((function(){v(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!E){t.next=10;break}return t.prev=1,t.next=4,b.setLocalAudioEnabled(j);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),r=t.t0 instanceof Error?t.t0.message:"",console.error("Could not toggle microphone: ",r);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()}),[j,e,E,b]),(0,o.useEffect)((function(){v(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!D){t.next=10;break}return t.prev=1,t.next=4,b.setLocalVideoEnabled(x);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),r=t.t0 instanceof Error?t.t0.message:"",console.error("Could not toggle camera: ",r);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()}),[x,b,e,D]),(0,o.useEffect)((function(){v(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S||!E){e.next=10;break}return e.prev=1,e.next=4,b.setLocalAudioEnabled(!1);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),t=e.t0 instanceof Error?e.t0.message:"",console.error("Could not mute moderator: ",t);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))()}),[S,E,b]),(0,o.useEffect)((function(){v(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&I&&w)){t.next=5;break}return t.next=3,C();case 3:t.next=8;break;case 5:if(!e||!I||w||!N){t.next=8;break}return t.next=8,k();case 8:case"end":return t.stop()}}),t)})))()}),[w,k,C,e,I,N]),(0,o.useEffect)((function(){w&&D&&A&&t((0,c.t)("live_streams.room.blur_error",{message:A}))}),[w,A,D])},g=Object.freeze({WEBSOCKET_DISCONNECTED:1003,ICE_CONNECTION_FAILED:4005,AUDIO_BLOCKED:3008}),_=function(){var e,t=(0,a.C1)();return(null===t||void 0===t?void 0:t.type)===s.a5.ERROR?null===(e=t.data)||void 0===e?void 0:e.code:null},j=function(e){return"".concat("live_streams.room.hms_errors.").concat(e)},x=function(){var e=(0,u.p)().error,t=_(),r=(0,a._U)(s.Yt);(0,o.useEffect)((function(){t&&function(t){var r={1e3:(0,c.t)(j("1000_websocket_blocked")),1003:(0,c.t)(j("1003_websocket_disconnected")),2003:(0,c.t)(j("2003_endpoint_not_reachable")),3001:(0,c.t)(j("3001_cannot_access_device")),3002:(0,c.t)(j("3002_capture_device_not_available")),3003:(0,c.t)(j("3003_capture_device_is_in_use")),4005:(0,c.t)(j("4005_ice_connection_failed"))}[t];r&&e(r)}(t)}),[t]),(0,o.useEffect)((function(){r.error&&e((0,c.t)("live_streams.room.hls_error"))}),[r.error])},w=function(){var e,t,r=(0,a._U)(s.Yt),n=(0,a._U)(s.Go);return{hlsUrl:null===(e=r.variants[0])||void 0===e?void 0:e.url,isHlsRunning:!(null===r||void 0===r||!r.running),isRecording:!(null===n||void 0===n||null===(t=n.hls)||void 0===t||!t.running)}},O=function(){var e,t=(0,a._U)(s.UP);return{localPeerDownlinkQuality:null===(e=(0,a._U)((0,s.hE)(null===t||void 0===t?void 0:t.id)))||void 0===e?void 0:e.downlinkQuality}},S=Object.freeze({UPDATE_ROOM:"update-room"}),P=Object.freeze({STOP_SCREENSHARE:"stop-screenshare"}),C="system";function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=function(e){var t,r,n,i=e.onRoomUpdate,c=e.onEndStream,l=(0,d.Ft)().setMicrophoneEnabled,u=(0,a.C1)(),p=(t=(0,a._U)(s.I3),r=(0,a._U)((0,s.cH)(t)),n=(0,a.cw)(),{metadata:r,setMetadata:function(e){n.changeMetadata(N(N({},r),e))}}).setMetadata;(0,o.useEffect)((function(){if(u){var e=u.type,t=u.data||{},r=t.type,n=t.message,o=t.reason;switch(e){case s.a5.NEW_MESSAGE:if(r===C&&n===S.UPDATE_ROOM)i&&i();else if("metadata"===r){var a=JSON.parse(n);a&&"object"===typeof a&&p(a)}return;case s.a5.ROOM_ENDED:return void(c&&c(o));case s.a5.CHANGE_MULTI_TRACK_STATE_REQUEST:case s.a5.CHANGE_TRACK_STATE_REQUEST:l(!1);break;default:return}}}),[u])},E=function(){var e=(0,a._U)(s.BK),t=(0,o.useMemo)((function(){return e.filter((function(e){return e.roleName===l.VM.HOST}))}),[e]),r=(0,a._U)(s.g),n=(0,o.useMemo)((function(){return e.filter((function(e){return[l.VM.SPECTATOR,l.VM.HLS_SPECTATOR].includes(e.roleName)}))}),[e]),i=(0,o.useMemo)((function(){return e.filter((function(e){return e.roleName===l.VM.MODERATOR}))}),[e]);return{peers:e,peersWithHandRaised:r,hosts:t,spectators:n,moderators:i}},D=function(){var e=E(),t=e.peers,r=e.hosts,n=e.spectators,i=(0,a._U)(s.vX),c=(0,o.useRef)(null);!function(e,t,r){if(e)r.current=e;else if(r.current){var n=r.current;r.current=(null===t||void 0===t?void 0:t.find((function(e){return e.id===n.id})))||(null===t||void 0===t?void 0:t[0])||null}else r.current=(null===t||void 0===t?void 0:t[0])||null}(i,r,c);var l=(0,a._U)(s.Dl),u=(0,o.useCallback)((function(e){return!!l&&Object.values(l).some((function(t){return t.peerID===e}))}),[l]);return{peers:t,hosts:r,spectators:n,dominantSpeaker:i,selectedSpeaker:c.current,isSpeaking:u}},T=r(87116),L=function(e){var t=null===e||void 0===e?void 0:e.videoTrack,r=(0,T.R)({trackId:t}).videoRef,n=(0,a._U)((0,s.GP)(t));return{videoRef:r,hasVideo:Boolean(null===n||void 0===n?void 0:n.enabled)}},M=function(){return{recoderToken:null}};function R(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function B(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){R(o,n,i,a,s,"next",e)}function s(e){R(o,n,i,a,s,"throw",e)}a(void 0)}))}}var U=function(e,t,r){var n=t.onJoinError,p=t.participantData,f=(0,d.I3)(d.iZ),m=(0,d.I3)(d.tS),b=(0,d.I3)(d.I7),h=(0,d.I3)(d.wV),v=(0,d.I3)(d.YK),y=(0,u.p)().error,g=(0,a.cw)(),_=(0,a._U)(s.UP),j=(0,a._U)(s.ln),w=!!e&&!j,O=(null===_||void 0===_?void 0:_.roleName)===l.VM.HOST,S=(null===_||void 0===_?void 0:_.roleName)===l.VM.HLS_SPECTATOR,P=(0,a._U)(s.ud),C=function(){var t=B(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={userName:null===p||void 0===p?void 0:p.name,authToken:e,metaData:JSON.stringify(p),rememberDeviceSelection:!1,settings:{isAudioMuted:!h,isVideoMuted:!v,audioInputDeviceId:m,audioOutputDeviceId:b,videoDeviceId:f,speakerAutoSelectionBlacklist:"all"}},t.prev=1,t.next=4,g.join(r);case 4:t.next=11;break;case 6:t.prev=6,t.t0=t.catch(1),console.error("joinRoom:",t.t0.message),y((0,c.t)("live_streams.room.join_error")),n&&n();case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}();return x(),(0,o.useEffect)((function(){B(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||j||r){t.next=3;break}return t.next=3,C();case 3:case"end":return t.stop()}}),t)})))()}),[e,j,r]),{isConnected:j,isJoining:w,isHost:O,isHlsSpectator:S,isSomeoneScreenSharing:P}},F=function(){var e=(0,a._U)(s.pk),t=(0,a._U)((0,s.K6)(null===e||void 0===e?void 0:e.id));return{peer:e,videoRef:(0,T.R)({trackId:null===t||void 0===t?void 0:t.id}).videoRef,hasVideo:!(null===t||void 0===t||!t.enabled)}},z=r(93914),V=r(81967);function q(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var G=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,u.p)().error,r=(0,a.cw)(),n=(0,a._U)(s.VP),o=(0,a._U)(s.ud),l=(0,z.j)({type:"moderator",onEvent:function(e){e===P.STOP_SCREENSHARE&&n&&r.setScreenShareEnabled(!1)}}).sendEvent,d=function(){var a,s=(a=i().mark((function a(){return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n||!o||e){i.next=2;break}return i.abrupt("return");case 2:if(i.prev=2,n||!o){i.next=6;break}return i.next=6,l(P.STOP_SCREENSHARE);case 6:return i.next=8,r.setScreenShareEnabled(!n,{audio:!0,systemAudio:"include"});case 8:i.next=15;break;case 10:i.prev=10,i.t0=i.catch(2),"SystemDeniedPermission"===i.t0.name?t((0,c.t)("live_streams.room.screen_sharing_os_error")):t((0,c.t)("live_streams.room.screen_sharing_browser_error")),console.error(i.t0),(0,V.d)(i.t0);case 15:case"end":return i.stop()}}),a,null,[[2,10]])})),function(){var e=this,t=arguments;return new Promise((function(r,n){var i=a.apply(e,t);function o(e){q(i,r,n,o,s,"next",e)}function s(e){q(i,r,n,o,s,"throw",e)}o(void 0)}))});return function(){return s.apply(this,arguments)}}();return{isScreenSharingEnabled:n,isSomeoneScreenSharing:o,toggleScreenSharing:d}};function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(){var e=H((0,o.useState)(!1),2),t=e[0],r=e[1],n=(0,a.C1)();(0,o.useEffect)((function(){if(n)switch(n.type){case s.a5.RECONNECTING:r(!0);break;case s.a5.RECONNECTED:r(!1)}}),[n]);var i=(0,a._U)(s.zK);return!!i&&Object.values(i).some((function(e){return!!e.degraded}))||t},J=function(){var e=(0,a.cw)();return function(){return e.sendBroadcastMessage(S.UPDATE_ROOM,C)}};function $(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).pageSize,r=void 0===t?8:t,n=(0,o.useRef)([]),i=(0,a._U)(s.Dl),c=(0,o.useMemo)((function(){return(null===e||void 0===e?void 0:e.reduce((function(e,t){return e[t.id]=t,e}),{}))||{}}),[e]),l=n.current.map((function(e){return c[e.id]})).filter((function(e){return!!e}));if(Object.values(i).forEach((function(e){var t=e.peerID;if(l.every((function(e){return e.id!==t}))){var n=c[t];n&&l.unshift(n)}l.length>r&&l.pop()})),l.length<(null===e||void 0===e?void 0:e.length)&&l.length<r){var u=null===e||void 0===e?void 0:e.filter((function(e){return!l.some((function(t){return t.id===e.id}))}));if(null!==u&&void 0!==u&&u.length){var d=r-l.length;l.push.apply(l,$(u.slice(0,d)))}}n.current=l;var p=null===e||void 0===e?void 0:e.filter((function(e){return!l.some((function(t){return t.id===e.id}))}));return{orderedPeers:[].concat($(l),$(p))}},X=function(){var e=(0,a.cw)();return function(){return e.leave()}},Y=function(){var e=(0,a.cw)(),t=(0,a._U)(s.lj),r=null===t||void 0===t?void 0:t.requestedBy;return{hasRoleChangeRequest:!!t,requestedByPeer:r,requestRoleChange:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.changeRoleOfPeer(t,r,n)},acceptRoleChange:function(){return e.acceptChangeRole(t)},rejectRoleChange:function(){return e.rejectChangeRole(t)}}},ee=function(e){var t;return{peerDownlinkQuality:null===(t=(0,a._U)((0,s.hE)(null===e||void 0===e?void 0:e.id)))||void 0===t?void 0:t.downlinkQuality}},te=function(e){var t=(0,a._U)((0,s.xn)(null===e||void 0===e?void 0:e.id)),r=(0,a.cw)();return{audioEnabled:t,muteMicrophone:function(){return r.setRemoteTrackEnabled(null===e||void 0===e?void 0:e.audioTrack,!1)}}},re=function(e){return{externalPeerId:e}};function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oe=function(){var e=ne((0,o.useState)(!1),2),t=e[0],r=e[1],n=(0,a.C1)(s.a5.ROLE_UPDATED),i=null===n||void 0===n?void 0:n.data;return(0,o.useEffect)((function(){n&&i&&i.isLocal&&i.roleName==l.VM.MODERATOR&&r(!0)}),[n]),{roleChangedToModerator:t,hideModeratorNotification:function(){return r(!1)}}};function ae(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var se=function(){var e=_(),t=(0,a.cw)(),r=e===g.AUDIO_BLOCKED,n=function(){var e,r=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.unblockAudio();case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ae(o,n,i,a,s,"next",e)}function s(e){ae(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return{isAudioBlocked:r,unblockAudio:n}},ce=function(){var e=(0,a.cw)(),t=(0,a._U)(s.UP),r=(0,a._U)(s.zK);return{muteAllPeersMicrophone:function(){e.setRemoteTracksEnabled({enabled:!1,roles:["host"],type:"audio"})},areAllPeersMuted:Object.values(r).filter((function(e){return e.peerId!=(null===t||void 0===t?void 0:t.id)&&"audio"===e.type})).every((function(e){return!e.enabled}))}};function le(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function ue(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){le(o,n,i,a,s,"next",e)}function s(e){le(o,n,i,a,s,"throw",e)}a(void 0)}))}}var de=function(e){var t=(0,a._U)(s.I3),r=e||t,n=(0,a.cw)(),c=(0,a._U)((0,s.Ag)(r)),l=(0,o.useCallback)(ue(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=5;break}return t.next=3,n.raiseLocalPeerHand();case 3:t.next=7;break;case 5:return t.next=7,n.raiseRemotePeerHand(e);case 7:case"end":return t.stop()}}),t)}))),[n,e]),u=(0,o.useCallback)(ue(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=5;break}return t.next=3,n.lowerLocalPeerHand();case 3:t.next=7;break;case 5:return t.next=7,n.lowerRemotePeerHand(e);case 7:case"end":return t.stop()}}),t)}))),[n,e]),d=(0,o.useCallback)(ue(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=5;break}return e.next=3,u();case 3:e.next=7;break;case 5:return e.next=7,l();case 7:case"end":return e.stop()}}),e)}))),[c,u,l]);return{isHandRaised:c,raiseHand:l,lowerHand:u,toggleHand:d}},pe=r(53939),fe=function(){var e=(0,pe.Z)({role:l.VM.HLS_SPECTATOR,limit:50});return{peers:e.peers,loadPeers:e.loadPeers,loadMorePeers:e.loadMorePeers,hasNext:e.hasNext,total:e.total}}},47634:(e,t,r)=>{"use strict";r.d(t,{C3:()=>Y.C,ar:()=>re,u7:()=>X,H9:()=>B,eR:()=>ee.e,Qc:()=>te,nH:()=>F,tv:()=>U.t,PP:()=>d,wA:()=>L,e4:()=>Oe,Qs:()=>E,Nc:()=>Pe,F7:()=>$,fX:()=>ve,aL:()=>xe,S2:()=>n.S,h5:()=>be,Xc:()=>W,k1:()=>Ie,_F:()=>ue,aV:()=>g.a,rs:()=>P,p$:()=>se,sv:()=>ae,_K:()=>K,C:()=>he,u9:()=>Q,Ji:()=>_e,NW:()=>h.N,c9:()=>b,B0:()=>y,bF:()=>we,uH:()=>ke,F5:()=>oe});var n=r(92516),i=(r(21681),r(67294)),o=r(7307),a=r(29682);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(){var e=(0,i.useRef)(null),t=l((0,i.useState)(!1),2),r=t[0],n=t[1],u=(0,a.I3)(a.YK),d=(0,a.I3)(a.iZ),p=(0,a.Ft)().setVideoInputId,f=(0,i.useCallback)((function(){var e={width:1280,height:720},t=d&&"default"!==d?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({deviceId:d},e):e;return{video:t,audio:!0}}),[d]),m=function(){var t,r;null!==(t=e.current)&&void 0!==t&&t.srcObject&&(null===(r=e.current)||void 0===r||r.srcObject.getTracks().forEach((function(e){return e.stop()})))},b=(0,i.useCallback)((function(){e.current&&u&&(0,o.Tv)()&&f?(0,o.oj)(f()).then((function(t){e.current.srcObject=t,t.getVideoTracks().length?(p(t.getVideoTracks()[0].getSettings().deviceId),n(!0)):n(!1)})).catch((function(e){console.error("Could not get media devices",e.message),n(!1)})):e.current&&(m(),e.current.srcObject=null)}),[e,u,f,p]);return(0,i.useEffect)((function(){null===b||void 0===b||b()}),[b]),(0,i.useEffect)((function(){var t=e.current;return function(){t&&(m(),t.srcObject=null)}}),[]),(0,i.useEffect)((function(){if(b)return(0,o.Tv)()&&navigator.mediaDevices.addEventListener("devicechange",b),function(){(0,o.Tv)()&&navigator.mediaDevices.removeEventListener("devicechange",b)}}),[b]),{videoRef:e,hasVideo:r}},p=r(86013),f=r(48929),m=r(21809),b=function(){var e=(0,f.NA)(),t=e.data.room,r=e.status,n=r.isRoomError,o=r.apiError,a=(0,m.p)().error;(0,i.useEffect)((function(){401===(null===o||void 0===o?void 0:o.status)&&(a((0,p.t)("live_streams.room.authorization_error")),window.location.href="/"),401!==(null===o||void 0===o?void 0:o.status)&&n&&!t&&(window.location.href="/")}),[t,n,o])},h=r(21491),v=r(11909),y=function(){var e=(0,f.cy)().room;return{roomType:(null===e||void 0===e?void 0:e.room_type)||v.H0.STREAM,isLiveRoom:(0,v.$e)(e),isLiveStream:(0,v.ee)(e)}},g=r(29700),_=r(82258),j=r(30062),x=r(12073),w=r(32015);function O(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var P=function(e){var t=(0,w.M)({hms:j.GK,livekit:x.KI})(),r=t.peers,n=t.loadPeers,o=t.loadMorePeers,s=t.hasNext,c=t.total,l=(0,a.I3)(a.zD),u=l.setLoadFn,d=l.load,p=l.loadFn,m=l.setHasNext,b=l.setLoadMoreFn,h=l.setTotal,v=l.setData,y=l.data,g=l.shouldPoll,S=(0,i.useMemo)((function(){return[].concat(O(e||[]),O(y||[]))}),[e,y]),P=(0,f.y4)().refetchParticipants,C=null===S||void 0===S?void 0:S.reduce((function(e,t){return"".concat(e,"-").concat(t.id,"-").concat(t.roleName)}),""),k=(0,_.c)(C,1e3);(0,i.useEffect)((function(){null!==k&&void 0!==k&&k.length&&P()}),[k,P]),(0,i.useEffect)((function(){u(n),b(o)}),[]),(0,i.useEffect)((function(){h(c)}),[h,c]);var N=null===r||void 0===r?void 0:r.reduce((function(e,t){return"".concat(e,"-").concat(t.id,"-").concat(t.roleName,"-")}),"");(0,i.useEffect)((function(){v(r),m(s())}),[N]);var I=!!p;(0,i.useEffect)((function(){if(I&&(d(),g)){var e=setInterval((function(){d()}),3e3);return function(){clearInterval(e)}}}),[d,I,g])},C=r(64687),k=r.n(C),N=r(49214);function I(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){I(o,n,i,a,s,"next",e)}function s(e){I(o,n,i,a,s,"throw",e)}a(void 0)}))}}var E=function(){var e=(0,i.useRef)(!1),t=(0,f.y4)().goLiveAsync,r=(0,N.JC)();return A(k().mark((function n(){return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.current){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,e.current=!0,n.next=7,t();case 7:return n.next=9,r();case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),console.error("Error going live",n.t0);case 14:return n.prev=14,e.current=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[3,11,14,17]])})))};function D(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){D(o,n,i,a,s,"next",e)}function s(e){D(o,n,i,a,s,"throw",e)}a(void 0)}))}}var L=function(){var e=(0,f.y4)().endStreamDelayedAsync,t=(0,n.S)(),r=(0,N.JC)();return T(k().mark((function n(){return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e();case 2:return n.next=4,r();case 4:return n.next=6,t();case 6:case"end":return n.stop()}}),n)})))};function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var B=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=M((0,i.useState)(),2),o=n[0],a=n[1],s=function(){a(!1),clearTimeout(t),t=setTimeout((function(){return a(!0)}),r)},c=function(){document.removeEventListener("mousemove",s),clearTimeout(t)};return(0,i.useEffect)((function(){return e?(document.addEventListener("mousemove",s),a(!0)):(c(),a(!1)),function(){c()}}),[e]),{uiHidden:o}},U=r(59248),F=function(e,t){var r=(0,n.S)();(0,i.useEffect)((function(){if(e&&t&&!(0,v.a_)(t)&&r)return window.addEventListener("beforeunload",r),window.addEventListener("onunload",r),function(){window.removeEventListener("beforeunload",r),window.removeEventListener("onunload",r)}}),[e,null===t||void 0===t?void 0:t.id,r]),(0,i.useEffect)((function(){if(t&&!(0,v.a_)(t))return function(){r&&t&&!(0,v.a_)(t)&&r()}}),[null===t||void 0===t?void 0:t.id])},z=r(24185),V=r(97012),q=r(95071),G=r(49326),H=r(67144),W=function(){var e=(0,H.R)(),t=e.publicLiveStreamsEnabled,r=e.liveMobileWebEnabled,n=e.isLoading,o=(0,V.wh)(),a=o.currentCommunityMember,s=o.currentUser,c=o.isLoading,l=(0,z.k6)(),u=(0,h.N)(),d=n||c;(0,i.useEffect)((function(){d||(t&&(0,v.L6)(u)&&!a?l.push(G.dE.publicRoom({roomSlug:u.slug})):s?(0,q.P4)()&&u&&r&&window.location.pathname!==G.dE.mobileRoom({roomSlug:u.slug})?l.push(G.dE.mobileRoom({roomSlug:u.slug})):(0,q.P4)()&&!r&&l.push(G.dE.notSupported({roomSlug:u.slug})):window.location.href=G.$T.signIn({params:{post_login_redirect:window.location.href}}))}),[a,s,l,d,r,t,u])},Z=r(88767),J=r(1320),$=function(e,t,r){var n=(0,m.p)(),i=n.success,o=n.error,a=(0,N.Kr)().requestRoleChange,s=te().refetchCohosts;return(0,Z.useMutation)((function(){return J.Qk.addCohosts({roomId:t,formData:{cohosts_community_member_ids:[r]}})}),{onSuccess:function(){a(e,v.VM.HOST),s(),i((0,p.t)("live_streams.room.participant_invited_to_cohost_message"))},onError:function(){return o((0,p.t)("live_streams.room.participant_invited_to_cohost_error"))}}).mutate},Q=function(e,t,r){var n=(0,m.p)(),i=n.success,o=n.error,a=(0,N.Kr)().requestRoleChange,s=(0,f.y4)().refetchParticipants,c=te().refetchCohosts;return(0,Z.useMutation)((function(){return J.Qk.changeRole({roomId:t,participantId:r,role:v.VM.HLS_SPECTATOR},{forReactQuery:!0})}),{onSuccess:function(){a(e,v.VM.HLS_SPECTATOR,!0),s(),c(),i((0,p.t)("live_streams.room.participant_removed_as_cohost_message"),{duration:"short",shouldUseProgress:!1})},onError:function(){return o((0,p.t)("live_streams.room.participant_removed_as_cohost_error"))}}).mutate},K=function(e){var t=(0,h.N)(),r=(0,N.Kr)().requestRoleChange,n=(0,m.p)(),i=n.success,o=n.error,a=(0,Y.C)().hosts,s=(0,f.cy)().participants,c=(0,f.y4)().refetchParticipants,l=function(){e&&e(),i((0,p.t)("live_streams.room.cohost_removed_successfully"),{duration:"short",shouldUseProgress:!1})},u=function(){return o((0,p.t)("live_streams.room.could_not_remove_cohost_error"))},d=(0,Z.useMutation)((function(e){return J.Qk.removeCohost({id:e,roomId:null===t||void 0===t?void 0:t.id})}),{onSuccess:l,onError:u}),b=(0,Z.useMutation)((function(e){return J.Qk.changeRole({roomId:null===t||void 0===t?void 0:t.id,participantId:e,role:v.VM.SPECTATOR,forReactQuery:!0})}),{onSuccess:function(e){var t=function(e){if(!a)return null;var t=a.find((function(t){return Number(t.customerUserId)===e}));return null===t||void 0===t?void 0:t.id}(null===e||void 0===e?void 0:e.id);r(t,v.VM.HLS_SPECTATOR,!0),c(),l()},onError:u});return function(e){var t=function(e){if(!a)return!1;var t=a.find((function(t){var r;return(null===s||void 0===s||null===(r=s[t.customerUserId])||void 0===r?void 0:r.community_member_id)===e}));return null===t||void 0===t?void 0:t.customerUserId}(e);t?b.mutate(t):d.mutate(e)}},X=function(){var e=E(),t=(0,f.NA)(),r=t.data,n=r.room,o=r.currentParticipant,a=t.status,s=a.streamEnded,c=a.isJoining,l=(0,v.SS)(n),u=(0,v.Zo)(n),d=(0,v.HN)(n),p=(0,v.$e)(n);(0,i.useEffect)((function(){o&&l&&!c&&!s&&u&&d&&p&&e()}),[o,l,c,s,u,d,p])},Y=r(84840),ee=r(65830),te=function(){var e=(0,h.N)(),t=!!(0,f.cy)().currentParticipant&&(0,v.HN)(e),r=(0,Z.useQuery)(G.av.liveStreams.getCohosts({roomId:null===e||void 0===e?void 0:e.id}),{enabled:t}),n=r.data,i=r.isLoading,o=r.refetch;return{cohosts:(null===n||void 0===n?void 0:n.records)||[],isLoadingCohosts:i,refetchCohosts:function(){t&&o()}}},re=function(){var e=(0,z.TH)().search,t=new URLSearchParams(e).get("recording_key"),r=(0,f.NA)(),n=r.data,o=n.room,a=n.recorder,s=r.actions.createRecorder;(0,i.useEffect)((function(){o&&t&&s&&!a&&s(t)}),[o,t,a,s])};function ne(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function ie(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){ne(o,n,i,a,s,"next",e)}function s(e){ne(o,n,i,a,s,"throw",e)}a(void 0)}))}}var oe=function(){var e=(0,f.NA)(),t=e.actions,r=t.setViewTypeOverride,n=t.updateRoomAsync,i=e.data,o=i.room,a=i.viewTypeOverride,s=y().isLiveStream,c=a||(null===o||void 0===o?void 0:o.view_type),l=(0,N.JC)(),u=function(){var e=ie(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c!==v.Bk.SPEAKER){e.next=2;break}return e.abrupt("return");case 2:if(!s&&!(0,v.HN)(o)){e.next=14;break}return e.prev=3,e.next=6,n({view_type:v.Bk.SPEAKER});case 6:l(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0.message);case 12:e.next=15;break;case 14:r(v.Bk.SPEAKER);case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=ie(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c!==v.Bk.GRID){e.next=2;break}return e.abrupt("return");case 2:if(!s&&!(0,v.HN)(o)){e.next=14;break}return e.prev=3,e.next=6,n({view_type:v.Bk.GRID});case 6:l(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0.message);case 12:e.next=15;break;case 14:r(v.Bk.GRID);case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return{isSpeakerView:c===v.Bk.SPEAKER,isGridView:c===v.Bk.GRID,setSpeakerView:u,setGridView:d}},ae=function(){var e=(0,N.oZ)();return{isHandRaised:e.isHandRaised,raiseHand:e.raiseHand,lowerHand:e.lowerHand,toggleHand:e.toggleHand}},se=function(e){var t=(0,N.oZ)(e);return{isHandRaised:t.isHandRaised,raiseHand:t.raiseHand,lowerHand:t.lowerHand,toggleHand:t.toggleHand}};function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,n=ce((0,i.useState)(t),2),o=n[0],a=n[1],s=(o-1)*r,c=null===e||void 0===e?void 0:e.slice(s,s+r),l=Math.ceil((null===e||void 0===e?void 0:e.length)/r);return{currentPagePeers:c,page:o,totalPages:l,next:function(){return a(Math.min(o+1,l))},prev:function(){return a(Math.max(o-1,1))},isFirstPage:1===o,isLastPage:o===l}},de=r(31256);function pe(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function fe(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){pe(o,n,i,a,s,"next",e)}function s(e){pe(o,n,i,a,s,"throw",e)}a(void 0)}))}}var me,be=function(e){var t=(0,V.wh)().currentCommunityMember,r=null===t||void 0===t?void 0:t.is_admin,n=(0,h.N)(),i=y().roomType,o=(0,de.tm)({enabled:r}),a=o.streamingHoursAvailable,s=o.recordingHoursAvailable,c=o.isLoading,l=o.streamingTotalPlanHours,u=o.recordingTotalPlanHours,d=r&&!a,f=r&&!s&&(0,v.Gi)(n),b=d||f,g=!(0,v.HN)(n)&&b,_=(0,v.HN)(n)&&b,j=(0,m.p)().success,x=function(){e(),j((0,p.t)("settings.billing.add_ons.changes_succeeded"))},w=(0,de.Yq)((function(){return x()}),{enabled:r}),O=w.purchaseAsync,S=w.unitSize,P=w.currentQuantity,C=(0,de.$v)((function(){return x()}),{enabled:r}),N=C.purchaseAsync,I=C.unitSize,A=C.currentQuantity,E=function(){var e=fe(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(S);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=fe(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(I);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{addonPurchaseNotAllowed:g,isLoadingUsage:c,onClickHandler:function(){return d?D():f?E():void e()},liveButtonLabel:function(){return _?(0,p.t)("live_streams.pre_join.".concat(i,".upgrade_and_continue")):(0,p.t)("live_streams.pre_join.conference.room_button_label")},backstageButtonLabel:function(){return _?(0,p.t)("live_streams.pre_join.".concat(i,".upgrade_and_continue")):(0,p.t)("live_streams.pre_join.".concat(i,".enter_backstage_button_label"))},boxMessage:function(){return g?(0,p.t)("live_streams.pre_join.".concat((0,v.vX)(n),".non_host_upgrade_message")):d?(0,p.t)("live_streams.pre_join.streaming_limit_exceeded",{hours:l+A}):f?(0,p.t)("live_streams.pre_join.recording_limit_exceeded",{hours:u+P}):(0,v.kx)(n)?(0,p.t)("live_streams.pre_join.".concat((0,v.vX)(n),".host_capacity_reached_message")):void 0}}},he=function(e,t,r){var n=(0,N.XN)(r,t).externalPeerId,i=(0,m.p)(),o=i.success,a=i.error,s=(0,f.y4)().refetchParticipants;return(0,Z.useMutation)((function(){return J.Qk.removeParticipant({roomId:e,participantId:t,peerId:n},{forReactQuery:!0})}),{onSuccess:function(){s(),o((0,p.t)("live_streams.room.participant_removed_message"),{duration:"short",shouldUseProgress:!1})},onError:function(){return a((0,p.t)("live_streams.room.participant_removed_error"))}}).mutate},ve=function(e,t,r,n){var i=(0,m.p)(),o=i.success,a=i.error,s=(0,N.Kr)().requestRoleChange;return(0,Z.useMutation)((function(){return J.Qk.addModerator({roomId:t,formData:{moderator_community_member_id:r,participant_id:n}})}),{onSuccess:function(){s(e,v.VM.MODERATOR,!0),o((0,p.t)("live_streams.room.participant_invited_to_moderator_message"))},onError:function(){return a((0,p.t)("live_streams.room.participant_invited_to_moderator_error"))}}).mutate};function ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ge=Object.freeze((ye(me={},v.H0.STREAM,v.VM.HLS_SPECTATOR),ye(me,v.H0.CONFERENCE,v.VM.HOST),me)),_e=function(e,t,r){var n=(0,m.p)(),i=n.success,o=n.error,a=(0,N.Kr)().requestRoleChange,s=function(e){return ge[e]||v.VM.HLS_SPECTATOR}(y().roomType);return(0,Z.useMutation)((function(){return J.Qk.changeRole({roomId:t,participantId:r,role:s},{forReactQuery:!0})}),{onSuccess:function(){a(e,s,!0),i((0,p.t)("live_streams.room.participant_removed_as_moderator_message"),{duration:"short",shouldUseProgress:!1})},onError:function(){return o((0,p.t)("live_streams.room.participant_removed_as_moderator_error"))}}).mutate},je=r(12814),xe=function(){var e=(0,a.Ft)(),t=e.toggleCamera,r=e.toggleMicrophone;(0,je.Z)("shift+v",(function(e){e.preventDefault(),t()})),(0,je.Z)("shift+m",(function(e){e.preventDefault(),r()}))},we=function(){var e=(0,f.cy)().currentParticipant,t=(0,a.if)(),r=t.displayChat,n=t.isSidebarOpen,o=t.isChatSelected;(0,i.useEffect)((function(){((0,v.dF)(e)||(0,v.Vq)(e))&&r()}),[e,r]),(0,i.useLayoutEffect)((function(){if(n&&o){var e=document.getElementById("message-scroll-view");e&&(e.scrollTop=e.scrollHeight)}}),[o,n])};document.documentElement.requestFullscreen=document.documentElement.requestFullscreen||document.documentElement.webkitRequestFullscreen,document.exitFullscreen=document.exitFullscreen||document.webkitExitFullscreen;var Oe=function(){var e=(0,a.if)().setIsFullscreen;(0,i.useEffect)((function(){var t=function(){return e(!!document.fullscreenElement||!!document.webkitFullscreenElement)};return document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),function(){document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t)}}),[e])},Se=r(34128),Pe=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).refetchInterval,t=void 0===e?null:e,r=(0,V.wh)(),n=r.currentCommunity,i=void 0===n?{}:n,o=r.isLoading,a=(0,z.UO)().roomSlug,s=(0,h.N)(),c=(0,Z.useQuery)(["public-live-stream","guests",a,null===i||void 0===i?void 0:i.id],(function(){return(0,Se.UT)(G.qi.rooms.guests.index({slug:a,params:{community_id:null===i||void 0===i?void 0:i.id}}))}),{enabled:Boolean(s)&&(0,v.L6)(s)&&!o&&Boolean(a),refetchInterval:t}),l=c.data,u=c.isLoading;return{guests:l,count:(null===l||void 0===l?void 0:l.length)||0,isLoading:u}},Ce=(0,p.t)("live_streams.room.unstable_connection_message"),ke=function(){var e=(0,m.p)(),t=(0,N.Xq)(),r=(0,i.useRef)(null);(0,i.useEffect)((function(){return t&&(r.current=setTimeout((function(){e.error(Ce)}),5e3)),function(){clearTimeout(r.current)}}),[t])},Ne=r(13224),Ie=function(){var e=(0,a.Ft)().setMicrophoneEnabled,t=(0,h.N)(),r=(0,Ne.j)().isCurrentParticipantRoomCreator,n=!(null===t||void 0===t||!t.mute_on_join);(0,i.useEffect)((function(){!r&&n&&e(!1)}),[r,e,n])}},12073:(e,t,r)=>{"use strict";r.d(t,{cH:()=>u,Em:()=>m,jU:()=>M,VH:()=>y,du:()=>J,ww:()=>_,JX:()=>V,yx:()=>q,Hg:()=>U,AE:()=>O,Bw:()=>w,yK:()=>x,zU:()=>$,fL:()=>S,Mi:()=>B,i4:()=>W,Dq:()=>C,MU:()=>k,_x:()=>I,my:()=>L,KI:()=>Q,$x:()=>A,AR:()=>Z,R3:()=>E});var n=r(64687),i=r.n(n),o=r(67294),a=r(16025),s=r(29682);function c(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){c(o,n,i,a,s,"next",e)}function s(e){c(o,n,i,a,s,"throw",e)}a(void 0)}))}}var u=function(e){var t=(0,a.h)(),r=t.room,n=t.localParticipant,c=t.isConnected,u=(0,s.I3)(s.vi),d=u.videoInputId,p=u.audioInputId,f=u.audioOutputId,m=u.microphoneEnabled,b=u.cameraEnabled;(0,o.useEffect)((function(){l(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(d&&e&&r&&c)){t.next=9;break}return t.prev=1,t.next=4,r.switchActiveDevice("videoinput",d);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error("Could not set video device id: ",t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()}),[c,e,r,d]),(0,o.useEffect)((function(){l(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(p&&e&&r&&c)){t.next=9;break}return t.prev=1,t.next=4,r.switchActiveDevice("audioinput",p);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error("Could not set microphone device id: ",t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()}),[p,c,e,r]),(0,o.useEffect)((function(){f&&e&&r&&c&&l(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.switchActiveDevice("audiooutput",f);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Could not set speaker device id: ",e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()}),[f,c,e,r]),(0,o.useEffect)((function(){l(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&n&&c)){t.next=11;break}return t.prev=1,r={},p&&(r.deviceId=p),t.next=6,n.setMicrophoneEnabled(m,r);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Could not toggle microphone: ",t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}),[c,e,n,m,p]),(0,o.useEffect)((function(){l(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&n&&c)){t.next=11;break}return t.prev=1,r={},d&&(r.deviceId=d),t.next=6,n.setCameraEnabled(b,r);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Could not toggle camera: ",t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}),[b,c,e,n,d])},d=r(95591);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(){var e=p((0,o.useState)(!1),2),t=e[0],r=e[1],n=(0,a.h)().room;return(0,o.useEffect)((function(){if(n)return r(n.isRecording),n.on(d.TQ.RecordingStatusChanged,(function(e){return r(e)})),function(){n.off(d.TQ.RecordingStatusChanged,r)}}),[n]),{hlsUrl:null,isHlsRunning:t,isRecording:t}},b=Object.freeze({PUBLISH_METADATA:"PUBLISH_METADATA",UPDATE_ROOM:"UPDATE_ROOM",MUTE_MICROPHONE:"MUTE_MICROPHONE"});var h=r(58471),v=Object.freeze({excellent:5,good:3,poor:1,unknown:5}),y=function(){var e=(0,a.h)().localParticipant,t=(0,h.aV)(e).connectionQuality;return{localPeerDownlinkQuality:v[t]}},g=r(48929),_=function(e){var t=e.onRoomUpdate,r=e.onEndStream,n=(0,a.h)().room,i=(0,g.y4)().setMicrophoneEnabled;(0,o.useEffect)((function(){var e=new TextDecoder,o=function(r){try{var n=e.decode(r),o=(JSON.parse(n)||{}).type;o===b.UPDATE_ROOM?t&&t():o===b.MUTE_MICROPHONE&&i(!1)}catch(a){console.error("Could not decode received data - ",a.message)}},a=function(e){[d.W4.ROOM_DELETED,d.W4.PARTICIPANT_REMOVED].includes(e)&&r&&r()};return n&&(n.on(d.TQ.DataReceived,o),n.on(d.TQ.Disconnected,a)),function(){n&&(n.off(d.TQ.DataReceived,o),n.off(d.TQ.Disconnected,a))}}),[r,t,n,i])};var j=r(11909),x=function(){var e=(0,a.h)().participants,t=(0,o.useMemo)((function(){return(null===e||void 0===e?void 0:e.filter((function(e){try{var t;return!(null===(t=JSON.parse((null===e||void 0===e?void 0:e.metadata)||"{}"))||void 0===t||!t.isHandRaised)}catch(r){return console.error(r.message),!1}})))||[]}),[e]),r=(0,o.useMemo)((function(){return e.filter((function(e){return e.roleName===j.VM.HOST}))}),[e]),n=(0,o.useMemo)((function(){return e.filter((function(e){return[j.VM.SPECTATOR,j.VM.HLS_SPECTATOR].includes(e.roleName)}))}),[e]);return{peers:e,peersWithHandRaised:t,hosts:r,spectators:n}},w=function(){var e=x(),t=e.peers,r=e.hosts,n=e.spectators,i=(0,o.useMemo)((function(){return null===r||void 0===r?void 0:r.find((function(e){return e.isSpeaking}))}),[r]),a=(0,o.useRef)(null);!function(e,t,r){if(e)r.current=e;else if(r.current){var n=r.current;r.current=(null===t||void 0===t?void 0:t.find((function(e){return e.id===n.id})))||(null===t||void 0===t?void 0:t[0])||null}else r.current=(null===t||void 0===t?void 0:t[0])||null}(i,r,a);var s=(0,o.useCallback)((function(e){return!(null===r||void 0===r||!r.some((function(t){return t.id===e&&t.isSpeaking})))}),[r]);return{peers:t,hosts:r,spectators:n,dominantSpeaker:i,selectedSpeaker:a.current,isSpeaking:s}},O=function(e){var t=(0,o.useRef)(),r=t.current,n=(0,h.aV)(e).cameraPublication,i=null===n||void 0===n?void 0:n.track,a=(null===n||void 0===n?void 0:n.isSubscribed)&&(null===n||void 0===n?void 0:n.track)&&!(null!==n&&void 0!==n&&n.isMuted);return(0,o.useEffect)((function(){return r&&i&&i.attach(r),function(){r&&i&&i.detach(r)}}),[r,i]),{videoRef:t,hasVideo:a}},S=function(){var e=(0,a.h)().room,t=new URLSearchParams(window.location.search).get("token");return(0,o.useEffect)((function(){e&&(console.log("START_RECORDING"),e.on(d.TQ.Disconnected,(function(){return console.log("END_RECORDING")})))}),[e]),{recorderToken:t}};function P(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var C=function(e,t,r){var n=t.onJoinError,s=(0,a.h)(),c=s.roomOptions,l=s.connect,u=s.isConnected,d=s.isConnecting,p=s.isDisconnected,f=s.error,m=s.localMetadata,b=s.participants;return(0,o.useEffect)((function(){var t;(t=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!p||f||r){t.next=10;break}return t.prev=1,t.next=4,l("wss://live-staging.circle.so",e,c);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.error("Could not connect to room: ",t.t0.message),n&&n();case 10:case"end":return t.stop()}}),t,null,[[1,6]])})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){P(o,n,i,a,s,"next",e)}function s(e){P(o,n,i,a,s,"throw",e)}a(void 0)}))})()}),[e,p,r,l,c,f,n]),{isConnected:u,isJoining:d,isHost:(null===m||void 0===m?void 0:m.role)===j.VM.HOST,isHlsSpectator:(null===m||void 0===m?void 0:m.role)===j.VM.HLS_SPECTATOR,isSomeoneScreenSharing:(0,o.useMemo)((function(){return null===b||void 0===b?void 0:b.some((function(e){return e.isScreenShareEnabled}))}),[b])}},k=function(){var e=(0,o.useRef)(),t=e.current,r=(0,a.h)().screenSharingParticipant,n=(0,h.aV)(r).screenSharePublication,i=null===n||void 0===n?void 0:n.track,s=(null===n||void 0===n?void 0:n.isSubscribed)&&(null===n||void 0===n?void 0:n.track)&&!(null!==n&&void 0!==n&&n.isMuted);return(0,o.useEffect)((function(){return t&&i&&i.attach(t),function(){t&&i&&i.detach(t)}}),[t,i]),{peer:r,videoRef:e,hasVideo:s}};function N(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var I=function(){var e=(0,a.h)(),t=e.localParticipant,r=e.isSomeoneScreenSharing,n=!(null===t||void 0===t||!t.isScreenShareEnabled),o=function(){var e,r=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,t.setScreenShareEnabled(!n,{audio:!0,systemAudio:"include"});case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){N(o,n,i,a,s,"next",e)}function s(e){N(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return{isScreenSharingEnabled:n,isSomeoneScreenSharing:r,toggleScreenSharing:o}},A=function(){var e=(0,a.h)().localParticipant;return function(){if(!e)return Promise.reject("localParticipant is not present");var t=new TextEncoder,r=JSON.stringify({type:b.UPDATE_ROOM});return null===e||void 0===e?void 0:e.publishData(t.encode(r),d.WO.RELIABLE)}},E=function(){return(0,a.h)().isReconnecting};function D(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var L=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).pageSize,r=void 0===t?8:t,n=(0,o.useRef)([]),i=(null===e||void 0===e?void 0:e.filter((function(e){return e.isSpeaking})))||[],a=(0,o.useMemo)((function(){return(null===e||void 0===e?void 0:e.reduce((function(e,t){return e[t.sid]=t,e}),{}))||{}}),[e]),s=n.current.map((function(e){return a[e.sid]})).filter((function(e){return!!e}));if(null===i||void 0===i||i.forEach((function(e){if(s.every((function(t){return t.sid!==e.sid}))){var t=a[e.sid];t&&s.unshift(t)}s.length>r&&s.pop()})),s.length<(null===e||void 0===e?void 0:e.length)&&s.length<r){var c=null===e||void 0===e?void 0:e.filter((function(e){return!s.some((function(t){return t.sid===e.sid}))}));if(null!==c&&void 0!==c&&c.length){var l=r-s.length;s.push.apply(s,D(c.slice(0,l)))}}n.current=s;var u=null===e||void 0===e?void 0:e.filter((function(e){return!s.some((function(t){return t.sid===e.sid}))}));return{orderedPeers:[].concat(D(s),D(u))}},M=function(){var e=(0,a.h)().room;return function(){return e.disconnect()}},R=r(96486),B=function(){return{hasRoleChangeRequest:!1,requestedByPeer:null,requestRoleChange:R.noop,acceptRoleChange:R.noop,rejectRoleChange:R.noop}},U=function(e){var t=(0,h.aV)(e).connectionQuality;return{peerDownlinkQuality:v[t]}};function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var V=function(e){var t,r=(0,a.h)().localParticipant,n=(0,g.NA)().data.microphoneEnabled,i=!!(e instanceof d.Ix)&&!n,s=F((0,o.useState)((null===e||void 0===e||null===(t=e.getTrack(d.fQ.Source.Microphone))||void 0===t?void 0:t.isMuted)||i),2),c=s[0],l=s[1];(0,o.useEffect)((function(){var t=function(e){e.kind===d.fQ.Kind.Audio&&l(!0)},r=function(e){e.kind===d.fQ.Kind.Audio&&l(!1)};return e&&(e.on("trackMuted",t),e.on("trackUnmuted",r)),function(){e&&(e.off("trackMuted",t),e.off("trackUnmuted",r))}}),[e]);return{audioEnabled:!c,muteMicrophone:function(){if(!r)return Promise.reject("localParticipant is not present");var t=new TextEncoder,n=JSON.stringify({type:b.MUTE_MICROPHONE});return null===r||void 0===r?void 0:r.publishData(t.encode(n),d.WO.LOSSY,[null===e||void 0===e?void 0:e.sid])}}},q=function(e,t){return{externalPeerId:t}};function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var W=function(){var e=G((0,o.useState)(!1),2),t=e[0],r=e[1];return{roleChangedToModerator:t,hideModeratorNotification:function(){return r(!1)}}},Z=function(){return{isAudioBlocked:!1,unblockAudio:function(){return null}}},J=function(){return{muteAllPeersMicrophone:function(){return!0},areAllPeersMuted:!1}},$=function(){return{isHandRaised:!1,raiseHand:R.noop,lowerHand:R.noop,toggleHand:R.noop}},Q=function(){return{peers:[],loadPeers:Promise.resolve(),loadMorePeers:Promise.resolve(),hasNext:!0,total:0}}},49214:(e,t,r)=>{"use strict";r.d(t,{tz:()=>a,uZ:()=>s,QZ:()=>_,bf:()=>c,Wg:()=>C,rH:()=>l,WB:()=>w,XN:()=>O,fx:()=>x,iF:()=>p,I0:()=>u,RW:()=>d,oZ:()=>k,LP:()=>f,Kr:()=>j,Hy:()=>S,tO:()=>m,Hg:()=>b,so:()=>h,l9:()=>g,JC:()=>v,$I:()=>P,Xq:()=>y});var n=r(30062),i=r(12073),o=r(32015),a=function(e){return(0,o.M)({hms:n.gs,livekit:i.cH})(e)},s=function(){return(0,o.M)({hms:n.Zp,livekit:i.Em})()},c=function(){return(0,o.M)({hms:n.Tq,livekit:i.VH})()},l=function(e){var t=e.onRoomUpdate,r=e.onEndStream;return(0,o.M)({hms:n.hB,livekit:i.ww})({onRoomUpdate:t,onEndStream:r})},u=function(){return(0,o.M)({hms:n.pB,livekit:i.Bw})()},d=function(){return(0,o.M)({hms:n.RS,livekit:i.yK})()},p=function(e){return(0,o.M)({hms:n.wc,livekit:i.AE})(e)},f=function(){return(0,o.M)({hms:n.kk,livekit:i.fL})()},m=function(e,t,r){var a=t.onJoinError,s=t.participantData;return(0,o.M)({hms:n.RN,livekit:i.Dq})(e,{onJoinError:a,participantData:s},r)},b=function(){return(0,o.M)({hms:n.nc,livekit:i.MU})()},h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,o.M)({hms:n.$f,livekit:i._x})(e)},v=function(){return(0,o.M)({hms:n.HV,livekit:i.$x})()},y=function(){return(0,o.M)({hms:n.Vb,livekit:i.R3})()},g=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).pageSize;return(0,o.M)({hms:n.Ak,livekit:i.my})(e,{pageSize:t})},_=function(){return(0,o.M)({hms:n.qr,livekit:i.jU})()},j=function(){return(0,o.M)({hms:n.y2,livekit:i.Mi})()},x=function(e){return(0,o.M)({hms:n.yE,livekit:i.Hg})(e)},w=function(e){return(0,o.M)({hms:n.b1,livekit:i.JX})(e)},O=function(e,t){return(0,o.M)({hms:n.YR,livekit:i.yx})(e,t)},S=function(){return(0,o.M)({hms:n.DI,livekit:i.i4})()},P=function(){return(0,o.M)({hms:n.tv,livekit:i.AR})()},C=function(){return(0,o.M)({hms:n.Ux,livekit:i.du})()},k=function(e){return(0,o.M)({hms:n.CV,livekit:i.zU})(e)}},32015:(e,t,r)=>{"use strict";r.d(t,{M:()=>o});var n=r(11909),i=r(21491),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hms,r=e.livekit,o=(0,i.N)();return(0,n.mP)(o)?r:t}},84840:(e,t,r)=>{"use strict";r.d(t,{C:()=>d});var n=r(67294),i=r(48929),o=r(49214);function a(e){return function(e){if(Array.isArray(e))return e}(e)||l(e)||c(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||l(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(){var e,t=(0,o.RW)(),r=t.hosts,c=t.spectators,l=t.moderators,u=(0,i.cy)(),d=u.room,p=u.participants,f=(0,n.useCallback)((function(e,t){var r,n,i=(null===p||void 0===p||null===(r=p[e.customerUserId])||void 0===r?void 0:r.name)||"",o=(null===p||void 0===p||null===(n=p[t.customerUserId])||void 0===n?void 0:n.name)||"";return i>o?1:i===o?0:-1}),[p]),m=(0,n.useCallback)((function(e,t){var r,n,i,o;return(null===p||void 0===p||null===(r=p[e.customerUserId])||void 0===r?void 0:r.community_member_id)===(null===d||void 0===d||null===(n=d.creator)||void 0===n?void 0:n.id)?-1:(null===p||void 0===p||null===(i=p[t.customerUserId])||void 0===i?void 0:i.community_member_id)===(null===d||void 0===d||null===(o=d.creator)||void 0===o?void 0:o.id)?1:0}),[p,null===d||void 0===d||null===(e=d.creator)||void 0===e?void 0:e.id]),b=(0,n.useMemo)((function(){return r&&s(r).sort(f).sort(m)||[]}),[r,m,f]),h=(0,n.useMemo)((function(){return l&&s(l).sort(f)||[]}),[l,f]),v=(0,n.useMemo)((function(){return c&&c.sort(f)||[]}),[c,f]),y=[].concat(s(b),s(h),s(v)),g=a(b),_=g[0];return{peers:y,hosts:b,cohosts:g.slice(1),moderators:[_].concat(s(h)),spectators:v,count:(null===y||void 0===y?void 0:y.length)||0}}},65830:(e,t,r)=>{"use strict";r.d(t,{e:()=>d});var n=r(47634),i=r(86013),o=r(88767),a=r(1320),s=r(49214),c=r(48929),l=r(11909),u=r(21809),d=function(e){var t=(0,u.p)(),r=t.success,d=t.error,p=(0,n.NW)(),f=(0,s.Kr)().requestRoleChange,m=(0,s.RW)().spectators,b=(0,c.cy)().participants,h=(0,n.Qc)(),v=h.cohosts,y=h.isLoadingCohosts,g=h.refetchCohosts,_=function(e){null===e||void 0===e||e.forEach((function(e){var t=function(e){if(null===m||void 0===m||!m.length)return null;var t=m.find((function(t){var r;return(null===b||void 0===b||null===(r=b[t.customerUserId])||void 0===r?void 0:r.community_member_id)===e}));return null===t||void 0===t?void 0:t.id}(e.id);t&&f(t,l.VM.HOST)}))},j=(0,o.useMutation)((function(e){return a.Qk.addCohosts({roomId:null===p||void 0===p?void 0:p.id,formData:e,forReactQuery:!0})}),{onSuccess:function(t){_(t),g(),r((0,i.t)("live_streams.room.cohosts_added_successfully")),e&&e()},onError:function(){return d((0,i.t)("live_streams.room.could_not_add_cohosts_error"))}}),x=(0,n._K)(g),w=(null===p||void 0===p?void 0:p.host_capacity)>v.length+1;return{cohosts:v,isLoadingCohosts:y,addCohosts:j.mutate,isAddingCohosts:j.isLoading,removeCohost:x,canInviteMoreHosts:w}}},59248:(e,t,r)=>{"use strict";r.d(t,{t:()=>c});var n=r(67294),i=r(39488),o=r(85893);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t=e.title,r=e.onConfirm,s=e.description,c=void 0===s?"":s,l=e.bodyElement,u=void 0===l?null:l,d=e.buttonLabel,p=void 0===d?"":d,f=e.maxIndex,m=void 0!==f&&f,b=e.sentiment,h=void 0===b?"danger":b,v=a((0,n.useState)(!1),2),y=v[0],g=v[1],_=a((0,n.useState)(),2),j=_[0],x=_[1],w=function(){g(!1)},O=function(){g(!1),r(j)};return{confirmModal:(0,o.jsx)(i.I,{show:y,onClose:w,onConfirm:O,title:t,description:c,bodyElement:u,className:"reset-banner-modal",maxZIndexEnabled:m,buttonLabel:p,sentiment:h}),confirmModalOpen:y,onConfirmButtonClick:function(e){g(!0),x(e)},onConfirmModalClose:w,onConfirmModal:O}}},92516:(e,t,r)=>{"use strict";r.d(t,{S:()=>l});var n=r(64687),i=r.n(n),o=r(48929),a=r(49214);function s(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){s(o,n,i,a,c,"next",e)}function c(e){s(o,n,i,a,c,"throw",e)}a(void 0)}))}}var l=function(){var e=(0,o.y4)().leaveAsync,t=(0,a.QZ)();return c(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e();case 2:return r.next=4,t();case 4:case"end":return r.stop()}}),r)})))}},13224:(e,t,r)=>{"use strict";r.d(t,{j:()=>d});var n=r(48929),i=r(11909),o=r(85783),a=r(84895),s=function(){return(0,o._U)(a.UP)},c=r(16025),l=function(){return(0,c.h)().localParticipant},u=r(32015),d=function(){var e,t=(0,n.cy)(),r=t.currentParticipant,o=t.room,a=(0,u.M)({hms:s,livekit:l})();return{isCurrentParticipantModerator:(null===a||void 0===a?void 0:a.roleName)===i.VM.MODERATOR,isCurrentParticipantRoomCreator:(null===o||void 0===o||null===(e=o.creator)||void 0===e?void 0:e.id)===(null===r||void 0===r?void 0:r.community_member_id),isCurrentParticipantSpectator:(null===a||void 0===a?void 0:a.roleName)===i.VM.SPECTATOR||(null===a||void 0===a?void 0:a.roleName)===i.VM.HLS_SPECTATOR}}},21681:(e,t,r)=>{"use strict";r.d(t,{w:()=>c});var n=r(67294),i=r(7307);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=Object.freeze({AUDIO_INPUT:"audioinput",AUDIO_OUTPUT:"audiooutput",VIDEO_INPUT:"videoinput"}),c=function(e){var t=o((0,n.useState)([]),2),r=t[0],a=t[1],c=o((0,n.useState)(!0),2),l=c[0],u=c[1],d=(0,n.useRef)(!1),p=(0,n.useRef)(null),f=(0,n.useCallback)((function(){return(0,i.Tv)()?navigator.mediaDevices.enumerateDevices().then((function(e){return a(e),e})).catch(console.error):Promise.resolve()}),[]),m=(0,n.useCallback)((function(){d.current=!0,p.current=null;var e=function(e){return!(null===e||void 0===e||!e.length)&&e.some((function(e){var t;return!(null===(t=e.label)||void 0===t||!t.trim())}))};e(r)||f().then((function(t){e(t)?d.current=!1:p.current=setTimeout((function(){m()}),2e3)})).catch((function(e){console.error(e)}))}),[f,r]);return(0,n.useEffect)((function(){if(e&&(0,i.Tv)()&&f)return f(),navigator.mediaDevices.addEventListener("devicechange",f),function(){return navigator.mediaDevices.removeEventListener("devicechange",f)}}),[e,f]),(0,n.useEffect)((function(){var e,t;if(f&&(0,i.Pw)())return navigator.permissions.query({name:"microphone"}).then((function(t){e=t,t.onchange=function(){"granted"===t.state&&f()}})).catch((function(e){console.error("Could not listen for microphone permission status",e.message),u(!1)})),navigator.permissions.query({name:"camera"}).then((function(e){t=e,e.onchange=function(){"granted"===e.state&&f()}})).catch((function(e){console.error("Could not listen for camera permission status",e.message),u(!1)})),function(){e&&(e.onchange=null),t&&(t.onchange=null)}}),[f]),(0,n.useEffect)((function(){l||d.current||m()}),[l,m]),(0,n.useEffect)((function(){return function(){p.current&&clearTimeout(p.current)}}),[]),{audioInputDevices:(0,n.useMemo)((function(){return r.filter((function(e){return e.kind===s.AUDIO_INPUT}))}),[r]),audioOutputDevices:(0,n.useMemo)((function(){return r.filter((function(e){return e.kind===s.AUDIO_OUTPUT}))}),[r]),videoInputDevices:(0,n.useMemo)((function(){return r.filter((function(e){return e.kind===s.VIDEO_INPUT}))}),[r])}}},29700:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});var n=r(47634),i=r(48929),o=r(11909),a=function(e){var t,r=e.id,a=e.customerUserId,s=e.roleName,c=e.name,l=(0,n.p$)(r),u=l.isHandRaised,d=l.lowerHand,p=(0,n.NW)(),f=(0,i.cy)().participants,m=null===f||void 0===f?void 0:f[a],b=(0,n.F7)(r,null===p||void 0===p?void 0:p.id,null===m||void 0===m?void 0:m.community_member_id),h=(0,n.u9)(r,null===p||void 0===p?void 0:p.id,a),v=(0,n.fX)(r,null===p||void 0===p?void 0:p.id,null===m||void 0===m?void 0:m.community_member_id,a),y=(0,n.Ji)(r,null===p||void 0===p?void 0:p.id,a),g=e.isLocal,_=!(null===m||void 0===m||!m.community_member_id)&&(null===m||void 0===m?void 0:m.community_member_id)===(null===p||void 0===p||null===(t=p.creator)||void 0===t?void 0:t.id),j=!_&&((null===m||void 0===m?void 0:m.role)===o.VM.HOST||s===o.VM.HOST),x=!_&&((null===m||void 0===m?void 0:m.role)===o.VM.MODERATOR||s===o.VM.MODERATOR),w=(0,n.C)(null===p||void 0===p?void 0:p.id,a,r);return{participant:m,name:(null===m||void 0===m?void 0:m.name)||c,avatarUrl:null===m||void 0===m?void 0:m.avatar_url,isCurrentParticipant:g,isHandRaised:u,isHost:_,isCohost:j,isModerator:x,inviteToCohost:b,removeAsCohost:h,lowerHand:d,removeParticipant:w,removeAsModerator:y,inviteToModerator:v}}},21491:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var n=r(48929),i=function(){return(0,n.cy)().room}},29682:(e,t,r)=>{"use strict";r.d(t,{O_:()=>c,nX:()=>u,CH:()=>s,fm:()=>l,tS:()=>_,I7:()=>j,zl:()=>w,YK:()=>P,oe:()=>k,wV:()=>S,IQ:()=>O,sO:()=>C,vi:()=>g,Sl:()=>N,zD:()=>D,fC:()=>I,iZ:()=>x,Ft:()=>R,I3:()=>y,if:()=>B});var n=r(30270),i=r(782),o=r(32714),a="default",s=2,c=16,l=2,u=16,d=(0,o.n)((function(e){return{settings:{microphoneEnabled:!0,cameraEnabled:!0,audioInputId:a,audioOutputId:null,videoInputId:a,blurEnabled:!1,mirrorEnabled:!0,noiseSuppression:"basic",gridLayoutPageSize:8,speakerLayoutPageSize:6},settingsActions:{toggleMicrophone:function(){return e((function(e){e.settings.microphoneEnabled=!e.settings.microphoneEnabled}))},setMicrophoneEnabled:function(t){return e((function(e){e.settings.microphoneEnabled=t}))},toggleCamera:function(){return e((function(e){var t;e.settings.cameraEnabled=!(null!==(t=e.settings)&&void 0!==t&&t.cameraEnabled)}))},setCameraEnabled:function(){return e((function(e){e.settings.cameraEnabled=!0}))},setAudioInputId:function(t){return e((function(e){e.settings.audioInputId=t}))},setAudioOutputId:function(t){return e((function(e){e.settings.audioOutputId=t}))},setVideoInputId:function(t){return e((function(e){e.settings.videoInputId=t}))},toggleBlur:function(){return e((function(e){var t;e.settings.blurEnabled=!(null!==(t=e.settings)&&void 0!==t&&t.blurEnabled)}))},toggleMirror:function(){return e((function(e){var t;e.settings.mirrorEnabled=!(null!==(t=e.settings)&&void 0!==t&&t.mirrorEnabled)}))},setNoiseSuppression:function(t){return e((function(e){e.settings.noiseSuppression=t}))},setBlurEnabled:function(){return e((function(e){e.settings.blurEnabled=!0}))},setGridLayoutPageSize:function(t){return e((function(e){var r=Math.min(Math.max(t,s),c);e.settings.gridLayoutPageSize=r}))},setSpeakerLayoutPageSize:function(t){return e((function(e){var r=Math.min(Math.max(t,l),u);e.settings.speakerLayoutPageSize=r}))}}}})),p=Object.freeze({CHAT:"CHAT",PARTICIPANTS:"PARTICIPANTS"}),f=(0,o.n)((function(e,t){return{ui:{isSidebarOpen:!1,setIsSidebarOpen:function(t){return e((function(e){e.ui.isSidebarOpen=t}))},hideSidebar:function(){return e((function(e){e.ui.isSidebarOpen=!1}))},currentTab:p.CHAT,setCurrentTab:function(t){return e((function(e){e.ui.currentTab=t}))},displayChat:function(){return e((function(e){e.ui.isSidebarOpen=!0,e.ui.currentTab=p.CHAT,e.ui.hasUnseenChatMessages=!1}))},toggleChat:function(){t().ui.isSidebarOpen&&t().ui.currentTab===p.CHAT?t().ui.hideSidebar():t().ui.displayChat()},displayParticipants:function(){return e((function(e){e.ui.isSidebarOpen=!0,e.ui.currentTab=p.PARTICIPANTS,e.ui.hasUnseenChatMessages=!1}))},toggleParticipants:function(){t().ui.isSidebarOpen&&t().ui.currentTab===p.PARTICIPANTS?t().ui.hideSidebar():t().ui.displayParticipants()},isCohostsModalOpen:!1,setIsCohostsModalOpen:function(t){return e((function(e){e.ui.isCohostsModalOpen=t}))},displayCohostsModal:function(){t().ui.displayParticipants(),t().ui.setIsCohostsModalOpen(!0)},hideCohostsModal:function(){t().ui.setIsCohostsModalOpen(!1)},isMuteParticipantsModalOpen:!1,setIsMuteParticipantsModalOpen:function(t){return e((function(e){e.ui.isMuteParticipantsModalOpen=t}))},displayMuteParticipantsModal:function(){t().ui.setIsMuteParticipantsModalOpen(!0)},hideMuteParticipantsModal:function(){t().ui.setIsMuteParticipantsModalOpen(!1)},hasUnseenChatMessages:!1,setHasUnseenChatMessages:function(t){return e((function(e){e.ui.hasUnseenChatMessages=t}))},onNewChatMessage:function(){t().ui.isSidebarOpen&&t().ui.currentTab===p.CHAT||t().ui.setHasUnseenChatMessages(!0)},isRoomInfoOpen:!1,setIsRoomInfoOpen:function(t){return e((function(e){e.ui.isRoomInfoOpen=t}))},toggleIsRoomInfoOpen:function(){return e((function(e){e.ui.isRoomInfoOpen=!e.ui.isRoomInfoOpen}))},isFullscreen:!1,setIsFullscreen:function(t){return e((function(e){e.ui.isFullscreen=t}))},toggleFullscreen:function(){return e((function(e){e.ui.isFullscreen?document.exitFullscreen():document.documentElement.requestFullscreen()}))},isPublicStreamNotificationVisible:!1,isPublicStreamNotificationDismissed:!1,setPublicStreamNotificationVisible:function(t){return e((function(e){e.ui.isPublicStreamNotificationVisible=t}))},hidePublicStreamNotification:function(){return e((function(e){e.ui.isPublicStreamNotificationVisible=!1,e.ui.isPublicStreamNotificationDismissed=!0}))}}}})),m=(0,o.n)((function(e){return{session:{spectators:{shouldPoll:!0,setShouldPoll:function(t){return e((function(e){e.session.spectators.shouldPoll=t}))},isLoading:!1,isFetching:!1,loadFn:null,setLoadFn:function(t){return e((function(e){e.session.spectators.loadFn=t}))},load:function(){return e((function(e){return e.session.spectators.isLoading=!0,(e.session.spectators.loadFn||Promise.resolve())().finally((function(){e.session.spectators.isLoading=!1}))}))},hasNext:!1,setHasNext:function(t){return e((function(e){e.session.spectators.hasNext=t}))},loadMoreFn:null,setLoadMoreFn:function(t){return e((function(e){e.session.spectators.loadMoreFn=t}))},loadMore:function(){return e((function(e){return e.session.spectators.isFetching=!0,(e.session.spectators.loadMoreFn||Promise.resolve())().finally((function(){e.session.spectators.isFetching=!1}))}))},total:0,setTotal:function(t){return e((function(e){e.session.spectators.total=t}))},data:[],setData:function(t){return e((function(e){e.session.spectators.data=t}))}}}}}));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=(0,n.Ue)((0,i.tJ)((function(){return h(h(h({},d.apply(void 0,arguments)),f.apply(void 0,arguments)),m.apply(void 0,arguments))}),{name:"circle-live-storage",version:3,partialize:function(e){return{settings:e.settings}}})),g=function(e){return e.settings||{}},_=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.audioInputId},j=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.audioOutputId},x=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.videoInputId},w=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.blurEnabled},O=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.mirrorEnabled},S=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.microphoneEnabled},P=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.cameraEnabled},C=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.noiseSuppression},k=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.gridLayoutPageSize},N=function(e){var t;return null===(t=e.settings)||void 0===t?void 0:t.speakerLayoutPageSize},I=function(e){return e.ui},A=function(e){var t;return(null===(t=e.ui)||void 0===t?void 0:t.currentTab)===p.CHAT},E=function(e){var t;return(null===(t=e.ui)||void 0===t?void 0:t.currentTab)===p.PARTICIPANTS},D=function(e){var t;return(null===(t=e.session)||void 0===t?void 0:t.spectators)||{}};function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(){return y((function(e){return e.settingsActions}))},B=function(){var e=y(I),t=y(A),r=y(E);return L(L({},e),{},{isChatSelected:t,isParticipantsSelected:r})}},92232:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});var n=r(86013),i=r(30887),o=r(85893),a=function(){return(0,o.jsxs)("div",{className:"mb-8 mt-4 p-8 text-center shadow-none",children:[(0,o.jsx)("h1",{className:"mb-8 text-2xl",children:(0,n.t)("community.feature.no_live_streams.title")}),(0,o.jsx)("p",{className:"mb-8",children:(0,n.t)("community.feature.no_live_streams.description")}),(0,o.jsxs)("ul",{className:"mx-4 mb-8 list-none text-justify",children:[(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.up_to_3_admins")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.up_to_10_moderators")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.up_to_20_spaces")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.unlimited_members")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.custom_domain")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.advanced_analytics")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.custom_css")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.sso_wp_memberful")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.500MB_file_limit")})]}),(0,o.jsxs)("li",{className:"mb-2 flex list-none font-medium",children:[(0,o.jsx)(i.JO,{type:"star",className:"mr-2",size:20}),(0,o.jsx)("span",{className:"w-full",children:(0,n.t)("plan_details.100GB_total_storage")})]})]}),(0,o.jsx)("a",{className:"btn btn-primary",href:"/settings/plans",children:(0,n.t)("plan_details.upgrade_plan")})]})}},30634:(e,t,r)=>{"use strict";r.d(t,{M:()=>b});var n=r(86013),i=r(24185),o=r(49326),a=r(72810),s=r(40284),c=r(20633),l=r(85893),u=["query"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var b=function(e){var t=e.setShouldRenderMobileFiltersTransition,r=(0,i.k6)(),d=(0,a.t)(),f=d.query,b=void 0===f?"":f,h=m(d,u);return(0,l.jsxs)("div",{className:"bg-primary border-primary flex items-center justify-between border-b px-4 py-2 md:hidden",children:[(0,l.jsx)(s.h,{defaultValue:b,onSearch:function(e){return r.push({search:(0,o.WB)(p(p({},h),{},{query:null===e||void 0===e?void 0:e.trim()}))})},placeholder:(0,n.t)("members_directory.header.search.placeholder")}),(0,l.jsx)(c.h,{name:"20-filters",iconSize:20,iconClassName:"!text-dark",buttonSize:28,onClick:function(){return t((function(e){return!e}))}})]})}},12614:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MemberDirectory:()=>Pe,default:()=>Ce});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r.n(a),c=r(36911),l=r(3317),u=r(16580),d=r(17182),p=r(84536),f=r(4979),m=r(97012),b=r(28175),h=r(49942),v=r(31889),y=r(6038),g=r(49326),_=r(30887),j=r(1002),x=r(64687),w=r.n(x),O=r(92445),S=r(55675),P=r(71362),C=r(61926),k=r(21809),N=r(85893),I=function(e){var t=e.defaultValue,r=void 0===t?"oldest":t,n=[{value:"alphabetical",label:(0,a.t)("alphabetical")},{value:"oldest",label:(0,a.t)("oldest")},{value:"latest",label:(0,a.t)("latest")}];return(0,N.jsx)(C.l.Item,{name:"member_directory_settings.sort",label:I18n.t("".concat("members_directory.header.settings.form",".sort")),hideDescription:!0,hideBorder:!0,children:(0,N.jsx)(C.l.SelectNative,{options:n,defaultValue:r})})},A=function(){var e="members_directory.header.settings.form.exclude_empty_profiles";return(0,N.jsx)(C.l.Item,{name:"member_directory_settings.exclude_empty_profiles",label:I18n.t("".concat(e,".title")),description:I18n.t("".concat(e,".description")),isToggle:!0,hideBorder:!0,inline:!0,children:(0,N.jsx)(C.l.ToggleSwitch,{variant:"small"})})};function E(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var D="members_directory.header.settings",T=[{value:u.nk.CARDS,label:(0,a.t)(["members_directory.header","views.cards"])},{value:u.nk.LIST,label:(0,a.t)(["members_directory.header","views.list"])}],L=function(e){var t=e.open,r=e.onClose,n=(0,k.p)(),i=(0,m.wh)(),o=i.isLoading,a=i.currentCommunitySettings,c=(0,O.K)({onSuccess:function(){n.success(s().t("".concat(D,".save.success"))),r()},onError:function(){n.error(s().t("".concat(D,".save.error")))}});if(!a||o)return null;var l=a.member_directory_settings,d=void 0===l?{}:l,p=function(){var e,t=(e=w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.mutate({data:{community_settings:a},updates:t});case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){E(o,n,i,a,s,"next",e)}function s(e){E(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,N.jsx)(P.d,{open:t,onClose:r,title:s().t("".concat(D,".title")),noWrapperPadding:!0,children:(0,N.jsxs)(C.l,{onSubmit:p,defaultValues:{member_directory_settings:d},className:"h-full",formClassName:"flex flex-col h-full",children:[(0,N.jsxs)("div",{className:"grow px-6",children:[(0,N.jsx)(A,{}),(0,N.jsx)(I,{defaultValue:d.sort}),(0,N.jsx)(C.l.Item,{name:"member_directory_settings.view",label:s().t([D,"form.view"]),hideDescription:!0,hideBorder:!0,children:(0,N.jsx)(C.l.SelectNative,{options:T,defaultValue:u.nk.CARDS})})]}),(0,N.jsx)(P.d.Footer,{children:(0,N.jsx)(S.z,{disabled:c.isLoading,type:"submit",variant:"primary",full:!0,children:s().t("".concat(D,".save.button"))})})]})})};function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var B=function(e){var t=e.currentCommunityMember,r=e.memberCount,i=e.hasDropdown,o=void 0===i||i,s=M((0,n.useState)(!1),2),c=s[0],l=s[1],u="".concat((0,a.t)("members_directory.header.title")," (").concat((0,y.H)(r),")");return(0,v.vb)(t)&&o?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(j.Lt,{direction:"bottom-start",button:(0,N.jsxs)(j.Lt.MenuButton,{children:[(0,N.jsx)(h.y,{children:u}),(0,N.jsx)(_.JO,{size:16,type:"caret-down-bold",className:"text-dark"})]}),children:[(0,N.jsx)(j.Lt.ItemLink,{to:g.Gp.index(),children:(0,a.t)("members_directory.header.manage_members")}),(0,N.jsx)(j.Lt.ItemLink,{forceClose:!0,onClick:function(){l(!0)},children:(0,a.t)("members_directory.header.edit_member_directory")})]}),(0,N.jsx)(L,{open:c,onClose:function(){l(!1)}})]}):(0,N.jsx)(h.y,{children:u})},U=r(30634),F=r(57956),z=r(14908),V=z.f2.RoleFilter,q=z.f2.SpaceGroupsFilterV2,G=z.f2.SpacesFilter,H=z.f2.StatusFilter,W=z.f2.MemberTagsFilter,Z=z.f2.PaywallsFilter,J=z.f2.EventsFilter,$=z.f2.HasPastDueSubscriptionFilter,Q=z.f2.JoinedCommunityDaysAgoFilter,K=z.f2.LastLoggedInDaysAgoFilter,X=z.f2.AvatarSet,Y=z.f2.ActivityScoreFilter,ee=z.f2.NameFilter,te=z.f2.BioFilter,re=z.f2.HeadlineFilter,ne=z.f2.LocationFilter,ie=z.f2.InvitationLinksFilter,oe=[{name:"joined_community_days_ago",component:Q,label:(0,a.t)("members_directory.header.search.filters.joined_community_days_ago"),listLabel:(0,a.t)("members_directory.header.search.filters.joined_community_days_ago_available")},{name:"last_logged_in_days_ago",component:K,label:(0,a.t)("members_directory.header.search.filters.last_logged_in_days_ago")}],ae=[{name:"name",component:ee,label:(0,a.t)("members_directory.header.search.filters.name")},{name:"bio",component:te,label:(0,a.t)("members_directory.header.search.filters.bio")},{name:"headline",component:re,label:(0,a.t)("members_directory.header.search.filters.headline")},{name:"location",component:ne,label:(0,a.t)("members_directory.header.search.filters.location")},{name:"role",component:V,label:(0,a.t)("members_directory.header.search.filters.role")},{name:"invitation_link_ids",component:ie,label:(0,a.t)("members_directory.header.search.filters.invitation_link_ids.singular_title")},{name:"spaces",component:G,label:(0,a.t)("members_directory.header.search.filters.spaces.singular_title")},{name:"space_groups",component:q,label:(0,a.t)("members_directory.header.search.filters.space_groups.singular_title")},{name:"online_status",component:H,label:(0,a.t)("members_directory.header.search.filters.online_status")},{name:"tags",component:W,label:(0,a.t)("members_directory.header.search.filters.tags.singular_title")},{name:"paywalls",component:Z,label:(0,a.t)("members_directory.header.search.filters.paywalls.singular_title")},{name:"events",component:J,label:(0,a.t)("members_directory.header.search.filters.events.singular_title")},{name:"has_past_due_subscription",component:$,label:(0,a.t)("members_directory.header.search.filters.has_past_due_subscription")}].concat(oe,[{name:"is_avatar_set",component:X,label:(0,a.t)("members_directory.header.search.filters.avatar_set")},{name:"activity_score",component:Y,label:(0,a.t)("members_directory.header.search.filters.activity_score")}]),se=function(){var e,t=(0,F.rV)();return(0,N.jsx)("div",{className:"shadow-xs hidden md:flex",children:(0,N.jsx)(z.YP,{platformFilters:ae,defaultFilterNames:(e=["name","spaces","tags","events"],t?[].concat(e,["activity_score"]):e)})})},ce=r(24185),le=r(97395),ue=r(75048);function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fe=function(){var e=de((0,n.useState)(!1),2),t=e[0],r=e[1];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(ue.S,{label:(0,a.t)("space_settings"),children:[(0,N.jsx)(j.Lt.ItemLink,{to:g.Gp.index(),children:(0,a.t)("members_directory.header.manage_members")}),(0,N.jsx)(j.Lt.ItemLink,{forceClose:!0,onClick:function(){r(!0)},children:(0,a.t)("members_directory.header.edit_member_directory")})]}),(0,N.jsx)(L,{open:t,onClose:function(){r(!1)}})]})},me=r(5295),be=r(71234),he=function(){var e=(0,O.K)(),t=(0,O.w)().data,r=null===t||void 0===t?void 0:t.community_settings;if(e.isLoading||!r)return(0,N.jsx)(me.a,{});var n=r.public_member_directory,i="members_directory.header.actions.".concat(n?"public":"private");return(0,N.jsxs)(be.J,{buttonTitle:(0,a.t)("".concat(i,".title")),children:[(0,N.jsx)("p",{children:(0,a.t)("".concat(i,".description"))}),(0,N.jsx)(S.z,{variant:"primary",onClick:function(){e.mutate({data:t,updates:{public_member_directory:!n}})},children:(0,a.t)("".concat(i,".revert_button"))})]})},ve=function(e){var t=e.activeView,r=e.setActiveView,n=(0,ce.k6)(),i=(0,m.wh)().currentCommunityMember,o=(0,b.I)().isV3Enabled,s=(0,N.jsx)(le.P,{value:t,onChange:r});return(0,v.vb)(i)?(0,N.jsxs)("div",{className:"flex items-center gap-4",children:[s,(0,N.jsx)(he,{}),(0,N.jsx)(S.z,{large:o,type:"button",className:"hidden md:block",onClick:function(){return n.push(g.lA.members.manage)},children:(0,a.t)("manage")}),o&&(0,N.jsx)(fe,{})]}):(0,N.jsx)(N.Fragment,{children:s})},ye=function(e){var t=e.memberCount,r=e.activeView,n=e.setShouldRenderMobileFiltersTransition,i=e.setActiveView,o=(0,m.wh)().currentCommunityMember,a=(0,b.I)().isV3Enabled;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(f.Z,{leftContent:(0,N.jsx)(B,{currentCommunityMember:o,memberCount:t,hasDropdown:!a}),rightContent:(0,N.jsx)(ve,{activeView:r,setActiveView:i})}),(0,N.jsx)(U.M,{setShouldRenderMobileFiltersTransition:n}),(0,N.jsx)(se,{})]})},ge=r(44133);function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oe=function(e){var t=e.memberDirectorySettings,r=xe((0,n.useState)(0),2),i=r[0],a=r[1],f=function(e){var t=(0,ge._)("members-directory-view-v2"),r=t.getValue,i=t.setValue,o=(0,n.useRef)(e),a=(0,n.useCallback)((function(){var e=r(),t=o.current;if(!e)return null!==t&&void 0!==t?t:u.nk.LIST;var n=e.defaultCommunityView,i=e.defaultUserView;return n===t?i:null!==t&&void 0!==t?t:u.nk.LIST}),[r]),s=_e((0,n.useState)(a),2),c=s[0],l=s[1];return(0,n.useEffect)((function(){i({defaultCommunityView:o.current,defaultUserView:c})}),[c,i]),(0,n.useEffect)((function(){o.current=e,l(a())}),[e,a]),[c,l]}(t.view),m=xe(f,2),b=m[0],h=m[1],v=xe((0,n.useState)(!1),2),y=v[0],g=v[1];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(ye,{memberCount:i,activeView:b,setActiveView:h,setShouldRenderMobileFiltersTransition:g}),(0,N.jsxs)(d.F.Body,{hasPaddingTopMobile:!1,children:[(0,N.jsx)(c.S,{title:s().t("members_directory.title"),bodyClassNames:"view-members-directory"}),(0,N.jsxs)(d.F.Content,{className:o()("md:!min-w-0",{"!m-0 !max-w-none":b===u.nk.GRID}),children:[(0,N.jsx)(l.x,{shouldRenderMobileFiltersTransition:y,shouldBeHiddenOnMd:!0,shouldShowAdminFilters:!0}),(0,N.jsx)(l.S,{setMemberCount:a,scopeResults:t.scope,defaultSort:t.defaultSort,shouldShowHiddenMemberTooltip:!0,viewType:p.c.MEMBER_DIRECTORY,activeView:b})]})]})]})},Se=r(55007),Pe=function(){var e=(0,Se.b)();return e.isLoading?null:(0,N.jsx)(Oe,{memberDirectorySettings:e})};const Ce=Pe},55007:(e,t,r)=>{"use strict";r.d(t,{b:()=>l});var n=r(97012),i=r(31889),o=r(74238),a=r(16580);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(){var e,t,r=(0,o.ww)().isAdminUsageContext,l=(0,n.wh)(),u=l.currentCommunitySettings,d=l.currentCommunityMember,p=l.isLoading,f=(null===u||void 0===u?void 0:u.member_directory_settings)||{sort:a.aP[0],exclude_empty_profiles:!0},m={exclude_empty_name:!r,exclude_empty_profiles:!r&&f.exclude_empty_profiles},b=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({visible_in_member_directory:!0},m),h=(0,i.vb)(d)?m:b;return{defaultSort:f.sort,scope:h,view:(t=a.nk.CARDS,null!==u&&void 0!==u&&null!==(e=u.member_directory_settings)&&void 0!==e&&e.view&&(t=u.member_directory_settings.view),t),isLoading:p}}},96147:(e,t,r)=>{"use strict";r.d(t,{L:()=>E});var n=r(86013),i=r(50308),o=r.n(i),a=r(88767),s=r(72675),c=r(97012),l=r(1320),u=r(61926),d=r(53448),p=r(21809),f=r(94184),m=r.n(f),b=r(87536),h=r(40160),v=r(24185),y=r(61079),g=r(73923),_=r(75263),j=r(55675),x=r(16743),w=r(85893),O=function(e){var t=e.onClose,r=e.formId,i=e.isLoading,o=void 0!==i&&i,a=(0,b.Gc)(),s=a.watch,c=a.setValue,l=a.formState.isDirty,p=s("community_member_ids",[])||[],f=s("add_all_members",!1),O=p.length>0,S=(0,d.UV)().contentPortalElement,P=(0,v.TH)().pathname;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(d.u_.Header,{children:[(0,w.jsx)(d.u_.Title,{size:"sm",className:"text-center",children:(0,n.t)("space_groups.form.edit.members.add_member")}),(0,w.jsx)(d.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,w.jsx)(d.u_.CloseButton,{onClick:t})})]}),(0,w.jsxs)(d.u_.Body,{children:[(0,w.jsx)("div",{className:"mb-8",children:(0,w.jsxs)(x.Z.LabelMd,{children:[(0,n.t)("space_groups.add_members_to_space_group_description_without_link")," ",(0,w.jsx)(h.rU,{to:"".concat(g.l.members.invite,"?from=").concat(P),children:(0,n.t)("space_groups.add_members_to_space_group_link")}),"."]})}),(0,w.jsx)(u.l.CommunityMemberSelect,{name:"community_member_ids",direction:"down",variant:"tags",hideSelectedItems:!0,hideIcon:!0,disabled:f,appendTo:S,popperOptions:{modifiers:[{name:"offset",options:{offset:[-10,0]}}]}}),(0,w.jsx)(y.Y,{memberIds:p,onRemove:function(e){var t=p.filter((function(t){return t!==e}));c("community_member_ids",t)}}),(0,w.jsxs)("div",{className:m()({hidden:O,visible:!O}),children:[(0,w.jsx)(_.X,{}),(0,w.jsx)("div",{className:"flex items-baseline",children:(0,w.jsx)(u.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,n.t)("space_groups.form.add_everyone_from_community"),id:"add_all_members",name:"add_all_members",className:"my-5 mr-2 flex shrink-0 flex-row-reverse items-center justify-end py-0 font-normal",labelClassName:"ml-4 mb-0 font-normal text-sm",shouldToggleValueOnLabelClick:!0,children:(0,w.jsx)(u.l.ToggleSwitch,{name:"add_all_members",variant:"small"})})})]})]}),(0,w.jsx)(d.u_.Footer,{className:"flex items-baseline justify-end",children:(0,w.jsx)(j.z,{variant:"primary",type:"submit",form:r,disabled:!l||o,children:o?(0,n.t)("space_groups.invite.adding_to_space_group"):(0,n.t)("space_groups.invite.add_to_space_group")})})]})};function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k="add-space-group-members-form",N={add_all_members:!1,community_member_ids:null},I=function(e){var t=e.spaceGroupId,r=(0,p.p)(),i=(0,a.useQueryClient)(),f=(0,s.dd)(),m=(0,c.p7)(t).refetch,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.useMutation)((function(e){var t=e.spaceGroupId,r=e.communityMembersId,n=e.shouldAddAllMembers;return l.iD.addMembers({spaceGroupId:t,body:{community_member_ids:r,add_all_members:n}})}),e)}({onError:function(e){r.error(e.message)},onSuccess:function(e){var t=e.message;i.invalidateQueries(["space-group-members"]),null===m||void 0===m||m(),r.success(t,{duration:"short",shouldUseProgress:!1}),f.hide()}}),h=b.mutate,v=b.isLoading;return(0,w.jsxs)(d.u_,{isOpen:f.visible,onClose:f.visible?f.hide:o(),contentPortalId:"add-space-group-member-portal-content",title:(0,n.t)("space_groups.form.edit.members.add_member"),children:[(0,w.jsx)(d.u_.Overlay,{}),(0,w.jsx)(d.u_.Content,{size:"md",children:(0,w.jsx)(u.l,{id:k,mode:"onChange",onSubmit:function(e){return h(P(P({spaceGroupId:t},e.community_member_ids&&{communityMembersId:e.community_member_ids}),{},{shouldAddAllMembers:e.add_all_members}))},defaultValues:N,className:"flex flex-col overflow-y-auto",formClassName:"flex overflow-y-auto flex-col",children:(0,w.jsx)(O,{onClose:f.hide,isLoading:v,formId:k})})})]})},A=s.gk.create((function(e){var t=e.spaceGroupId;return(0,w.jsx)(I,{spaceGroupId:t})})),E=function(){return(0,s.dd)(A)}},61079:(e,t,r)=>{"use strict";r.d(t,{Y:()=>m});var n=r(58533),i=r(40166),o=r(11835),a=r(5295),s=r(46479),c=r(86013),l=r(38870),u=r(55675),d=r(16743),p=r(85893),f=function(e){var t,r=e.id,n=e.avatarUrl,i=e.name,a=e.onRemove;return(0,p.jsxs)(s.SC,{className:"group h-12",children:[(0,p.jsx)(s.pj,{variant:"no-padding",className:"rounded-l-lg",children:(0,p.jsx)("div",{className:"ml-4 mr-3",children:(0,p.jsx)(l.s,{name:(t=i,o.C.test(""+t)?i.charAt(0):i),src:n,size:"8"})})}),(0,p.jsx)(s.pj,{variant:"no-padding",className:"w-full",children:(0,p.jsx)("div",{className:"truncate p-2 pl-0",children:(0,p.jsx)(d.Z.LabelSm,{weight:"semibold",children:i})})}),(0,p.jsx)(s.pj,{variant:"no-padding",className:"w-24 rounded-r-lg",children:(0,p.jsx)("div",{className:"text-dark invisible group-hover:visible",children:(0,p.jsx)(u.z,{type:"button",variant:"plain",onClick:function(){return a(r)},children:(0,c.t)("remove")})})})]},r)},m=function(e){var t=e.memberIds,r=void 0===t?[]:t,c=e.onRemove,l=r.length>0,u=(0,i.fd)({filters:{id:r},options:{enabled:l,keepPreviousData:l}}),d=u.hasNextPage,m=u.fetchNextPage,b=u.members;return l?(0,p.jsx)("div",{className:"-mx-4 mt-4 h-full max-h-80 overflow-y-auto",children:(0,p.jsx)(n.Z,{loader:(0,p.jsx)(a.a,{}),dataLength:r.length,style:{overflow:"initial"},scrollThreshold:.5,next:m,hasMore:Boolean(d),children:(0,p.jsx)(s.iA,{variant:"no-border",className:"w-full max-w-full",tableClassName:"w-full",children:(0,p.jsxs)(s.RM,{children:[r.map((function(e){return t=e,o.C.test(""+t)?(0,p.jsx)(f,{id:e,name:e,onRemove:c,avatarUrl:""},e):null;var t})),b.map((function(e){var t=e.id,r=e.avatar_url,n=e.name;return(0,p.jsx)(f,{id:t,avatarUrl:r,name:n,onRemove:c},t)}))]})})})}):null}},9711:(e,t,r)=>{"use strict";r.d(t,{z:()=>U});var n=r(86013),i=r(96486),o=r(88767),a=r(72675),s=r(1320);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=r(61926),p=r(53448),f=r(21809),m=r(67294),b=r(94184),h=r.n(b),v=r(87536),y=r(24185),g=r(87958),_=r(97012),j=r(61345),x=r(49326),w=r(75263),O=r(55675),S=r(16743),P=r(61079),C=r(85893),k=[{label:(0,n.t)("spaces.form.add_everyone_from_options.space_group"),value:"space_group"},{label:(0,n.t)("spaces.form.add_everyone_from_options.community"),value:"community"}],N="community_member_ids",I="should_add_all_members",A=function(e){var t=e.onClose,r=e.isLoading,i=e.formId,o=(0,v.Gc)(),a=o.watch,s=o.setValue,c=(0,p.UV)().contentPortalElement,l=(0,_.wh)().currentCommunity,u=(0,y.TH)().pathname,f=l||{},b=f.chat_space_members_limit,A=f.member_count,E=(0,_.L2)().data,D=((0,(0,_.e2)().helpers.findBy)({id:null===E||void 0===E?void 0:E.space_group_id})||{}).space_group_members_count,T=void 0===D?0:D,L=a(N,[])||[],M=a(I,!1),R=a("member_type"),B=L.length>0,U=B||M,F=T>b,z=A>b,V="space_group"===R,q=(0,j.Ug)(E)&&(V?F:z);return(0,m.useEffect)((function(){q&&s(I,!1)}),[q]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(p.u_.Header,{children:[(0,C.jsx)(p.u_.Title,{size:"sm",children:(0,n.t)("spaces.form.edit.members.add_member")}),(0,C.jsx)(p.u_.HeaderActions,{children:(0,C.jsx)(p.u_.CloseButton,{onClick:t})})]}),(0,C.jsxs)(p.u_.Body,{className:"!px-5 !py-4 md:!px-8 md:!py-2",children:[(0,C.jsx)("div",{className:"mb-4",children:(0,C.jsxs)(S.Z.LabelSm,{children:[(0,n.t)("add_members_to_space_description_without_link")," ",(0,C.jsx)("a",{href:"".concat(x.lA.members.invite,"?invite_type=csv&from=").concat(u),children:(0,n.t)("add_members_to_space_description_link")})]})}),(0,C.jsx)(d.l.CommunityMemberSelect,{name:N,variant:"tags",direction:"down",addable:!0,hideSelectedItems:!0,hideIcon:!0,disabled:M,placeholder:(0,n.t)("spaces.form.edit.members.add_member"),appendTo:c,popperOptions:{modifiers:[{name:"offset",options:{offset:[-10,0]}}]}}),(0,C.jsx)(P.Y,{memberIds:L,onRemove:function(e){var t=L.filter((function(t){return t!==e}));s(N,t)}}),(0,C.jsxs)("div",{className:h()({hidden:B,visible:!B}),children:[(0,C.jsx)(w.X,{}),(0,C.jsxs)("div",{className:"flex flex-col items-start md:flex-row md:items-center md:gap-6",children:[(0,C.jsx)(g.T,{content:V?(0,n.t)("members_in_space_group_limit_reached"):(0,n.t)("members_in_community_limit_reached"),disabled:!q,className:"flex w-full",children:(0,C.jsx)(d.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,n.t)("spaces.form.add_everyone_from"),id:I,name:I,className:"my-5 flex shrink-0 flex-row-reverse items-center justify-end py-0 font-normal",labelClassName:"mx-2 mb-0 font-normal text-sm",shouldToggleValueOnLabelClick:!0,isDisabled:q,children:(0,C.jsx)(d.l.ToggleSwitch,{name:I,variant:"small",disabled:q})})}),(0,C.jsx)(d.l.Item,{name:"member_type",className:"w-full text-sm font-normal",hideDescription:!0,hideLabel:!0,hideBorder:!0,hiddenField:!0,children:(0,C.jsx)(d.l.SelectNative,{name:"member_type",options:k})})]})]})]}),(0,C.jsxs)(p.u_.Footer,{className:"flex items-baseline justify-between",children:[(0,C.jsx)("div",{className:"-mt-4",children:(0,C.jsx)(d.l.Checkbox,{id:"notify_members",label:(0,n.t)("spaces.form.edit.members.notify_members"),name:"notify_members",labelClassName:"font-normal text-sm"})}),(0,C.jsx)(O.z,{large:!0,variant:"primary",type:"submit",form:i,disabled:r||!U,children:r?(0,n.t)("spaces.form.edit.members.adding"):(0,n.t)("spaces.form.edit.members.add")})]})]})};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L="add-space-members-form",M={notify_members:!1,community_member_ids:null,member_type:"space_group",should_add_all_members:!1},R=function(e){var t=e.onAdd,r=e.spaceId,c=(0,f.p)(),u=(0,o.useQueryClient)(),m=(0,a.dd)(),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.useMutation)((function(e){var t=e.spaceId,r=e.communityMembersId,n=e.notifyMembers,i=e.memberType,o=e.shouldAddAllMembers;return s.rb.addMemberToSpace({spaceId:t,body:l({community_member_ids_or_emails:r,notify_members:n,select_all_members:o},i&&{member_type:i})})}),e)}({onError:function(e){c.error(e.message)},onSuccess:function(){u.invalidateQueries("community-members"),c.success((0,n.t)("spaces.form.edit.members.members_added")),(0,i.isFunction)(t)?t():m.hide()}}),h=b.mutate,v=b.isLoading;return(0,C.jsxs)(p.u_,{isOpen:m.visible,onClose:m.visible?m.hide:i.noop,contentPortalId:"add-space-member-content-portal",title:(0,n.t)("spaces.form.edit.members.add_member"),children:[(0,C.jsx)(p.u_.Overlay,{}),(0,C.jsx)(p.u_.Content,{size:"xl",className:"max-w-md",children:(0,C.jsx)(d.l,{id:L,mode:"onChange",onSubmit:function(e){return h(D(D(D({spaceId:r},e.community_member_ids&&{communityMembersId:e.community_member_ids}),{},{notifyMembers:!!e.notify_members},e.should_add_all_members&&{memberType:e.member_type}),{},{shouldAddAllMembers:e.should_add_all_members}))},defaultValues:M,className:"flex h-full flex-col overflow-y-auto",formClassName:"flex overflow-y-auto flex-col h-full",children:(0,C.jsx)(A,{onClose:m.visible?m.hide:i.noop,isLoading:v,formId:L})})})]})},B=a.gk.create((function(e){var t=e.spaceId,r=e.onAdd;return(0,C.jsx)(R,{spaceId:t,onAdd:r})})),U=function(){return(0,a.dd)(B)}},27064:(e,t,r)=>{"use strict";r.d(t,{G:()=>I});var n=r(67294),i=r(86013),o=r(31889),a=r(72675),s=r(68465),c=r(19865),l=r(97012),u=r(55675),d=r(53448),p=r(50193),f=r(99310),m=r(61926),b=r(85893),h="course-type-form",v=function(e){var t=e.onSubmit,r=e.courseSetting,n=void 0===r?{course_type:f.t}:r;return(0,b.jsx)(m.l,{id:h,onSubmit:t,defaultValues:{course_setting:n},validationSchema:void 0,className:void 0,formClassName:void 0,children:(0,b.jsx)(p.q,{hideLabel:!0})})},y=r(20633),g=function(e){var t=e.hideForm;return(0,b.jsx)(d.u_.HeaderActions,{children:(0,b.jsx)(y.h,{ariaLabel:(0,i.t)("back"),name:"20-chevron-left",onClick:t,iconSize:20,buttonSize:28,iconClassName:"!text-dark",className:"mr-2",variant:"primary"})})},_=r(79024),j="space_type_form",x=function(e){var t=e.onSubmit,r=(0,l.wh)(),n=r.currentCommunity,i=r.currentCommunitySettings,o=!(null===i||void 0===i||!i.courses_enabled)&&(null===n||void 0===n?void 0:n.courses_feature_flag_enabled);return(0,b.jsx)(m.l,{id:j,onSubmit:t,defaultValues:{post_type:"basic"},children:(0,b.jsx)(_.m,{hideLabel:!0,isCoursesEnabled:o})})};function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=e.spaceGroupId,r=e.selectedPostType,o=(0,a.dd)(),l=w((0,n.useState)(null!==r&&void 0!==r?r:"basic"),2),p=l[0],f=l[1],m=w((0,n.useState)(Boolean(r)&&"course"!==r),2),y=m[0],_=m[1],O=w((0,n.useState)(!1),2),S=O[0],P=O[1],C=w((0,n.useState)("course"===r),2),k=C[0],N=C[1],I=w((0,n.useState)(),2),A=I[0],E=I[1],D=k?(0,i.t)("spaces.form.create.course_types.choose_course_type"):y?(0,i.t)("spaces.form.create.space_titles.".concat(p)):(0,i.t)("spaces.form.create.space_types.choose_type"),T=function(){o.hide(),N(!1),E(void 0),_(!1),o.remove()};return(0,b.jsxs)(d.u_,{isOpen:o.visible,onClose:T,contentPortalId:"space-type-picker-modal",title:D,children:[(0,b.jsx)(d.u_.Overlay,{}),(0,b.jsxs)(d.u_.Content,{size:"md",children:[(0,b.jsxs)(d.u_.Header,{className:"!px-6 md:!px-8",children:[y&&(0,b.jsx)(g,{hideForm:function(){_(!1),"course"===p&&N(!0)}}),k&&(0,b.jsx)(g,{hideForm:function(){N(!1),_(!1)}}),(0,b.jsx)(d.u_.Title,{className:"w-auto",size:"sm",children:D}),(0,b.jsx)(d.u_.HeaderActions,{children:(0,b.jsx)(d.u_.CloseButton,{onClick:T})})]}),(0,b.jsxs)(d.u_.Body,{className:"!px-6 !py-1 md:!px-8",children:[!y&&!k&&(0,b.jsx)(x,{onSubmit:function(e){var t=e.post_type;f(t),"course"===t?N(!0):_(!0)}}),k&&(0,b.jsx)(v,{onSubmit:function(e){var t=e.course_setting;E(t),N(!1),_(!0)},courseSetting:A}),y&&(0,b.jsx)(s._,{onClose:T,post_type:p,courseSetting:A,hideSpaceTypePicker:!0,currentSpaceGroupId:t,setExternalLoadingState:P,renderHeader:function(){return(0,b.jsx)(b.Fragment,{})},renderFooter:function(){return(0,b.jsx)(b.Fragment,{})}})]}),(0,b.jsx)(d.u_.Footer,{children:(0,b.jsx)(u.z,{form:y?c.e:k?h:j,type:"submit","data-testid":"create-space-button",variant:"circle",full:!0,large:!0,disabled:S,children:y?S?(0,i.t)("creating"):(0,i.t)("create_space"):(0,i.t)("spaces.form.create.space_types.next")})})]})]})};function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t=e.spaceGroupId,r=e.postType,o=(0,a.dd)(),l=P((0,n.useState)(!1),2),p=l[0],f=l[1];return(0,b.jsxs)(d.u_,{isOpen:o.visible,onClose:o.hide,contentPortalId:"create-space-content-portal",title:(0,i.t)("create_space"),children:[(0,b.jsx)(d.u_.Overlay,{}),(0,b.jsxs)(d.u_.Content,{size:"md",children:[(0,b.jsxs)(d.u_.Header,{className:"!px-6 md:!px-8",children:[(0,b.jsx)(d.u_.Title,{size:"sm",children:(0,i.t)("create_space")}),(0,b.jsx)(d.u_.HeaderActions,{children:(0,b.jsx)(d.u_.CloseButton,{onClick:o.hide})})]}),(0,b.jsx)(d.u_.Body,{className:"!px-6 !py-1 md:!px-8",children:(0,b.jsx)(s._,{onClose:o.hide,setExternalLoadingState:f,currentSpaceGroupId:t,post_type:r,renderHeader:function(){return(0,b.jsx)(b.Fragment,{})},renderFooter:function(){return(0,b.jsx)(b.Fragment,{})}})}),(0,b.jsx)(d.u_.Footer,{children:(0,b.jsx)(u.z,{disabled:p,type:"submit",form:c.e,full:!0,large:!0,children:(0,i.t)(p?"creating":"create_space")})})]})]})},N=a.gk.create((function(e){var t=e.spaceGroupId,r=e.postType,n=(0,l.wh)().currentCommunityMember;return(0,o.vb)(n)?(0,b.jsx)(S,{spaceGroupId:t,selectedPostType:r}):(0,b.jsx)(k,{spaceGroupId:t,postType:r})})),I=function(){return(0,a.dd)(N)}},16424:(e,t,r)=>{"use strict";r.d(t,{V:()=>u,D:()=>d});var n=r(67294),i=r(24185),o=r(15130),a=r(88291),s=r(85893),c={page_name:o.$q.EDIT_PROFILE},l=(0,n.createContext)({profileInfoQuery:{data:{member:{}}}});l.displayName="AdminMemberEditModalContext";var u=function(e){var t=e.children,r=(0,i.UO)().memberPublicId,n=(0,a.P)({memberPublicId:r,params:c}).getProfileInfoQuery;return(0,s.jsx)(l.Provider,{value:{memberPublicId:r,profileInfoQuery:n},children:t})},d=function(){return(0,n.useContext)(l)}},69179:(e,t,r)=>{"use strict";r.d(t,{G:()=>a});var n=r(86013),i=r(71032),o=r(85893),a=function(e){var t=e.isOpen,r=void 0!==t&&t,a=e.onClose,s=e.onConfirm,c=e.confirmText,l=e.disabled,u=void 0!==l&&l;return(0,o.jsx)(i.c,{isOpen:r,onClose:a,onConfirm:s,confirmText:c,confirmVariant:"danger",title:(0,n.t)("remove"),disabled:u,cancelText:(0,n.t)("cancel"),children:(0,o.jsx)("p",{children:(0,n.t)("remove_member_confirm")})})}},37469:(e,t,r)=>{"use strict";r.d(t,{L:()=>l});var n=r(36658),i=r(72675),o=r(18919),a=r(85893),s=function(e){var t=e.spaceId,r=(0,i.dd)(),s=r.visible,c=r.hide;return(0,a.jsx)(o.K,{children:(0,a.jsx)(n.G,{isOpen:s,onClose:c,spaceId:t,shouldClearEventStateOnHide:!0})})},c=i.gk.create((function(e){var t=e.spaceId;return(0,a.jsx)(s,{spaceId:t})})),l=function(){return(0,i.dd)(c)}},19175:(e,t,r)=>{"use strict";r.d(t,{t:()=>N});var n=r(72675),i=r(64687),o=r.n(i),a=r(67294),s=r(86013),c=r(97012),l=r(11909),u=r(55825),d=r(73793),p=r(61926),f=r(21809),m=r(92232),b=r(18919),h=r(42240),v=r(16620),y=r(96486);function g(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var _=function(){var e=(0,a.useRef)(null),t=function(){var t,r=(t=o().mark((function t(r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,y.isFunction)(e.current)){t.next=6;break}return t.next=3,e.current();case 3:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:r();case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){g(o,n,i,a,s,"next",e)}function s(e){g(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{validateAndContinue:t,triggerValidationRef:e}},j=r(81372),x=r(85893);function w(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var P=function(e){var t=e.isOpen,r=e.onClose,n=(0,c.wh)().currentCommunity,i=(n=void 0===n?{}:n).supports_live_streams,y=O((0,a.useState)(l.H0.STREAM),2),g=y[0],S=y[1],P=(0,v.qj)(g),C=P.sections,k=P.sectionTitles,N=(0,v.a1)(),I=(0,v.n3)(g,r),A=I.mutateAsync,E=I.isLoading,D=_(),T=D.validateAndContinue,L=D.triggerValidationRef,M=(0,f.p)().success,R=(0,b.Y)(),B=R.shouldUpgradeAddons,U=R.purchaseRecordingsAddonWhenLimitReached,F=R.purchaseStreamingAddonWhenLimitReached,z=function(){var e,t=(e=o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U(t);case 3:return e.next=5,F();case 5:return B&&M((0,s.t)("settings.billing.add_ons.changes_succeeded")),e.next=8,A(t,r);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){w(o,n,i,a,s,"next",e)}function s(e){w(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return(0,x.jsx)(d.x,{isOpen:t,onClose:r,shouldShowCloseButton:!0,contentPortalId:"live",children:(0,x.jsxs)(u.MW,{formId:"live-QWZ7d7ysBkm5cwhL235J9Q",sections:k,initialSection:C.roomType,title:(0,s.t)("live_streams.form.title_v3"),onExit:r,onSave:z,isSaving:E,children:[(0,x.jsx)(d.x.Header,{children:(0,x.jsx)(h.h4,{})}),(0,x.jsxs)(d.x.Body,{id:j.Um,wrapperClassName:"max-w-full",children:[i&&(0,x.jsx)(p.l,{id:"live-QWZ7d7ysBkm5cwhL235J9Q",onSubmit:z,onCancel:r,defaultValues:N,children:(0,x.jsx)(h.uT,{setRoomType:S,triggerValidationRef:L})}),!i&&(0,x.jsx)("div",{className:"mx-auto max-w-screen-md py-14",children:(0,x.jsx)(m.s,{})})]}),i&&(0,x.jsx)(d.x.Footer,{children:(0,x.jsx)(h.$_,{roomType:g,validateAndContinue:T})})]})})},C=function(){var e=(0,n.dd)(),t=e.visible,r=e.hide;return(0,x.jsx)(b.K,{children:(0,x.jsx)(P,{isOpen:t,onClose:r})})},k=n.gk.create((function(){return(0,x.jsx)(C,{})})),N=function(){return(0,n.dd)(k)}},93556:(e,t,r)=>{"use strict";r.d(t,{Y:()=>w});var n=r(96486),i=r(72675),o=r(64687),a=r.n(o),s=r(86013),c=r(88767),l=r(1320),u=r(97012),d=r(15591),p=r(21809),f=r(93826),m=r(16743),b=r(85893);function h(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t=e.space,r={default:["space_members","space_settings"],basic:["posts","engagement"],event:["events","engagement"],course:["course_info","course_progress","videos_and_files","comments"],image:["posts","engagement"],chat:["messages"]},n=[].concat(h(r[t.post_type]||[]),h(r.default));return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.w,{content:(0,s.t)("spaces.delete.description",{space_name:t.name})}),(0,b.jsxs)("div",{className:"border-primary mt-4 space-y-2 rounded-md border p-4",children:[(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)(m.Z.LabelMd,{weight:"semibold",children:t.name})}),n&&(0,b.jsx)("ul",{className:"list-inside list-none",children:n.map((function(e){return(0,b.jsx)("li",{children:(0,b.jsx)(m.Z.LabelXs,{children:(0,s.t)(["spaces.delete.details",e])})},e)}))})]})]})};function g(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var _=function(e){var t,r,i=e.show,o=e.space,f=void 0===o?{}:o,m=e.onClose,h=e.onSuccess,v=(0,p.p)(),_=(0,u.nT)().actions.refresh,j=(0,c.useMutation)((function(){return l.rb.destroy({id:f.id})}),{onSuccess:(t=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:(0,n.isFunction)(h)&&h(),m();case 4:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){g(o,n,i,a,s,"next",e)}function s(e){g(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)}),onError:function(){v.error((0,s.t)("delete_space_failed"))}}),x=j.mutate,w=j.isLoading;return(0,b.jsx)(d.V,{title:(0,s.t)("spaces.delete.title"),isOpen:i,confirmUserPrompt:(0,s.t)("spaces.delete.confirm_prompt"),onClose:m,onCancel:m,onConfirm:x,confirmVariant:"danger",isDisabled:w,confirmText:w?(0,s.t)("deleting"):(0,s.t)("confirm"),children:(0,b.jsx)(y,{space:f})})},j=function(e){var t=e.space,r=e.onSuccess,o=e.onClose,a=void 0===o?n.noop:o,s=(0,i.dd)();return(0,b.jsx)(_,{show:s.visible,space:t,onClose:function(){a&&a(),s.hide()},onSuccess:r})},x=i.gk.create((function(e){var t=e.space,r=e.onSuccess,n=e.onClose;return(0,b.jsx)(j,{space:t,onSuccess:r,onClose:n})})),w=function(){return(0,i.dd)(x)}},73188:(e,t,r)=>{"use strict";r.d(t,{a:()=>ue});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r(72675),c=r(61926),l=r(5295),u=r(11117),d=r(17021),p=r(53448),f=r(16743),m=r(85893),b=function(){var e=(0,p.UV)().contentPortalElement;return(0,m.jsxs)("div",{className:"mt-8",children:[(0,m.jsx)(f.Z.TitleSm,{weight:"semibold",children:(0,a.t)("space_groups.form.moderators")}),(0,m.jsx)(c.l.Item,{translationRoot:"space_groups.form.edit",name:"moderator_community_member_ids",tooltipText:(0,a.t)("space_groups.form.edit.moderator_community_member_ids_tooltip"),hideDescription:!0,hideBorder:!0,fullWidth:!0,children:(0,m.jsx)(c.l.CommunityMemberSelect,{name:"moderator_community_member_ids",variant:"tags",excludeAdmins:!0,appendTo:e})})]})},h=function(e){var t=e.formId,r=e.onSubmit,n=e.defaultValues,i=e.loading;return void 0!==i&&i?(0,m.jsx)(l.a,{}):(0,m.jsx)(c.l,{id:t,onSubmit:r,defaultValues:n,className:"mx-1 h-full",children:(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)(d.K,{}),(0,m.jsx)(b,{}),(0,m.jsx)(u.a,{})]})})},v=r(88767),y=r(24185),g=r(1320),_=r(97012),j=r(49326),x=r(21809),w=["moderator_community_member_ids"];function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var k=r(54032),N=r(26953),I=r(63099),A=r(39834),E=r(55675),D=r(17260),T=r(96147),L=r(69179),M=r(4093),R=r(40166),B=r(34128),U=r(64687),F=r.n(U);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var Z=function(e){var t=function(){var e,t=(e=F().mark((function e(t){var r,n,i,o,a,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.spaceGroupId,n=t.memberId,i=t.isModerator,e.next=3,(0,B.UT)(j.av.communityMember.settings({memberId:n}));case 3:return o=e.sent,a=o.moderating_space_group_ids||[],s=i?[].concat(G(a),[r]):a.filter((function(e){return e!==r})),e.abrupt("return",(0,B.aU)(j.av.communityMember.update({memberId:n}),V(V({},o),{},{moderator_space_group_ids:s})));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){W(o,n,i,a,s,"next",e)}function s(e){W(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,v.useMutation)(t,e)},J=r(40284),$=r(62824),Q=r(5100);function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y=function(e,t,r){return e.admin?"Admin":e.moderator&&r.includes(t)?"Moderator":"Member"},ee=function(e){var t,r=e.spaceGroup,i=(0,y.k6)(),o=(0,x.p)(),s=(0,v.useQueryClient)(),c=K((0,n.useState)(!1),2),u=c[0],d=c[1],p=K((0,n.useState)(!1),2),f=p[0],b=p[1],h=K((0,n.useState)(""),2),g=h[0],_=h[1],w=K((0,n.useState)(null),2),O=w[0],S=w[1],P=(0,T.L)(),C=(0,R.fd)({filters:{space_groups:r.slug},sort:R.zw.ROLE,query:g}),k=C.isLoading,N=C.hasNextPage,I=C.totalMembers,A=C.fetchNextPage,E=C.members,D=C.queryKey,U=(t={onError:function(e){o.error(e.message)},onSuccess:function(){s.invalidateQueries(D),o.success((0,a.t)("space_groups.form.edit.members.members_removed"))},onSettled:function(){d(!1),b(!1),S(null)}},(0,v.useMutation)((function(e){var t=e.spaceGroupId,r=e.memberId;return(0,B.pC)(j.av.spaceGroups.deleteMember({spaceGroupId:t,memberId:r}))}),t)),F=U.mutate,z=Z({onError:function(e){o.error(e.message)},onSuccess:function(){s.invalidateQueries(D),o.success((0,a.t)("space_groups.form.edit.members.changed_role"))}}).mutate,V=f?(0,a.t)("space_groups.form.edit.members.removing"):(0,a.t)("space_groups.form.edit.members.remove_member");if(k)return(0,m.jsx)(l.a,{});var q=E.map((function(e){var t=e.id,n=e.avatar_url,i=e.name,o=e.email,a=e.roles,s=e.moderating_space_group_ids;return{id:t,avatarUrl:n,name:i,email:o,public_uid:e.public_uid,role:Y(a,r.id,s)}}));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"flex justify-between border-b border-gray-200 px-8 py-3 text-gray-600",children:[(0,m.jsx)(J.h,{onSearch:_,placeholder:(0,a.t)("space_groups.search_members")}),(0,m.jsx)($.n,{spaceGroupId:r.id})]}),(0,m.jsx)("div",{className:"h-full overflow-auto px-4 py-2",children:(0,m.jsx)(M.r,{searchTerm:g,members:q,dataLength:I,next:A,hasMore:N,onEdit:function(e){var t=e.public_uid;i.push(j.WF.info(t))},onRemove:function(e){S(e),d(!0)},onAdd:function(){P.show({spaceGroupId:r.id})},onRoleChange:function(e,t){var n=t===Q.K.MODERATOR;z({spaceGroupId:r.id,memberId:e,isModerator:n})},variant:"space-group-members",scrollableTarget:"scrollable-content"})}),(0,m.jsx)(L.G,{isOpen:u,onClose:function(){return d(!1)},onConfirm:function(){O&&u&&(b(!0),F({spaceGroupId:r.id,memberId:O}))},disabled:f,confirmText:V})]})};function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ae="edit-space-group-form",se=["Details","Members"],ce=function(e){var t=e.spaceGroup,r=e.tab,i=void 0===r?se[0]:r,c=ie((0,n.useState)(i),2),l=c[0],u=c[1],d=ie((0,I.k)(!1),2),f=d[0],b=d[1],O=null===t||void 0===t?void 0:t.id,P=(0,_.p7)(O),T=P.data,L=void 0===T?{}:T,M=P.isLoading,R=(0,N.kK)(),B=re(re({},t),L),U=(0,s.dd)(),F="Details"===l,z="Members"===l,V=null===B||void 0===B?void 0:B.active_members_count,q=function(e){var t=e.spaceGroup,r=e.onSuccess,n=(0,x.p)(),i=n.success,o=n.error,s=(0,y.k6)(),c=(0,_.p7)(t.id).refetch;return S(S({},(0,v.useMutation)((function(e){var r=e.moderator_community_member_ids,n=C(e,w);return g.iD.update(t.id,{space_group:n,moderator_community_member_ids:r})}),{onSuccess:function(e){i((0,a.t)("space_groups.form.edit.saved_successfully")),c(),r(),s.push(j.Ts.show({spaceGroupSlug:e.slug}))},onError:function(){return o((0,a.t)("space_groups.form.create.save_error"))}})),{},{spaceGroup:t})}({spaceGroup:B,onSuccess:U.hide}),G=q.mutate,H=q.isLoading;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(p.u_,{isOpen:U.visible,onClose:U.hide,contentPortalId:"edit-space-group-content-portal",title:(0,a.t)("space_groups.form.edit.title"),children:[(0,m.jsx)(p.u_.Overlay,{}),(0,m.jsxs)(p.u_.Content,{size:"xl",children:[(0,m.jsxs)(p.u_.Header,{children:[(0,m.jsx)(p.u_.Title,{size:"md",children:(0,a.t)("space_groups.form.edit.title")}),(0,m.jsx)(p.u_.HeaderActions,{children:(0,m.jsx)(p.u_.CloseButton,{onClick:U.hide})})]}),(0,m.jsx)(p.u_.Body,{id:"scrollable-content",className:o()({"px-0 py-0":z}),children:(0,m.jsxs)(D.O.Group,{selectedIndex:se.indexOf(l),onChange:function(e){return u(se[e])},children:[(0,m.jsxs)(D.O.List,{children:[(0,m.jsx)(D.O,{children:(0,a.t)("space_groups.details")}),(0,m.jsx)(D.O,{children:(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.t)("space_groups.members")," ",(0,m.jsx)(A.g,{square:!0,inverted:!0,label:String(V)})]})})]}),(0,m.jsxs)(D.O.Panels,{className:"mt-4",children:[(0,m.jsx)(D.O.Panel,{children:(0,m.jsx)(h,{formId:ae,onSubmit:G,defaultValues:B,loading:M})}),(0,m.jsx)(D.O.Panel,{children:(0,m.jsx)(ee,{spaceGroup:B})})]})]})}),F&&(0,m.jsxs)(p.u_.Footer,{className:"flex w-full justify-between gap-4 md:gap-0",children:[(0,m.jsx)(E.z,{type:"button",variant:"danger-outline",className:"hidden md:inline-block",onClick:b,children:(0,a.t)("space_groups.delete_space_group")}),(0,m.jsx)(E.z,{type:"button",full:!0,variant:"secondary",className:"inline-block text-center md:hidden",onClick:function(){U.hide()},children:(0,a.t)("cancel")}),(0,m.jsx)(E.z,{full:R,type:"submit",variant:"circle",form:ae,disabled:H,children:H?(0,a.t)("space_groups.form.edit.submitting"):(0,a.t)("save_changes")})]})]})]}),(0,m.jsx)(k.x,{spaceGroupId:B.id,show:f,onClose:b,onSuccess:U.hide})]})},le=s.gk.create((function(e){return(0,m.jsx)(ce,re({},e))})),ue=function(){return(0,s.dd)(le)}},55408:(e,t,r)=>{"use strict";r.d(t,{S:()=>y});var n=r(64687),i=r.n(n),o=r(86013),a=r(23560),s=r.n(a),c=r(24185),l=r(44920),u=r(72675),d=r(97012),p=r(71032),f=r(16743),m=r(85893);function b(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var h=function(e){var t=e.onClose,r=(0,u.dd)(),n=(0,d.wh)().currentCommunity,a=(0,l.kc)(),h=a.completeWholeOnboarding,v=a.refetchOnboarding,y=(0,c.k6)(),g=function(){var e,o=(e=i().mark((function e(){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null===n||void 0===n?void 0:n.home_page_enabled,e.next=3,h();case 3:return e.next=5,v();case 5:if(s()(t)&&t(),r.hide(),!o){e.next=9;break}return e.abrupt("return",y.push("/home"));case 9:window.location.href="/";case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){b(o,n,i,a,s,"next",e)}function s(e){b(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();return(0,m.jsx)(p.c,{isOpen:r.visible,onClose:r.hide,title:(0,o.t)("remove_onboarding_confirmation_modal.title"),cancelText:(0,o.t)("remove_onboarding_confirmation_modal.cancel"),confirmText:(0,o.t)("remove_onboarding_confirmation_modal.confirm"),onConfirm:g,children:(0,m.jsx)(f.Z.BodyMd,{children:(0,o.t)("remove_onboarding_confirmation_modal.description")})})},v=u.gk.create((function(e){var t=e.onClose;return(0,m.jsx)(h,{onClose:t})})),y=function(){return(0,u.dd)(v)}},46580:(e,t,r)=>{"use strict";r.d(t,{l:()=>u});var n=r(61892),i=r(40129),o=r(72675),a=r(97012),s=r(85893),c=function(){var e=(0,i.v)().space,t=(0,o.dd)();return(0,s.jsx)(a.mE,{spaceId:null===e||void 0===e?void 0:e.id,children:(0,s.jsx)(n.k,{show:t.visible,space:e,onClose:t.hide})})},l=o.gk.create((function(){return(0,s.jsx)(c,{})})),u=function(){return(0,o.dd)(l)}},57802:(e,t,r)=>{"use strict";r.d(t,{x:()=>h});var n=r(64687),i=r.n(n),o=r(67294),a=r(86664),s=r(86013),c=r(88767),l=r(34128),u=r(49326),d=r(21809);function p(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){p(o,n,i,a,s,"next",e)}function s(e){p(o,n,i,a,s,"throw",e)}a(void 0)}))}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=function(e){var t=e.CardElement,r=e.currency,n=e.onSuccess,p=e.paymentMethodsRegistrableByCurrency,b=(0,a.useStripe)(),h=(0,a.useElements)(),v=(0,d.p)(),y=v.success,g=v.error,_={createSetupIntentMutation:(0,c.useMutation)((function(e){return(0,l.Cu)(u.av.communityMemberPaymentMethod.setupIntent.create(),e)})),createPaymentMethodMutation:(0,c.useMutation)((function(e){return(0,l.Cu)(u.av.communityMemberPaymentMethod.create(),e)}))},j=_.createPaymentMethodMutation,x=_.createSetupIntentMutation,w=m((0,o.useState)(!1),2),O=w[0],S=w[1],P=m((0,o.useState)(!1),2),C=P[0],k=P[1],N=!O||C,I={currency_id:null===r||void 0===r?void 0:r.id},A=function(){var e=f(i().mark((function e(r){var n,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.confirmCardSetup(r,{payment_method:{card:h.getElement(t)}});case 2:if(n=e.sent,o=n.setupIntent,!(a=n.error)){e.next=7;break}throw new Error(a.message);case 7:return e.abrupt("return",o.payment_method);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=f(i().mark((function e(t){var r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.currencyId,e.next=3,x.mutateAsync({currency_id:r});case 3:return n=e.sent,e.next=6,A(n.client_secret);case 6:return o=e.sent,e.next=9,j.mutateAsync({currency_id:r,payment_method_processor_id:o});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=r?[{value:r.id,label:r.code.toUpperCase()}]:p.map((function(e){return{value:e.id,label:e.code.toUpperCase()}})),T=function(){var e=f(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,E({currencyId:t.currency_id});case 4:n&&n(),y((0,s.t)("member_profile_modal.billing.subscriptions.alerts.success.payment_created")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),g(e.t0.message);case 11:return e.prev=11,k(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}();return{defaultValues:I,isConfirmingCard:C,disableButton:N,handleOnClick:T,handleOnChangeCard:function(e){e.complete?S(!0):O&&S(!1)},currenciesOptions:D,createPaymentMethod:E}}},50195:(e,t,r)=>{"use strict";r.d(t,{c:()=>we});var n=r(86664),i=r(94184),o=r.n(i),a=r(53448),s=r(72675),c=r(17986),l=r(35144),u=r(88992),d=r(67294),p=r(85893),f=(0,d.createContext)({});f.displayName="ChangePlanContext";var m=function(e){var t=e.subscription,r=e.isManagingMember,n=e.children,i={subscription:t,isManagingMember:Boolean(r)};return(0,p.jsx)(f.Provider,{value:i,children:n})},b=r(86013),h=(0,d.createContext)({});h.displayName="ChangePlanFormContext";var v=function(e){var t=e.children;return(0,p.jsx)(h.Provider,{value:e,children:t})},y=function(){return(0,d.useContext)(h)},g=r(30887),_=r(19300),j=r(6225),x=function(e){var t=e.title,r=e.subtitle;return(0,p.jsxs)(a.u_.Body,{className:"flex flex-col items-center py-14",children:[(0,p.jsx)("div",{className:"m-8 flex h-16 w-16 justify-center",children:(0,p.jsx)(g.JO,{className:"!h-full !w-full",type:"loader",useWithFillCurrentColor:!0,useWithStrokeCurrentColor:!0})}),(0,p.jsxs)("div",{className:"space-y-4 text-center",children:[(0,p.jsx)("div",{children:(0,p.jsx)(j.P,{children:t})}),(0,p.jsx)("div",{children:(0,p.jsx)(_.Di,{children:r})})]})]})},w=r(55675),O=r(61926),S=r(16743),P=function(e){var t=e.title,r=e.children,n=y(),i=n.dismiss,o=n.canGoBack,s=n.goBack,c=n.formDefaults,l=n.submitLabel,u=n.submitDisabled,d=n.submit;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(a.u_.Header,{children:[(0,p.jsx)(a.u_.Title,{size:"md",className:"text-center",children:t}),(0,p.jsx)(a.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,p.jsx)(a.u_.CloseButton,{onClick:i})}),o&&(0,p.jsx)(a.u_.HeaderActions,{className:"absolute left-0 top-0 ml-6 mt-6",children:(0,p.jsxs)(w.z,{type:"button",variant:"plain",small:!0,onClick:s,children:[(0,p.jsx)("span",{className:"sr-only",children:(0,b.t)("back")}),(0,p.jsx)(g.JO,{type:"20-chevron-left",size:20})]})})]}),(0,p.jsx)(a.u_.Body,{children:(0,p.jsx)(O.l,{id:"change_plan_form",defaultValues:c,onSubmit:d,children:r})}),(0,p.jsxs)(a.u_.Footer,{children:[(0,p.jsx)(w.z,{full:!0,large:!0,variant:"circle",form:"change_plan_form",type:"submit",disabled:u,children:l}),(0,p.jsxs)("div",{className:"mt-2 flex flex-row items-center justify-center",children:[(0,p.jsx)(g.JO,{type:"lock-solid",className:"mt-2 !h-6 !w-6"}),(0,p.jsx)(S.Z.BodyXs,{weight:"normal",children:(0,b.t)("member_profile_modal.billing.subscriptions.payment_secure_and_encrypted")})]})]})]})},C=r(87536),k=r(48895),N=r(5295),I=r(29736),A=r(73952),E=function(){var e=y(),t=e.CardElement,r=e.handleOnChangeCard;return(0,p.jsxs)("div",{className:"mt-6",children:[(0,p.jsx)(A.T1,{weight:"semibold",children:(0,b.t)("member_profile_modal.billing.subscriptions.add_payment_method.card_details")}),(0,p.jsx)("div",{className:"mt-1 rounded border border-solid border-gray-300 p-3",children:(0,p.jsx)(t,{options:{hidePostalCode:!0},onChange:r})})]})},D=r(12689);function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L=function(e){var t=e.className,r=e.detailsClassName,n=e.label,i=e.labelSize,a=void 0===i?"md":i,s=e.labelWeight,c=e.details,l=e.detailsSize,u=void 0===l?"md":l,d=e.detailsWeight,f=e.detailsColored,m=void 0!==f&&f,b=e.description,h=e.descriptionSize,v=void 0===h?"sm":h,y=e.descriptionColor,g=e.enableCursor,j=void 0!==g&&g,x=e.labelColor,w=void 0===x?"text-base":x,O="md"===a?_.Di:A.T1,S="md"===u?_.Di:A.T1,P="sm"===v?A.T1:D.wN;return(0,p.jsxs)("div",{className:o()(t,"flex flex-row justify-between space-x-4",T({},"cursor-pointer",j)),children:[(0,p.jsxs)("div",{className:"space-y-1",children:[(0,p.jsx)("div",{children:(0,p.jsxs)(O,{weight:s,color:w,children:[n," "]})}),b&&(0,p.jsx)("div",{className:"leading-3 text-gray-500",children:(0,p.jsx)(P,{color:y,children:b})})]}),c&&(0,p.jsx)("div",{className:o()("whitespace-nowrap",r,T({},"text-v2-success",m)),children:(0,p.jsx)(S,{weight:d,color:m?"text-v2-success":void 0,children:c})})]})},M=r(49729);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=function(){var e=y().priceChangePreview,t=function(){var e=y(),t=e.priceChangePreview,r=e.previewMutation,n=e.validateNewCouponHandler,i=R((0,d.useState)(!1),2),o=i[0],a=i[1],s=(0,C.cI)(),c=s.register,l=s.watch,u=s.reset,p=l().new_coupon_code;return{enableCoupon:o,toggleAddCoupon:function(e){e.preventDefault(),a(!o)},handleOnClickCouponValidation:function(e){e.preventDefault(),n({new_paywall_price_id:t.new_paywall_price.id,new_coupon_code:p})},handleOnClickRemoveCoupon:function(e){u({new_coupon_code:""}),e.preventDefault(),r.mutate({new_paywall_price_id:t.new_paywall_price.id})},reactHook:{register:c}}}(),r=t.enableCoupon,n=t.toggleAddCoupon,i=t.handleOnClickCouponValidation,a=t.handleOnClickRemoveCoupon,s=t.reactHook,c=e.new_coupon_code,l=e.new_coupon_code_error,u=s.register;return(0,p.jsxs)(p.Fragment,{children:[!r&&(0,p.jsx)(L,{label:(0,p.jsx)("button",{type:"button",onClick:n,children:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.coupon.add_link")}),labelSize:"sm",labelWeight:"medium"}),r&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L,{label:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.coupon.field_label"),labelSize:"sm",labelWeight:"semibold"}),(0,p.jsxs)("div",{className:"!mt-2",children:[!c&&(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(L,{label:(0,p.jsx)(M.I,F({variant:"text",otherClassName:o()("h-11 !w-96 !pr-24 !text-gray-500",{error:l}),focusRequired:!l},u("new_coupon_code"))),details:(0,p.jsx)(g.JO,{width:"20",height:"20",viewBox:"0 0 20 20",className:"cursor-pointer",type:"20-close",onClick:n}),detailsSize:"sm",detailsClassName:"ml-0 mt-2",description:l,descriptionSize:"xs",descriptionColor:"text-gray-600"}),(0,p.jsx)(L,{label:(0,p.jsx)("button",{type:"button",className:"absolute left-[330px] top-3",onClick:i,children:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.coupon.activate")}),labelSize:"sm",labelWeight:"medium"})]}),c&&(0,p.jsx)(L,{label:(0,p.jsxs)(p.Fragment,{children:[c,(0,p.jsx)(g.JO,{width:"20",height:"20",viewBox:"0 0 16 16",className:"mb-[1.5px] ml-2.5 cursor-pointer text-gray-600",type:"16-close",onClick:a})]}),labelSize:"sm",labelWeight:"medium",className:"!inline-block rounded-lg bg-gray-100 py-2.5 pl-[15px] pr-3 tracking-[.15px]",labelColor:"text-gray-700"})]})]})]})},q=function(){var e=y(),t=e.priceChangePreview,r=e.subscription,n=e.shouldKeepTrial,i=e.isInTrial,o=e.shouldAddPaymentMethod,a=(0,C.qo)({name:"paywall_id"}),s=(0,I.a)(a),c=s.data;if(s.isLoading)return(0,p.jsx)(N.a,{});var l,u,d,f=!i||!n,m=function(e){var t;return(null===e||void 0===e?void 0:e.description)&&(null===e||void 0===e||null===(t=e.description)||void 0===t?void 0:t.length)>0},h=c.coupons_enabled;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(L,{className:"mb-6",label:"".concat(c.display_name," (").concat(t.new_paywall_price.interval_qualifier,")"),labelSize:"md",details:t.new_paywall_price.display_amount_with_currency,detailsSize:"md"}),(0,p.jsx)("hr",{}),(f||h)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"space-y-4 py-6",children:[f&&(0,p.jsxs)(p.Fragment,{children:[m(t.recurring_plan_charges)&&(0,p.jsx)(L,{label:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.recurring_plan_charges"),labelSize:"md",labelWeight:"semibold",details:t.recurring_plan_charges.display_amount,detailsSize:"md",description:null===(l=t.recurring_plan_charges.description)||void 0===l?void 0:l.join(", "),descriptionSize:"xs"}),m(t.prorated_charges_debit)&&(0,p.jsx)(L,{label:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.prorated_charges_debit"),labelSize:"md",labelWeight:"semibold",details:t.prorated_charges_debit.display_amount,detailsSize:"md",description:null===(u=t.prorated_charges_debit.description)||void 0===u?void 0:u.join(", "),descriptionSize:"xs"}),m(t.prorated_charges_credit)&&(0,p.jsx)(L,{label:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.prorated_charges_credit"),labelSize:"md",labelWeight:"semibold",details:t.prorated_charges_credit.display_amount,detailsSize:"md",detailsColored:t.prorated_charges_credit.amount<0,description:null===(d=t.prorated_charges_credit.description)||void 0===d?void 0:d.join(", "),descriptionSize:"xs"})]}),h&&(0,p.jsx)(V,{})]}),(0,p.jsx)("hr",{})]}),t.subtotal>0&&(t.discount_amount<0||t.applied_balance<0||t.tax>0)&&(0,p.jsxs)("div",{className:"space-y-2 py-6",children:[(0,p.jsx)(L,{label:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.subtotal"),labelSize:"sm",details:t.display_subtotal,detailsSize:"sm"}),t.discount_amount<0&&(0,p.jsx)(L,{label:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.discount",{discount_label:t.display_discount_label}),labelSize:"sm",details:t.display_discount_amount,detailsSize:"sm",detailsColored:!0}),t.applied_balance<0&&(0,p.jsx)(L,{label:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.applied_balance"),labelSize:"sm",details:t.display_applied_balance,detailsSize:"sm",detailsColored:!0}),t.tax>0&&(0,p.jsx)(L,{label:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.tax"),labelSize:"sm",details:t.display_tax,detailsSize:"sm"})]}),(0,p.jsx)(L,{className:"mt-6",label:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.total_due_today"),labelSize:"md",labelWeight:"semibold",details:t.display_total_due_today,detailsSize:"md",detailsWeight:"semibold"}),i&&o&&(0,p.jsx)(E,{}),n&&(0,p.jsxs)("div",{className:"mt-6 flex rounded-md bg-gray-100 p-4 text-center text-sm text-gray-700",children:[(0,p.jsx)("div",{children:(0,p.jsx)(g.JO,{type:"session-info"})}),(0,p.jsx)("p",{children:(0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.trial_upgrade",{amount:t.display_total_due_today,ends_at:(0,k.w)({dateTime:new Date(r.trial_ends_at),format:"long_date"})})})]})]})},G=r(50768),H=function(e){var t=e.className,r=e.name,n=e.warningMessage,i=e.options,a=(0,C.Gc)().control;return(0,p.jsx)(O.l.Item,{className:o()(t,"p-0"),name:r,fullWidth:!0,hideBorder:!0,hideDescription:!0,hideLabel:!0,isFirstChild:!0,rules:{required:n},children:(0,p.jsx)(C.Qr,{name:r,control:a,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,p.jsx)(G.E,{className:"space-y-3",value:r,onChange:n,children:i.map((function(e){return(0,p.jsx)(G.E.Option,{value:e.value,children:function(t){var r=t.checked;return(0,p.jsx)(L,{className:o()("border-primary bg-primary hover:bg-secondary hover:border-secondary rounded border border-solid p-5",{"bg-secondary border-secondary":r}),label:e.label,labelSize:"md",labelWeight:"semibold",details:e.details,detailsSize:"sm",detailsWeight:"medium",description:e.description,descriptionSize:"sm",enableCursor:null===e||void 0===e?void 0:e.enableCursor})}},e.key)}))})}})})},W=function(e){var t,r=e.className,n=y().subscription,i=null!==(t=n.paywall_display_name)&&void 0!==t?t:n.paywall.display_name,o=n.paywall_price.interval_qualifier;return(0,p.jsx)(L,{className:r,label:(0,b.t)("member_profile_modal.billing.subscriptions.subscription_summary.current_plan",{plan_name:"".concat(i," (").concat(o,")")}),labelSize:"md",details:n.display_amount_with_currency,detailsSize:"md"})},Z=function(){var e,t,r=y().subscription,n=(0,l.pN)(r),i=null===(e=r.upgradable_paywalls)||void 0===e?void 0:e.map((function(e){return{key:"".concat(e.id),value:e.id,label:e.display_name,details:e.min_subscription_amount,description:e.subtitle,enableCursor:!0}}));n||(i=null===(t=i)||void 0===t?void 0:t.filter((function(e){return e.id!==r.paywall_id})));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(W,{className:"mb-4"}),(0,p.jsx)(H,{name:"paywall_id",warningMessage:(0,b.t)("member_profile_modal.billing.subscriptions.alerts.errors.no_plan_chosen"),options:i})]})},J=function(){var e=y(),t=e.subscription,r=e.changePlan,n=(0,C.qo)({name:"paywall_id"}),i=(0,I.a)(n),o=i.data;if(i.isLoading)return(0,p.jsx)(N.a,{});var a=null===o||void 0===o?void 0:o.active_subscription_prices.filter((function(e){return e.id!==t.paywall_price_id})).map((function(e){return{key:"".concat(e.id),value:e.id,label:e.interval_qualifier,details:e.display_amount_with_currency,enableCursor:!0}}));return(0,p.jsxs)(p.Fragment,{children:[r&&(0,p.jsx)(L,{className:"mb-4",label:(0,b.t)("member_profile_modal.billing.subscriptions.price_chooser_step.selected_plan",{plan_name:o.display_name}),labelSize:"md"}),!r&&(0,p.jsx)(W,{className:"mb-4"}),(0,p.jsx)(H,{name:"new_paywall_price_id",warningMessage:(0,b.t)("member_profile_modal.billing.subscriptions.alerts.errors.no_cycle_chosen"),options:a})]})},$="paywall",Q="prices",K="summary",X=r(64687),Y=r.n(X),ee=r(88767),te=r(34128),re=r(49326),ne=function(e,t){return(0,te.Cu)(re.av.communityMemberSubscriptionPriceChanges.preview({subscriptionId:e}),t)},ie=function(e,t){return(0,te.Cu)(re.av.communityMemberSubscriptionPriceChanges.create({subscriptionId:e}),t)},oe=r(21809),ae=r(57802);function se(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fe=function(e){var t=e.subscription,r=e.changePlan,n=e.onSuccess,i=e.CardElement,o=(0,oe.p)().error,a=de((0,d.useState)(!1),2),s=a[0],c=a[1],u=de((0,d.useState)(!1),2),p=u[0],f=u[1],m=(0,l.pN)(t),h=(0,l.pN)(t)&&!t.default_payment_method,v=de((0,d.useState)(m&&!r),2),y=v[0],g=v[1],_=de((0,d.useState)(r?$:Q),2),j=_[0],x=_[1],w=de((0,d.useState)({}),2),O=w[0],S=w[1],P=(0,d.useMemo)((function(){return j===$}),[j]),C=(0,d.useMemo)((function(){return j===Q}),[j]),k=(0,d.useMemo)((function(){return j===K}),[j]),N=(0,d.useMemo)((function(){return r&&(C||k)||!r&&k}),[r,C,k]),I=(0,d.useCallback)((function(){k?x(Q):C&&r&&x($)}),[r,C,k]),A=function(e){S(le(le({},O),{},{new_coupon_code:null,new_coupon_code_error:e}))},E=(0,ee.useMutation)((function(e){return ne(t.id,e)}),{onSuccess:function(e){S(le(le({},e),{},{new_coupon_code_error:null})),x(K)},onError:function(e){"INVALID_COUPON"==e.errorDetails.code?A(e.message):(console.error(e),o(e.message))}}),D=(0,ee.useMutation)((function(e){return ie(t.id,e)}),{onSuccess:function(e){n(e)},onError:function(e){console.error(e),o(e.message)}}),T=(0,ae.x)({CardElement:i,currency:t.currency}).createPaymentMethod,L=function(){var e,r=(e=Y().mark((function e(r){var i;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,T({currencyId:t.currency.id});case 4:return c(!1),e.next=7,D.mutateAsync(r);case 7:i=e.sent,n(i),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),o(e.t0.message);case 15:return e.prev=15,c(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,11,15,18]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){se(o,n,i,a,s,"next",e)}function s(e){se(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{isPlanChooserActive:P,isPriceChooserStepActive:C,isConfirmationStepActive:k,canGoBack:N,goBack:I,getTitle:function(){return C?(0,b.t)("member_profile_modal.billing.subscriptions.headings.billing_cycle"):m?(0,b.t)("member_profile_modal.billing.subscriptions.headings.upgrade_plan"):P?(0,b.t)("member_profile_modal.billing.subscriptions.headings.change_plan"):(0,b.t)("member_profile_modal.billing.subscriptions.headings.change_subscription")},getButtonLabel:function(){return k?(0,b.t)("member_profile_modal.billing.subscriptions.actions.confirm_change"):(0,b.t)("member_profile_modal.billing.subscriptions.actions.next")},getFormDefaults:function(){return{paywall_id:r?"":t.paywall_id,paywall_price_id:t.paywall_price_id,new_paywall_price_id:""}},priceChangePreview:O,setActiveStep:x,setShouldKeepTrial:g,handleOnChangeCard:function(e){e.complete?f(!0):p&&f(!1)},handleOnAddPaymentAndChangePrice:L,isCardInfoComplete:p,shouldKeepTrial:y,shouldAddPaymentMethod:h,validateNewCouponHandler:function(e){e.new_coupon_code?E.mutate(e):A((0,b.t)("member_profile_modal.billing.subscriptions.confirmation_step.coupon.errors.required"))},previewMutation:E,changePriceMutation:D,isCreatingPaymentMethod:s,isInTrial:m}},me=function(e){var t=e.subscription,r=e.changePlan,i=void 0!==r&&r,o=e.onSuccess,a=e.onDismiss,s=fe({subscription:t,changePlan:i,onSuccess:o,CardElement:n.CardElement}),c=s.isPlanChooserActive,l=s.isPriceChooserStepActive,u=s.isConfirmationStepActive,d=s.validateNewCouponHandler,f=s.previewMutation,m=s.changePriceMutation,h=s.canGoBack,y=s.goBack,g=s.getTitle,_=s.getButtonLabel,j=s.getFormDefaults,w=s.setActiveStep,O=s.setShouldKeepTrial,S=s.priceChangePreview,C=s.shouldKeepTrial,k=s.shouldAddPaymentMethod,N=s.isInTrial,I=s.isCardInfoComplete,A=s.isCreatingPaymentMethod,E=s.handleOnAddPaymentAndChangePrice,D=s.handleOnChangeCard;if(m.isLoading)return(0,p.jsx)(x,{title:(0,b.t)("member_profile_modal.billing.subscriptions.change_plan_form.hang_tight"),subtitle:(0,b.t)("member_profile_modal.billing.subscriptions.change_plan_form.wait_a_few_seconds")});return(0,p.jsx)(v,{dismiss:a,canGoBack:h,goBack:y,formDefaults:j(),submit:function(e){if(c)w(Q),O(N&&t.paywall_id==e.paywall_id);else{if(l)return f.mutate({new_paywall_price_id:e.new_paywall_price_id});if(u)return N&&k?E({new_paywall_price_id:e.new_paywall_price_id,new_coupon_code:S.new_coupon_code}):m.mutate({new_paywall_price_id:e.new_paywall_price_id,new_coupon_code:S.new_coupon_code})}},submitLabel:_(),submitDisabled:l&&f.isLoading||A||u&&k&&!I,priceChangePreview:S,subscription:t,shouldKeepTrial:C,CardElement:n.CardElement,isInTrial:N,shouldAddPaymentMethod:k,handleOnChangeCard:D,previewMutation:f,validateNewCouponHandler:d,changePlan:i,children:(0,p.jsxs)(P,{title:g(),children:[c&&(0,p.jsx)(Z,{}),l&&(0,p.jsx)(J,{}),u&&(0,p.jsx)(q,{})]})})},be=function(e){var t=e.updatedSubscription,r=e.onDone,n=(0,d.useContext)(f),i=n.subscription,o=n.isManagingMember,s=(0,I.a)(i.paywall_id),c=(0,I.a)(t.paywall_id);if(s.isLoading||c.isLoading)return(0,p.jsx)(N.a,{center:!0});if(s.isError||c.isError)return null;var l=s.data,u=l.all_subscription_prices.find((function(e){return e.id===i.paywall_price_id})),m="".concat(l.display_name," (").concat(u.interval_qualifier,")"),h=c.data,v=h.all_subscription_prices.find((function(e){return e.id===t.paywall_price_id})),y="".concat(h.display_name," (").concat(v.interval_qualifier,")"),x=o?{subtitle:(0,b.t)("member_profile_modal.billing.subscriptions.success_page.admin_perspective.subtitle",{community_member_name:i.community_member.name}),description:(0,b.t)("member_profile_modal.billing.subscriptions.success_page.admin_perspective.description",{community_member_name:i.community_member.name,old_plan:m,new_plan:y}),actionButton:(0,b.t)("member_profile_modal.billing.subscriptions.success_page.admin_perspective.action_button")}:{subtitle:(0,b.t)("member_profile_modal.billing.subscriptions.success_page.member_perspective.subtitle"),description:(0,b.t)("member_profile_modal.billing.subscriptions.success_page.member_perspective.description",{old_plan:m,new_plan:y}),actionButton:(0,b.t)("member_profile_modal.billing.subscriptions.success_page.member_perspective.action_button")};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(a.u_.Body,{className:"flex flex-col items-center",children:[(0,p.jsx)("div",{className:"bg-v2-success m-8 flex h-16 w-16 justify-center rounded-full",children:(0,p.jsx)(g.JO,{type:"check-solid",viewBox:"0 0 30 22"})}),(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)(_.Di,{weight:"semibold",children:x.subtitle}),(0,p.jsx)("div",{className:"mb-4 mt-2",children:(0,p.jsx)(j.P,{children:y})}),(0,p.jsx)(_.Di,{children:x.description})]})]}),(0,p.jsx)(a.u_.Footer,{children:(0,p.jsx)(w.z,{variant:"circle",full:!0,large:!0,onClick:function(){r()},children:x.actionButton})})]})};function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ve(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){_e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var je=function(e){var t=e.subscription,r=e.refetchSubscriptions,n=e.changePlan,i=void 0!==n&&n,c=e.isManagingMember,u=void 0!==c&&c,f=function(e){var t=e.refetchSubscriptions,r=(0,s.dd)(),n=he((0,d.useState)(null),2),i=n[0],o=n[1];return{onClose:function(){r.hide(),r.remove()},updatedSubscription:i,handleSuccess:(0,d.useCallback)((function(e){o(e),t()}),[o,t]),modal:r}}({refetchSubscriptions:r}),b=f.onClose,h=f.updatedSubscription,v=f.handleSuccess,y=f.modal;return(0,p.jsxs)(a.u_,{isOpen:y.visible,onClose:b,children:[(0,p.jsx)(a.u_.Overlay,{}),(0,p.jsx)(a.u_.Content,{size:"md",className:o()({"sm:max-h-[90vh]":(0,l.pN)(t)}),children:(0,p.jsxs)(m,{subscription:t,isManagingMember:u,children:[!h&&(0,p.jsx)(me,{changePlan:i,onDismiss:b,onSuccess:v,subscription:t}),h&&(0,p.jsx)(be,{onDone:b,updatedSubscription:h})]})})]})},xe=s.gk.create((function(e){var t=(0,u.C)().stripePromise;return(0,p.jsx)(n.Elements,{stripe:t,children:(0,p.jsx)(je,ge({},e))})})),we=function(){return(0,c.j)(xe,(function(e){var t,r=e.subscription;return{id:r.community_member_id,policies:{requires_billing_info:null===r||void 0===r||null===(t=r.policies)||void 0===t?void 0:t.requires_billing_info}}}))}},29736:(e,t,r)=>{"use strict";r.d(t,{a:()=>o});var n=r(88767),i=r(13546),o=function(e){return(0,n.useQuery)("paywall-show-".concat(e),(function(){return i.i.getPaywall(e)}))}},26484:(e,t,r)=>{"use strict";r.d(t,{q:()=>d});var n=r(3249),i=r(67142),o=r(94184),a=r.n(o),s=r(85893),c=function(e){var t=e.user1,r=e.user2,n=e.className,o=void 0===n?"":n,c=[{name:(null===t||void 0===t?void 0:t.name)||"",src:(null===t||void 0===t?void 0:t.avatar_url)||""},{name:(null===r||void 0===r?void 0:r.name)||"",src:(null===r||void 0===r?void 0:r.avatar_url)||""}];return(0,s.jsx)("div",{className:a()("border-tertiary max-h-10",o),children:(0,s.jsx)(i.Lt,{users:c})})};function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t=e.isDirect,r=e.otherParticipants;if(t){var i=l(r,1)[0]||{},o=i.avatar_url,a=i.name,u=i.status;return(0,s.jsx)("div",{className:"mr-1",children:(0,s.jsx)(n.g,{src:o,name:a,status:u})})}return(0,s.jsx)(c,{user1:r[0],user2:r[1]})}},57783:(e,t,r)=>{"use strict";r.d(t,{m:()=>C});var n=r(86013),i=r(72675),o=r(61926),a=r(11117),s=r(17021),c=r(85893),l={},u=function(e){var t=e.onSubmit,r=e.formId;return(0,c.jsx)(o.l,{id:r,onSubmit:t,defaultValues:l,className:"h-full",children:(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)(s.K,{}),(0,c.jsx)(a.a,{})]})})},d=r(88767),p=r(24185),f=r(1320),m=r(97012),b=r(49326),h=r(21809);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=r(55675),j=r(53448);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O="new-space-group-form",S=function(e){var t=e.position,r=(0,i.dd)(),o=function(e){var t=e.position,r=e.onSuccess,i=(0,p.k6)(),o=(0,h.p)(),a=o.success,s=o.error,c=(0,m.e2)().actions;return(0,d.useMutation)((function(e){return f.iD.create({space_group:y(y({},e),{},{position:t})})}),{onSuccess:function(e){a((0,n.t)("space_groups.form.create.saved_successfully")),c.refresh(),r(),i.push(b.Ts.show({spaceGroupSlug:e.slug}))},onError:function(e){return s(e.errorDetails||(0,n.t)("space_groups.form.create.save_error"))}})}({position:t,onSuccess:r.hide}),a=o.mutate,s=o.isLoading;return(0,c.jsxs)(j.u_,{title:(0,n.t)("space_groups.form.create.title"),isOpen:r.visible,onClose:r.hide,children:[(0,c.jsx)(j.u_.Overlay,{}),(0,c.jsxs)(j.u_.Content,{size:"md",children:[(0,c.jsxs)(j.u_.Header,{className:"!px-6 md:!px-8",children:[(0,c.jsx)(j.u_.Title,{size:"md",children:(0,n.t)("space_groups.form.create.title")}),(0,c.jsx)(j.u_.HeaderActions,{children:(0,c.jsx)(j.u_.CloseButton,{onClick:r.hide})})]}),(0,c.jsx)(j.u_.Body,{className:"!px-6 md:!px-8",children:(0,c.jsx)(u,{formId:O,onSubmit:a})}),(0,c.jsx)(j.u_.Footer,{className:"flex justify-end",children:(0,c.jsx)(_.z,{type:"submit",variant:"circle",form:O,disabled:s,full:!0,large:!0,children:s?(0,n.t)("space_groups.form.create.submitting"):(0,n.t)("space_groups.form.create.submit")})})]})]})},P=i.gk.create((function(e){return(0,c.jsx)(S,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),C=function(){return(0,i.dd)(P)}},81303:(e,t,r)=>{"use strict";r.d(t,{D:()=>Ot});var n=r(86013),i=r(67294),o=r(50308),a=r.n(o),s=r(73328),c=r(72675),l=r(85893);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=(0,i.createContext)({filters:{},setFilters:function(){},resetFilters:function(){}}),f=function(e){var t=e.children,r=u((0,i.useState)({}),2),n=r[0],o=r[1];return(0,l.jsx)(p.Provider,{value:{filters:n,setFilters:o,resetFilters:function(){return o({})}},children:t})},m=function(){return(0,i.useContext)(p)};function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}p.displayName="FilterContext";var _={Latest:"latest",Oldest:"oldest",Popular:"popular",Likes:"likes",Alphabetical:"alphabetical",NewActivity:"new_activity",Relevance:"relevance"},j=(0,i.createContext)({sort:{posts:_.Latest,comments:_.Latest,events:_.Latest,lessons:_.Latest,members:_.Latest},setSort:function(){}});j.displayName="SortContext";var x=function(e){var t=e.children,r=y((0,i.useState)({posts:_.Latest,comments:_.Latest,events:_.Latest,lessons:_.Latest,members:_.Latest}),2),n=r[0],o=r[1];return(0,l.jsx)(j.Provider,{value:{sort:n,setSort:function(e,t){o((function(r){return h(h({},r),{},v({},e,t))}))}},children:t})},w=function(){return(0,i.useContext)(j)},O=r(94184),S=r.n(O),P=r(96486),C=r(24185),k=function(e){var t=e.children;return(0,l.jsx)("div",{className:"bg-primary m-auto text-center",children:t})},N=r(30887),I=r(16743),A=function(){return(0,l.jsx)(k,{children:(0,l.jsxs)("div",{className:"m-auto flex max-w-md flex-col items-center justify-center gap-4 p-8 pb-14","data-testid":"empty-search",children:[(0,l.jsx)(N.JO,{type:"24-search-v2",className:"text-default !h-6 !w-6",size:24}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(I.Z.TitleSm,{weight:"semibold",children:(0,n.t)("search_v2.search_community")}),(0,l.jsx)(I.Z.BodySm,{color:"text-default",children:(0,n.t)("search_v2.search_community_description")})]})]})})},E=function(e){var t=e.type;return(0,l.jsx)(k,{children:(0,l.jsxs)("div",{className:"m-auto flex max-w-md flex-col items-center justify-center gap-2 p-8 pb-14 pt-20","data-testid":"no-results-found",children:[(0,l.jsx)(I.Z.TitleSm,{weight:"semibold",children:(0,n.t)("search_v2.empty_search",{type:t})}),(0,l.jsx)(I.Z.BodySm,{color:"text-default",children:(0,n.t)("search_v2.empty_search_description")})]})})},D=r(55675),T=function(e){var t=e.isFixed,r=e.onChange,o=e.searchValue,a=e.onKeydown,s=e.isLoading,c=e.onClickCancel,u=void 0===c?P.noop:c,d=e.shouldShowClearButton,p=d&&o.length>0,f=!d||0===o.length,m=st(),b=m.visible,h=m.hide,v=(0,i.useRef)(null);return(0,i.useEffect)((function(){v.current&&v.current.focus()}),[]),(0,l.jsxs)("div",{className:S()("bg-primary isolate z-10 flex w-full items-center justify-between gap-4 rounded-t-md",{"border-primary sticky top-0 border-b px-4 py-4 md:static md:top-auto md:px-0 md:pl-6 md:pr-1":t}),children:[(0,l.jsxs)("div",{className:"bg-secondary sm:bg-primary mr-0 flex w-full flex-1 items-center gap-3 overflow-hidden rounded-md p-3 sm:rounded-none md:p-0",children:[s?(0,l.jsx)(N.JO,{type:"loader",className:"text-default !h-5 !w-5",size:20,useWithFillCurrentColor:!0}):(0,l.jsx)(N.JO,{type:"search-v2",className:"text-default !h-5 !w-5",size:20,useWithFillCurrentColor:!0}),(0,l.jsx)("input",{ref:v,className:"text-darkest sm:bg-primary placeholder:text-light w-full rounded bg-transparent text-base outline-none placeholder:opacity-100 sm:rounded-none",placeholder:(0,n.t)("search_here"),"data-name":"v2-search","data-testid":"v2-search","aria-autocomplete":"list",value:o,onChange:function(e){return r(e.target.value)},onKeyDown:a})]}),f&&(0,l.jsx)(D.z,{variant:"text",className:"inline-flex md:hidden",onClick:function(){(0,P.isFunction)(u)&&u(),b&&h()},children:(0,n.t)("cancel")}),p&&(0,l.jsx)(D.z,{variant:"text",onClick:u,children:(0,n.t)("search_v2.clear_search")})]})},L=r(25067),M=r(94939),R=function(){return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"mb-4 pt-6 md:pt-10",children:(0,l.jsx)(L.RN,{children:(0,l.jsx)(L.X2,{lg:!0})})}),(0,l.jsx)(M.x,{})]})},B=function(e){var t=e.type,r=e.numberOfRecords,n=void 0===r?1:r;return(0,l.jsx)("div",{className:"mt-6 flex flex-col gap-8",children:Array.from({length:n}).map((function(e,r){switch(t){case"posts":return(0,l.jsxs)("div",{children:[(0,l.jsxs)(L.mw,{lg:!0,children:[(0,l.jsx)(L.qE,{sm:!0}),(0,l.jsx)(L.RN,{children:(0,l.jsx)(L.X2,{sm:!0})})]}),(0,l.jsx)("div",{className:"mt-2.5",children:(0,l.jsxs)(L.RN,{md:!0,children:[(0,l.jsx)(L.X2,{md:!0,full:!0}),(0,l.jsx)(L.X2,{md:!0,full:!0}),(0,l.jsx)(L.X2,{md:!0,almostFull:!0})]})})]},r);case"lessons":return(0,l.jsxs)("div",{children:[(0,l.jsxs)(L.mw,{sm:!0,children:[(0,l.jsx)(L.qE,{sm:!0}),(0,l.jsx)(L.RN,{children:(0,l.jsx)(L.X2,{sm:!0})})]}),(0,l.jsx)("div",{className:"mt-2.5",children:(0,l.jsxs)(L.RN,{md:!0,children:[(0,l.jsx)(L.X2,{md:!0,full:!0}),(0,l.jsx)(L.X2,{md:!0,almostFull:!0})]})})]},r);case"comments":return(0,l.jsxs)("div",{className:"flex items-center gap-8",children:[(0,l.jsxs)(L.mw,{sm:!0,children:[(0,l.jsx)(L.qE,{sm:!0}),(0,l.jsxs)(L.RN,{children:[(0,l.jsx)(L.X2,{sm:!0,full:!0}),(0,l.jsx)(L.X2,{sm:!0})]})]}),(0,l.jsx)("div",{className:"mt-2.5",children:(0,l.jsxs)(L.RN,{md:!0,children:[(0,l.jsx)(L.X2,{md:!0,full:!0}),(0,l.jsx)(L.X2,{md:!0,almostFull:!0})]})})]},r);case"members":return(0,l.jsxs)(L.mw,{lg:!0,children:[(0,l.jsx)(L.qE,{}),(0,l.jsxs)(L.RN,{children:[(0,l.jsx)(L.X2,{sm:!0}),(0,l.jsx)(L.X2,{sm:!0})]})]},r)}return null}))})};function U(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"===typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q=function(){var e=F((0,i.useState)([]),2),t=e[0],r=e[1];(0,i.useEffect)((function(){try{var e=localStorage.getItem("recentSearches");e&&r(JSON.parse(e))}catch(t){console.error("Error parsing recent searches from local storage",t)}}),[]);return{recentSearches:t,addRecentSearch:function(e){e.query&&r((function(t){var r=t.filter((function(t){return t.query!==e.query})),n=[e].concat(U(r)).slice(0,10);try{localStorage.setItem("recentSearches",JSON.stringify(n))}catch(i){console.error("Error saving recent searches to local storage",i)}return n}))},removeRecentSearch:function(e){r((function(t){var r=t.filter((function(t){return t.query!==e}));try{localStorage.setItem("recentSearches",JSON.stringify(r))}catch(n){console.error("Error saving recent searches to local storage",n)}return r}))}}},G=function(e){var t=e.type;return{post:"/c/".concat(e.space_slug,"/").concat(e.slug),community_member:"/u/".concat(e.public_uid),comment:"/c/".concat(e.space_slug,"/").concat(e.post_slug,"#comment_wrapper_").concat(e.id),space:"/c/".concat(e.slug)}[t]},H=r(88767),W=r(34128),Z=r(49326),J=r(82258);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=function(e){var t=e.onPressEnter,r=e.scrollToElement,n=e.type,o=w().sort,a=m().filters,s=$((0,i.useState)([]),2),c=s[0],l=s[1],u=$((0,i.useState)(""),2),d=u[0],p=u[1],f=(0,J.c)(d,300),b=$((0,i.useState)(!1),2),h=b[0],v=b[1],y=$((0,i.useState)(0),2),g=y[0],_=y[1],j=Object.entries(a).reduce((function(e,t){var r=$(t,2),n=r[0],i=r[1];return i&&i.length&&(e[n]=i),e}),{}),x=["search-results",f,n,o[n],j],O=(0,H.useInfiniteQuery)(x,(function(e){var t,r=e.pageParam;return t=void 0===r?1:r,(0,W.UT)(Z.av.searchV2.advanced.index({params:{query:f,per_page:20,page:t,type:n,order:o[n],filters:j}}))}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},enabled:!!f,refetchOnWindowFocus:!1}),S=O.data,C=O.isLoading,k=O.error,N=O.fetchNextPage,I=O.hasNextPage,A=(0,H.useQuery)(["search-count",f],(function(){return(0,W.UT)(Z.av.searchV2.count.index({params:{query:f}}))}),{refetchOnWindowFocus:!1,enabled:Boolean(f.length)&&"general"!==n}),E=A.data,D=A.isLoading;(0,i.useEffect)((function(){if(null!==S&&void 0!==S&&S.pages&&f){var e=(0,P.uniqBy)((0,P.flatten)(S.pages.map((function(e){return e.records}))),"id");l(e),_(0),v(!(0!==e.length||!f))}}),[S,f]);var T=(0,i.useCallback)((function(){p(""),_(0),L()}),[]),L=function(){l([])};return{isLoading:C,hasNoResults:h,error:k,setSearchValue:p,searchValue:d,results:c,selectedResultIndex:g,resetSearch:T,onKeydown:function(e){switch(e.key){case"Escape":c.length>0&&(T(),e.stopPropagation(),e.preventDefault());break;case"ArrowDown":_((function(e){if(e<c.length){var t=e+1;return r(t),t}return e})),e.preventDefault();break;case"ArrowUp":_((function(e){if(e>0){var t=e-1;return r(t),t}return e})),e.preventDefault();break;case"Enter":null===t||void 0===t||t(e,g)}},isLoadingCount:D,onMouseOver:function(e){var t=e.currentTarget.getAttribute("aria-posinset");_(Number(t))},onFocus:function(e){var t=e.currentTarget.getAttribute("aria-posinset");_(Number(t))},onMouseOut:function(e){e.currentTarget.getAttribute("aria-posinset")===g&&_(-1)},hasNextPage:I,fetchNextPage:N,countData:E}},X=r(95071);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var re=function(e){var t=e.onClose,r=e.type,n=void 0===r?"general":r,o=e.onSearchInCommunity,a=void 0===o?P.noop:o,s=(0,C.k6)(),c=(0,i.useRef)(null),l=(0,i.useRef)(null),u=K({onPressEnter:function(e){if(0===v)a();else{var t=f[v-1],r=G(t);if((0,X.n2)(e))return window.open(r);s.push(r),k(t)}},scrollToElement:function(e){-1!==e&&function(e){var t=e.containerEl,r=e.itemSelector,n=e.scrollIntoViewOptions,i=void 0===n?{}:n,o=e.intersectionObserverOptions,a=ee({root:t,rootMargin:"0px",threshold:1},void 0===o?{}:o),s=t.querySelector(r),c=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting||s.scrollIntoView(ee({behavior:"smooth",block:"nearest"},i)),c.unobserve(s)}))}),a);s&&c.observe(s)}({containerEl:l.current,itemSelector:'[aria-posinset="'.concat(String(e),'"]')})},type:n}),d=u.searchValue,p=u.setSearchValue,f=u.results,m=u.isLoading,b=u.hasNoResults,h=u.onKeydown,v=u.selectedResultIndex,y=u.resetSearch,g=u.onMouseOver,_=u.onFocus,j=u.fetchNextPage,x=u.hasNextPage,w=u.onMouseOut,O=u.countData,S=u.isLoadingCount,k=function(e){(0,X.n2)(e)||(y(),t())};return(0,i.useEffect)((function(){!d&&c.current&&y()}),[d,c,y]),{searchValue:d,results:f,isLoading:m||S,isLoadingSearch:m,isLoadingCount:S,hasNoResults:b,selectedResultIndex:v,searchInputRef:c,resultsContainerRef:l,setSearchValue:p,onKeydown:h,fetchNextPage:j,hasNextPage:x,resetSearch:y,onNavigateToResult:k,onMouseOver:g,onFocus:_,onMouseOut:w,countData:O}},ne=r(84012);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var se=function(e){var t=e.isInitialOpen,r=e.name,i=void 0===r?"name":r,o=m(),a=o.filters,s=o.setFilters;return(0,l.jsx)(ne.wn,{chip:(0,n.t)("search_v2.filters.".concat(i)),title:(0,n.t)("search_v2.filters.".concat(i)),selectedText:null===a||void 0===a?void 0:a[i],isInitialOpen:t,onApply:function(e){s(oe(oe({},a),{},ae({},i,e)))},shouldShowRemoveButton:!0,children:(0,l.jsx)(ne.xo,{name:i,placeholder:(0,n.t)("search_v2.filters.name")})})},ce=r(2470),le=r(97012),ue=r(61345),de=r(5295);function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var be=function(e){var t,r=e.spaceType,i=void 0===r?"posts":r,o=m(),a=o.filters,s=o.setFilters,c=(0,le.nT)().helpers,u=(0,ce.S)({spaces:c.spaceWithViewContentAccess().filter((function(e){switch(i){case"posts":return(0,ue.H3)(e);case"courses":return(0,ue.EG)(e);case"events":return(0,ue.V5)(e);default:return(0,P.stubTrue)()}})),valueKey:"id"});return(0,l.jsx)(ne.wn,{chip:(0,n.t)("search_v2.filters.space"),title:(0,n.t)("search_v2.filters.space"),selectedText:null!==a&&void 0!==a&&a.space_ids?(0,n.t)("search_v2.filters.n_spaces",{count:(null===a||void 0===a||null===(t=a.space_ids)||void 0===t?void 0:t.length)||0}):"",onApply:function(e){s(fe(fe({},a),{},{space_ids:((null===e||void 0===e?void 0:e.value)||[]).length?null===e||void 0===e?void 0:e.value:null}))},shouldShowRemoveButton:!(null===a||void 0===a||!a.space_ids),children:c.isDataLoading()?(0,l.jsx)(de.a,{}):(0,l.jsx)(ne.Bi,{options:u,className:"w-full",param:{id:"spaces",key:"spaces",value:(null===a||void 0===a?void 0:a.space_ids)||[]},legend:(0,n.t)("search_v2.filters.space"),hasSearch:!0,searchProps:{placeholder:(0,n.t)("search_v2.filters.search_spaces")}})})},he=r(53787);function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _e=r(37292);function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oe=r(61926);function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ke=function(e){var t,r=e.chip,i=e.title,o=e.name,a=e.options,s=m(),c=s.filters,u=s.setFilters,d=function(e){u(Pe(Pe({},c),{},Ce({},o,e)))};return(0,l.jsx)(ne.wn,{chip:r,title:i,selectedText:null===(t=a.find((function(e){return e.value===c[o]})))||void 0===t?void 0:t.label,onApply:d,shouldShowRemoveButton:!0,children:function(e){var t=e.close;return(0,l.jsxs)(Oe.l,{defaultValues:Ce({},o,c[o]),className:"p-4",onSubmit:function(e){d(e[o]),t()},children:[(0,l.jsx)(Oe.l.RadioGroup,{variant:"radio",name:o,options:a}),(0,l.jsx)(D.z,{className:"mt-4",variant:"primary",type:"submit",full:!0,children:(0,n.t)("filters.apply")})]})}})},Ne=["name","component"];function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Te=(0,n.t)("search_v2.filters.space"),Le={posts:[{name:Te,component:be,spaceType:"posts"},{name:"author_name",component:se},{name:"topics",component:function(){var e,t=m(),r=t.filters,i=t.setFilters,o=(0,le.wh)().currentCommunityMember,a=(0,H.useQuery)({queryKey:[_e.J,"communityMember",null===o||void 0===o?void 0:o.id],enabled:!!o,queryFn:function(){return(0,W.UT)(Z.av.topics.communityMemberTopics({}))}}).data;return a&&a.records&&o?(0,l.jsx)(ne.wn,{chip:(0,n.t)("search_v2.filters.topic"),title:(0,n.t)("search_v2.filters.topic"),selectedText:null!==r&&void 0!==r&&r.topic_ids?(0,n.t)("search_v2.filters.n_topics",{count:(null===r||void 0===r||null===(e=r.topic_ids)||void 0===e?void 0:e.length)||0}):"",onApply:function(e){i(xe(xe({},r),{},{topic_ids:null===e||void 0===e?void 0:e.value}))},shouldShowRemoveButton:!(null===r||void 0===r||!r.topic_ids),children:(0,l.jsx)(ne.Bi,{options:a.records.map((function(e){return{label:e.name,value:e.id}})),className:"w-full",param:{id:"topics",key:"topics",value:(null===r||void 0===r?void 0:r.topic_ids)||[]},legend:(0,n.t)("search_v2.filters.topic"),hasSearch:!0,searchProps:{placeholder:(0,n.t)("search_v2.filters.search_topics")}})}):null}}],comments:[{name:Te,component:be,spaceType:"posts"},{name:"author_name",component:se}],lessons:[{name:Te,component:be,spaceType:"courses"}],events:[{name:Te,component:be,spaceType:"events"},{name:"event_status",component:function(){return(0,l.jsx)(ke,{name:"status",chip:(0,n.t)("search_v2.filters.event_status.title"),title:(0,n.t)("search_v2.filters.event_status.title"),options:[{value:"past",label:(0,n.t)("search_v2.filters.event_status.past")},{value:"upcoming",label:(0,n.t)("search_v2.filters.event_status.upcoming")}]})}}],members:[{name:"tags",component:function(){var e,t=m(),r=t.filters,i=t.setFilters,o=(0,he.Y)(),a=o.isLoading,s=o.memberTags;return a||!s.length?null:(0,l.jsx)(ne.wn,{chip:(0,n.t)("search_v2.filters.tag"),title:(0,n.t)("search_v2.filters.tag"),selectedText:null!==r&&void 0!==r&&r.member_tag_ids?(0,n.t)("search_v2.filters.n_tags",{count:(null===r||void 0===r||null===(e=r.member_tag_ids)||void 0===e?void 0:e.length)||0}):"",onApply:function(e){i(ye(ye({},r),{},{member_tag_ids:((null===e||void 0===e?void 0:e.value)||[]).length?null===e||void 0===e?void 0:e.value:null}))},shouldShowRemoveButton:!(null===r||void 0===r||!r.member_tag_ids),children:(0,l.jsx)(ne.Bi,{options:s,className:"w-full",param:{id:"member_tags",key:"member_tags",value:(null===r||void 0===r?void 0:r.member_tag_ids)||[]},legend:(0,n.t)("search_v2.filters.tag"),hasSearch:!0,searchProps:{placeholder:(0,n.t)("search_v2.filters.search_tags")}})})}}]},Me=function(e){var t=e.type,r=(0,le.wh)().currentCommunitySettings;return null!==r&&void 0!==r&&r.search_filter_enabled?(Le[t]||[]).map((function(e){var t=e.name,r=e.component,n=De(e,Ne);return(0,l.jsx)("div",{className:"py-1",children:(0,l.jsx)(r,Ae({name:t},n))},t)})):null},Re=r(1002),Be={posts:[_.Relevance,_.Latest,_.Oldest,_.Popular,_.Likes,_.Alphabetical,_.NewActivity],comments:[_.Relevance,_.Latest,_.Oldest,_.Likes,_.Alphabetical],events:[_.Relevance,_.Latest,_.Oldest,_.Popular,_.Likes,_.Alphabetical],lessons:[_.Relevance,_.Latest,_.Oldest,_.Alphabetical],members:[_.Relevance,_.Latest,_.Oldest,_.Alphabetical]},Ue=function(e){var t=e.type,r=w(),i=r.sort,o=r.setSort,a=Be[t];return a?(0,l.jsx)("div",{className:"flex flex-1 items-center justify-end",children:(0,l.jsx)(Re.Lt,{options:a.map((function(e){return{value:e,label:(0,n.t)("sorting_options.".concat(e))}})),activeOptionValue:i[t],onChange:function(e){return r=e,Object.values(_).includes(r)&&o(t,e);var r}})}):null},Fe=r(73793),ze=r(17260),Ve=r(58533),qe=function(){return(0,l.jsx)("div",{className:"border-primary h-px border-b"})},Ge=r(40160),He=r(93826),We=r(93874),Ze=r(38870),Je=function(e){var t=e.name,r=e.avatarUrl,i=e.postName,o=e.createdAt,a=e.userImageSize,s=void 0===a?"6":a;return(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{children:(0,l.jsx)(Ze.s,{src:r,name:t,size:s})}),(0,l.jsxs)("div",{className:"w-[90%]",children:[(0,l.jsxs)("div",{className:"text-selector-active truncate",children:[(0,l.jsx)(I.Z.LabelSm,{leading:"leading-3",weight:"semibold",children:t})," ",(0,l.jsx)(I.Z.LabelSm,{leading:"leading-3",color:"text-selector-active",children:(0,n.t)("search_v2.commented_on")})," ",(0,l.jsx)(I.Z.LabelSm,{leading:"leading-3",weight:"semibold",children:i})]}),(0,l.jsx)("div",{className:"leading-3",children:(0,l.jsx)(I.Z.LabelXs,{color:"text-selector-active",children:(0,We.p6)(o)})})]})]})},$e=r(20695),Qe=r(74238),Ke=r(15218),Xe=Object.assign({},{Comment:function(e){var t=e.item,r=G(t),n=t.highlighted_body||t.body;return(0,l.jsx)(Ge.OL,{to:r,className:"flex max-w-full items-center gap-8 pr-6","data-testid":"comment-result",children:(0,l.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,l.jsx)(Je,{name:t.user_name,postName:t.post_name,createdAt:t.created_at,avatarUrl:t.user_avatar_url,userImageSize:"8"}),(0,l.jsx)("div",{className:"[&_mark]:!bg-search-yellow line-clamp-4",children:(0,l.jsx)(I.Z.BodySm,{color:"text-default",children:(0,l.jsx)(He.w,{content:n})})})]})})},Event:function(e){var t=e.item,r=(0,Z.LM)({spaceSlug:t.space_slug,slug:t.slug}),n=(0,Qe.TC)().isDarkAppearance,i=t.highlighted_name||t.name,o=n?(0,$e.aP)("dark-mode-cover-thumbnail-2x.png"):(0,$e.aP)("light-mode-cover-thumbnail-2x.png");return(0,l.jsxs)(Ge.OL,{className:"flex max-w-full flex-col items-start gap-4 pr-0 md:flex-row md:items-center md:gap-6 md:pr-6","data-testid":"event-result",to:r,children:[(0,l.jsx)("div",{className:"w-full rounded md:h-24 md:w-44",children:(0,l.jsx)("img",{loading:"lazy",className:"h-full w-full rounded-md object-cover",src:t.cover_image_url||o,alt:""})}),(0,l.jsxs)("div",{className:"[&_mark]:!bg-search-yellow  flex flex-1 flex-col gap-4",children:[(0,l.jsx)(I.Z.LabelMd,{weight:"semibold",children:(0,l.jsx)(He.w,{content:i})}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(N.JO,{type:"16-calendar",size:16,className:"text-default !h-4 !w-4"}),(0,l.jsx)(I.Z.LabelXs,{children:(0,We.p6)(t.starts_at,"EEEE, MMM d, h:mm a (z)")})]})})]})]})},Member:function(e){var t,r=e.item,n=(0,Z.sB)(r.public_uid);return(0,l.jsxs)(Ge.OL,{to:n,className:"flex gap-4 pr-6","data-testid":"second-user-result",children:[(0,l.jsx)(Ze.s,{src:null!==(t=r.avatar_url)&&void 0!==t?t:"",name:r.name,size:"16"}),(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)(I.Z.LabelMd,{weight:"semibold",children:r.name})," ",r.headline&&(0,l.jsx)(I.Z.LabelXs,{color:"text-default",children:r.headline})]}),r.bio&&(0,l.jsx)("div",{className:"line-clamp-4",children:(0,l.jsx)(I.Z.LabelSm,{color:"text-selector-active",children:r.bio})})]})]})},Post:function(e){var t,r=e.item,n=(0,Z.LM)({spaceSlug:r.space_slug,slug:r.slug}),i=r.highlighted_body||r.body,o=r.highlighted_name||r.name;return(0,l.jsxs)(Ge.OL,{to:n,className:S()("flex gap-4 pr-0 md:gap-1 md:pr-6",{"flex-col-reverse md:flex-row":r.cover_image_url}),"data-testid":"post-result",children:[(0,l.jsxs)("div",{className:"flex flex-1 flex-col gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(Ze.s,{src:null!==(t=r.user_avatar_url)&&void 0!==t?t:"",name:r.user_name,size:"6"}),(0,l.jsx)(I.Z.LabelXs,{color:"text-selector-active",children:"".concat(String(r.user_name)," \u2022 ").concat((0,We.p6)(r.created_at))})]}),(0,l.jsxs)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:[(0,l.jsx)(I.Z.LabelMd,{weight:"semibold",children:(0,l.jsx)(He.w,{content:o})}),(0,l.jsx)("div",{className:"line-clamp-4",children:(0,l.jsx)(I.Z.BodySm,{color:"text-default",children:(0,l.jsx)(He.w,{content:i})})})]})]}),r.cover_image_url&&(0,l.jsx)("div",{className:"md:w-42 w-full rounded md:h-24",children:(0,l.jsx)("img",{loading:"lazy",className:"h-full w-full rounded-md object-cover",src:r.cover_image_url,alt:""})})]})},Lesson:function(e){var t=e.item,r=t.space_emoji||{},n=r.emoji,i=r.custom_emoji_url,o=r.custom_emoji_dark_url,a=(0,Qe.TC)().currentAppearance,s=Z.H4.showLesson({spaceSlug:t.space_slug,sectionId:String(t.section_id),lessonId:t.id}),c=t.highlighted_body||t.body,u=t.highlighted_name||t.name;return(0,l.jsx)(Ge.OL,{to:s,className:"flex max-w-full items-center gap-8 pr-6","data-testid":"course-lesson-result",children:(0,l.jsxs)("div",{className:"flex max-w-full flex-col gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(Ke.S,{wrapperClassName:"flex items-center !w-5 !h-5",emoji:n,customEmojiUrl:i,customEmojiDarkUrl:o,appearance:a}),(0,l.jsx)(I.Z.LabelXs,{color:"text-selector-active",children:t.space_name})]}),(0,l.jsxs)("div",{className:"[&_mark]:!bg-search-yellow flex flex-col gap-2",children:[(0,l.jsx)(I.Z.LabelMd,{weight:"semibold",children:(0,l.jsx)(He.w,{content:u})}),t.body&&(0,l.jsx)("div",{className:"line-clamp-4",children:(0,l.jsx)(I.Z.BodySm,{color:"text-default",children:(0,l.jsx)(He.w,{content:c})})})]})]})})}}),Ye=function(e){var t,r=e.item,n=(r||{}).type,i={post:Xe.Post,community_member:Xe.Member,comment:(t=r,"comment"===t.type&&t.post_slug&&Xe.Comment),lesson:Xe.Lesson,event:Xe.Event}[n];return i?(0,l.jsx)(i,{item:r}):null},et=r(86078),tt=function(e){var t=e.searchResults,r=e.fetchNextPage,n=e.hasNextPage;return(0,l.jsx)(Ve.Z,{className:"flex flex-col gap-5 py-6",next:r,hasMore:!!n,loader:(0,l.jsx)(et.m,{}),dataLength:t.length,style:{overflow:"initial"},scrollableTarget:"scrollable-container",children:t.map((function(e){return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(Ye,{item:e}),(0,l.jsx)(qe,{})]},e.id)}))})};function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var it=function(e){var t=e.isOpen,r=e.onClose,o=void 0===r?P.noop:r,a=e.defaultSearchValue,s=[{id:"posts",label:(0,n.t)("search_v2.tabs.posts")},{id:"comments",label:(0,n.t)("search_v2.tabs.comments")},{id:"lessons",label:(0,n.t)("search_v2.tabs.lessons")},{id:"events",label:(0,n.t)("search_v2.tabs.events")},{id:"members",label:(0,n.t)("search_v2.tabs.members")}],c=(0,le.wh)().isViewOnlyMasquerading,u=(0,C.TH)(),d=rt((0,i.useState)(""),2),p=d[0],f=d[1],b=q().addRecentSearch,h=rt((0,i.useState)(s[0].id),2),v=h[0],y=h[1],g=m(),_=g.filters,j=g.resetFilters,x=re({onClose:o,type:v}),w=x.isLoading,O=x.isLoadingCount,k=x.results,N=x.setSearchValue,D=x.onKeydown,L=x.searchValue,M=x.fetchNextPage,U=x.hasNextPage,F=x.countData;return(0,i.useEffect)((function(){return N(a),f(a),function(){y("general")}}),[a,N]),(0,i.useEffect)((function(){j()}),[v]),(0,i.useEffect)((function(){o()}),[u,o]),(0,l.jsxs)(Fe.x,{isOpen:t,onClose:o,shouldShowCloseButton:!0,contentPortalId:"search-v2-portal",children:[(0,l.jsx)(Fe.x.Header,{children:(0,l.jsx)(T,{isLoading:w,isFixed:!1,searchValue:p,onChange:f,onKeydown:function(e){if("Enter"===e.key)return b({type:v,query:p}),void N(p);D(e)},onClickCancel:function(){N(""),f("")},shouldShowClearButton:!0})}),(0,l.jsxs)("div",{className:"mx-auto w-full max-w-screen-md px-3 lg:px-0",children:[O&&(0,l.jsx)(R,{}),(0,l.jsxs)("div",{className:S()({hidden:O||!L}),children:[(0,l.jsx)("div",{className:"mb-4 line-clamp-2 pt-6 md:pt-10",children:(0,l.jsx)(I.Z.TitleMd,{children:(0,n.t)("search_v2.search_result_for",{query:L})})}),(0,l.jsx)(ze.O.Group,{onChange:c?P.noop:function(e){var t=function(e){return s[e].id}(e);y(t)},className:"border-b",children:(0,l.jsx)(ze.O.List,{children:s.map((function(e){return(0,l.jsxs)(ze.O,{disabled:c,children:[e.label,(0,l.jsx)(ze.O.Counter,{children:(t=e.id,(null===F||void 0===F||null===(r=F.find((function(e){return e.type===t})))||void 0===r?void 0:r.count)||0)})]},e.id);var t,r}))})})]})]}),!w&&!!L&&(0,l.jsxs)("div",{className:"mx-auto mt-2 flex w-full max-w-screen-md list-none flex-wrap items-center space-x-2 px-3 lg:px-0",children:[0==k.length&&(0,P.isEmpty)(_)?null:(0,l.jsx)(Me,{type:v}),k.length>0&&(0,l.jsx)(Ue,{type:v})]}),(0,l.jsx)(Fe.x.Body,{wrapperClassName:"h-full overflow-auto max-w-screen-md px-3 lg:px-0",children:w?(0,l.jsx)(B,{type:v,numberOfRecords:10}):L?(0,l.jsx)("div",{id:"scrollable-container",className:"h-full overflow-auto",children:k.length>0?(0,l.jsx)(tt,{searchResults:k,fetchNextPage:M,hasNextPage:U}):(0,l.jsx)(E,{type:v})}):(0,l.jsx)(A,{})})]})},ot=function(e){var t=e.searchValue,r=(0,c.dd)();return(0,l.jsx)(f,{children:(0,l.jsx)(x,{children:(0,l.jsx)(it,{isOpen:r.visible,onClose:r.remove,defaultSearchValue:t})})})},at=c.gk.create((function(e){var t=e.searchValue;return(0,l.jsx)(ot,{searchValue:t})})),st=function(){return(0,c.dd)(at)};r(66007);var ct=function(e){var t=e.label;return(0,l.jsx)("span",{className:"border-primary bg-primary flex rounded border px-1.5 py-[1px]",children:(0,l.jsx)(I.Z.LabelXs,{color:"text-default",children:t})})},lt=r(26953),ut=function(e){var t=e.isSelected,r=e.onClick,i=e.onMouseOver,o=e.onFocus,a=e.index,s=e.searchValue,c=(0,lt.kK)();return(0,l.jsxs)("li",{"aria-current":t,"aria-posinset":a,className:S()("focus:bg-tertiary flex w-full cursor-pointer list-none items-center rounded px-4 py-2.5",{"bg-tertiary":t}),onMouseOver:i,onFocus:o,children:[(0,l.jsxs)("button",{type:"button",onClick:r,onKeyDown:r,className:"mr-3 flex flex-1 items-center gap-3 truncate focus-visible:!outline",children:[(0,l.jsx)(N.JO,{type:"search-v2",className:"text-default !h-5 min-h-[20px] !w-5 min-w-[20px]",size:20,useWithFillCurrentColor:!0}),(0,l.jsx)(I.Z.LabelSm,{as:"div",children:(0,l.jsxs)("span",{className:"[word-break:break-word]",children:[s," -"," ",c?(0,n.t)("search_v2.search_community_quick_mobile"):(0,n.t)("search_v2.search_community_quick")]})})]}),t&&(0,l.jsx)(ct,{label:(0,n.t)("search_v2.enter_character")})]})},dt=function(e){var t=e.children;return(0,l.jsx)("div",{className:"bg-primary",children:t})};function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){mt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bt=function(e){var t=e.onClick,r=e.onKeyDown,n=e.children,i=e.link,o={onClick:t,onKeyDown:r,className:"mr-3 flex flex-1 items-center gap-3 truncate focus-visible:!outline"};return i?(0,l.jsx)(Ge.rU,ft(ft({to:i},o),{},{children:n})):(0,l.jsx)("button",ft(ft({type:"button"},o),{},{children:n}))},ht=function(e){var t,r=e.isSelected,i=e.onClick,o=e.onMouseOver,a=e.onFocus,s=e.index,c=e.result,u=e.link,d=(0,le.wh)(),p=d.currentCommunity,f=d.currentCommunityMember,m=Boolean(null===f||void 0===f?void 0:f.is_admin),b="community_member"===c.type,h="space"===c.type,v=b&&c.profile_confirmed_at,y=b&&(m||!(null!==p&&void 0!==p&&p.hide_emails_on_member_profiles)&&!c.hide_email),g=h?{emoji:c.emoji,customEmojiUrl:c.custom_emoji_url,customEmojiDarkUrl:c.custom_emoji_dark_url}:{},_=(0,Qe.TC)().currentAppearance,j=h||b,x=(0,lt.en)(),w=h?"space":v?"community_member":"invited_member";return(0,l.jsx)("li",{"aria-current":r,"aria-posinset":s,className:S()("focus:bg-tertiary group flex w-full cursor-pointer list-none items-center rounded px-4",{"bg-tertiary":r},y?"py-1.5":"py-2.5"),onMouseOver:o,onFocus:a,children:(0,l.jsxs)(bt,{onClick:i,onKeyDown:i,link:u,children:[b?(0,l.jsx)(Ze.s,{src:null!==(t=c.avatar_url)&&void 0!==t?t:"",name:c.name,size:"6"}):(0,l.jsx)("div",{className:"min-h-[1.5rem] min-w-[1.5rem]",children:(0,l.jsx)(Ke.S,{className:"flex !h-6 !w-6 items-center justify-center align-top",emoji:g.emoji,customEmojiUrl:g.customEmojiUrl,customEmojiDarkUrl:g.customEmojiDarkUrl,appearance:_})}),(0,l.jsxs)("div",{className:S()("flex flex-col",{"pt-1.5":y}),children:[(0,l.jsx)(I.Z.LabelSm,{as:"div",truncate:!0,children:(0,l.jsx)(He.w,{content:c.highlighted_name})}),y&&(0,l.jsx)("div",{className:"-mt-1",children:(0,l.jsx)(I.Z.LabelSm,{as:"span",truncate:!0,children:(0,l.jsx)("span",{className:"text-light leading-none",children:c.email})})})]}),(0,l.jsx)("span",{className:S()("ml-auto hidden group-focus:block",{"!block":r||!x}),children:j&&(0,l.jsx)(I.Z.LabelXs,{color:"text-default",children:(0,n.t)(["search_v2.types",w])})})]})})},vt=r(36078),yt=function(e){var t=e.searchTerm,r=e.index,n=e.activeIndex,i=e.handleClick,o=e.removeRecentSearch,a=e.canHover,s=e.setActiveIndex,c=e.dataTestId,u=r+1===n;return(0,l.jsxs)("li",{"aria-current":u,"aria-posinset":r+1,className:S()("group flex w-full cursor-pointer list-none items-center rounded",{"bg-tertiary":u}),"data-testid":c,children:[(0,l.jsx)("button",{type:"button",onClick:function(){return i(t.query)},onMouseOver:function(){return s(r+1)},onFocus:function(){return s(r+1)},className:"w-full focus-visible:!outline",children:(0,l.jsxs)("div",{className:"flex items-center gap-3 truncate px-4 py-2",children:[(0,l.jsx)(N.JO,{type:"16-clock",size:16,className:"text-default !h-5 min-h-[16px] !w-5 min-w-[16px]",useWithFillCurrentColor:!0}),(0,l.jsx)("div",{className:"flex-1 truncate text-left",children:(0,l.jsx)(I.Z.LabelSm,{children:t.query})})]})}),(0,l.jsx)("button",{type:"button",onClick:function(){return o(t.query)},className:S()("text-default ml-auto mr-2 hidden rounded-md focus-visible:!outline",{"!block":!a||u}),children:(0,l.jsx)(N.JO,{useWithFillCurrentColor:!0,type:"close"})})]})},gt=function(e){var t=e.recentSearches,r=e.removeRecentSearch,i=st().show,o=(0,lt.en)(),a=function(e){i({searchValue:e}).catch((function(e){return console.error(e)}))},s=t.slice(0,5),c=(0,vt.t)({optionsCount:s.length+1,onEnter:function(e){var r=0===e?"":t[e-1].query;a(r)}}),u=c.activeIndex,d=c.setActiveIndex;return(0,l.jsx)("div",{className:"p-2",children:(0,l.jsxs)("ul",{className:"list-none","data-testid":"recent-search-list",children:[(0,l.jsx)("li",{className:"ml-4",children:(0,l.jsx)(I.Z.LabelXxs,{weight:"semibold",color:"text-default",children:(0,n.t)("search_v2.recent_searches.title")})}),s.map((function(e,t){return(0,l.jsx)(yt,{searchTerm:e,index:t,activeIndex:u,handleClick:a,removeRecentSearch:r,canHover:o,setActiveIndex:d,dataTestId:"recent-search-item"},"".concat(e.type,"-").concat(e.query))}))]})})},_t=function(e){var t=e.onClose,r=void 0===t?a():t,n=q(),o=n.recentSearches,c=n.addRecentSearch,u=n.removeRecentSearch,d=st().show,p=(0,i.useRef)(null),f=function(){c({type:"general",query:b}),d({searchValue:b}).catch((function(e){return console.error(e)})),r()},m=re({onClose:r,type:"general",onSearchInCommunity:f}),b=m.searchValue,h=m.results,v=m.isLoading,y=m.hasNoResults,g=m.setSearchValue,_=m.resultsContainerRef,j=m.onKeydown,x=m.onMouseOver,w=m.onFocus,O=m.isLoadingSearch,S=m.selectedResultIndex,P=m.resetSearch;(0,s.Z)(p,r);var C=function(e){e||f(),"community_member"!==(null===e||void 0===e?void 0:e.type)&&"space"!==(null===e||void 0===e?void 0:e.type)||r()},k=function(e){return"community_member"===e.type?(0,Z.zd)({public_uid:e.public_uid}):"space"===e.type?"/c/".concat(e.slug):null};return(0,l.jsxs)("div",{ref:p,children:[(0,l.jsx)(T,{onChange:function(e){return g(e)},isFixed:!0,searchValue:b,onKeydown:function(e){!b&&o.length||j(e)},isLoading:O,onClickCancel:function(){r(),P()}}),(0,l.jsx)(dt,{children:function(){if(!b&&!o.length)return(0,l.jsx)(A,{});if(!b&&o.length)return(0,l.jsx)(gt,{removeRecentSearch:u,recentSearches:o});var e=!y&&!v;return(0,l.jsx)("div",{className:"overflow-y-auto md:max-h-96",ref:_,children:(0,l.jsxs)("ul",{className:"list-none p-2",children:[(0,l.jsx)(ut,{index:0,searchValue:b,isSelected:0===S,onClick:function(){return C(null)},onMouseOver:x,onFocus:w}),e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"-mx-2 my-2",children:(0,l.jsx)(qe,{})}),h.map((function(e,t){var r=t+1;return"space"===e.type||"community_member"===e.type?(0,l.jsx)(ht,{index:r,result:e,onMouseOver:x,onFocus:w,isSelected:S===r,onClick:function(){return C(e)},link:k(e)},e.id):null}))]})]})})}()})]})},jt=r(53448),xt=function(){var e=(0,c.dd)();return(0,l.jsx)(jt.u_,{title:(0,n.t)("search_v2.search_community_quick"),isOpen:e.visible,onClose:e.remove,children:(0,l.jsx)(jt.u_.Content,{position:"top",className:"border-primary w-full rounded-[0px] sm:rounded-lg sm:border md:!mt-2 md:w-[620px]",size:"xl",children:(0,l.jsx)(f,{children:(0,l.jsx)(x,{children:(0,l.jsx)(_t,{onClose:e.hide})})})})})},wt=c.gk.create((function(){return(0,l.jsx)(xt,{})})),Ot=function(){return(0,c.dd)(wt)}},35589:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});var n=r(67294),i=r(20254),o=r(14834),a=r(85893),s=function(e){var t=e.communityId,r=e.communityMemberId,s=(0,o.f)(),c=s.newNotificationCount,l=s.fetchNewNotificationsCount;return(0,n.useEffect)((function(){l(t)}),[]),(0,i.I)(r,onNotificationEventReceive),c?(0,a.jsx)("span",{className:"notifications__count",children:c}):null}},25872:(e,t,r)=>{"use strict";r.d(t,{f:()=>h});var n=r(67294),i=r(86013),o=r(49326),a=r(6364),s=r(85244),c=r(20254),l=r(14834),u=r(73097),d=r(84834),p=r(30887),f=r(20695),m=r(15455),b=r(85893),h=function(e){var t=e.containerElement,r=e.communityMemberId,h=e.newNotificationCount,v=(0,d.x)(!1),y=v.open,g=v.handleClose,_=v.setOpen,j=(0,a.j)().isMobileView,x=(0,l.f)(f.dL),w=x.newNotificationCount,O=x.setNewNotificationCount,S=x.resetNewNotificationsCount,P=x.onNotificationEventReceive,C=x.resizeNotificationWindow,k=(0,s.j)(),N=k.prependTitle,I=k.resetTitleToOriginal;(0,n.useEffect)((function(){O(h)}),[h]),(0,c.I)(r,P),(0,u.w)(C),(0,n.useEffect)((function(){document.title=w?N("(".concat(w,") ")):I()}),[w]);var A=function(){if(j()){var e=document.getElementsByClassName("dropdown-menu--bottom-bar bottomBarnotificationDropdown hidden");if(e.length>0&&y)return g(),e[0].classList.remove("hidden"),!1}return y};return(0,b.jsxs)("div",{className:"notifications__menu",children:[(0,b.jsxs)("button",{type:"button",className:"notifications__menu--icon","data-testid":"notifications-menu",onClick:function(){var e=A();j()&&e||(e?g():_(!0),S())},"data-action":"click->bottom-bar#openNotifications","data-target":"bottom-bar.notifications",children:[(0,b.jsx)(p.JO,{type:"bell"}),w?(0,b.jsx)("span",{children:w}):""]}),(0,b.jsx)(d.o,{open:y,handleClose:g,disableToggle:j()&&y,className:t+"notificationDropdown",children:(0,b.jsx)("div",{id:t+"NotificationWrapperOuter",className:"dropdown-menu dropdown-menu--right dropdown-menu__notifications",children:(0,b.jsxs)("div",{className:"dropdown-menu__inside",children:[(0,b.jsx)(m.u,{loadPagination:!1,containerElement:t},"notification-".concat(y)),(0,b.jsx)("div",{className:"notifications__footer",children:(0,b.jsx)("span",{children:(0,b.jsx)("a",{href:(0,o.Rj)(),children:(0,b.jsx)("div",{children:(0,i.t)("view_all_notifications")})})})})]})})})]})}},15455:(e,t,r)=>{"use strict";r.d(t,{u:()=>z});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r.n(a),c=r(96486),l=r(14834),u=r(97012),d=r(95071),p=r(73097),f=r(86078),m=r(22554),b=r(42175),h=r(16743),v=r(90846),y=r(85893);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=function(e){var t=e.setDataLoaded,r=e.setHasNextPage,i=e.setNotificationGroup,o={INBOX:s().t("notifications.group_tabs.inbox"),FOLLOWING:s().t("notifications.group_tabs.following"),ALL:s().t("notifications.group_tabs.all"),ARCHIVED:s().t("notifications.group_tabs.archived")},a=g((0,n.useState)(o.INBOX),2),c=a[0],l=a[1];return(0,y.jsx)(v.m,{wrapperClassName:"px-6",controlled:!0,activeTab:c,onClick:function(e){i(e.toLowerCase()),t(!1),r(!1),l(e)},options:Object.values(o).map((function(e){return{label:e}})),variant:"underline-sm"})},x=r(23560),w=r.n(x),O=r(49326),S=r(30887),P=r(74284),C=function(e){var t=e.markAllAsRead,r=e.handleClose;return(0,y.jsxs)("div",{className:"notifications__header",children:[(0,y.jsx)("div",{className:"pl-[10px] pt-[5px]",children:(0,y.jsx)(h.Z.TitleSm,{weight:"bold",children:(0,a.t)("notifications.page_title")})}),(0,y.jsxs)("span",{children:[(0,y.jsx)(P.Y,{content:(0,a.t)("notifications.mark_all_as_read"),children:(0,y.jsx)("button",{type:"submit",onClick:t,children:(0,y.jsx)(S.JO,{type:"mark-all-read",className:"icon--mark-all-read"})})}),(0,y.jsx)(P.Y,{content:(0,a.t)("notifications.notification_settings"),children:(0,y.jsx)("a",{href:O.G3.notifications,children:(0,y.jsx)(S.JO,{type:"settings",className:"icon--settings"})})}),w()(r)&&(0,y.jsx)(P.Y,{content:(0,a.t)("notifications.close"),children:(0,y.jsx)("button",{type:"submit",onClick:r,children:(0,y.jsx)(S.JO,{type:"close"})})})]})]})},k=r(40160),N=r(24185),I=r(25401),A=r(38870),E=r(84834),D=function(e){var t=e.notification,r=e.markAsRead,n=e.unfollowNotification,i=e.followNotification,o=e.archiveNotification,s=(0,E.x)(),c=s.open,l=s.toggleDropdown,u=s.handleClose,d=t.post_follower_id,p=["Comment","Post"].includes(t.notifiable_type)&&!t.post_follower_id;return(0,y.jsx)("div",{className:"notifications__actions",children:(0,y.jsxs)("div",{className:"actions__menu",children:[(0,y.jsx)("div",{className:"actions__icon",children:(0,y.jsx)("a",{href:"#action-menu",onClick:l,children:(0,y.jsx)(S.JO,{type:"menu-dots"})})}),(0,y.jsx)(E.o,{open:c,handleClose:u,className:"dropdown-menu dropdown-menu--right dropdown-menu__actions",children:(0,y.jsx)("div",{className:"dropdown-menu__inside",children:c&&(0,y.jsxs)("ul",{children:[!t.read_at&&(0,y.jsx)("li",{children:(0,y.jsx)("button",{type:"submit",onClick:function(){return r(t)},children:(0,a.t)("notifications.actions.mark_as_read")})}),d&&(0,y.jsx)("li",{children:(0,y.jsx)("button",{type:"submit",onClick:function(){return n(t)},children:(0,a.t)("notifications.actions.unfollow_post")})}),p&&(0,y.jsx)("li",{children:(0,y.jsx)("button",{type:"submit",onClick:function(){return i(t)},children:(0,a.t)("notifications.actions.follow_post")})}),"archived"!=t.notification_group&&(0,y.jsx)("li",{children:(0,y.jsx)("button",{type:"submit",onClick:function(){return o(t)},children:(0,a.t)("notifications.actions.archive")})})]})})})]})})},T=function(e){return e.includes("flagged")?"flagged":e},L=function(e){var t=e.action;return"notifications__row--".concat(T(t))},M={actor_name:function(e){var t=e.notification;return(0,y.jsxs)("span",{className:"notifications__name",children:[t.actor_name," "]})},display_action:function(e){var t=e.notification;return(0,y.jsxs)("span",{children:[t.display_action," "]})},notifiable_title:function(e){var t=e.notification;return(0,y.jsxs)("span",{className:"notifications__title",children:[t.notifiable_title," "]})}},R=function(e){var t=e.notification;return(0,y.jsx)("div",{className:"notifications__text",children:t.notification_text_structure.map((function(e,r){var i=M[e]||function(){return(0,y.jsxs)("span",{children:[" ",e]},r)},o=r+1===t.notification_text_structure.length,a=0===r;return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(i,{notification:t}),(o||a)&&" "]},"notification-key-".concat(r))}))},t.id)},B=function(e){var t,r,n=e.notification,i=e.markAsRead,o=e.unfollowNotification,a=e.followNotification,s=e.archiveNotification,c=e.onClickNotification,l=(0,N.k6)(),u=(t=n.action,"".concat(T(t))),d=(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"mr-2",children:[(0,y.jsx)(A.s,{src:n.actor_image,name:n.actor_name,size:"10"}),(0,y.jsx)("div",{className:"notifications__icon",children:(0,y.jsx)(S.JO,{type:u,className:"icon--sm"})})]}),(0,y.jsxs)("div",{className:"notifications__details",children:[(0,y.jsx)(R,{notification:n}),(0,y.jsx)("div",{className:"notifications__time",children:(0,I.TF)(n.created_at)})]})]});return(0,y.jsx)("li",{children:(0,y.jsxs)("div",{className:"notifications__row ".concat(L(n),"\n        ").concat(n.read_at?"notifications__row--read":"notifications__row--unread"),children:[(r=d,l?(0,y.jsx)(k.rU,{to:n.action_web_path,className:"notifications__link",onClick:function(e){i(n),w()(c)&&c(e)},children:r}):(0,y.jsx)("a",{className:"notifications__link",href:(0,O.Fo)(n),children:r})),(0,y.jsx)(D,{notification:n,markAsRead:i,archiveNotification:s,unfollowNotification:o,followNotification:a})]})},n.id)};function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e){var t=e.loadPagination,r=void 0===t||t,i=e.containerElement,s=e.handleClose,v=e.isDropdown,g=void 0!==v&&v,_=e.isFullPage,x=void 0!==_&&_,w=(0,l.f)(),O=w.notifications,S=w.hasNextPage,P=w.dataLoaded,k=w.setDataLoaded,N=w.setHasNextPage,I=w.markAllAsRead,A=w.fetchNotifications,E=w.fetchFirstPage,D=w.markAsRead,T=w.unfollowNotification,L=w.followNotification,M=w.archiveNotification,R=w.resizeNotificationWindow,F=((0,b.wO)()||{}).onClose,z=void 0===F?c.noop:F,V=U((0,n.useState)("inbox"),2),q=V[0],G=V[1],H=(0,u.wh)().currentCommunity.current_plan_tier;return(0,p.w)(R),(0,n.useEffect)((function(){E(q)}),[q]),(0,y.jsxs)(y.Fragment,{children:[!x&&(0,y.jsx)(C,{markAllAsRead:I,handleClose:s}),(0,y.jsx)(j,{mobile:!0,notificationGroup:q,setNotificationGroup:G,setDataLoaded:k,setHasNextPage:N}),(0,y.jsxs)("div",{id:i+"NotificationWrapperInner",className:o()("relative flex h-full flex-col justify-between",{"h-[calc(100%-109px)] overflow-auto rounded-b":g,"overflow-auto":x}),children:[P||S?O.length?(0,y.jsx)("ul",{className:"notifications__list",children:O.filter((function(e){return null===e||void 0===e?void 0:e.action_web_path})).map((function(e){return(0,y.jsx)(B,{onClickNotification:function(e){(0,d.n2)(e)||(g?z():null===s||void 0===s||s())},notification:e,markAsRead:D,unfollowNotification:T,followNotification:L,archiveNotification:M},e.id)}))}):(0,y.jsx)("div",{className:"notifications__empty",children:(0,y.jsx)("div",{children:(0,a.t)("no_notifications")})}):(0,y.jsx)(f.m,{}),r&&S&&(0,y.jsx)(m.t,{fetchNewPage:function(e){return A(e,q)},initialPage:2,componentId:i?i+"NotificationWrapperInner":null}),H&&(0,y.jsx)("span",{className:"w-full bg-white py-4 text-center",children:(0,y.jsx)(h.Z.LabelXs,{children:(0,a.t)("notification_retention_message",{months:(0,a.t)("notification_retention_months.".concat(H))})})})]})]})}},1614:(e,t,r)=>{"use strict";r.d(t,{T:()=>l});var n=r(67294),i=r(86013),o=r.n(i),a=r(85244),s=r(15455),c=r(85893),l=function(){var e=(0,a.j)().prependTitle;return(0,n.useEffect)((function(){e("".concat(o().t("notifications.page_title")," "))})),(0,c.jsx)("div",{className:"notifications__page",children:(0,c.jsx)(s.u,{})})}},69270:(e,t,r)=>{"use strict";r.d(t,{y:()=>u});var n=r(86013),i=r(23360),o=r(86590),a=r(80424),s=r(85893),c=function(e){var t=e.whiteLabel,r="authentication_app.signup.form.terms_and_privacy";return(0,s.jsxs)("span",{className:"text-light text-xs",children:[(0,n.t)("".concat(r,".prefix"))," ",(0,s.jsx)("a",{className:"text-default hover:text-light font-bold",href:o.P.terms(),target:"_blank",rel:"noreferrer",children:(0,n.t)([r,t?"white_labelled_terms_of_service":"terms_of_service"])})," ",(0,n.t)("".concat(r,".and"))," ",(0,s.jsx)("a",{className:"text-default hover:text-light font-bold",href:o.P.privacy_policy(),target:"_blank",rel:"noreferrer",children:(0,n.t)("".concat(r,".privacy_policy"))})]})},l=function(e){var t=e.customUrl,r=e.communityName,i=e.whiteLabel,a="authentication_app.signup.form.terms_and_privacy_customized";return(0,s.jsxs)("span",{className:"text-light text-xs",children:[(0,n.t)([a,"prefix"]),(0,s.jsx)("a",{className:"text-default hover:text-light font-bold",href:o.P.terms(),target:"_blank",rel:"noreferrer",children:(0,n.t)([a,i?"white_lebelled_sign_up_terms":"sign_up_terms"])}),", ",(0,s.jsxs)("span",{children:[r," "]}),(0,s.jsx)("a",{className:"text-default hover:text-light font-bold",href:t,target:"_blank",rel:"noreferrer",children:(0,n.t)([a,"terms"])}),(0,s.jsx)("span",{children:(0,n.t)([a,"and_additional"])}),(0,s.jsx)("a",{className:"text-default hover:text-light font-bold",href:o.P.privacy_policy(),target:"_blank",rel:"noreferrer",children:(0,n.t)([a,"privacy_policy"])})]})},u=function(e){var t=e.caller,r=(0,a.Y)(),n=(0,i.c)(),o=("paywallCheckout"===t?r:n).currentCommunity;if(!o)return(0,s.jsx)(c,{});var u=o.custom_tos,d=o.custom_tos_enabled,p=o.name;return d?(0,s.jsx)(l,{customUrl:u,communityName:p,whiteLabel:o.white_label}):(0,s.jsx)(c,{whiteLabel:o.white_label})}},70360:(e,t,r)=>{"use strict";r.d(t,{zU:()=>n,CU:()=>i,pX:()=>o,K$:()=>a});var n=/^(?=.*\d)(?=.*[A-Z])(?=.*\W)[^ ]{6,}$/,i=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,o="coupon_code",a="utm_params"},86590:(e,t,r)=>{"use strict";r.d(t,{P:()=>i});var n=r(49326),i={forgotPassword:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params,t=void 0===e?{}:e;return"/users/password/new?".concat((0,n.UK)(t))},signIn:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params,t=void 0===e?{}:e;return"/sign_in?".concat((0,n.UK)(t))},socialSignIn:function(e,t){return"/users/auth/".concat(e,"?community_id=").concat(t)},signUp:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).params,t=void 0===e?{}:e;return"/sign_up?".concat((0,n.UK)(t))},terms:function(){return"/terms"},privacy_policy:function(){return"/privacy"},resetPassword:function(){return"/users/password"},optSessions:function(){return"/auth/otp_sessions"},resetPasswordOnOtpLogin:function(){return"/auth/password_reset"},resendOtp:function(){return"/auth/otp_sessions/resend"},two_fa:{emailOtpVerification:function(){return"/two_fa/email_otp/verify"},emailOtpResend:function(){return"/two_fa/email_otp/resend"}},communities:{new:function(){return"/communities/new"},index:function(){return"/communities"},update:function(e){return"/communities/".concat(e)}}}},23202:(e,t,r)=>{"use strict";r.d(t,{M:()=>V});var n=r(86013),i=r.n(n),o=r(71362),a=r(55675),s=r(61926),c=r(87536),l=r(61149),u=/^((0?0?\.([1-9]\d*|0[1-9]\d*))|(([1-9]|0[1-9])\d*(\.\d+)?))$/,d=r(81208),p=r(649),f=r(89761),m=r(97012),b=r(91741),h=r(5295),v=r(85893),y=function(){var e=(0,m.wh)(),t=e.currentCommunitySettings,r=e.isLoading,i=(0,b.K)(),o=i.data,a=i.isLoading,l=(0,c.Gc)().watch;if(r||a)return(0,v.jsx)(h.a,{});var u=o.find((function(e){return e.is_default})),y=l("currency_id"),g=o.find((function(e){return e.id===parseInt(y||u.id)})),_=(0,p.Bj)(g);return(0,v.jsxs)(v.Fragment,{children:[t.currencies_enabled&&(0,v.jsx)(f.H,{formItemName:"currency_id",formItemTranslationRoot:"settings.paywall_coupons.form",formItemRules:{required:!0}}),(0,v.jsx)(s.l.Item,{fullWidth:!1,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,name:"amount",rules:{required:!0,validate:{inputMinAmount:function(e){return!((0,p.Mz)(e)<=0)||(0,n.t)("settings.paywall_coupons.alerts.error.amount_not_zero")}}},transformValue:_,translationRoot:"settings.paywall_coupons.form",variant:"extra-bottom-margin",children:(0,v.jsx)(d.a,{currency:g,name:"amount","data-testid":"coupon_amount"})})]})},g=function(e){var t=e.paywallCoupon,r=(0,(0,c.Gc)().watch)("type");return(0,v.jsxs)(v.Fragment,{children:[!t&&(0,v.jsx)(s.l.Item,{name:"code",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,fullWidth:!1,variant:"extra-bottom-margin",tooltipText:i().t("settings.paywall_coupons.form.code_description"),hideDescription:!0,hidePlaceholder:!0,children:(0,v.jsx)(s.l.Input,{"data-testid":"coupon_code"})}),(0,v.jsx)(s.l.Item,{name:"name",translationRoot:"settings.paywall_coupons.form",label:i().t("settings.paywall_coupons.form.name_label"),rules:{required:i().t("settings.paywall_coupons.alerts.error.name_is_required"),maxLength:40},hideBorder:!0,fullWidth:!1,variant:"extra-bottom-margin",hideDescription:!0,hidePlaceholder:!0,children:(0,v.jsx)(s.l.Input,{maxLength:"40","data-testid":"coupon_name"})}),t&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.l.Item,{name:"active",inline:!0,hideBorder:!0,hideDescription:!0,label:i().t("settings.paywall_coupons.form.active"),children:(0,v.jsx)(s.l.ToggleSwitch,{variant:"small"})}),(0,v.jsxs)("div",{className:"paywall-coupons-form__fields__coupon-info",children:[(0,v.jsx)("label",{children:i().t("settings.paywall_coupons.form.code_info")}),(0,v.jsx)("p",{children:t.code})]}),(0,v.jsxs)("div",{className:"paywall-coupons-form__fields__coupon-info",children:[(0,v.jsx)("label",{children:i().t("settings.paywall_coupons.form.terms")}),(0,v.jsx)("p",{children:t.terms})]}),t.max_redemptions&&(0,v.jsxs)("div",{className:"paywall-coupons-form__fields__coupon-info",children:[(0,v.jsx)("label",{children:i().t("settings.paywall_coupons.form.max_redemptions")}),(0,v.jsx)("p",{children:t.max_redemptions})]}),(0,v.jsxs)("div",{className:"paywall-coupons-form__fields__coupon-info",children:[(0,v.jsx)("label",{children:i().t("settings.paywall_coupons.form.redemptions")}),(0,v.jsx)("p",{children:t.redemptions_count})]})]}),!t&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.l.Item,{name:"type",hideDescription:!0,translationRoot:"settings.paywall_coupons.form",rules:{required:i().t("settings.paywall_coupons.alerts.error.type_is_required")},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,v.jsx)(s.l.SelectNative,{name:"type",options:[{label:i().t("settings.paywall_coupons.form.type_options.fixed"),value:l.V5.fixed},{label:i().t("settings.paywall_coupons.form.type_options.percent"),value:l.V5.percent}],"data-testid":"coupon_type"})}),(0,l.Dh)(r)&&(0,v.jsx)(y,{}),(0,l.hU)(r)&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{className:"paywall-coupons-form__input_percent_symbol",children:"%"}),(0,v.jsx)(s.l.Item,{name:"amount",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,fullWidth:!1,hidePlaceholder:!0,rules:{required:i().t("settings.paywall_coupons.alerts.error.amount_not_zero"),pattern:{value:u,message:i().t("settings.paywall_coupons.alerts.error.amount_not_zero")}},variant:"extra-bottom-margin",hideDescription:!0,children:(0,v.jsx)(s.l.Input,{"data-testid":"coupon_amount"})})]})]})]})},_=r(67294),j=r(4039),x=r(36762);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(){var e=(0,c.Gc)().watch,t=(0,j.g)({type:[x.Ex.space,x.Ex.event]}),r=t.activePaywalls,n=t.isLoading,o=t.isSuccess,a=e("type"),u=e("currency_id"),d=e("all_paywalls"),p=w((0,_.useState)(""),2),f=p[0],m=p[1];(0,_.useEffect)((function(){m("")}),[]);var b=(0,_.useMemo)((function(){return r.filter((function(e){return(0,l.hU)(a)||e.currency.id==u})).filter((function(e){var t=e.display_name;return!f||-1!==t.toLowerCase().search(f.toLowerCase())})).map((function(e){return{value:e.id,text:e.display_name}}))}),[r,u,a,f]);if(n||!o)return(0,v.jsx)(h.a,{});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.l.Item,{name:"all_paywalls",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,hideDescription:!0,fullWidth:!0,children:(0,v.jsx)(s.l.SelectNative,{name:"all_paywalls",options:[{label:i().t("settings.paywall_coupons.form.paywall_options.all"),value:!0},{label:i().t("settings.paywall_coupons.form.paywall_options.specific"),value:!1}],"data-testid":"coupon_applies_to"})}),"false"==d&&(0,v.jsx)(s.l.Item,{name:"paywall_ids",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,hideDescription:!0,fullWidth:!0,children:(0,v.jsx)(s.l.Select,{name:"paywall_ids",variant:"tags",data:b,onSearch:function(e){m(e)},minSearchValueLength:0,showArrow:!1})})]})},P=r(20073),C=r(15830),k=r(71316),N=function(e){var t=e.paywallCoupon,r=(0,(0,c.Gc)().watch)(),n=r.duration,o=r.enable_start_date,a=r.enable_end_date,l=r.enable_max_redemptions,u=(0,P.ED)(P.tq),d="F d, Y G:i K (\\".concat(u.split("").join("\\"),")");return(0,v.jsxs)(v.Fragment,{children:[!t&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.l.Item,{name:"duration",translationRoot:"settings.paywall_coupons.form",hideBorder:!0,hideDescription:!0,fullWidth:!0,tooltipText:i().t("settings.paywall_coupons.form.duration_description"),children:(0,v.jsx)(s.l.SelectNative,{options:[{label:i().t("settings.paywall_coupons.form.duration_options.forever"),value:"forever"},{label:i().t("settings.paywall_coupons.form.duration_options.once"),value:"once"},{label:i().t("settings.paywall_coupons.form.duration_options.repeating"),value:"repeating"}],"data-testid":"coupon_duration"})}),"repeating"==n&&(0,v.jsx)(s.l.Item,{name:"duration_in_months",label:i().t("settings.paywall_coupons.form.duration_in_months"),hideDescription:!0,hideBorder:!0,fullWidth:!1,variant:"extra-bottom-margin",rules:{required:i().t("settings.paywall_coupons.alerts.error.duration_in_monts_not_zero")},children:(0,v.jsx)(s.l.Input,{type:"number",min:"1",max:"120","data-testid":"coupon_duration_in_months"})})]}),(0,v.jsx)(s.l.Item,{name:"enable_start_date",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:i().t("settings.paywall_coupons.form.redeemable_date"),children:(0,v.jsx)(s.l.SelectNative,{options:[{label:i().t("settings.paywall_coupons.form.date_options.immediately"),value:!1},{label:i().t("settings.paywall_coupons.form.date_options.set_date"),value:!0}],"data-testid":"coupon_start_date"})}),"true"==o&&(0,v.jsx)(k.W,{dateFormat:d,name:"starts_at",fullWidth:!0,minuteIncrement:5,dataTestId:"redeemable_from_date",locale:(0,C.bS)()}),(0,v.jsx)(s.l.Item,{name:"enable_end_date",hideBorder:!0,fullWidth:!0,hideDescription:!0,label:i().t("settings.paywall_coupons.form.redeemable_until_date"),children:(0,v.jsx)(s.l.SelectNative,{options:[{label:i().t("settings.paywall_coupons.form.date_options.disable"),value:!1},{label:i().t("settings.paywall_coupons.form.date_options.until"),value:!0}],"data-testid":"coupon_end_date"})}),"true"==a&&(0,v.jsx)(k.W,{dateFormat:d,name:"ends_at",fullWidth:!0,minuteIncrement:5,dataTestId:"redeemable_until_date"}),(0,v.jsx)("div",{className:"!hidden",children:(0,v.jsx)(s.l.Item,{name:"enable_max_redemptions",hideBorder:!0,hideDescription:!0,fullWidth:!0,label:i().t("settings.paywall_coupons.form.max_redemptions"),tooltipText:i().t("settings.paywall_coupons.form.max_redemptions_description"),children:(0,v.jsx)(s.l.SelectNative,{options:[{label:i().t("settings.paywall_coupons.form.limit_options.disable"),value:!1},{label:i().t("settings.paywall_coupons.form.limit_options.enable"),value:!0}]})})}),"true"==l&&(0,v.jsx)("div",{className:"paywall-coupons-form__fields__no_margin",children:(0,v.jsx)(s.l.Item,{name:"max_redemptions",hideDescription:!0,hideBorder:!0,fullWidth:!0,placeholder:i().t("settings.paywall_coupons.form.max_redemptions_placeholder"),variant:"extra-bottom-margin",rules:{required:i().t("settings.paywall_coupons.alerts.error.max_redemptions_not_zero"),min:1},children:(0,v.jsx)(s.l.Input,{type:"number",min:"1"})})})]})},I=r(64687),A=r.n(I),E=r(90846),D={DETAILS:(0,n.t)("settings.paywall_coupons.tabs.details"),PAYWALLS:(0,n.t)("settings.paywall_coupons.tabs.paywalls"),USAGE:(0,n.t)("settings.paywall_coupons.tabs.usage")};function T(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}const L=function(e){var t=e.activeTab,r=e.setActiveTab,n=(0,c.Gc)().trigger,i=function(){var e,i=(e=A().mark((function e(i){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(t!=D.DETAILS||i!=D.USAGE){e.next=7;break}return e.abrupt("return");case 7:r(i);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){T(o,n,i,a,s,"next",e)}function s(e){T(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return i.apply(this,arguments)}}();return(0,v.jsx)(E.m,{wrapperClassName:"px-6",controlled:!0,activeTab:t,onClick:i,options:Object.values(D).map((function(e){return{label:e}})),variant:"underline"})};var M=r(46668);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var V=function(e){var t=e.refetchCoupons,r=e.onClose,n=e.paywallCoupon,c=function(e){var t=e.paywallCoupon,r=e.refetchCoupons,n=e.onClose,i=F((0,_.useState)(D.DETAILS),2),o=i[0],a=i[1],s=(0,M.n)({refetchCoupons:r,onClose:n,paywallCoupon:t}),c=s.createMutation,u=s.updateMutation,d=t?u:c;return{getFormDefaults:function(e){var t,r;return e?{name:e.name,currency_id:null!==(t=null===(r=e.currency)||void 0===r?void 0:r.id)&&void 0!==t?t:"",active:e.active,starts_at:e.starts_at,ends_at:e.ends_at,paywall_ids:e.paywall_ids,all_paywalls:e.all_paywalls.toString(),enable_start_date:(!!e.starts_at).toString(),enable_end_date:(!!e.ends_at).toString(),type:e.type}:{type:l.V5.fixed,currency_id:""}},handleSubmit:function(e){if(o==D.DETAILS)a(D.PAYWALLS);else if(o==D.PAYWALLS)a(D.USAGE);else if(o==D.USAGE){var t=e.amount;return(0,l.Dh)(e.type)&&(t=(0,p.Mz)(t)),d.mutate(B(B({},e),{},{amount:t}))}},setActiveTab:a,mutation:d,activeTab:o}}({paywallCoupon:n,refetchCoupons:t,onClose:r}),u=c.getFormDefaults,d=c.handleSubmit,f=c.setActiveTab,m=c.mutation,b=c.activeTab,h=function(){switch(b){case D.DETAILS:return(0,v.jsx)(g,{paywallCoupon:n});case D.USAGE:return(0,v.jsx)(N,{paywallCoupon:n});case D.PAYWALLS:return(0,v.jsx)(S,{})}};return(0,v.jsx)(s.l,{onSubmit:d,className:"paywall-coupons-form",defaultValues:u(n),children:function(e){var t=e.formState.isSubmitting;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(L,{activeTab:b,setActiveTab:f}),(0,v.jsx)("div",{className:"paywall-coupons-form__fields h-0 overflow-y-auto",children:h()}),(0,v.jsx)(o.d.Footer,{sticky:!0,children:(0,v.jsxs)(a.z,{type:"submit",variant:"primary",full:!0,disabled:t||m.isLoading,children:[b!=D.USAGE&&i().t("settings.paywall_coupons.buttons.next"),b==D.USAGE&&!n&&i().t("settings.paywall_coupons.buttons.create"),b==D.USAGE&&n&&i().t("settings.paywall_coupons.buttons.update")]})})]})}})}},4039:(e,t,r)=>{"use strict";r.d(t,{g:()=>l});var n=r(67294),i=r(88767),o=r(34128),a=r(31889),s=r(49326),c=r(97012),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.wh)().currentCommunityMember,r=(0,i.useQuery)("PAYWALLS",(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.UT)(s.av.paywalls.index({params:e}))}(e)}),{enabled:!!(0,a.vb)(t)}),l=r.data,u=void 0===l?[]:l,d=r.isSuccess,p=r.isLoading,f=(0,n.useMemo)((function(){return u?u.filter((function(e){return"active"===e.status})):[]}),[u]),m=(0,n.useMemo)((function(){return!!f&&(null===f||void 0===f?void 0:f.length)>0}),[f]),b=(0,n.useMemo)((function(){return!!u&&(null===u||void 0===u?void 0:u.length)>0}),[u]);return{activePaywalls:f,isSuccess:d,hasActivePaywalls:m,hasPaywalls:b,isLoading:p,allPaywalls:u}}},10808:(e,t,r)=>{"use strict";r.d(t,{c:()=>P});var n=r(86013),i=r.n(n),o=r(61005),a=r(3108),s=r(72855),c=r(48071),l=r(46668),u=r(64687),d=r.n(u),p=r(67294),f=r(63099),m=r(84834),b=r(71032),h=r(26981),v=r(71362),y=r(23202),g=r(85893),_=function(e){var t=e.paywallCoupon,r=e.refetchCoupons,n=e.isDrawerVisible,i=e.toggleDrawer;return(0,g.jsx)(v.d,{open:n,title:I18n.t("settings.paywall_coupons.edit_title"),onClose:i,noWrapperPadding:!0,children:(0,g.jsx)(y.M,{refetchCoupons:r,onClose:i,paywallCoupon:t})})};function j(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){j(o,n,i,a,s,"next",e)}function s(e){j(o,n,i,a,s,"throw",e)}a(void 0)}))}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t,r,i=e.paywallCoupon,o=e.refetchCoupons,a=w((0,p.useState)(!1),2),s=a[0],c=a[1],u=w((0,f.k)(!1),2),v=u[0],y=u[1],j=(0,m.x)().handleClose,O=(0,l.n)({refetchCoupons:o,paywallCoupon:i}).destroyMutation,S=O.mutateAsync,P=O.isLoading,C=Boolean(null===i||void 0===i||null===(t=i.policies)||void 0===t?void 0:t.can_edit),k=Boolean(null===i||void 0===i||null===(r=i.policies)||void 0===r?void 0:r.can_destroy),N=(0,p.useMemo)((function(){var e=[];return C&&e.push({key:"edit-coupon",label:(0,n.t)("settings.paywall_coupons.buttons.edit"),onClick:function(){j(),y()}}),k&&e.push({key:"delete-coupon",label:(0,n.t)("settings.paywall_coupons.buttons.delete"),hasDanger:!0,onClick:function(){j(),c(!0)}}),e}),[C,k,j,y]);return(0,g.jsxs)(g.Fragment,{children:[C&&(0,g.jsx)(_,{paywallCoupon:i,refetchCoupons:o,isDrawerVisible:v,toggleDrawer:y}),(0,g.jsx)(h.w.Actions,{children:N.map((function(e){var t=e.key,r=e.label,n=e.hasDanger,i=e.onClick;return(0,g.jsx)(h.w.Actions.Item,{hasDanger:n,onClick:i,children:r},t)}))}),k&&(0,g.jsx)(b.c,{title:(0,n.t)("settings.paywall_coupons.alerts.confirmation.delete_title"),confirmText:(0,n.t)("confirm"),cancelText:(0,n.t)("cancel"),confirmVariant:"danger",isOpen:s,disabled:P,onCancel:function(){return c(!1)},onClose:function(){return c(!1)},onConfirm:x(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:c(!1);case 3:case"end":return e.stop()}}),e)}))),children:(0,g.jsx)("p",{children:(0,n.t)("settings.paywall_coupons.alerts.confirmation.delete")})})]})},P=function(e){var t=e.canCreate,r=e.shouldHideHeader,n=(0,(0,l.n)({}).useListPaywallCoupons)(),u=n.data,d=n.refetch,p=[{title:i().t("settings.paywall_coupons.form.code_info").toUpperCase(),dataIndex:"code",key:"code"},{title:i().t("settings.paywall_coupons.form.terms").toUpperCase(),dataIndex:"terms",key:"terms"},{title:i().t("settings.paywall_coupons.form.redemptions").toUpperCase(),dataIndex:"redemptions",key:"redemptions",className:o.M.lg,tdClassName:o.M.lg},{title:i().t("settings.paywall_coupons.form.status").toUpperCase(),dataIndex:"status",key:"status"},{title:" ",dataIndex:"action",key:"action"}],f=null===u||void 0===u?void 0:u.map((function(e){return{key:e.id,name:e.name,redemptions:e.redemptions_count,terms:e.terms,code:e.code,status:(0,g.jsx)(s.O,{variant:e.active?"success":"danger",textTransform:"capitalize",children:e.status}),action:(0,g.jsx)(S,{paywallCoupon:e,refetchCoupons:d}),rowClassName:"group"}}));return(0,g.jsxs)(g.Fragment,{children:[!r&&(0,g.jsx)("div",{className:"table-wrapper",children:(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("h3",{children:i().t("settings.paywall_coupons.title")}),t&&(0,g.jsx)(c.F,{refetchCoupons:d})]})}),(0,g.jsx)("div",{className:"paywall-coupons-list","data-testid":"coupon-list",children:(0,g.jsx)(a.w,{columns:p,className:"paywall-coupons-list__table",dataSource:f||[],hasStickyHeader:!0,headerClassName:"top-[116px]"})})]})}},48071:(e,t,r)=>{"use strict";r.d(t,{F:()=>p});var n=r(86013),i=r.n(n),o=r(63099),a=r(71362),s=r(55675),c=r(23202),l=r(85893);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e){var t=e.refetchCoupons,r=u((0,o.k)(!1),2),n=r[0],d=r[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.z,{variant:"circle",onClick:function(e){e.preventDefault(),d()},children:i().t("settings.paywall_coupons.buttons.new")}),(0,l.jsx)(a.d,{open:n,title:i().t("settings.paywall_coupons.new_title"),onClose:d,noWrapperPadding:!0,children:(0,l.jsx)(c.M,{refetchCoupons:t,onClose:d})})]})}},46668:(e,t,r)=>{"use strict";r.d(t,{n:()=>u});var n=r(86013),i=r.n(n),o=r(88767),a=r(34128),s=r(49326),c=r(88116),l=r(21809),u=function(e){var t=e.refetchCoupons,r=void 0===t?null:t,n=e.onClose,u=void 0===n?null:n,d=e.paywallCoupon,p=void 0===d?null:d,f=(0,l.p)(),m=f.success,b=f.error;return{useListPaywallCoupons:function(){return(0,o.useQuery)("paywall-coupons",(function(){return(0,a.UT)(s.av.paywallCoupons.index())}))},updateMutation:(0,o.useMutation)((function(e){return c.p.updatePaywallCoupon(p.id,e)}),{onSuccess:function(){m(i().t("settings.paywall_coupons.alerts.success.updated")),u(),r()},onError:function(e){console.error(e.errorDetails),b(e.errorDetails,{duration:"long"})}}),createMutation:(0,o.useMutation)((function(e){return c.p.createPaywallCoupon(e)}),{onSuccess:function(){m(i().t("settings.paywall_coupons.alerts.success.created")),u(),r()},onError:function(e){console.error(e.errorDetails),b(e.errorDetails,{duration:"long"})}}),destroyMutation:(0,o.useMutation)((function(){return c.p.destroyPaywallCoupon(p.id)}),{onSuccess:function(){m(i().t("settings.paywall_coupons.alerts.success.deleted")),r()},onError:function(e){console.error(e.message),b(e.message,{duration:"long"})}})}}},59896:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(88767),i=r(21809),o=r(75752),a=r(10808),s=r(85893),c=new n.QueryClient(o.Vr);const l={List:function(e){var t=e.canCreate;return(0,s.jsx)(i.V,{children:(0,s.jsx)(n.QueryClientProvider,{client:c,children:(0,s.jsx)(a.c,{canCreate:t})})})}}},71854:(e,t,r)=>{"use strict";r.d(t,{X:()=>f});var n=r(86013),i=r(72675),o=r(89761),a=r(55675),s=r(61926),c=r(78270),l=r(51548),u=r(85893),d=function(e){var t=e.paywallGroup,r=void 0===t?null:t,d=e.refetchPaywallGroups,p=void 0===d?null:d,f=(0,i.dd)(),m=function(e){var t=e.modal,r=e.refetchPaywallGroups,n=e.paywallGroup,i=(0,l.W)({closeModal:t.hide,refetchPaywallGroups:r}),o=i.createMutation,a=i.updateMutation,s=!!n;return{getFormDefaults:function(){var e;return{name:(null===n||void 0===n?void 0:n.name)||"",id:(null===n||void 0===n?void 0:n.id)||"",currency_id:(null===n||void 0===n||null===(e=n.currency)||void 0===e?void 0:e.id)||""}},editionMode:s,mutation:s?a:o}}({modal:f,refetchPaywallGroups:p,paywallGroup:r}),b=m.getFormDefaults,h=m.mutation,v=m.editionMode;return(0,u.jsx)(c.u,{show:f.visible,title:v?(0,n.t)("settings.paywall_groups.headings.edit"):(0,n.t)("settings.paywall_groups.headings.create"),onClose:f.hide,children:(0,u.jsx)(s.l,{onSubmit:h.mutate,defaultValues:b(),className:"paywall-group-form",children:function(e){var t,i=e.formState.isSubmitting;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s.l.Item,{name:"name",translationRoot:"settings.paywall_groups.fields",hideBorder:!0,hideDescription:!0,fullWidth:!1,rules:{required:!0,maxLength:255},hidePlaceholder:!0,children:(0,u.jsx)(s.l.Input,{})}),(!r||(null===r||void 0===r||null===(t=r.policies)||void 0===t?void 0:t.requires_currency))&&(0,u.jsx)(o.H,{formItemName:"currency_id",formItemTranslationRoot:"settings.paywall_groups.fields",formItemRules:{required:(0,n.t)("settings.paywall_groups.fields.currency_id_is_required")},formItemTooltipText:(0,n.t)("settings.paywall_groups.fields.currency_id_tooltip"),disabled:r&&!r.policies.can_change_currency}),(0,u.jsx)(a.z,{type:"submit",variant:"circle",disabled:i||h.isLoading,className:"paywall-group-form__submit-button",children:v?(0,n.t)("settings.paywall_groups.actions.update"):(0,n.t)("settings.paywall_groups.actions.create")})]})}})})},p=i.gk.create((function(e){var t=e.paywallGroup,r=e.refetchPaywallGroups;return(0,u.jsx)(d,{paywallGroup:t,refetchPaywallGroups:r})})),f=function(){return(0,i.dd)(p)}},14307:(e,t,r)=>{"use strict";r.d(t,{a:()=>b});var n=r(86013),i=r.n(n),o=r(83856),a=r(55675),s=r(3108),c=r(5295),l=r(71854),u=r(51548),d=r(30887),p=r(85893),f=function(){return(0,p.jsxs)("div",{className:"paywall-groups-list__info table-wrapper",children:[(0,p.jsx)("div",{children:(0,p.jsx)(d.JO,{type:"question-mark",className:"icon--sm paywall-groups-list__info__icon"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{children:i().t("settings.paywall_groups.headings.what_is")}),(0,p.jsxs)("p",{className:"paywall-groups-list__info__explanation text-dark",children:[i().t("settings.paywall_groups.alerts.info.what_is"),"\xa0",(0,p.jsx)("a",{href:"https://community.circle.so/c/paywalls/",target:"_blank",rel:"noreferrer",children:i().t("settings.paywall_groups.actions.learn_more")})]})]})]})},m=[{title:i().t("settings.paywall_groups.table.name"),dataIndex:"name",key:"name"},{title:i().t("settings.paywall_groups.table.paywalls"),dataIndex:"paywalls",key:"paywalls"},{title:" ",dataIndex:"actions",key:"actions"}],b=function(e){var t=e.shouldHideHeader,r=void 0!==t&&t,i=(0,l.X)(),d=(0,(0,u.W)({}).useListPaywallGroups)(),b=d.data,h=d.isLoading,v=d.refetch,y=function(e){var t=e.paywallGroup,r=void 0===t?null:t;return i.show({refetchPaywallGroups:v,paywallGroup:r})},g=null===b||void 0===b?void 0:b.map((function(e){return{key:e.id,name:(0,p.jsx)("div",{className:"whitespace-normal",children:e.name}),paywalls:(0,p.jsx)("div",{className:"whitespace-normal",children:e.paywalls_summary_text}),actions:(0,p.jsx)("button",{type:"button",onClick:function(){return y({paywallGroup:e})},className:"paywall-groups-list__link",children:(0,n.t)("settings.paywall_groups.actions.edit")})}}));return(0,p.jsxs)("div",{className:"paywall-groups-list",children:[!r&&(0,p.jsx)("div",{className:"table-wrapper",children:(0,p.jsxs)("div",{className:"flex justify-between",children:[(0,p.jsx)("h3",{children:(0,n.t)("settings.paywall_groups.title")}),(0,p.jsx)(a.z,{variant:"circle",onClick:y,children:(0,n.t)("settings.paywall_groups.actions.create_group")})]})}),(0,p.jsx)(f,{}),(0,p.jsx)("div",{children:h?(0,p.jsx)(c.a,{}):(null===b||void 0===b?void 0:b.length)>0&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.s,{className:"!px-0",children:(0,p.jsx)(o.s.Title,{children:(0,n.t)("settings.paywall_groups.count",{count:b.length})})}),(0,p.jsx)(s.w,{columns:m,dataSource:g||[],hasStickyHeader:!0,headerClassName:"top-[63px]"})]})})]})}},51548:(e,t,r)=>{"use strict";r.d(t,{W:()=>l});var n=r(86013),i=r.n(n),o=r(88767),a=r(34128),s=r(49326),c=r(21809),l=function(e){var t=e.closeModal,r=void 0===t?null:t,n=e.refetchPaywallGroups,l=void 0===n?null:n,u=(0,c.p)(),d=u.success,p=u.error;return{useListPaywallGroups:function(){return(0,o.useQuery)("paywall-groups",(function(){return(0,a.UT)(s.av.paywallGroup.index())}))},updateMutation:(0,o.useMutation)((function(e){return(0,a.aU)(s.av.paywallGroup.update({paywallGroupId:e.id}),{paywall_group:e})}),{onSuccess:function(){d(i().t("settings.paywall_groups.alerts.success.updated")),r(),l()},onError:function(e){console.error(e.errorDetails),p(e.errorDetails,{duration:"long"})}}),createMutation:(0,o.useMutation)((function(e){return(0,a.Cu)(s.av.paywallGroup.create(),{paywall_group:e})}),{onSuccess:function(){d(i().t("settings.paywall_groups.alerts.success.created")),r(),l()},onError:function(e){console.error(e.errorDetails),p(e.errorDetails,{duration:"long"})}}),useGetPaywallGroup:function(e){return(0,o.useQuery)("paywall-group-show",(function(){return(0,a.UT)(s.av.paywallGroup.show({paywallGroupId:e}))}))}}}},7275:(e,t,r)=>{"use strict";r.d(t,{S:()=>u});var n=r(88767),i=r(72675),o=r(75752),a=r(21809),s=r(14307),c=r(85893),l=new n.QueryClient(o.Vr),u=function(){return(0,c.jsx)(a.V,{children:(0,c.jsx)(n.QueryClientProvider,{client:l,children:(0,c.jsx)(i.yB,{children:(0,c.jsx)(s.a,{})})})})}},61286:(e,t,r)=>{"use strict";r.d(t,{y:()=>q});var n=r(86994),i=r(64830),o=r(5295),a=r(67294),s=r(4796),c=r(86646),l=r(74882),u=r(85893);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=(0,a.createContext)({});f.displayName="BulkImportTrialPaywallSubscriptionFormContext";var m=function(e){var t=e.paywallId,r=e.paywallPriceId,n=e.paywallTrialDays,i=e.paywallCouponCode,o=e.skipDateValidations,p=e.hideNotifyMemberForm,m=e.children,b=d((0,a.useState)(null!==t&&void 0!==t?t:""),2),h=b[0],v=b[1],y=d((0,a.useState)(null!==r&&void 0!==r?r:""),2),g=y[0],_=y[1],j=d((0,a.useState)(null!==n&&void 0!==n?n:""),2),x=j[0],w=j[1],O=d((0,a.useState)(null!==i&&void 0!==i?i:""),2),S={paywallId:h,setPaywallId:v,paywallPriceId:g,setPaywallPriceId:_,paywallTrialDays:x,setPaywallTrialDays:w,paywallCouponCode:O[0],setPaywallCouponCode:O[1],isPaywallLoading:(0,c.O)({communityMemberId:null,status:o?l.n:[s.Tl.ACTIVE]}).paywallsListQuery.isLoading,skipDateValidations:Boolean(o),hideNotifyMemberForm:p};return(0,u.jsx)(f.Provider,{value:S,children:m})},b=function(){return(0,a.useContext)(f)},h=r(86013),v=r(61149),y=r(66019),g=r(16743),_=function(e){var t=e.label,r=void 0===t?"":t,n=e.children;return(0,u.jsxs)("div",{className:"flex w-full flex-col pt-6",children:[(0,u.jsx)("div",{className:"pb-2",children:(0,u.jsx)(g.Z.LabelSm,{weight:"semibold",children:r})}),n]})},j=r(96486),x=function(e){var t=e.name,r=e.options,n=e.onChange,i=void 0===n?j.noop:n,o=e.disabled,a=void 0!==o&&o,s=e.value,c=void 0===s?"":s;return(0,u.jsx)("select",{className:"disabled:bg-secondary form-control w-full",name:t,onChange:i,disabled:a,value:c,children:r.map((function(e){var t=e.label,r=e.value;return(0,u.jsx)("option",{value:r,children:t},r)}))})},w=function(){var e=b(),t=e.paywallId,r=e.paywallCouponCode,n=e.setPaywallCouponCode,i=e.skipDateValidations,o=(0,y.n)({paywallId:t,selectCouponString:(0,h.t)("bulk_import_page.paywall.choose_coupon"),couponStatuses:i?y.m:[v.DP.ACTIVE],skipDateValidations:i}).couponCodeOptions,s=(0,a.useRef)(t);return(0,a.useEffect)((function(){s.current!==t&&(n(""),s.current=t)}),[t,n]),(0,u.jsx)(_,{label:(0,h.t)("create_paywall_subscription_modal.form.coupon"),children:(0,u.jsx)(x,{name:"paywall[paywall_coupon_code]",options:o,disabled:1===o.length,onChange:function(e){var t;n(null!==(t=e.target.value)&&void 0!==t?t:r)},value:r})})},O=r(97646);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){var t=e.disabled,r=void 0!==t&&t,n=b().hideNotifyMemberForm,i=S((0,a.useState)(!1),2),o=i[0],s=i[1];return n?null:(0,u.jsxs)("div",{className:"flex flex-col gap-y-4 pt-8",children:[(0,u.jsx)(g.Z.LabelSm,{weight:"semibold",children:(0,h.t)("bulk_import_page.paywall.notify_member")}),(0,u.jsxs)("div",{className:"flex flex-row gap-x-4 py-2",children:[(0,u.jsx)(O.Zh,{field:"paywall[paywall_send_notification_subscription_created_by_admin]",disabled:r,value:o,onChange:function(){s(!o)}}),(0,u.jsx)("div",{className:"flex flex-col",children:(0,u.jsx)("span",{children:(0,h.t)("bulk_import_page.paywall.notify_member_description")})})]})]})};function k(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var I={label:(0,h.t)("bulk_import_page.paywall.choose_paywall"),value:""},A=function(){var e=b(),t=e.paywallId,r=e.setPaywallId,n=e.skipDateValidations,i=(0,l.h)({communityMemberId:null,paywallStatuses:n?l.n:[s.Tl.ACTIVE]}).paywallOptions;return(0,u.jsx)(_,{label:(0,h.t)("create_paywall_subscription_modal.form.paywall_id"),children:(0,u.jsx)(x,{name:"paywall[paywall_id]",options:[I].concat(k(i)),onChange:function(e){var n;r(null!==(n=e.target.value)&&void 0!==n?n:t)},value:t})})},E=r(58447);function D(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var L={label:(0,h.t)("bulk_import_page.paywall.choose_term"),value:""},M=function(){var e=b(),t=e.paywallId,r=e.paywallPriceId,n=e.setPaywallPriceId,o=(0,i.U)().paywallsIndex,a=(0,E.n)({paywall:o[t]}).paywallPriceOptions;return(0,u.jsx)(_,{label:(0,h.t)("create_paywall_subscription_modal.form.paywall_price_id"),children:(0,u.jsx)(x,{name:"paywall[paywall_price_id]",options:[L].concat(D(a)),disabled:0===a.length,onChange:function(e){var t;n(null!==(t=e.target.value)&&void 0!==t?t:r)},value:r})})},R=r(94184),B=r.n(R),U=r(28028),F=r(49729),z=function(){var e=b(),t=e.paywallId,r=e.paywallTrialDays,n=e.setPaywallTrialDays,i=""===t,o=(0,a.useRef)(t);return(0,a.useEffect)((function(){o.current!==t&&(n(""),o.current=t)}),[t,n]),(0,u.jsx)(_,{label:(0,h.t)("create_paywall_subscription_modal.form.trial_days_toggle"),children:(0,u.jsx)(F.I,{name:"paywall[paywall_trial_days]",suffix:(0,h.t)("create_paywall_subscription_modal.form.trial_days_suffix"),disabled:i,otherClassName:B()("",{"!opacity-100 !bg-secondary":i}),value:r,onChange:function(e){var t=""===e.target.value?NaN:Number(e.target.value);isNaN(t)?n(""):t<U.dy?n(1):t>U.ut?n(U.ut):n(t)}})})},V=function(){return b().isPaywallLoading?(0,u.jsx)(o.a,{}):(0,u.jsxs)("div",{className:"flex flex-col pb-6",children:[(0,u.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,u.jsx)(A,{}),(0,u.jsx)(M,{})]}),(0,u.jsxs)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:[(0,u.jsx)(w,{}),(0,u.jsx)(z,{})]}),(0,u.jsx)("div",{className:"flex flex-col gap-x-5 md:flex-row",children:(0,u.jsx)(C,{})})]})},q=function(e){var t=e.paywall_id,r=e.paywall_price_id,o=e.paywall_trial_days,a=e.paywall_coupon_code,s=e.paywall_skip_date_validations,c=void 0===s||s,l=e.hide_notify_member_form,d=void 0!==l&&l;return(0,u.jsx)(n.aH,{children:(0,u.jsx)(i.X,{children:(0,u.jsx)(m,{paywallId:t,paywallPriceId:r,paywallTrialDays:o,paywallCouponCode:a,skipDateValidations:c,hideNotifyMemberForm:d,children:(0,u.jsx)(V,{})})})})}},13870:(e,t,r)=>{"use strict";r.d(t,{n:()=>s});var n=r(86013),i=r(16743),o=r(85893),a="settings.paywalls_admin_dashboard.filters.empty_page",s=function(){var e=(0,n.t)([a,"title"]),t=(0,n.t)([a,"subtitle"]);return(0,o.jsx)("div",{className:"text-dark max-w-8xl mx-auto p-4 lg:px-6 lg:py-4",children:(0,o.jsxs)("div",{className:"bg-primary border-primary border p-6 text-center lg:rounded-lg lg:p-36 ",children:[(0,o.jsx)(i.Z.TitleSm,{weight:"bold",children:e}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)(i.Z.BodyMd,{color:"text-default",children:t})})]})})}},16157:(e,t,r)=>{"use strict";r.d(t,{x:()=>k});var n=r(86013),i=r(94184),o=r.n(i),a=r(84012),s=r(7090),c=r(758),l=r(67294),u=r(96486);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=e.filters,r=e.defaultFilterItems,n=(0,a.Xt)(),i=n.queryParams,o=n.removeQueryParams,s=(0,u.flatten)(t.map((function(e){return e.filterKeys}))),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set,t=d((0,l.useState)(e),2),r=t[0],n=t[1];return[r,{add:function(e){n((function(t){if(t.has(e))return t;var r=new Set(t);return r.add(e),r}))},remove:function(e){n((function(t){var r=new Set(t);return r.delete(e),r}))},reset:function(){n((function(){return e}))},clear:function(){n((function(){return new Set}))}}]}((function(){var e=new Set(r);return t.forEach((function(t){Object.keys(i).includes(t.name)&&e.add(t.name),void 0!=t.value&&e.add(t.name)})),e})),p=m(c,2),h=p[0],v=p[1],y=v.add,g=v.remove,_=v.clear,j=(0,l.useMemo)((function(){var e,t=0,n=function(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=b(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(r);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(Object.prototype.hasOwnProperty.call(i,o))return!0;h.has(o)&&(t+=1)}}catch(a){n.e(a)}finally{n.f()}return h.size>t}),[h,i,r]),x=(0,l.useCallback)((function(e){var t=f(h);return t.length?{availableFilters:e.filter((function(e){return!t.includes(e.name)})),displayedFilters:e.filter((function(e){return t.includes(e.name)}))}:{availableFilters:e,displayedFilters:[]}}),[h]);return{isClearFiltersShown:j,getSplitAndAvailableFilters:x,onClearFilters:function(){o(f(s)),_(),r.forEach(y)},onAddFilter:function(e){y(e)},onRemoveFilter:function(e,t){e||g(t)}}},y=r(85893),g=["isClearFiltersShown","onClearFilters"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var P=function(e){var t=e.defaultFilters,r=void 0===t?[]:t,n=e.customFilters,i=void 0===n?[]:n,l=e.defaultFilterItems,u=void 0===l?[]:l,d=e.className,p=e.showClearButton,f=void 0===p||p,m=e.label,b=v({filters:[].concat(w(r),w(i)),defaultFilterItems:u}),h=b.isClearFiltersShown,_=b.onClearFilters,x=S(b,g);return(0,y.jsxs)(c.I,{className:o()("w-full",d),children:[(0,y.jsx)(s.S,j({defaultFilters:r,customFilters:i,label:m},x)),f&&(0,y.jsx)(a.Cd,{isVisible:h,onClick:_})]})},C=r(53517),k=function(e){var t=e.filterNames,r=e.customFilterNames,i=(0,C.mN)(t,r).defaultFilters;return(0,y.jsx)(P,{label:(0,n.t)([C.po,"add_filter"]),defaultFilterItems:t,defaultFilters:i})}},53517:(e,t,r)=>{"use strict";r.d(t,{Oq:()=>Ut,lO:()=>Ft,po:()=>Bt,oq:()=>zt,mN:()=>Vt});var n=r(96486),i=r(86013),o=r(84012),a=r(46854),s=r(59729),c=r(55675),l=r(61926),u=r(85893);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){var t,r=e.lteValue,n=e.gteValue,o=e.localeRoot,p=e.queryParamsKey,f=(0,s.j)().onApply,m=function(e){return e.replace(/\D/g,"")},b=Intl.NumberFormat("en-US",{minimumFractionDigits:2}),h=(0,a.r)(),v=function(e){if("0.0"===e||""===e||null===e||void 0===e)return"";var t=Number(m(e));return isNaN(t)?b.format(0):b.format(t/100)};return(0,u.jsx)(l.l,{defaultValues:(t={},d(t,p.lte,v(r)),d(t,p.gte,v(n)),t),onSubmit:function(e){var t,r=parseInt(m(e[p.lte])),n=parseInt(m(e[p.gte]));f((d(t={},p.lte,r),d(t,p.gte,n),t))},children:(0,u.jsxs)("div",{className:"flex min-w-[18rem] flex-col gap-y-4 p-4",children:[(0,u.jsx)(l.l.Input,{name:p.gte,placeholder:(0,i.t)([o,"min_amount_placeholder"]),autoFocus:!0,transformValue:v}),(0,u.jsx)(l.l.Input,{name:p.lte,placeholder:(0,i.t)([o,"max_amount_placeholder"]),transformValue:v}),(0,u.jsx)(c.z,{variant:h,type:"submit",full:!0,children:(0,i.t)("filters.apply")})]})})},f={amount:"amount",lte:"amount_lte",gte:"amount_gte"},m=function(e){var t=e.isInitialOpen,r=e.changeUrl,a=void 0===r||r,s=e.queryParamsKey,c=void 0===s?f:s,l=e.localeRoot,d=void 0===l?"settings.paywalls_admin_dashboard.filters.amount":l,m=(0,o.Xt)(),b=m.queryParams,h=m.updateUrl,v=b[c.lte],y=b[c.gte],g=Number(v)||0,_=Number(y)||0,j=isNaN(g)||isNaN(_)?"":(0,n.compact)([_/100,g/100]).join("-");return(0,u.jsx)(o.wn,{chip:(0,i.t)([d,"chip"]),title:(0,i.t)([d,"title"]),selectedText:j,isInitialOpen:t,onApply:function(e){var t=null!==e&&void 0!==e?e:{},r=t[c.lte],n=t[c.gte];a&&(h("page",1),h(c.lte,isNaN(r)?null:r),h(c.gte,isNaN(n)?null:n))},shouldShowRemoveButton:!0,children:(0,u.jsx)(p,{lteValue:v,gteValue:y,localeRoot:d,queryParamsKey:c})})};function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={amount_paid:"amount",lte:"amount_lte",gte:"amount_gte"},y="settings.paywalls_admin_dashboard.filters.amount",g={name:"amount",filterKeys:Object.values(v),component:function(e){return(0,u.jsx)(m,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({queryParamsKey:v,localeRoot:y},e))},label:(0,i.t)([y,"chip"])};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x={total_amount_paid:"total_amount_paid",lte:"total_amount_paid_lte",gte:"total_amount_paid_gte"},w="settings.paywalls_admin_dashboard.filters.total_amount_paid",O={name:"total_amount_paid",filterKeys:Object.values(x),component:function(e){return(0,u.jsx)(m,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({queryParamsKey:x,localeRoot:w},e))},label:(0,i.t)([w,"chip"])},S=r(56874);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k="settings.paywalls_admin_dashboard.filters.status",N="status",I={name:"charge_status",filterKeys:[N],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),c=s.queryParams,l=s.updateUrl,d=S.mB.map((function(e){return{label:(0,i.t)([k,"options",e]),value:e}}));return(0,u.jsx)(o.wn,{chip:(0,i.t)([k,"chip"]),title:(0,i.t)([k,"title"]),selectedText:a||c[N],renderSelectedText:function(e){return(0,u.jsx)(o.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:d},e))},isInitialOpen:t,onApply:function(e){l("page",1),n&&l(N,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.l6,{options:d,legend:(0,i.t)([k,"legend"]),name:"subscription-statuses-filter",activeText:null!==a&&void 0!==a?a:c[N]})})},label:(0,i.t)([k,"chip"])},A=function(e){var t=e.isInitialOpen,r=e.onApply,a=e.changeUrl,s=void 0===a||a,c=e.value,l=e.localeRoot,d=void 0===l?"settings.paywalls_admin_dashboard.filters.community_member_email":l,p=(0,o.Xt)(),f=p.queryParams,m=p.updateUrl;return(0,u.jsx)(o.wn,{chip:(0,i.t)([d,"title"]),title:(0,i.t)([d,"title"]),selectedText:c||f.email,isInitialOpen:t,onApply:function(e){s&&m("email",e),(0,n.isFunction)(r)&&r(e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.xo,{name:"email-filter",placeholder:(0,i.t)([d,"placeholder"])})})};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L={name:"community_member_email",filterKeys:["email"],component:function(e){return(0,u.jsx)(A,D(D({},e),{},{onApply:n.noop}))},label:(0,i.t)(["settings.paywalls_admin_dashboard.filters.community_member_email","title"])},M=function(e){var t=e.isInitialOpen,r=e.onApply,a=e.changeUrl,s=void 0===a||a,c=e.value,l=e.localeRoot,d=void 0===l?"settings.paywalls_admin_dashboard.filters.community_member_name":l,p=(0,o.Xt)(),f=p.queryParams,m=p.updateUrl;return(0,u.jsx)(o.wn,{chip:(0,i.t)([d,"title"]),title:(0,i.t)([d,"title"]),selectedText:c||f.name,isInitialOpen:t,onApply:function(e){s&&m("name",e),(0,n.isFunction)(r)&&r(e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.xo,{name:"name-filter",placeholder:(0,i.t)([d,"placeholder"])})})};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F={name:"community_member_name",filterKeys:["name"],component:function(e){return(0,u.jsx)(M,B(B({},e),{},{onApply:n.noop}))},label:(0,i.t)(["settings.paywalls_admin_dashboard.filters.community_member_name","title"])},z=r(91741);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G="settings.paywalls_admin_dashboard.filters.currency",H="currency",W={name:"currency",filterKeys:["currency"],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),c=s.queryParams,l=s.updateUrl,d=(0,z.K)(),p=d.data;if(d.isLoading||!p)return null;var f=p.map((function(e){return{label:e.code.toUpperCase(),value:e.code}}));return(0,u.jsx)(o.wn,{chip:(0,i.t)([G,"chip"]),title:(0,i.t)([G,"title"]),selectedText:a||c[H],renderSelectedText:function(e){return(0,u.jsx)(o.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:f},e))},isInitialOpen:t,onApply:function(e){l("page",1),n&&l(H,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.l6,{options:f,legend:(0,i.t)([G,"legend"]),name:"paywalls-filter",activeText:null!==a&&void 0!==a?a:c[H]})})},label:(0,i.t)([G,"chip"])},Z=r(67294),J=r(48895),$=r(15953),Q=r(87536),K=r(38776),X=r(15830),Y="settings.paywalls_admin_dashboard.filters.start_date",ee={default:"start_date",lte:"start_date_lte",gte:"start_date_gte"},te="date_range",re="last_seven_days",ne="last_four_weeks",ie="last_three_months",oe="last_twelve_months",ae="month_to_date",se="quarter_to_date",ce="year_to_date";function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pe=(0,Z.forwardRef)((function(e,t){return(0,u.jsx)("input",ue(ue({},e),{},{className:"placeholder:text-light min-w-[18rem] border-none bg-transparent p-0 text-center text-xs font-medium leading-4 placeholder:opacity-100 focus:outline-none focus:ring-0",ref:t}))}));function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}pe.displayName="DatePickerInput";var be=(0,Z.createContext)(null);be.displayName="DateRangePickerContext";var he=function(e){var t=e.queryParamsKey,r=e.children,n=fe((0,Z.useState)(null!==t&&void 0!==t?t:{}),2),i={queryParamsKey:n[0],setQueryParamsKey:n[1]};return(0,u.jsx)(be.Provider,{value:i,children:r})},ve=function(){var e=(0,Z.useContext)(be);if(!e)throw new Error("useDateRangePickerContext must be used within a DateRangePickerContext");return e};function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){_e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var we,Oe=r(1002);function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pe=(Se(we={},re,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()-7),endDate:e}})),Se(we,ne,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),e.getDate()-28),endDate:e}})),Se(we,ie,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth()-3,e.getDate()),endDate:e}})),Se(we,oe,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth()-12,e.getDate()),endDate:e}})),Se(we,ae,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear(),e.getMonth(),1),endDate:e}})),Se(we,se,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=Math.floor(e.getMonth()/3),r=e.getFullYear();return{startDate:new Date(r,3*t,1),endDate:e}})),Se(we,ce,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return{startDate:new Date(e.getFullYear()-1,e.getMonth(),e.getDate()),endDate:e}})),we),Ce=Object.assign((function(e){var t=e.children,r=e.className,n=void 0===r?"":r,i=e.defaultQueryParams,o=e.defaultValues,a=(0,s.j)().onApply;return(0,u.jsx)(he,{queryParamsKey:i,children:(0,u.jsx)(l.l,{onSubmit:a,defaultValues:o,children:(0,u.jsx)("div",{className:n,children:t})})})}),{RangePicker:function(){var e=ve().queryParamsKey,t=(0,Q.Gc)(),r=t.watch,i=t.setValue,o=r(e.default),a=(0,Z.useRef)(null);if(o!==te)return null;var s=new Date,c=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1);return(0,u.jsx)($.Z,{ref:a,options:{mode:"range",dateFormat:"M j, Y",defaultDate:[c,s],maxDate:s,onReady:function(){(0,n.defer)((function(){var e,t=null===(e=a.current)||void 0===e?void 0:e.flatpickr;(0,K.Z)(t,"flatPickrInstance is null"),t.calendarContainer.classList.add("settings-app")}))},static:!0,locale:(0,X.bS)()},className:"w-full",render:function(e,t){return(0,u.jsx)("button",{type:"button",className:"border-primary focus-within:bg-tertiary text-selector-active focus-visible:!outline-secondary flex flex-col items-center justify-center gap-x-2 rounded-md border px-3 py-2 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",onClick:function(){var e,t,r;null===(e=a.current)||void 0===e||null===(t=e.flatpickr)||void 0===t||null===(r=t.open)||void 0===r||r.call(t)},children:(0,u.jsx)(pe,ge({ref:t},e))})},onChange:function(t){var r=je(t,2),n=r[0],o=r[1];n&&o&&(n.setHours(0,0,0,0),o.setHours(23,59,59,999),i(e.gte,n.getTime()),i(e.lte,o.getTime()))}})},DropdownOptions:function(){var e=ve().queryParamsKey,t=(0,Q.Gc)(),r=t.watch,n=t.setValue,o=r(e.default);(0,Z.useEffect)((function(){if(Pe[o]){var t=Pe[o](),r=t.startDate,i=t.endDate;r.setHours(0,0,0,0),i.setHours(23,59,59,999),n(e.gte,r.getTime()),n(e.lte,i.getTime())}}),[o,e.gte,e.lte,n]);var a=[re,ne,ie,oe,ae,se,ce,te].map((function(e){return{value:e,label:(0,i.t)([Y,"options",e])}}));return(0,u.jsx)(Oe.Lt,{onChange:function(t){n(e.default,t)},options:a,size:"full",className:"w-full rounded-lg border px-4 py-2",buttonWrapperClassName:"flex flex-col",linkType:"button",popperOptions:{modifiers:[{name:"offset",options:{offset:[34,15]}}]},button:(0,u.jsx)(Oe.Lt.ActiveLabelButton,{className:"flex w-full justify-between",options:a,activeOptionValue:o||re})})}});function ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ae=function(e){var t,r=e.isInitialOpen,s=e.changeUrl,l=void 0===s||s,d=e.value,p=e.queryParamsKey,f=void 0===p?ee:p,m=e.localeRoot,b=void 0===m?Y:m,h=(0,o.Xt)(),v=h.queryParams,y=h.updateUrl,g=Ne((0,Z.useState)(re),2),_=g[0],j=g[1],x=(0,a.r)(),w=Number(v[f.lte]),O=Number(v[f.gte]),S=new Date(w),P=new Date(O),C=(0,n.compact)([isNaN(P.getTime())?null:(0,J.w)({dateTime:P,format:J.f.short_date}),isNaN(S.getTime())?null:(0,J.w)({dateTime:S,format:J.f.short_date})]).join("-");return(0,u.jsx)(o.wn,{chip:(0,i.t)([b,"chip"]),title:(0,i.t)([b,"title"]),selectedText:d||C,isInitialOpen:r,renderSelectedText:function(){return C},onApply:function(e){var t=null!==e&&void 0!==e?e:{},r=t[f.default],n=t[f.lte],i=t[f.gte];l&&(y("page",1),y(f.default,r),y(f.lte,n),y(f.gte,i)),j(r)},shouldShowRemoveButton:!0,children:(0,u.jsxs)(Ce,{className:"flex min-w-[18rem] flex-col gap-y-4 p-4",defaultQueryParams:f,defaultValues:(t={},ke(t,f.default,_||re),ke(t,f.lte,null===S||void 0===S?void 0:S.getTime()),ke(t,f.gte,null===P||void 0===P?void 0:P.getTime()),t),children:[(0,u.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,u.jsx)(Ce.DropdownOptions,{}),(0,u.jsx)(Ce.RangePicker,{})]}),(0,u.jsx)(c.z,{variant:x,type:"submit",full:!0,children:(0,i.t)("filters.apply")})]})})};function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){Te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Le="settings.paywalls_admin_dashboard.filters.date",Me={default:"created_at",lte:"created_at_lte",gte:"created_at_gte"},Re={name:"created_at",filterKeys:Object.values(Me),component:function(e){return(0,u.jsx)(Ae,De(De({},e),{},{queryParamsKey:Me,localeRoot:Le}))},label:(0,i.t)([Le,"chip"])};function Be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(r),!0).forEach((function(t){Fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ze="settings.paywalls_admin_dashboard.filters.start_date",Ve={default:"start_date",lte:"start_date_lte",gte:"start_date_gte"},qe={name:"start_date",filterKeys:Object.values(Ve),component:function(e){return(0,u.jsx)(Ae,Ue(Ue({},e),{},{queryParamsKey:Ve,localeRoot:ze}))},label:(0,i.t)([ze,"chip"])},Ge=r(48108),He=function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=e.queryParamsKey,c=e.localeRoot,l=(0,o.Xt)(),d=l.queryParams,p=l.updateUrl,f=null!==a&&void 0!==a?a:d[s];return(0,u.jsx)(o.wn,{chip:(0,i.t)([c,"chip"]),title:(0,i.t)([c,"title"]),selectedText:a||d[s],renderSelectedText:function(){return f},isInitialOpen:t,onApply:function(e){p("page",1),n&&p(s,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(Ge.x,{name:s,placeholder:(0,i.t)([c,"input_placeholder"]),autoFocus:!0,autoComplete:"off"})})};function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach((function(t){Je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $e="settings.paywalls_admin_dashboard.filters.invoice_id",Qe={name:"invoice_processor_id",filterKeys:["invoice_processor_id"],component:function(e){return(0,u.jsx)(He,Ze(Ze({},e),{},{localeRoot:$e,queryParamsKey:"invoice_processor_id"}))},label:(0,i.t)([$e,"chip"])};function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){Ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var et="settings.paywalls_admin_dashboard.filters.subscription_id",tt={name:"subscription_processor_id",filterKeys:["subscription_processor_id"],component:function(e){return(0,u.jsx)(He,Xe(Xe({},e),{},{localeRoot:et,queryParamsKey:"subscription_processor_id"}))},label:(0,i.t)([et,"chip"])};function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(r),!0).forEach((function(t){it(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ot="settings.paywalls_admin_dashboard.filters.transaction_id",at={name:"transaction_id",filterKeys:["transaction_id"],component:function(e){return(0,u.jsx)(He,nt(nt({},e),{},{localeRoot:ot,queryParamsKey:"transaction_id"}))},label:(0,i.t)([ot,"chip"])},st=r(88767),ct=r(34128),lt=r(49326),ut=r(73203),dt="members_directory.header.search.filters.member_name_or_email",pt="community_member_id",ft={name:"community_member_id",filterKeys:["community_member_id"],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),c=s.queryParams,l=s.updateUrl,d=null!==a&&void 0!==a?a:c[pt],p=(0,st.useQuery)(["community-members-subscription-community-member-id",d],(function(){return(0,ct.UT)(lt.av.search.communityMembers.index({params:{page:1,per_page:10,filters:{id:d}}}))}),{enabled:!!d}).data,f=null===p||void 0===p?void 0:p.records[0];return(0,u.jsx)(o.wn,{chip:(0,i.t)([dt,"filter_chip"]),title:(0,i.t)([dt,"title"]),selectedText:d,renderSelectedText:function(){var e;return null!==(e=null===f||void 0===f?void 0:f.name)&&void 0!==e?e:d},isInitialOpen:t,onApply:function(e){n&&l(pt,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(ut.R,{record:f,recordType:"CommunityMember",searchInputPlaceholder:(0,i.t)([dt,"placeholder"]),onApply:function(e){l("page",1),n&&l(pt,e)}})})},label:(0,i.t)(["settings.paywalls_admin_dashboard.filters.members","chip"])},mt=r(36762),bt=r(53828),ht=r(5295);function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gt=function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=e.localeRoot,c=e.queryParamsKey,l=e.filterName,d=e.filterParams,p=void 0===d?{}:d,f=(0,o.Xt)(),m=f.queryParams,b=f.updateUrl,h=(0,bt.k)(l,p),v=h.paywalls,y=h.isPaywallsLoading;return(0,u.jsx)(o.wn,{chip:(0,i.t)([s,"chip"]),title:(0,i.t)([s,"title"]),selectedText:a||m[c],renderSelectedText:function(e){return(0,u.jsx)(o.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){yt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:v},e))},isInitialOpen:t,onApply:function(e){b("page",1),n&&b(c,e)},shouldShowRemoveButton:!0,children:y?(0,u.jsx)(ht.a,{}):(0,u.jsx)(o.l6,{options:v,legend:(0,i.t)([s,"legend"]),name:l,activeText:null!==a&&void 0!==a?a:m[c],hasSearch:!0,searchProps:{placeholder:(0,i.t)([s,"input_placeholder"])}})})};function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){xt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wt="settings.paywalls_admin_dashboard.filters.events",Ot={name:"events",filterKeys:["events"],component:function(e){return(0,u.jsx)(gt,jt(jt({},e),{},{localeRoot:wt,queryParamsKey:"events",filterName:"event-paywalls-filter",filterParams:{type:[mt.Ex.event]}}))},label:(0,i.t)([wt,"chip"])};function St(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?St(Object(r),!0).forEach((function(t){Ct(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kt="settings.paywalls_admin_dashboard.filters.paywalls",Nt={name:"paywalls",filterKeys:["paywalls"],component:function(e){return(0,u.jsx)(gt,Pt(Pt({},e),{},{localeRoot:kt,queryParamsKey:"paywalls",filterName:"paywalls-filter",filterParams:{type:[mt.Ex.space]}}))},label:(0,i.t)([kt,"chip"])},It=r(35144);function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dt="settings.paywalls_admin_dashboard.filters.status",Tt="status",Lt={name:"subscription_status",filterKeys:[Tt],component:function(e){var t=e.isInitialOpen,r=e.changeUrl,n=void 0===r||r,a=e.value,s=(0,o.Xt)(),c=s.queryParams,l=s.updateUrl,d=It.mB.map((function(e){return{label:(0,i.t)([Dt,"options",e]),value:e}}));return(0,u.jsx)(o.wn,{chip:(0,i.t)([Dt,"chip"]),title:(0,i.t)([Dt,"title"]),selectedText:a||c[Tt],renderSelectedText:function(e){return(0,u.jsx)(o.L2,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){Et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({items:d},e))},isInitialOpen:t,onApply:function(e){l("page",1),n&&l(Tt,e)},shouldShowRemoveButton:!0,children:(0,u.jsx)(o.l6,{options:d,legend:(0,i.t)([Dt,"legend"]),name:"subscription-statuses-filter",activeText:null!==a&&void 0!==a?a:c[Tt]})})},label:(0,i.t)([Dt,"chip"])};function Mt(e){return function(e){if(Array.isArray(e))return Rt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Bt="settings.paywalls_admin_dashboard.filters",Ut={community_member_id:ft,currency:W,created_at:Re,community_member_email:L,community_member_name:F,paywalls:Nt,amount:g,charge_status:I,invoice_processor_id:Qe,transaction_id:at,events:Ot,subscription_status:Lt,subscription_id:tt,total_amount_paid:O,start_date:qe},Ft={subscriptions:{community_member_id:"community_member_id",currency:"currency",email:"email",paywalls:"paywall_ids",name:"query",start_date_gte:"created_at_gte",start_date_lte:"created_at_lte",status:"status",subscription_processor_id:"processor_id",total_amount_paid_gte:"total_amount_paid_gte",total_amount_paid_lte:"total_amount_paid_lte"},charges:{amount_gte:"amount_gte",amount_lte:"amount_lte",community_member_id:"community_member_id",created_at_gte:"created_at_gte",created_at_lte:"created_at_lte",currency:"currency",email:"email",invoice_processor_id:"invoice_processor_id",paywalls:"paywall_ids",events:"paywall_ids",name:"query",status:"display_status",subscription_processor_id:"subscription_processor_id",transaction_id:"processor_id"}},zt=function(e,t){var r={};return Object.keys(t).forEach((function(n){if(e[n]){var i=t[n];r[i]=e[n]}})),r},Vt=function(e,t){var r=(0,n.compact)((null!==e&&void 0!==e?e:[]).map((function(e){return Ut[e]}))),i=(0,n.compact)((null!==t&&void 0!==t?t:[]).map((function(e){return Ut[e]})));return{defaultFilters:[].concat(Mt(r),Mt(i))}}},37601:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var n=r(97012),i=function(){var e,t=(0,n.wh)().currentCommunity;return null===t||void 0===t||null===(e=t.policies)||void 0===e?void 0:e.is_paywall_payment_settings_available}},76568:(e,t,r)=>{"use strict";r.d(t,{y:()=>oe});var n=r(88767),i=r(75752),o=r(21809),a=r(86013),s=r(43422),c=r(49942),l=r(97012),u=r(61926),d=r(73839),p=r(13870),f=r(67294),m=r(86521),b=r(28305);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g,_,j=r(85893),x=function(e){var t=e.chargesData,r=e.activeFilterTab,n=e.refetchAllCharges,i=function(e){var t=e.chargesData;(0,f.useEffect)((function(){var e;0===(null===t||void 0===t||null===(e=t.charges)||void 0===e?void 0:e.length)&&(null===t||void 0===t?void 0:t.totalCharges)>0&&t.setPage(1)}));var r=(0,m.a)(),n=function(e){var t=e.cell,n=t.column.id,i=t.row.original;"customer"!==n&&r.show({charge:i,shouldOpenAdminMemberEdit:!0})};return{onClickPagination:function(e){t.setPage(e)},columnsToRender:b.sK.map((function(e){return v(v({},e),{},{onClick:n})}))}}({chargesData:t}),o=i.onClickPagination,a=i.columnsToRender;return t.hasFilters&&0===t.totalCharges&&!t.isLoadingCharges?(0,j.jsx)(p.n,{}):(0,j.jsx)(d.OA,{shouldOpenAdminMemberEdit:!0,refetchAllCharges:n,children:(0,j.jsx)(d.uo,{columnsToRender:a,chargesData:t,onClickPagination:o,className:"px-6"},r)})},w=r(10159),O=r(55675),S=function(e){var t=e.totalChargesCount,r=(0,w.Q)().show,n=t<=0;return(0,j.jsx)(O.z,{variant:"circle",onClick:function(){r({relation:"charges"})},type:"button",disabled:n,children:(0,a.t)("export_paywall_csv.modal.export_cta")})},P=r(26981),C=r(37461),k=function(e){var t=e.totalChargesCount;return t<=0?null:(0,j.jsx)(P.w.Headline,{className:"flex flex-row",children:(0,j.jsx)(P.w.Headline.Title,{children:(0,a.t)("settings.paywalls_admin_dashboard.charges.count",{count:(0,C.V)(t)})})})},N=r(82887),I=r(5295),A=r(49326),E=function(){var e,t=(0,o.p)().error,r={isChargeStatsLoading:(e=(0,n.useQuery)(A.av.admin.paywalls.charges.stats.index())).isLoading,chargeStats:e.data,chargeStatsError:e.error},i=r.isChargeStatsLoading,s=r.chargeStats,c=r.chargeStatsError;if((0,f.useEffect)((function(){c&&t(c.message)}),[c]),!i&&c)return null;var l=[{label:(0,a.t)("settings.paywall_charge_stats.total_revenue.label"),tooltip:(0,a.t)("settings.paywall_charge_stats.total_revenue.tooltip"),value:null===s||void 0===s?void 0:s.total_revenue_as_currency},{label:(0,a.t)("settings.paywall_charge_stats.total_refunded.label"),tooltip:(0,a.t)("settings.paywall_charge_stats.total_refunded.tooltip"),value:null===s||void 0===s?void 0:s.total_refunded_as_currency},{label:(0,a.t)("settings.paywall_charge_stats.sales_taxes.label"),tooltip:(0,a.t)("settings.paywall_charge_stats.sales_taxes.tooltip"),value:null===s||void 0===s?void 0:s.sales_taxes_as_currency},{label:(0,a.t)("settings.paywall_charge_stats.affiliate_earnings.label"),tooltip:(0,a.t)("settings.paywall_charge_stats.affiliate_earnings.tooltip"),value:null===s||void 0===s?void 0:s.affiliate_earnings_as_currency}];return(0,j.jsx)(j.Fragment,{children:i?(0,j.jsx)(I.a,{center:!0}):(0,j.jsx)("div",{className:"my-3 grid grid-cols-1 px-6 md:grid-cols-4 md:gap-6",children:l.map((function(e){return(0,j.jsx)(N.t,{number:e.value,label:e.label,tooltipText:e.tooltip},e.label)}))})})},D=r(17260),T=r(16157),L=r(87536),M=r(74749),R=r(56874);function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var U={ALL:"all",PAID:"paid",REFUNDED:"refunded",FAILED:"failed"},F=(B(g={},U.ALL,(0,a.t)("settings.paywalls_admin_dashboard.charges.tabs.all")),B(g,U.PAID,(0,a.t)("settings.paywalls_admin_dashboard.charges.tabs.paid")),B(g,U.REFUNDED,(0,a.t)("settings.paywalls_admin_dashboard.charges.tabs.refunded")),B(g,U.FAILED,(0,a.t)("settings.paywalls_admin_dashboard.charges.tabs.failed")),g),z=(B(_={},U.ALL,null),B(_,U.PAID,[R.Q_.PAID,R.Q_.PARTIAL_REFUNDED].join(",")),B(_,U.REFUNDED,R.Q_.REFUNDED),B(_,U.FAILED,R.Q_.FAILED),_);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G=["community_member_name","community_member_email","community_member_id","charge_status","paywalls","events","amount","created_at","subscription_id"],H=["currency","transaction_id","invoice_processor_id"],W=function(e){var t=e.setActiveFilterTab,r=e.activeFilterTab,n=e.setSearchKey,i=function(e,t,r){var n=(0,M.B)({filters:{display_status:z[U.ALL]},perPage:1}),i=(0,M.B)({filters:{display_status:z[U.PAID]},perPage:1}),o=(0,M.B)({filters:{display_status:z[U.REFUNDED]},perPage:1}),a=(0,M.B)({filters:{display_status:z[U.FAILED]},perPage:1}),s=[[U.ALL,n],[U.PAID,i],[U.REFUNDED,o],[U.FAILED,a]].map((function(e){var t=V(e,2),r=t[0],n=t[1];return{value:r,label:F[r],badge:{value:n.totalCharges}}})),c=(0,L.Gc)().reset;return{tabOptions:s,changeTabAndResetForm:function(n){c({searchKey:""}),t(""),e(n),r()}}}(t,n,e.resetAllChargesToFirstPage),o=i.tabOptions,a=i.changeTabAndResetForm,s=o.findIndex((function(e){return e.value===r}));return(0,j.jsxs)("div",{className:"border-primary",children:[(0,j.jsx)(D.O.Group,{selectedIndex:s,children:(0,j.jsx)(D.O.List,{className:"border-primary border-b px-6 py-0",children:o.map((function(e){return(0,j.jsxs)(D.O,{onClick:function(){return a(e.value)},children:[e.label,(0,j.jsx)(D.O.Counter,{children:e.badge.value})]},e.value)}))})}),(0,j.jsx)(T.x,{setSearchKey:n,filterNames:G,customFilterNames:H})]})},Z=r(24185),J=r(72810),$=r(53517),Q=r(649);function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re={created_at:"desc"},ne=function(){var e,t=function(){var e,t=(0,Z.k6)(),r=(0,J.t)(),i=r.tab,o=void 0===i?U.ALL:i,a=r.search_key,s=void 0===a?"":a,c=r.page,l=void 0===c?1:c,u=r.status,d=ee((0,f.useState)((0,Q.EW)(l)),2),p=d[0],m=d[1],b=ee((0,f.useState)(Object.values(U).includes(o)?o:U.ALL),2),h=b[0],v=b[1],y=ee((0,f.useState)(s),2),g=y[0],_=y[1],j=function(e,t,r){return e===t?r:""},x=function(e,r){var n=(0,A.m_)(e,r);t.push("?".concat(n))},w=function(e){x("page",String(e)),m(e)};(0,f.useEffect)((function(){x("tab",h),u||x("status",z[h])}),[]);var O=(0,M.B)({searchKeyParams:j(h,U.ALL,g),orderParam:re,filters:(0,$.oq)(X({},r),$.lO.charges),page:p,setPage:w,enabled:h===U.ALL}),S=(0,M.B)({searchKeyParams:j(h,U.PAID,g),orderParam:re,filters:(0,$.oq)(X({},r),$.lO.charges),page:p,setPage:w,enabled:h===U.PAID}),P=(0,M.B)({searchKeyParams:j(h,U.REFUNDED,g),orderParam:re,filters:(0,$.oq)(X({display_status:z[U.REFUNDED]},r),$.lO.charges),page:p,setPage:w,enabled:h===U.REFUNDED}),C=(0,M.B)({searchKeyParams:j(h,U.FAILED,g),orderParam:re,filters:(0,$.oq)(X({display_status:z[U.FAILED]},r),$.lO.charges),page:p,setPage:w,enabled:h===U.FAILED}),k=(0,n.useQueryClient)();return{chargesDataByTab:(Y(e={},U.ALL,O),Y(e,U.PAID,S),Y(e,U.REFUNDED,P),Y(e,U.FAILED,C),e),activeFilterTab:h,setActiveFilterTab:function(e){v(e),x("tab",e),x("status",z[e]),_("")},defaultValues:{searchKey:g},setSearchKey:_,refetchAllCharges:function(){k.clear(),O.refetchCharges(),S.refetchCharges(),P.refetchCharges(),C.refetchCharges()},resetAllChargesToFirstPage:function(){w(1),O.setOrder(re),S.setOrder(re),P.setOrder(re),C.setOrder(re)},showStats:function(){var e=r;return delete e.status,delete e.page,delete e.tab,Object.keys(e).length<=0}}}(),r=t.chargesDataByTab,i=t.activeFilterTab,o=t.setActiveFilterTab,d=t.setSearchKey,p=t.defaultValues,m=t.refetchAllCharges,b=t.resetAllChargesToFirstPage,h=t.showStats,v=null===(e=r[U.ALL])||void 0===e?void 0:e.totalCharges,y=(0,l.wh)().currentCommunity,g=null===y||void 0===y?void 0:y.payment_processor;return(0,j.jsxs)(u.l,{onSubmit:function(e){var t=e.searchKey;return d(t)},defaultValues:p,children:[(0,j.jsx)(s.b,{leftContent:(0,j.jsx)(c.y,{children:(0,a.t)("settings.paywalls_admin_dashboard.charges.title")}),rightContent:(0,j.jsx)(S,{totalChargesCount:v}),filters:(0,j.jsx)(W,{setActiveFilterTab:o,activeFilterTab:i,setSearchKey:d,resetAllChargesToFirstPage:b}),hasBorder:!1,headline:(0,j.jsx)(k,{totalChargesCount:v})}),g&&h()&&(0,j.jsx)(E,{}),(0,j.jsx)(x,{chargesData:r[i],refetchAllCharges:m})]})},ie=new n.QueryClient(i.Vr),oe=function(){return(0,j.jsx)(o.V,{children:(0,j.jsx)(n.QueryClientProvider,{client:ie,children:(0,j.jsx)(ne,{})})})}},77068:(e,t,r)=>{"use strict";r.d(t,{y:()=>ne});var n=r(21809),i=r(86013),o=r(43422),a=r(49942),s=r(97012),c=r(61926),l=r(10159),u=r(55675),d=r(85893),p=function(e){var t=e.totalSubscriptionsCount,r=(0,l.Q)().show,n=t<=0;return(0,d.jsx)(u.z,{variant:"circle",onClick:function(){r({relation:"subscriptions"})},type:"button",disabled:n,children:(0,i.t)("export_paywall_csv.modal.export_cta")})},f=r(26981),m=r(37461),b=function(e){var t=e.totalSubscriptionsCount;return t<=0?null:(0,d.jsx)(f.w.Headline,{className:"flex flex-row",children:(0,d.jsx)(f.w.Headline.Title,{children:(0,i.t)("settings.paywalls_admin_dashboard.subscriptions.count",{count:(0,m.V)(t)})})})},h=r(67294),v=r(82887),y=r(5295),g=r(88767),_=r(49326),j=function(){var e,t=(0,n.p)().error,r={isSubscriptionStatsLoading:(e=(0,g.useQuery)(_.av.admin.paywalls.subscriptions.stats.index())).isLoading,subscriptionStats:e.data,subscriptionStatsError:e.error},o=r.isSubscriptionStatsLoading,a=r.subscriptionStats,s=r.subscriptionStatsError;if((0,h.useEffect)((function(){s&&t(s.message)}),[s]),!o&&s)return null;var c=[{label:(0,i.t)("settings.paywall_subscription_stats.mrr.label"),tooltip:(0,i.t)("settings.paywall_subscription_stats.mrr.tooltip"),value:null===a||void 0===a?void 0:a.mrr_as_currency},{label:(0,i.t)("settings.paywall_subscription_stats.arr.label"),tooltip:(0,i.t)("settings.paywall_subscription_stats.arr.tooltip"),value:null===a||void 0===a?void 0:a.arr_as_currency},{label:(0,i.t)("settings.paywall_subscription_stats.avg_mrr_per_member.label"),tooltip:(0,i.t)("settings.paywall_subscription_stats.avg_mrr_per_member.tooltip"),value:null===a||void 0===a?void 0:a.avg_mrr_per_member_as_currency},{label:(0,i.t)("settings.paywall_subscription_stats.churn_rate.label"),tooltip:(0,i.t)("settings.paywall_subscription_stats.churn_rate.tooltip"),value:null===a||void 0===a?void 0:a.churn_rate_as_percentage}];return(0,d.jsx)(d.Fragment,{children:o?(0,d.jsx)(y.a,{center:!0}):(0,d.jsx)("div",{className:"my-3 grid grid-cols-1 px-6 md:grid-cols-4 md:gap-6",children:c.map((function(e){return(0,d.jsx)(v.t,{number:e.value,label:e.label,tooltipText:e.tooltip},e.label)}))})})},x=r(17881),w=r(13870),O=r(51758),S=r(40135);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N,I=function(e){var t=e.activeFilterTab,r=e.subscriptionsDataByTab,n=e.refetchAllSubscriptions,i=r[t],o=function(e){var t=e.subscriptionData;(0,h.useEffect)((function(){var e;0===(null===t||void 0===t||null===(e=t.subscriptions)||void 0===e?void 0:e.length)&&(null===t||void 0===t?void 0:t.totalSubscriptions)>0&&(null===t||void 0===t||t.setPage(1),null===t||void 0===t||t.refetchSubscriptions())}));var r=(0,O.X)(),n=function(e){var t=e.cell,n=t.column.id,i=t.row.original;"customer"!==n&&r.show({subscription:i,shouldOpenAdminMemberEdit:!0})};return{onClickPagination:function(e){null===t||void 0===t||t.setPage(e),null===t||void 0===t||t.refetchSubscriptions()},columnsToRender:S.sK.map((function(e){return C(C({},e),{},{onClick:n})}))}}({subscriptionData:i}),a=o.onClickPagination,s=o.columnsToRender;return i.hasFilters&&0===i.totalSubscriptions&&!i.isLoadingSubscriptions?(0,d.jsx)(w.n,{}):(0,d.jsx)(x.nN,{shouldOpenAdminMemberEdit:!0,refetchAllSubscriptions:n,children:(0,d.jsx)(x.sD,{columnsToRender:s,subscriptionData:i,onClickPagination:a,className:"px-6"},t)})},A=r(17260),E=r(16157),D=r(87536),T=r(35144),L=r(99815);function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R={ALL:"all",ACTIVE:"active",CANCELED:"canceled"},B=(M(N={},R.ALL,(0,i.t)("settings.paywalls_admin_dashboard.subscriptions.tabs.all")),M(N,R.ACTIVE,(0,i.t)("settings.paywalls_admin_dashboard.subscriptions.tabs.active")),M(N,R.CANCELED,(0,i.t)("settings.paywalls_admin_dashboard.subscriptions.tabs.canceled")),N);function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z,V=["community_member_name","community_member_email","community_member_id","subscription_status","paywalls","start_date","subscription_id"],q=["total_amount_paid","currency"],G=function(e){var t=e.setActiveFilterTab,r=e.activeFilterTab,n=e.setSearchKey,i=function(e,t,r){var n=(0,L.p)({perPage:1}),i=(0,L.p)({filters:{status:T.vC.join(",")},perPage:1}),o=(0,L.p)({filters:{status:T.Q_.CANCELED},perPage:1}),a=[[R.ALL,n],[R.ACTIVE,i],[R.CANCELED,o]].map((function(e){var t=U(e,2),r=t[0],n=t[1];return{value:r,label:B[r],badge:{value:n.totalSubscriptions}}})),s=(0,D.Gc)().reset;return{tabOptions:a,changeTabAndResetSearchForm:function(n){s({searchKey:""}),t(""),r(),e(n)}}}(t,n,e.resetAllSubscriptionToFirstPage),o=i.tabOptions,a=i.changeTabAndResetSearchForm,s=o.findIndex((function(e){return e.value===r}));return(0,d.jsxs)("div",{className:"border-primary",children:[(0,d.jsx)(A.O.Group,{selectedIndex:s,children:(0,d.jsx)(A.O.List,{className:"border-primary border-b px-6 py-0",children:o.map((function(e){return(0,d.jsxs)(A.O,{onClick:function(){return a(e.value)},children:[e.label,(0,d.jsx)(A.O.Counter,{children:e.badge.value})]},e.value)}))})}),(0,d.jsx)(E.x,{setSearchKey:n,filterNames:V,customFilterNames:q})]})},H=r(24185),W=r(72810),Z=r(53517),J=r(649);function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ee={created_at:"desc"},te=(Y(z={},R.ALL,null),Y(z,R.ACTIVE,T.vC.join(",")),Y(z,R.CANCELED,T.Q_.CANCELED),z),re=function(){var e,t=function(){var e,t=(0,H.k6)(),r=(0,W.t)(),n=r.tab,i=void 0===n?R.ALL:n,o=r.search_key,a=void 0===o?"":o,s=r.page,c=void 0===s?1:s,l=r.status,u=K((0,h.useState)(Object.values(R).includes(i)?i:R.ALL),2),d=u[0],p=u[1],f=K((0,h.useState)(a),2),m=f[0],b=f[1],v=K((0,h.useState)((0,J.EW)(c)),2),y=v[0],j=v[1],x=function(e,r){var n=(0,_.m_)(e,r);t.push("?".concat(n))},w=function(e){x("page",String(e)),j(e)},O=function(e,t,r){return e===t?r:""};(0,h.useEffect)((function(){x("tab",d),l||x("status",te[d])}),[]);var S=(0,L.p)({pageParam:y,perPage:10,orderParam:ee,searchKeyParams:O(d,R.ALL,m),filters:(0,Z.oq)(r,Z.lO.subscriptions),enabled:d===R.ALL,page:y,setPage:w}),P=(0,L.p)({pageParam:y,perPage:10,orderParam:ee,searchKeyParams:O(d,R.ACTIVE,m),filters:(0,Z.oq)(Q({},r),Z.lO.subscriptions),enabled:d===R.ACTIVE,page:y,setPage:w}),C=(0,L.p)({pageParam:y,perPage:10,orderParam:ee,searchKeyParams:O(d,R.CANCELED,m),filters:(0,Z.oq)(Q({},r),Z.lO.subscriptions),enabled:d===R.CANCELED,page:y,setPage:w}),k=(0,g.useQueryClient)();return{subscriptionsDataByTab:(Y(e={},R.ALL,S),Y(e,R.ACTIVE,P),Y(e,R.CANCELED,C),e),resetAllSubscriptionToFirstPage:function(){w(1),S.setOrder(ee),P.setOrder(ee),C.setOrder(ee)},refetchAllSubscriptions:function(){k.invalidateQueries({queryKey:[L.D]})},activeFilterTab:d,setActiveFilterTab:function(e){p(e),x("status",te[e]),x("tab",e)},defaultValues:{searchKey:m},setSearchKey:b,onSubmit:function(e){var t=e.searchKey;b(void 0===t?"":t)},showStats:function(){var e=r;return delete e.status,delete e.page,delete e.tab,Object.keys(e).length<=0}}}(),r=t.subscriptionsDataByTab,n=t.resetAllSubscriptionToFirstPage,l=t.activeFilterTab,u=t.setActiveFilterTab,f=t.defaultValues,m=t.refetchAllSubscriptions,v=t.setSearchKey,y=t.onSubmit,x=t.showStats,w=(0,s.wh)().currentCommunity,O=null===w||void 0===w?void 0:w.payment_processor,S=null===(e=r[l])||void 0===e?void 0:e.totalSubscriptions;return(0,d.jsxs)(c.l,{onSubmit:y,defaultValues:f,children:[(0,d.jsx)(o.b,{leftContent:(0,d.jsx)(a.y,{children:(0,i.t)("settings.paywalls_admin_dashboard.subscriptions.title")}),rightContent:(0,d.jsx)(p,{totalSubscriptionsCount:S}),filters:(0,d.jsx)(G,{setActiveFilterTab:u,activeFilterTab:l,subscriptionsDataByTab:r,setSearchKey:v,resetAllSubscriptionToFirstPage:n}),hasBorder:!1,headline:(0,d.jsx)(b,{totalSubscriptionsCount:S})}),O&&x()&&(0,d.jsx)(j,{}),(0,d.jsx)(I,{activeFilterTab:l,subscriptionsDataByTab:r,refetchAllSubscriptions:m})]})},ne=function(){return(0,d.jsx)(n.V,{children:(0,d.jsx)(re,{})})}},28028:(e,t,r)=>{"use strict";r.d(t,{dy:()=>n,L3:()=>i,ut:()=>o});var n=1,i=0,o=730},29451:(e,t,r)=>{"use strict";r.d(t,{I:()=>Qt});var n=r(72675),i=r(97012),o=r(61926),a=r(5295),s=r(53448),c=r(86013),l=r.n(c),u=r(87536),d=r(16743),p=r(85893),f=function(e){var t=e.isPaywallNew,r=(0,u.Gc)().control,n=(0,u.qo)({control:r,name:"display_name"}),i=(0,c.t)("settings.paywalls.modal.no_title_available");return(0,p.jsx)(d.Z.TitleMd,{weight:"font-bold",children:t?(0,c.t)("settings.paywalls.modal.title_creation",{paywall_name:null!==n&&void 0!==n?n:i}):(0,c.t)("settings.paywalls.modal.title_editing",{paywall_name:n})})},m=r(90846),b=r(27258),h=r(94184),v=r.n(h),y=r(84146),g=r(89001),_=r(71032),j="settings.paywalls.modal_add_space_group_confirmation",x=n.gk.create((function(e){var t=e.action,r=e.spaceGroups,i=(0,n.dd)(),o=function(){i.hide(),i.remove()};return(0,p.jsx)(_.c,{isOpen:i.visible,title:(0,c.t)([j,"title"]),onClose:o,cancelText:(0,c.t)([j,"cancel"]),onConfirm:function(){t(),o()},confirmVariant:"primary",confirmText:(0,c.t)([j,"confirm"]),children:(0,p.jsx)(d.Z.BodyMd,{children:(0,c.t)([j,"description"],{count:r.length,space_groups:r.map((function(e){return e.name})).join(", ")})})})})),w=function(e){return{id:e.id,name:e.name,properties:{automatically_add_members_to_new_spaces:e.automatically_add_members_to_new_spaces},spaces:[]}},O=function(){var e=(0,g.zo)({serializeSpaceGroup:w,serializeSpace:g.lV}),t=e.options,r=e.spaceGroupIndex,i=(0,(0,u.Gc)().watch)("space_group_ids"),o=(0,n.dd)(x).show;return{options:t,addSpaceGroupCallback:function(e,t){var n,i;n=t.id,(null===(i=r[n])||void 0===i?void 0:i.properties.automatically_add_members_to_new_spaces)?o({action:e,spaceGroups:[t]}):e()},addAllSpaceGroupCallback:function(e){var r=t.filter((function(e){return!i.includes(e.id)&&e.properties.automatically_add_members_to_new_spaces}));r.length>0?o({action:e,spaceGroups:r}):e()}}},S=function(){var e=O(),t=e.options,r=e.addSpaceGroupCallback,n=e.addAllSpaceGroupCallback;return(0,p.jsxs)(y.i,{options:t,className:"flex-auto",children:[(0,p.jsx)(y.i.Header,{children:(0,p.jsx)(y.i.SearchBar,{})}),(0,p.jsxs)(y.i.Body,{className:"overflow-y-auto",children:[(0,p.jsxs)(y.i.ListHeader,{className:"min-h-[3rem]",children:[(0,p.jsx)(y.i.ListHeaderColumnNoAccess,{onAddAll:n}),(0,p.jsx)(y.i.ListHeaderColumnAccessGranted,{})]}),(0,p.jsxs)(y.i.ListContainer,{children:[(0,p.jsx)(y.i.ListMobile,{onAddParent:r}),(0,p.jsx)(y.i.ListNoAccess,{onAddParent:r}),(0,p.jsx)(y.i.ListAccessGranted,{})]})]})]})},P=function(){var e=(0,u.Gc)().control,t=(0,u.qo)({control:e,name:"all_spaces"}),r=v()("paywalls-admin-drawer-access-tab__container px-4 h-[60vh] flex flex-col pb-4",{"drawer-access-expand":!t});return(0,p.jsxs)("div",{className:r,children:[(0,p.jsx)(o.l.Item,{name:"all_spaces",translationRoot:"settings.paywalls.modal.tabs.access",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.access.all_spaces_tooltip"),inline:!0,hideBorder:!0,hideDescription:!0,className:"flex flex-row-reverse items-center gap-x-4",children:(0,p.jsx)(o.l.ToggleSwitch,{variant:"small"})}),!t&&(0,p.jsx)(S,{}),t&&(0,p.jsxs)("div",{className:"flex w-full flex-auto flex-col justify-center gap-y-3 text-center",children:[(0,p.jsx)(d.Z.TitleSm,{color:"text-selector-active",weight:"semibold",children:(0,c.t)("settings.paywalls.modal.tabs.access.all_access_title")}),(0,p.jsx)(d.Z.LabelSm,{color:"text-selector-active",children:(0,c.t)("settings.paywalls.modal.tabs.access.all_access_subtitle")})]})]})},C=r(89761),k=r(43037),N=r(67294),I=r(31304),A=r.n(I),E=function(e){var t,r,n,i,a,s,l,d,f=e.requiresCurrency,m=e.canChangeCurrency,b=(t=(0,u.Gc)(),r=t.control,n=t.getValues,i=t.setValue,a=t.setFocus,s=t.formState,l=(0,u.qo)({control:r,name:"display_name"}),d=(0,u.qo)({control:r,name:"checkout_path"}),(0,N.useEffect)((function(){i("checkout_path",A()(null!==d&&void 0!==d?d:"",{replacement:"-",remove:/[*+~.,;()'"!:@]/g,lower:!0}))}),[d]),(0,N.useEffect)((function(){(""===d||s.dirtyFields.display_name&&!s.dirtyFields.checkout_path)&&i("checkout_path",l)}),[l]),{copyWithPrefix:function(){(0,k.p0)(n("checkout_path"),".paywall-admin-modal__container__form"),a("checkout_path",{shouldSelect:!0})}}).copyWithPrefix;return(0,p.jsxs)("div",{className:"details-tab__container",children:[(0,p.jsxs)("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2",children:[(0,p.jsx)(o.l.Item,{name:"display_name",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.details.display_name_tooltip"),hideDescription:!0,fullWidth:!1,rules:{required:(0,c.t)("settings.paywalls.modal.tabs.details.alerts.display_name_is_required"),maxLength:255},hidePlaceholder:!0,children:(0,p.jsx)(o.l.Input,{})}),(0,p.jsx)(o.l.Item,{name:"name",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.details.name_tooltip"),hideDescription:!0,hidePlaceholder:!0,rules:{maxLength:255},children:(0,p.jsx)(o.l.Input,{})})]}),(0,p.jsx)("div",{children:(0,p.jsx)(o.l.Item,{name:"subtitle",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.details.subtitle_tooltip"),hideDescription:!0,hidePlaceholder:!0,rules:{maxLength:70},children:(0,p.jsx)(o.l.Input,{maxLength:"70"})})}),f&&(0,p.jsx)("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-3",children:(0,p.jsx)(C.H,{formItemName:"currency_id",formItemTranslationRoot:"settings.paywalls.modal.tabs.details",formItemRules:{required:(0,c.t)("settings.paywalls.modal.tabs.details.alerts.currency_is_required")},formItemTooltipText:(0,c.t)("settings.paywalls.modal.tabs.details.currency_id_tooltip"),disabled:!m})}),(0,p.jsx)("div",{className:"details-tab__container__checkout-path__container",children:(0,p.jsx)(o.l.Item,{name:"checkout_path",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,hidePlaceholder:!0,rules:{required:(0,c.t)("settings.paywalls.modal.tabs.details.alerts.checkout_path_is_required"),maxLength:255},description:(0,p.jsx)("button",{type:"button",onClick:b,className:"anchor-copy-link",children:(0,c.t)("copy_link")}),variant:"checkout-path",children:(0,p.jsx)(o.l.Input,{prefix:(0,p.jsx)("p",{className:"details-tab__container__checkout-path__container__input-prefix",children:(0,k.Sr)()})})})}),(0,p.jsx)(o.l.Item,{name:"description",translationRoot:"settings.paywalls.modal.tabs.details",hideBorder:!0,fullWidth:!1,hideDescription:!0,children:(0,p.jsx)(o.l.TextArea,{})})]})},D=r(61989);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=function(){return"trix-editor-".concat(Math.floor(1e6*Math.random()))},R=function(){var e=(0,u.Gc)(),t=e.formState,r=e.setValue,n=(0,u.qo)({name:"post_purchase_email_enabled"}),i=(0,u.qo)({name:"redirect_url_enabled"}),a=t.isSubmitSuccessful,s=T((0,N.useState)(M()),2),l=s[0],d=s[1];return(0,N.useEffect)((function(){i||r("redirect_url","")}),[i]),(0,N.useEffect)((function(){d(M())}),[a]),(0,p.jsxs)("div",{className:"post-purchase__container",children:[(0,p.jsx)("div",{className:"post-purchase__container__switch",children:(0,p.jsx)(o.l.Item,{name:"thank_you_page_enabled",translationRoot:"settings.paywalls.modal.tabs.post_purchase",inline:!0,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.thank_you_page_enabled_tooltip"),hideDescription:!0,hideBorder:!0,children:(0,p.jsx)(o.l.ToggleSwitch,{variant:"small"})})}),(0,p.jsxs)("div",{className:"post-purchase__container__redirect-url-enabled-form",children:[(0,p.jsx)("div",{className:"post-purchase__container__switch",children:(0,p.jsx)(o.l.Item,{name:"redirect_url_enabled",translationRoot:"settings.paywalls.modal.tabs.post_purchase",inline:!0,hideBorder:!0,hideDescription:!0,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.redirect_url_tooltip"),children:(0,p.jsx)(o.l.ToggleSwitch,{variant:"small"})})}),i&&(0,p.jsx)("div",{className:"post-purchase__container__redirect-url-enabled-form__input",children:(0,p.jsx)(o.l.Item,{name:"redirect_url",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,hideLabel:!0,rules:{required:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.alerts.redirect_url_is_required"),maxLength:255},children:(0,p.jsx)(o.l.Input,{})})})]}),(0,p.jsx)("div",{className:"post-purchase__container__switch",children:(0,p.jsx)(o.l.Item,{name:"post_purchase_email_enabled",translationRoot:"settings.paywalls.modal.tabs.post_purchase",inline:!0,tooltipText:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.post_purchase_email_enabled_tooltip"),hideDescription:!0,hideBorder:!0,children:(0,p.jsx)(o.l.ToggleSwitch,{variant:"small"})})}),n&&(0,p.jsxs)("div",{className:"post-purchase__container__post-purchase-email-message-form",children:[(0,p.jsx)(o.l.Item,{name:"post_purchase_email_meta.subject",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideDescription:!0,hideBorder:!0,hidePlaceholder:!0,children:(0,p.jsx)(o.l.Input,{})}),(0,p.jsxs)("div",{className:"trix-v2",children:[(0,p.jsx)("label",{children:(0,c.t)("settings.paywalls.modal.tabs.post_purchase.body")}),(0,p.jsx)(D.O,{id:"post_purchase_email_message_input",name:"post_purchase_email_message",is_private_space:!1,preventAccidentalLeave:!1,type:"textarea",featureFlags:{embeds:!1,videoUpload:!1,fileUploadLink:!1}})]},"".concat(l)),(0,p.jsx)(o.l.Item,{name:"post_purchase_email_meta.button_label",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,children:(0,p.jsx)(o.l.Input,{})}),(0,p.jsx)(o.l.Item,{name:"post_purchase_email_meta.button_url",translationRoot:"settings.paywalls.modal.tabs.post_purchase",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,children:(0,p.jsx)(o.l.Input,{})})]})]})},B=r(91741),U=r(96486),F=r(9242),z=r(36762);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H=function(e,t){return e.findIndex((function(e){return t.id?e.id===t.id:e.tmp_id===t.tmp_id}))},W=(0,N.createContext)({currency:{id:1,code:"usd",direction:z.RV.ltr,smallest_unit:z.Wo.decimal,symbol:"$",min_charge_amount:0,max_charge_amount:0,is_default:!0},priceBuildOptions:{},priceTypeOptions:function(){return[]},defaultPriceTypeOption:function(){return{value:"",label:""}},getPrices:function(){return[]},getActivePrices:function(){return[]},hasRecurringPrices:function(){return!1},getTrialPeriodDays:function(){return 0},getHasTrialPeriod:function(){return!1},hasPricesEligibleForTrial:function(){return!1},addPrice:U.noop,markPriceAsPreferred:U.noop,removePrice:U.noop,isShowingAddPriceModal:function(){return!1},showAddPriceModal:U.noop,hideAddPriceModal:U.noop,hasActivePrices:!1,hasSubscriptionPrices:function(){return!1}});W.displayName="PricingTabContext";var Z=function(e){var t=e.currency,r=e.children,n=(0,i.wh)().currentCommunitySettings.price_build_options,o=(0,u.Gc)(),a=o.setValue,s=o.watch,c=(0,N.useCallback)((function(){var e=s("can_be_repurchased");return Object.keys(n).filter((function(t){return!e||t===z.E4.onetime})).map((function(e){return{value:e,label:n[e].name}}))}),[n,s]),l=(0,N.useCallback)((function(){return c()[0]}),[c]),d=(0,N.useCallback)((function(){return s("prices_attributes")}),[s]),f=(0,N.useCallback)((function(){return d().filter((function(e){return!e._destroy}))}),[d]),m=f().length>0,b=(0,N.useCallback)((function(){var e=f();return(0,F.aG)(e).length>0}),[f]),h=(0,N.useCallback)((function(){var e=f();return(0,F.fe)(e).length>0}),[f]),v=(0,N.useCallback)((function(){return parseInt(s("trial_days"))}),[s]),y=(0,N.useCallback)((function(){return Boolean(s("enable_trial"))&&v()>0}),[s,v]),g=(0,N.useCallback)((function(){var e=f();return(0,F.PI)(e,F.zA.addingPrice).length>0}),[f]),_=(0,u.Dq)({name:"prices_attributes",rules:{minLength:1}}),j=_.append,x=_.update,w=_.remove,O=(0,N.useCallback)((function(e){j(q(q({},e),{},{preferred:!1,currency_id:t.id,tmp_id:"tmp_".concat(Date.now())}))}),[t,j]),S=(0,N.useCallback)((function(e){var t=d(),r=t.findIndex((function(e){return e.preferred}));r>-1&&x(r,q(q({},t[r]),{},{preferred:!1,_updated:!0}));var n=H(t,e);n>-1&&x(n,q(q({},t[n]),{},{preferred:!0,_updated:!0}))}),[d,x]),P=(0,N.useCallback)((function(e){var t=d(),r=H(t,e);if(r>-1){var n=t[r];n.id?x(r,q(q({},n),{},{preferred:!1,_destroy:!0})):w(r)}}),[d,x,w]),C=(0,N.useCallback)((function(){return!!s("isShowingAddPriceModal")}),[s]),k=(0,N.useCallback)((function(){a("isShowingAddPriceModal",!0)}),[a]),I=(0,N.useCallback)((function(){a("isShowingAddPriceModal",!1)}),[a]);return(0,p.jsx)(W.Provider,{value:{currency:t,priceBuildOptions:n,priceTypeOptions:c,defaultPriceTypeOption:l,getPrices:d,getActivePrices:f,hasRecurringPrices:b,getTrialPeriodDays:v,getHasTrialPeriod:y,hasPricesEligibleForTrial:g,addPrice:O,markPriceAsPreferred:S,removePrice:P,isShowingAddPriceModal:C,showAddPriceModal:k,hideAddPriceModal:I,hasActivePrices:m,hasSubscriptionPrices:h},children:r})},J=function(){return(0,N.useContext)(W)},$=r(649),Q=r(81208),K=r(61666),X=["name","labelKey","children"];function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ne=function(e){var t=e.name,r=e.labelKey,n=e.children,i=re(e,X),a=(0,u.Gc)().formState.errors[t];return(0,p.jsx)(o.l.Item,ee(ee({},i),{},{name:t,className:v()({"border-red-500":a},"!m-0 grow !p-0"),label:(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(r||t)),labelClassName:"!mb-2 !text-sm !font-semibold !leading-5 !tighter !normal-case !text-dark",labelWrapperClassName:"!m-0",errorClassName:"mt-1 text-red-500 text-sm",hideDescription:!0,hideBorder:!0,children:n}))},ie=function(e){var t=e.name,r=e.labelKey,n=e.placeholder,i=J().currency,o=(0,$.Bj)(i,{amountInCents:!0}),a=(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.amount",{min:(0,K.I)(i,i.min_charge_amount,{amountInCents:!0,includeCurrencyCode:!1}),max:(0,K.I)(i,i.max_charge_amount,{amountInCents:!0,includeCurrencyCode:!1})});return(0,p.jsx)(ne,{name:t,labelKey:r,placeholder:n||o(0),rules:{required:!0,validate:{bounds:function(e){var t=(0,$.LG)(e);return!isNaN(t)&&t>=i.min_charge_amount&&t<=i.max_charge_amount||a}}},transformValue:o,children:(0,p.jsx)(Q.a,{currency:i})})},oe=r(10050),ae=function(e){var t=e.name,r=e.labelKey,n=e.options,i=e.required,o=void 0!==i&&i;return(0,p.jsx)("div",{className:"grow leading-5",children:(0,p.jsx)(oe.N,{name:t,rules:{required:o},label:(0,p.jsxs)(p.Fragment,{children:[(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_labels.".concat(r||t)),o&&(0,p.jsx)("span",{className:"text-red-500",children:"*"})]}),options:n})})};function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var le,ue=function(){var e=J().priceBuildOptions,t=(0,(0,u.Gc)().watch)("price_type"),r=Object.entries(e[t].frequencies).map((function(e){var t=se(e,2);return{value:t[0],label:t[1].as_adjective}}));return(0,p.jsx)(ae,{name:"billing_frequency",options:r,required:!0})},de=function(){var e=(0,u.Gc)(),t=e.formState.errors,r=e.watch,n=r("price_type"),i=r("amount"),a=(0,$.LG)(i),s=J().currency,l=(0,$.Bj)(s,{amountInCents:!0}),d=(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.amount",{min:(0,K.I)(s,s.min_charge_amount,{amountInCents:!0,includeCurrencyCode:!1}),max:(0,K.I)(s,s.max_charge_amount,{amountInCents:!0,includeCurrencyCode:!1})}),f=(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.upfront_payment_amount",{total:(0,K.I)(s,a,{amountInCents:!0,includeCurrencyCode:!1})});return(0,p.jsx)(o.l.Item,{name:"upfront_payment_amount",className:v()({"border-red-500":t.upfront_payment_amount},"!m-0 !mt-2 grow !p-0"),errorClassName:"mt-1 text-red-500 text-sm",placeholder:l(0),hideBorder:!0,hideLabel:!0,hideDescription:!0,rules:{required:!0,validate:{bounds:function(e){var t=(0,$.LG)(e);return isNaN(t)||t<s.min_charge_amount||t>s.max_charge_amount?d:!(n===z.E4.installments&&t>a)||f}}},transformValue:l,children:(0,p.jsx)(Q.a,{currency:s})})},pe=function(){var e=(0,J().getHasTrialPeriod)(),t=(0,u.Gc)(),r=t.watch,n=t.setValue,i=r("upfront_payment_enabled");return(0,N.useEffect)((function(){i||n("upfront_payment_amount","")}),[i,n]),(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)(o.l.Item,{className:"!p-0",labelClassName:"!font-normal",name:"upfront_payment_enabled",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.pricing.upfront_payment_enabled_tooltip"),fullWidth:!0,hidePlaceholder:!0,hideDescription:!0,hideBorder:!0,inlineReverse:!0,children:(0,p.jsx)(o.l.ToggleSwitch,{name:"upfront_payment_enabled",variant:"small"})}),i&&(0,p.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,p.jsx)(de,{}),e&&(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"trial_requires_upfront_payment",translationRoot:"settings.paywalls.modal.tabs.pricing",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,children:(0,p.jsx)(o.l.ToggleSwitch,{name:"trial_requires_upfront_payment",variant:"small"})})]})]})};function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var me=(fe(le={},z.E4.onetime,(function(){return(0,p.jsx)(ie,{name:"amount",labelKey:"price"})})),fe(le,z.E4.subscription,(function(){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,p.jsx)(ue,{}),(0,p.jsx)(ie,{name:"amount",labelKey:"recurring_price"})]}),(0,p.jsx)(pe,{})]})})),fe(le,z.E4.installments,(function(){var e=J().priceBuildOptions.installments,t=(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.field_errors.installments_count",{min:e.limits.installments_count.min,max:e.limits.installments_count.max});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,p.jsx)(ue,{}),(0,p.jsx)(ne,{name:"installments_count",labelKey:"rebills",placeholder:(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.placeholder"),rules:{valueAsNumber:!0,required:!0,validate:{bounds:function(r){var n=parseInt(r);return!isNaN(n)&&n>=e.limits.installments_count.min&&n<=e.limits.installments_count.max||t}}},children:(0,p.jsx)(o.l.Input,{variant:"text",type:"number"})})]}),(0,p.jsx)("div",{className:"flex flex-row gap-4",children:(0,p.jsx)(ie,{name:"amount",labelKey:"total_price"})}),(0,p.jsx)(pe,{})]})})),le),be=function(){var e=(0,(0,u.Gc)().watch)("price_type"),t=me[e];return t?(0,p.jsx)(t,{}):null},he=r(30887),ve=r(3803),ye=function(e){var t=e.children;return(0,p.jsxs)(ve.v,{className:"flex flex-row gap-3",children:[(0,p.jsx)("div",{children:(0,p.jsx)(he.JO,{type:"information-outline",size:24})}),(0,p.jsx)(d.Z.LabelSm,{weight:"regular",as:"div",children:t})]})},ge=function(e){var t=e.watch;return(0,$.LG)(t("amount"))>0&&!(0,U.isEmpty)(t("billing_frequency"))},_e=function(e){var t=e.watch;return(0,$.LG)(t("amount"))>0&&!(0,U.isEmpty)(t("billing_frequency"))&&parseInt(t("installments_count"))>=2},je=[{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===z.E4.installments&&!r&&!n},stateValidator:_e,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch,i=(0,$.LG)(n("amount")),o=parseInt(n("installments_count")),a=Math.round(i/o);return["installments",{installments_frequency:t.frequencies[n("billing_frequency")].as_adverb.toLowerCase(),installments_count:o-1,installment_amount:(0,K.I)(r,a),total_amount:(0,K.I)(r,i)}]}},{matcher:function(e){return e.priceType===z.E4.onetime},stateValidator:function(e){var t=e.watch;return(0,$.LG)(t("amount"))>0},messagePropsResolver:function(e){var t=e.currency,r=e.watch;return["onetime",{total_amount:(0,K.I)(t,(0,$.LG)(r("amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===z.E4.subscription&&!r&&!n},stateValidator:ge,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch;return["subscription",{recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,K.I)(r,(0,$.LG)(n("amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===z.E4.installments&&!r&&n},stateValidator:_e,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,$.LG)(i("amount")),a=parseInt(i("installments_count")),s=Math.round(o/a);return["trial_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:a,installment_amount:(0,K.I)(r,s),total_amount:(0,K.I)(r,o),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===z.E4.subscription&&!r&&n},stateValidator:ge,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["trial_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,K.I)(r,(0,$.LG)(i("amount")),{amountInCents:!0,includeCurrencyCode:!0}),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===z.E4.installments&&r&&n&&!i},stateValidator:_e,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,$.LG)(i("amount")),a=(0,$.LG)(i("upfront_payment_amount")),s=parseInt(i("installments_count")),c=Math.round((o-a)/s);return["trial_then_upfront_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:s,installment_amount:(0,K.I)(r,c),total_amount:(0,K.I)(r,o),upfront_payment_amount:(0,K.I)(r,a),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===z.E4.subscription&&r&&n&&!i},stateValidator:ge,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["trial_then_upfront_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,K.I)(r,(0,$.LG)(i("amount"))),upfront_payment_amount:(0,K.I)(r,(0,$.LG)(i("upfront_payment_amount"))),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===z.E4.installments&&r&&!n},stateValidator:_e,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch,i=(0,$.LG)(n("amount")),o=(0,$.LG)(n("upfront_payment_amount")),a=parseInt(n("installments_count")),s=Math.round((i-o)/a);return["upfront_then_installments",{installments_frequency:t.frequencies[n("billing_frequency")].as_adverb.toLowerCase(),installments_count:a,installment_amount:(0,K.I)(r,s),total_amount:(0,K.I)(r,i),upfront_payment_amount:(0,K.I)(r,o)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod;return t===z.E4.subscription&&r&&!n},stateValidator:ge,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.watch;return["upfront_then_subscription",{recurring_frequency:t.frequencies[n("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,K.I)(r,(0,$.LG)(n("amount"))),upfront_payment_amount:(0,K.I)(r,(0,$.LG)(n("upfront_payment_amount")))}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===z.E4.installments&&r&&n&&i},stateValidator:_e,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch,o=(0,$.LG)(i("amount")),a=(0,$.LG)(i("upfront_payment_amount")),s=parseInt(i("installments_count")),c=Math.round((o-a)/s);return["upfront_then_trial_then_installments",{installments_frequency:t.frequencies[i("billing_frequency")].as_adverb.toLowerCase(),installments_count:s,installment_amount:(0,K.I)(r,c),total_amount:(0,K.I)(r,o),upfront_payment_amount:(0,K.I)(r,a),trial_period_days:"".concat(n)}]}},{matcher:function(e){var t=e.priceType,r=e.hasUpfrontPayment,n=e.hasTrialPeriod,i=e.isUpfrontPaymentRequiredForTrial;return t===z.E4.subscription&&r&&n&&i},stateValidator:ge,messagePropsResolver:function(e){var t=e.buildOptions,r=e.currency,n=e.trialPeriodDays,i=e.watch;return["upfront_then_trial_then_subscription",{recurring_frequency:t.frequencies[i("billing_frequency")].as_phrase.toLowerCase(),recurring_amount:(0,K.I)(r,(0,$.LG)(i("amount"))),upfront_payment_amount:(0,K.I)(r,(0,$.LG)(i("upfront_payment_amount"))),trial_period_days:"".concat(n)}]}}];function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oe,Se=function(){var e=J(),t=e.currency,r=e.priceBuildOptions,n=e.getHasTrialPeriod,i=(0,e.getTrialPeriodDays)(),o=n(),a=(0,u.Gc)().watch,s=a("price_type"),l=r[s],d=Boolean(a("upfront_payment_enabled")),f=Boolean(a("trial_requires_upfront_payment")),m=je.find((function(e){return(0,e.matcher)({priceType:s,hasUpfrontPayment:d,hasTrialPeriod:o,isUpfrontPaymentRequiredForTrial:f})}));if(!m)return null;if(!(0,m.stateValidator)({watch:a}))return null;var b=xe((0,m.messagePropsResolver)({buildOptions:l,currency:t,trialPeriodDays:i,watch:a}),2),h=b[0],v=b[1];return(0,p.jsx)(ye,{children:(0,c.t)(["settings.paywalls.modal.tabs.pricing.add_price_modal.notice",h],v)})},Pe=function(){var e=J(),t=e.priceBuildOptions,r=e.priceTypeOptions,n=e.addPrice,i=e.hideAddPriceModal,o=(0,u.Gc)().handleSubmit,a=(0,N.useCallback)((function(){o((function(e){var r,o,a,s,c,l,u=e.price_type,d=(0,$.LG)(e.amount);if(e.billing_frequency){var p=t[e.price_type].frequencies[e.billing_frequency];p&&(o=p.interval,a=p.interval_count)}e.installments_count&&(s=parseInt(e.installments_count)),e.upfront_payment_enabled&&(c=(0,$.LG)(e.upfront_payment_amount),l=e.trial_requires_upfront_payment),n({price_type:u,amount:d,interval:o,interval_count:a,installments_count:s,upfront_payment_amount:c,trial_requires_upfront_payment:null!==(r=l)&&void 0!==r&&r}),i()}))().catch((function(e){return console.error("Error adding price",e)}))}),[t,n,i,o]);return(0,p.jsx)(_.c,{isOpen:!0,title:(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.title"),confirmText:(0,c.t)("settings.paywalls.modal.tabs.pricing.add_price_modal.actions.confirm"),onConfirm:a,onClose:i,onCancel:i,size:"lg",dataTestId:"save-paywall-price",children:(0,p.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,p.jsx)(ae,{name:"price_type",labelKey:"payment_type",options:r()}),(0,p.jsx)(be,{}),(0,p.jsx)(Se,{})]})})},Ce=function(){var e=(0,J().defaultPriceTypeOption)();return(0,p.jsx)(o.l,{className:"w-full",defaultValues:{price_type:e.value},onSubmit:U.noop,children:(0,p.jsx)(Pe,{})})},ke=r(55675),Ne=function(e){var t=e.variant,r=J().showAddPriceModal,n="primary"===t?"text-secondary":"text-primary";return(0,p.jsx)(ke.z,{type:"button",variant:t,onClick:r,className:"whitespace-nowrap",large:!0,children:(0,p.jsx)(d.Z.LabelSm,{weight:"semibold",color:n,children:(0,c.t)("settings.paywalls.modal.tabs.pricing.actions.add_price")})})},Ie=function(){return(0,p.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 rounded-lg border py-20",children:[(0,p.jsxs)("div",{className:"flex-row px-14",children:[(0,p.jsx)(d.Z.TitleSm,{weight:"bold",textAlign:"text-center",children:(0,c.t)("settings.paywalls.modal.tabs.pricing.empty_state.title")}),(0,p.jsx)(d.Z.BodyMd,{textAlign:"text-center",children:(0,c.t)("settings.paywalls.modal.tabs.pricing.empty_state.description")})]}),(0,p.jsx)(Ne,{variant:"circle"})]})},Ae=r(26981),Ee=r(42565),De=function(e){var t=e.row.original,r=(0,s.UV)().contentPortalElement,n=J(),i=n.getPrices,o=n.markPriceAsPreferred,a=n.removePrice,c=1===i().length;return c&&t.preferred?null:(0,p.jsxs)(Ae.w.Actions,{contentPortalElement:null!==r&&void 0!==r?r:document.body,children:[!t.preferred&&(0,p.jsx)(Ee.g,{active:!0,hasDanger:!1,onClick:function(){return o(t)},linkType:"button",children:l().t("settings.paywalls.modal.tabs.pricing.table.actions.preferred")},"preferred"),!c&&(0,p.jsx)(Ee.g,{active:!0,hasDanger:!0,onClick:function(){return a(t)},linkType:"button",children:l().t("settings.paywalls.modal.tabs.pricing.table.actions.remove")},"remove")]})},Te=function(e){var t,r=e.row.original,n=r.price_type,i=r.interval_count,o=r.interval,a=r.preferred,s=J().priceBuildOptions,c=s[n];if((0,F.QT)(r)){var l=s[n],u=(0,F.X8)(l,o,i);t=(null===u||void 0===u?void 0:u.as_adjective)||l.name}else t=c.name;return(0,p.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[t,a&&(0,p.jsx)(he.JO,{type:"16-check-circle",size:16})]})};function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Re=(Me(Oe={},z.E4.onetime,(function(e){var t=e.row.original,r=t.price_type,n=t.amount,i=J().currency;if(r!==z.E4.onetime)return null;var o=(0,$.LG)(n),a=(0,K.I)(i,o,{amountInCents:!0,includeCurrencyCode:!0});return(0,p.jsx)(p.Fragment,{children:a})})),Me(Oe,z.E4.subscription,(function(e){var t,r=e.row.original,n=r.price_type,i=r.interval_count,o=r.interval,a=r.amount,s=r.upfront_payment_amount,l=r.trial_requires_upfront_payment,u=J(),d=u.currency,f=u.priceBuildOptions,m=u.getHasTrialPeriod,b=u.getTrialPeriodDays;if(n!==z.E4.subscription)return null;var h=b(),v=m(),y=f.subscription,g=(0,F.X8)(y,o,i),_=(0,F.TM)(d,s),j=(0,$.LG)(a),x=(0,K.I)(d,j,{amountInCents:!0,includeCurrencyCode:!0}),w=[];v&&!l&&w.push("trial"),_.variant===F.f.upfrontPayment&&w.push("upfront"),v&&l&&w.push("trial"),w.push("value");var O=w.join("_then_");return(0,p.jsx)(p.Fragment,{children:(0,c.t)(["settings.paywall_prices",n,"short_description",O],{upfront:_.amountFormatted,interval:null===g||void 0===g||null===(t=g.as_adverb)||void 0===t?void 0:t.toLowerCase(),amount:x,trial:h})})})),Me(Oe,z.E4.installments,(function(e){var t,r=e.row.original,n=r.price_type,i=r.interval_count,o=r.interval,a=r.installments_count,s=r.amount,l=r.upfront_payment_amount,u=r.trial_requires_upfront_payment,d=J(),f=d.currency,m=d.priceBuildOptions,b=d.getHasTrialPeriod,h=d.getTrialPeriodDays;if(n!==z.E4.installments)return null;var v=h(),y=b(),g=m.installments,_=Object.values(g.frequencies).find((function(e){return e.interval===o&&e.interval_count===i})),j=(0,F.TM)(f,l),x=(0,$.LG)(s),w=(0,K.I)(f,(0,F.$_)(j,x,a),{amountInCents:!0,includeCurrencyCode:!0}),O=[];y&&!u&&O.push("trial"),j.variant===F.f.upfrontPayment&&O.push("upfront"),y&&u&&O.push("trial"),O.push("value");var S=O.join("_then_");return(0,p.jsx)(p.Fragment,{children:(0,c.t)(["settings.paywall_prices",n,"short_description",S],{upfront:j.amountFormatted,count:a,interval:null===_||void 0===_||null===(t=_.as_adverb)||void 0===t?void 0:t.toLowerCase(),amount:w,trial:v})})})),Oe),Be=function(e){var t=e.row.original.price_type,r=Re[t];return r?(0,p.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){Me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)):null};function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){ze(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ve=[{accessorKey:"paymentType",header:(0,c.t)("settings.paywalls.modal.tabs.pricing.table.columns.payment_type"),cell:function(e){return(0,p.jsx)(Te,Fe({},e))}},{accessorKey:"pricing",header:(0,c.t)("settings.paywalls.modal.tabs.pricing.table.columns.pricing"),cell:function(e){return(0,p.jsx)(Be,Fe({},e))}},{accessorKey:"actions",header:" ",cell:function(e){return(0,p.jsx)(De,Fe({},e))}}],qe=function(){var e=(0,J().getActivePrices)();return(0,p.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,p.jsxs)("div",{className:"flex flex-row",children:[(0,p.jsxs)("div",{className:"w-4/5 flex-none",children:[(0,p.jsx)(d.Z.LabelLg,{weight:"semibold",children:(0,c.t)("settings.paywalls.modal.tabs.pricing.pricing_title")}),(0,p.jsx)(d.Z.BodyMd,{children:(0,c.t)("settings.paywalls.modal.tabs.pricing.description")})]}),(0,p.jsx)("div",{className:"w-1/5 flex-none text-right",children:(0,p.jsx)(Ne,{variant:"secondary"})})]}),(0,p.jsx)(Ae.w,{columns:Ve,data:e,children:(0,p.jsxs)(Ae.w.Table,{children:[(0,p.jsx)(Ae.w.Header,{}),(0,p.jsx)(Ae.w.Body,{})]})})]})},Ge=function(e){var t=e.tooltipText,r=e.isToggleDisabled;return(0,p.jsx)(o.l.Item,{className:"!p-0",labelClassName:"!font-normal",name:"can_be_repurchased",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.pricing.".concat(t)),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,isDisabled:r,children:(0,p.jsx)(o.l.ToggleSwitch,{name:"can_be_repurchased",variant:"small",disabled:r})})},He=function(){var e=J(),t=e.hasRecurringPrices,r=!e.hasActivePrices||t(),n=r?"can_be_repurchased_tooltip_disabled":"can_be_repurchased_tooltip";return(0,p.jsx)(Ge,{tooltipText:n,isToggleDisabled:r})},We=function(e){var t=e.tooltipText,r=e.isToggleDisabled,n=e.onChanging;return(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"self_cancelable",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.pricing.".concat(t)),translationRoot:"settings.paywalls.modal.tabs.pricing",fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,isDisabled:r,children:(0,p.jsx)(o.l.ToggleSwitch,{onToggleChange:n,name:"self_cancelable",variant:"small",disabled:r})})};function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $e=function(){var e=J().hasSubscriptionPrices,t=!e(),r=(0,u.Gc)(),n=r.watch,i=r.setValue,o=!!n("id"),a=n("self_cancelable"),s=Ze((0,N.useState)(e()&&!a),2),c=s[0],l=s[1];(0,N.useEffect)((function(){t?i("self_cancelable",!1):o||c||i("self_cancelable",!0)}),[t,i,c,o]);var d=t?"self_cancelable_tooltip_disabled":"self_cancelable_tooltip";return(0,p.jsx)(We,{tooltipText:d,isToggleDisabled:t,onChanging:function(){l(!0)}})},Qe=r(51548),Ke=function(e){var t=e.isSelectDisabled,r=e.paywallGroupSelectOptions,n=e.className,i=void 0===n?"":n;return(0,p.jsx)(o.l.Item,{className:"!py-0 ".concat(i),labelClassName:"!font-normal",name:"paywall_group_id",hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,hideLabel:!0,isDisabled:t,children:(0,p.jsx)(o.l.SelectNative,{prompt:(0,c.t)("settings.paywalls.modal.tabs.pricing.paywall_group_prompt"),name:"paywall_group_id",options:r,disabled:t,rules:{shouldUnregister:!0}})})},Xe=function(e){var t=e.tooltipText,r=e.isToggleDisabled,n=e.enableSubscriptionGroup;return(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"enable_subscription_group",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.pricing.".concat(t)),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,isDisabled:r,children:(0,p.jsx)(o.l.ToggleSwitch,{name:"enable_subscription_group",variant:"small",value:String(n),disabled:r})})},Ye=function(e){var t=e.toggleField,r=e.fieldToggleable,n=e.hideToggleableField;return(0,p.jsxs)("div",{className:"flex flex-col gap-y-2",children:[!!t&&t,!!r&&!n&&(0,p.jsx)("div",{className:"flex flex-col gap-y-2 pl-11",children:r})]})},et=function(){var e=J().currency,t=(0,u.Gc)().watch,r=function(e){var t=(0,u.Gc)().setValue,r=J().hasRecurringPrices,n=((0,(0,Qe.W)({}).useListPaywallGroups)().data||[]).filter((function(t){return t.currency.id===e.id})),i=n.length>0,o=r(),a=n.length>0?n[0].id:"",s=n.map((function(e){return{value:"".concat(e.id),label:e.name}})),c=(0,u.qo)({name:"id"}),l=(0,u.qo)({name:"enable_subscription_group"},!1),d=(0,N.useRef)(l);return(0,N.useEffect)((function(){var e=d.current;!(!c&&!e&&r())&&r()||t("enable_subscription_group",r()),e||e===l||t("paywall_group_id",a),d.current=l}),[a,l,r(),c,t]),{canShowChooser:i,canEnableChooser:o,enableSubscriptionGroup:l,paywallGroupSelectOptions:s}}(e),n=r.canShowChooser,i=r.canEnableChooser,o=r.paywallGroupSelectOptions,a=r.enableSubscriptionGroup,s=!n||!i,c=s||!a,l=s?"paywall_group_tooltip_disabled":"paywall_group_tooltip",d=t("enable_subscription_group");return(0,p.jsx)(Ye,{toggleField:(0,p.jsx)(Xe,{tooltipText:l,isToggleDisabled:s,enableSubscriptionGroup:a}),fieldToggleable:(0,p.jsx)(Ke,{isSelectDisabled:c,paywallGroupSelectOptions:o,className:"w-7/12"}),hideToggleableField:!d})},tt=function(){var e=J().hasPricesEligibleForTrial,t=(0,u.Gc)(),r=t.setValue,n=t.setFocus,i=t.watch,o=Boolean(i("enable_trial"));return(0,N.useEffect)((function(){e()||r("enable_trial",!1)}),[e(),r]),(0,N.useEffect)((function(){o?n("trial_days"):(r("trial_days",0),r("trial_requires_card",!1),r("self_trial_cancelable",!1))}),[o,n,r]),{hasPricesEligibleForTrial:e,hasTrial:o}},rt=r(28028),nt=function(e){var t=e.className,r=void 0===t?"":t,n=tt().hasTrial;return(0,p.jsx)(o.l.Item,{className:"!py-0 ".concat(r),labelClassName:"!font-normal",name:"trial_days",hideDescription:!0,hidePlaceholder:!0,hideLabel:!0,hideBorder:!0,isDisabled:!n,rules:{pattern:/^[0-9]+$/,min:{value:n?rt.dy:rt.L3,message:(0,c.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_greater_than")},max:{value:rt.ut,message:(0,c.t)("settings.paywalls.modal.tabs.pricing.alerts.free_trial_should_be_less_or_equal_than")}},children:(0,p.jsx)(o.l.Input,{"data-testid":"trial_days",inputMode:"numeric",suffix:(0,c.t)("settings.paywalls.form.free_trial.days_label"),disabled:!n})})},it=function(){return(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"trial_requires_card",translationRoot:"settings.paywalls.form.free_trial",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,children:(0,p.jsx)(o.l.ToggleSwitch,{"data-testid":"trial_requires_card",name:"trial_requires_card",variant:"small"})})},ot=function(){var e=J().hasSubscriptionPrices,t=(0,u.Gc)().setValue;return(0,N.useEffect)((function(){e()||t("self_trial_cancelable",!1)}),[e()]),(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"self_trial_cancelable",translationRoot:"settings.paywalls.modal.tabs.pricing",fullWidth:!0,hideBorder:!0,hideDescription:!0,hidePlaceholder:!0,inlineReverse:!0,isDisabled:!e(),children:(0,p.jsx)(o.l.ToggleSwitch,{name:"self_trial_cancelable",variant:"small",disabled:!e()})})},at=function(){var e=tt(),t=e.hasPricesEligibleForTrial,r=e.hasTrial;return(0,p.jsx)(o.l.Item,{className:"!py-0",labelClassName:"!font-normal",name:"enable_trial",translationRoot:"settings.paywalls.modal.tabs.pricing",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.pricing.enable_trial_tooltip"),fullWidth:!0,hideDescription:!0,hidePlaceholder:!0,hideBorder:!0,inlineReverse:!0,variant:"checkout-path",isDisabled:!t(),children:(0,p.jsx)(o.l.ToggleSwitch,{name:"enable_trial",variant:"small",disabled:!t(),value:String(r)})})},st=function(){var e=tt(),t=e.hasPricesEligibleForTrial,r=e.hasTrial;return(0,p.jsx)(Ye,{toggleField:(0,p.jsx)(at,{}),fieldToggleable:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(nt,{className:"w-7/12"}),(0,p.jsx)(it,{}),(0,p.jsx)(ot,{})]}),hideToggleableField:!t()||!r})},ct=function(){return(0,p.jsxs)(ve.v,{className:"border-primary flex flex-col gap-y-4 border px-6 py-5",children:[(0,p.jsx)(d.Z.LabelLg,{weight:"bold",children:(0,c.t)("settings.paywalls.modal.tabs.pricing.settings_title")}),(0,p.jsxs)("div",{className:"flex flex-col gap-y-3.5",children:[(0,p.jsx)(He,{}),(0,p.jsx)(et,{}),(0,p.jsx)(st,{}),(0,p.jsx)($e,{})]})]})},lt=function(){var e=J(),t=e.getPrices,r=e.isShowingAddPriceModal,n=t();return(0,p.jsxs)("div",{className:"flex flex-col gap-x-5 gap-y-4 p-4",children:[n&&n.length?(0,p.jsxs)("div",{className:"flex flex-col gap-y-8 py-2",children:[(0,p.jsx)(qe,{}),(0,p.jsx)(ct,{})]}):(0,p.jsx)(Ie,{}),r()&&(0,p.jsx)(Ce,{})]})},ut=function(){var e=(0,u.Gc)().watch,t=(0,B.K)(),r=t.data;if(t.isLoading)return(0,p.jsx)(a.a,{});var n=e("currency_id"),i=r.find((function(e){return e.id===parseInt(n)}));return(0,p.jsx)(Z,{currency:i,children:(0,p.jsx)(lt,{})})},dt=r(53068),pt=r(43776),ft="settings.paywalls.tracking_js_code",mt=[{group:(0,c.t)([ft,"group.member"]),label:(0,c.t)([ft,"variables.member_email"]),value:(0,c.t)([ft,"variables.member_email"])},{group:(0,c.t)([ft,"group.charge"]),label:(0,c.t)([ft,"variables.amount_paid"]),value:(0,c.t)([ft,"variables.amount_paid"])},{group:(0,c.t)([ft,"group.coupon"]),label:(0,c.t)([ft,"variables.coupon_code"]),value:(0,c.t)([ft,"variables.coupon_code"])},{group:(0,c.t)([ft,"group.paywall"]),label:(0,c.t)([ft,"variables.paywall_internal_name"]),value:(0,c.t)([ft,"variables.paywall_internal_name"])},{group:(0,c.t)([ft,"group.paywall"]),label:(0,c.t)([ft,"variables.paywall_display_name"]),value:(0,c.t)([ft,"variables.paywall_display_name"])},{group:(0,c.t)([ft,"group.paywall"]),label:(0,c.t)([ft,"variables.paywall_trial_days"]),value:(0,c.t)([ft,"variables.paywall_trial_days"])},{group:(0,c.t)([ft,"group.paywall_price"]),label:(0,c.t)([ft,"variables.paywall_price_amount"]),value:(0,c.t)([ft,"variables.paywall_price_amount"])},{group:(0,c.t)([ft,"group.paywall_price"]),label:(0,c.t)([ft,"variables.paywall_price_interval"]),value:(0,c.t)([ft,"variables.paywall_price_interval"])},{group:(0,c.t)([ft,"group.paywall_price"]),label:(0,c.t)([ft,"variables.paywall_price_type"]),value:(0,c.t)([ft,"variables.paywall_price_type"])}],bt=function(){var e=(0,i.wh)().currentCommunity,t=mt;return(0,p.jsx)("div",{children:e.paywall_tracking_code_feature_flag_enabled?(0,p.jsx)("div",{className:"flex h-[60vh] flex-col px-4",children:(0,p.jsx)(o.l.Item,{name:"conversion_tracking_js_code",translationRoot:"settings.paywalls.modal.tabs.tracking",tooltipText:(0,c.t)("settings.paywalls.modal.tabs.tracking.conversion_tracking_js_code_tooltip"),hideBorder:!0,fullWidth:!1,hideDescription:!0,className:"!flex flex-auto flex-col",children:(0,p.jsx)(dt.K,{className:"flex-auto",showMenuBar:!0,menuBarOptions:t})})}):(0,p.jsx)(pt.S,{PlanFeatureName:(0,c.t)("pricing_plans.feature.conversion_tracking_code")})})},ht=function(e){var t=e.isSubmitting,r=e.mutation,n=e.activeTab,i=e.shouldBlockSubmitButton,o=function(e){var t,r,n=e.activeTab,i=e.currentPaywallStatus,o=(0,u.Gc)(),a=o.register,s=o.setValue,l=(0,N.useMemo)((function(){return n===b.eA.TRACKING_TAB}),[n]),d=function(e){a("publish"),s("publish",e)},p=function(){return d(!0)},f={active:{buttonLabel:(0,c.t)("settings.paywalls.modal.footer.save"),variant:"circle",onClick:U.noop},draft:{onClick:U.noop,variant:"circle",buttonLabel:(0,c.t)("settings.paywalls.modal.footer.save")},inactive:{onClick:U.noop,variant:"circle",buttonLabel:(0,c.t)("settings.paywalls.modal.footer.save")},paywallCreation:{variant:"circle",buttonLabel:l?(0,c.t)("settings.paywalls.modal.footer.publish"):(0,c.t)("settings.paywalls.modal.footer.next"),onClick:function(){return l&&p()}}},m={active:{onClick:function(){d(!1),a("status"),s("status","inactive")},variant:"danger",buttonLabel:(0,c.t)("settings.paywalls.modal.footer.unpublish")},draft:{onClick:p,variant:"secondary",buttonLabel:(0,c.t)("settings.paywalls.modal.footer.publish")},inactive:{onClick:p,variant:"secondary",buttonLabel:(0,c.t)("settings.paywalls.modal.footer.publish")},paywallCreation:{onClick:U.noop,variant:"secondary",buttonLabel:(0,c.t)("settings.paywalls.modal.footer.save_draft")}},h=null!==(t=m[i])&&void 0!==t?t:m.paywallCreation,v=null!==(r=f[i])&&void 0!==r?r:f.paywallCreation;return{isLastStep:l,isEditingMode:void 0!==i,currentPrimaryButtonState:v,currentSecondaryButtonState:h}}({activeTab:n,currentPaywallStatus:e.currentPaywallStatus}),a=o.isLastStep,s=o.isEditingMode,l=o.currentPrimaryButtonState,d=o.currentSecondaryButtonState;return(0,p.jsxs)("div",{className:"paywall-admin-modal__footer__container",children:[(a||s)&&(0,p.jsx)(ke.z,{type:"submit",variant:d.variant,disabled:t||r.isLoading||i,onClick:d.onClick,children:d.buttonLabel}),(0,p.jsx)(ke.z,{type:"submit",variant:l.variant,disabled:t||r.isLoading||i,onClick:l.onClick,children:l.buttonLabel})]})};function vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yt=function(e){var t,r,n=e.activeTab,i=e.setActiveTab,o=e.usePaywallFormContentHook,a=e.mutation,s=e.isSubmitting,c=e.paywallGroupsEnabled,l=e.requiresCurrency,u=e.canChangeCurrency,d=e.currentPaywallStatus,f=o(n,i),h=f.handleTabClick,v=f.tabOptions,y=f.shouldBlockSubmitButton;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"paywall-admin-modal__tabs",children:(0,p.jsx)(m.m,{controlled:!0,activeTab:n,onClick:h,options:v,variant:"underline"})}),(0,p.jsx)("div",{className:"paywall-admin-modal__form__fields",children:(t=n,(vt(r={},b.eA.DETAILS_TAB,(0,p.jsx)(E,{requiresCurrency:l,canChangeCurrency:u})),vt(r,b.eA.PRICING_TAB,(0,p.jsx)(ut,{paywallGroupsEnabled:c,requiresCurrency:l})),vt(r,b.eA.ACCESS_TAB,(0,p.jsx)(P,{})),vt(r,b.eA.POST_PURCHASE_TAB,(0,p.jsx)(R,{})),vt(r,b.eA.TRACKING_TAB,(0,p.jsx)(bt,{})),r)[t])}),(0,p.jsx)(ht,{isSubmitting:s,mutation:a,activeTab:n,shouldBlockSubmitButton:y,currentPaywallStatus:d})]})},gt=r(64687),_t=r.n(gt);function jt(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return wt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ot=function(e,t){var r,n=xt((0,N.useState)(!1),2),i=n[0],o=n[1],a=(0,u.Gc)().control,s=(0,u.qo)({control:a,name:"display_name"}),c=(0,u.qo)({control:a,name:"checkout_path"}),l=(0,u.qo)({control:a,name:"prices_attributes"}),d=(0,u.qo)({control:a,name:"all_spaces"}),p=(0,u.qo)({control:a,name:"space_group_ids"}),f=(0,u.qo)({control:a,name:"space_ids"}),m=function(t,r){t!==e||i===!r||o(!r)},h=function(){var e=s&&""!==s&&c&&""!==c;return m(b.eA.DETAILS_TAB,e),e},v=function(){var e=l.some((function(e){return!(!e.id||e._destroy)||(!!e.tmp_id||void 0)}));return m(b.eA.PRICING_TAB,e),e},y=[{label:b.eA.DETAILS_TAB,disabled:!h()},{label:b.eA.PRICING_TAB,disabled:e===b.eA.DETAILS_TAB||!h()||!v()},{label:b.eA.ACCESS_TAB,disabled:[b.eA.DETAILS_TAB,b.eA.PRICING_TAB].includes(e)||!h()||!v()||(r=d||p.length>0||f.length>0,m(b.eA.ACCESS_TAB,r),!r)},{label:b.eA.POST_PURCHASE_TAB,disabled:!0},{label:b.eA.TRACKING_TAB,disabled:!0}],g=function(){var e,r=(e=_t().mark((function e(r){return _t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(r);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){jt(o,n,i,a,s,"next",e)}function s(e){jt(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{handleTabClick:g,tabOptions:y,shouldBlockSubmitButton:i}};function St(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var Pt=function(e,t){var r=[{label:b.eA.DETAILS_TAB},{label:b.eA.PRICING_TAB},{label:b.eA.ACCESS_TAB},{label:b.eA.POST_PURCHASE_TAB},{label:b.eA.TRACKING_TAB}],n=function(){var e,r=(e=_t().mark((function e(r){return _t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(r);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){St(o,n,i,a,s,"next",e)}function s(e){St(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{handleTabClick:n,tabOptions:r,shouldBlockSubmitButton:!1}},Ct=function(e){var t=e.activeTab,r=e.setActiveTab,n=e.mutation,i=e.isSubmitting,o=e.paywallGroupsEnabled,a=e.currentPaywallStatus,s=e.requiresCurrency,c=e.canChangeCurrency,l=a?Pt:Ot;return(0,p.jsx)(yt,{activeTab:t,setActiveTab:r,usePaywallFormContentHook:l,mutation:n,isSubmitting:i,paywallGroupsEnabled:o,currentPaywallStatus:a,requiresCurrency:s,canChangeCurrency:c})},kt=r(88767),Nt=r(13546),It=r(21809),At=function(e){var t=function(e){var t=(0,It.p)(),r=t.success,i=t.error,o=(0,n.dd)(),a=(0,kt.useMutation)((function(e){return Nt.i.updateMemberAccess(e)})),s=a.isLoading;return{isOpen:o.visible,isSubmitting:s,onClose:function(){!a.isLoading&&o.hide()},handleSubmit:function(){a.mutate(e,{onSuccess:function(){r((0,c.t)("settings.paywalls.alerts.success.update_access_member")),o.hide().then((function(){return o.remove()}))},onError:function(){i("settings.paywalls.alerts.error.action_failed"),o.hide().then((function(){return o.remove()}))}})}}}(e.paywallId),r=t.isOpen,i=t.isSubmitting,o=t.onClose,a=t.handleSubmit;return(0,p.jsxs)(_.c,{isOpen:r,title:(0,c.t)("settings.paywalls.modal_update_access_member.title"),onClose:o,cancelText:(0,c.t)("settings.paywalls.modal_update_access_member.only_new_members"),onConfirm:a,confirmVariant:"primary",confirmText:(0,c.t)("settings.paywalls.modal_update_access_member.all_members"),disabled:i,children:[(0,p.jsx)(d.Z.BodyMd,{children:(0,c.t)("settings.paywalls.modal_update_access_member.description")}),(0,p.jsx)("br",{}),(0,p.jsx)(d.Z.BodyMd,{children:(0,c.t)("settings.paywalls.modal_update_access_member.description_warning")})]})};function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tt=n.gk.create((function(e){return(0,p.jsx)(At,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){Dt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),Lt=r(75122);function Mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(r),!0).forEach((function(t){Bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ut(e){return function(e){if(Array.isArray(e))return Ft(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ft(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(r),!0).forEach((function(t){Ht(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ht(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wt=function(e){var t={paywall_group_id:null!==e&&void 0!==e&&e.enable_subscription_group?e.paywall_group_id:""};return{publish:e.publish,paywall:Gt(Gt(Gt({},e),t),{},{prices_attributes:e.prices_attributes.map((function(e){return e.tmp_id?e:e._destroy?{id:e.id,_destroy:1}:e._updated?{id:e.id,preferred:e.preferred}:null})).filter((function(e){return e}))})}},Zt=function(e){var t,r=e.paywall,o=e.refetchPaywalls,a=e.onClose,s=e.isModalVisible,l=zt((0,N.useState)(b.eA.DETAILS_TAB),2),u=l[0],d=l[1],p=zt((0,N.useState)(null===r||void 0===r?void 0:r.status),2),f=p[0],m=p[1],h=(0,n.dd)(Tt).show,v=(t=(0,i.nT)().records,{getDefaultValues:function(e){var r,n,i,o,a,s,l={trial_days:0,trial_requires_card:!1,can_be_repurchased:!1,prices_attributes:[],all_spaces:!1,space_group_ids:[],space_ids:[],redirect_url_enabled:!1,thank_you_page_enabled:!0,post_purchase_email_enabled:!0,self_trial_cancelable:!1,post_purchase_email_message:(0,c.t)("settings.paywalls.form.post_purchase_email_default_message_text"),post_purchase_email_meta:{subject:(0,c.t)("settings.paywalls.form.post_purchase_email_default_subject_text")},currency_id:"",conversion_tracking_js_code:""};return e?Rt(Rt(Rt({},l),e),{},{redirect_url_enabled:!(null===e||void 0===e||!e.redirect_url),enable_trial:(null===e||void 0===e?void 0:e.trial_days)>0,enable_subscription_group:!(null===e||void 0===e||!e.paywall_group_id),space_ids:(o=e.space_ids,a=e.space_group_ids,s=Ut(o),t.forEach((function(e){a.includes(e.space_group_id)&&s.push(e.id)})),Array.from(new Set(s))),space_group_ids:null!==(r=e.space_group_ids)&&void 0!==r?r:[],currency_id:null!==(n=null===e||void 0===e||null===(i=e.currency)||void 0===i?void 0:i.id)&&void 0!==n?n:""}):l}}).getDefaultValues;(0,N.useEffect)((function(){s||d(b.eA.DETAILS_TAB),m(null===r||void 0===r?void 0:r.status)}),[s]);var y=(0,Lt.B)({updateCallback:function(e){o(),m(e.status),e.policies.can_update_all_members_access&&e.access_to_content_changed&&h({paywallId:e.id})},createCallback:function(e){a(),o(),m(e.status)},paywall:r}),g=y.createMutation,_=y.updateMutation,j=r?_:g;return{getDefaultValues:v,activeTab:u,setActiveTab:d,handleSubmit:function(e,t){var r=t.reset;if(!!e.id)return j.mutateAsync(Wt(e)).then((function(e){r(v(e))})).catch((function(e){console.error(e)}));if(u===b.eA.DETAILS_TAB)d(b.eA.PRICING_TAB);else if(u===b.eA.PRICING_TAB)d(b.eA.ACCESS_TAB);else if(u===b.eA.ACCESS_TAB)d(b.eA.POST_PURCHASE_TAB);else if(u===b.eA.POST_PURCHASE_TAB)d(b.eA.TRACKING_TAB);else if(u===b.eA.TRACKING_TAB)return j.mutate(Wt(e))},mutation:j,currentPaywallStatus:f}},Jt=function(e){var t,r,c,l,u=e.paywall,d=e.refetchPaywalls,m=e.paywallGroupsEnabled,b=(0,n.dd)(),h=(0,i.wh)(),v=h.currentCommunitySettings,y=h.isLoading,g=Zt({paywall:u,refetchPaywalls:d,onClose:b.hide,isModalVisible:b.visible}),_=g.getDefaultValues,j=g.setActiveTab,x=g.activeTab,w=g.handleSubmit,O=g.mutation,S=g.currentPaywallStatus;if(y)return(0,p.jsx)(a.a,{});var P=null!==(t=null===u||void 0===u||null===(r=u.policies)||void 0===r?void 0:r.requires_currency)&&void 0!==t?t:v.currencies_enabled,C=null===(c=null===u||void 0===u||null===(l=u.policies)||void 0===l?void 0:l.can_change_currency)||void 0===c||c;return(0,p.jsxs)(s.u_,{isOpen:b.visible,onClose:b.hide,contentPortalId:"paywall-admin-modal",children:[(0,p.jsx)(s.u_.Overlay,{}),(0,p.jsx)(s.u_.Content,{size:"xl",children:(0,p.jsx)(o.l,{onSubmit:w,"data-testid":"paywall-admin-modal",defaultValues:_(u),children:function(e){var t=e.formState.isSubmitting;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(s.u_.Header,{children:[(0,p.jsx)(s.u_.Title,{children:(0,p.jsx)(f,{isPaywallNew:!u})}),(0,p.jsx)(s.u_.HeaderActions,{children:(0,p.jsx)(s.u_.CloseButton,{onClick:b.hide,"data-testid":"paywall-admin-modal-close-button"})})]}),(0,p.jsx)(Ct,{activeTab:x,setActiveTab:j,isSubmitting:t,mutation:O,currentPaywallStatus:S,paywallGroupsEnabled:m,requiresCurrency:P,canChangeCurrency:C})]})}})})]})},$t=n.gk.create((function(e){var t=e.paywall,r=e.refetchPaywalls,n=e.paywallGroupsEnabled;return(0,p.jsx)(Jt,{paywall:t,refetchPaywalls:r,paywallGroupsEnabled:n})})),Qt=function(){return(0,n.dd)($t)}},22044:(e,t,r)=>{"use strict";r.d(t,{d:()=>o});var n=r(86013),i=r(85893),o=function(e){var t=e.children;return(0,i.jsxs)("div",{className:"flex flex-col gap-y-2",children:[t,(0,i.jsx)("p",{className:"text-default text-sm",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.generic.call_support")}})]})}},55500:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});var n=r(86013),i=r(72855),o=r(22322),a=r(85893),s=function(e){if(!e.paymentProcessor.is_restricted_soon)return null;var t="warning",r=(0,a.jsx)(i.O,{variant:t,children:(0,n.t)("settings.paywalls.processor_status_v2.restricted_soon.status")}),s=(0,n.t)("settings.paywalls.processor_status_v2.restricted_soon.title"),c=(0,a.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,a.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.restricted_soon.description")}}),(0,a.jsx)("p",{className:"text-default text-sm",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.restricted_soon.call_support")}})]});return(0,a.jsx)(o.t,{sentiment:t,badge:r,title:s,description:c})}},38838:(e,t,r)=>{"use strict";r.d(t,{q:()=>z});var n=r(86013),i=r(55675),o=r(61926),a=r(72675),s=r(53448),c=r(21809),l="stripe-onboarding-flow-v2",u=["US","BR","GB","AU","CA","DE","FR"],d=["IN","MX","MY"],p=["AL","AG","AR","AM","AT","BS","BH","BE","BO","BA","BG","KH","CL","CO","CR","CI","HR","CY","CZ","DK","DO","EC","EG","SV","EE","ET","FI","GM","GH","GR","GT","GY","HK","HU","IS","ID","IE","IL","IT","JM","JP","JO","KE","KW","LV","LI","LT","LU","MO","MG","MT","MU","MD","MN","MA","NA","NL","NZ","NG","MK","NO","OM","PA","PY","PE","PH","PL","PT","QA","RO","RW","SA","SN","RS","SG","SK","ZA","KR","ES","LK","LC","SE","CH","TW","TZ","TH","TT","TN","TR","AE","UY","UZ","VN"],f=r(88767),m=r(1229),b=function(e){var t=e.onSuccess,r=e.onError,i=(0,n.t)("settings.paywalls.alerts.error.action_failed"),o=(0,c.p)().error,a=(0,f.useMutation)((function(e){return m.p.create(e)})),s=a.mutate,l=a.isLoading,u=a.isSuccess,d=function(e){window.location.href=e.url},p=function(e){o((null===e||void 0===e?void 0:e.message)||i)};return{onSubmit:function(e){s(e,{onSuccess:t||d,onError:r||p})},isLoading:l,isSuccess:u}},h=r(67294),v=r(94184),y=r.n(v),g=r(87536),_=r(67732),j=r(74242),x=r(93826),w=r(58905),O=r(16743),S=r(85893);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N="stripe_onboarding_modal",I=function(e){var t=e.countries,r=e.isDisabled,i=e.defaultValue,a=(0,s.UV)().contentPortalElement;return(0,S.jsxs)("div",{className:"flex flex-col gap-y-4 py-4",children:[(0,S.jsx)(O.Z.BodySm,{color:"text-default",children:(0,S.jsx)(x.w,{content:(0,n.t)([N,"subtitles"])[0]})}),(0,S.jsx)(O.Z.BodySm,{color:"text-default",children:(0,S.jsx)(x.w,{content:(0,n.t)([N,"subtitles"])[1]})}),(0,S.jsx)(o.l.TextSelect,{name:"country",options:t,label:null,initialValue:i,disabled:r,appendTo:a,rules:{validate:{countryIsSupported:function(e){return!d.includes(e.toUpperCase())}}},popperOptions:{modifiers:[C(C({},w.Z),{},{phase:"afterWrite"})]}})]})},A=r(30887),E=r(3803),D=function(e){var t=e.children;return(0,S.jsxs)(E.v,{className:"flex flex-row gap-3",children:[(0,S.jsx)("div",{children:(0,S.jsx)(A.JO,{type:"information-outline",size:24})}),(0,S.jsx)(O.Z.LabelSm,{weight:"regular",as:"div",children:t})]})},T=function(e){var t=e.isDisabled,r=e.onClose;return(0,S.jsx)(s.u_.Footer,{children:(0,S.jsxs)("div",{className:"flex items-stretch justify-end space-x-4",children:[(0,S.jsx)(i.z,{type:"button",variant:"secondary",onClick:r,disabled:t,children:(0,n.t)("cancel")}),(0,S.jsx)(i.z,{form:l,type:"submit",variant:"circle",disabled:t,children:(0,n.t)("continue")})]})})};function L(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var R=function(e){var t=e.isLoading,r=e.onClose,i=e.defaultCountry,o=(0,g.Gc)(),a=o.watch,c=o.formState.isSubmitSuccessful,l=(0,_.v)().isMobileWebNewSpaceCustomizationUIEnabled,f=(0,h.useMemo)((function(){var e=u.map((function(e){return{label:(0,n.t)([j.p,e]),value:e.toLowerCase()}})),t=[].concat(L(p),L(d)).map((function(e){return{label:(0,n.t)([j.p,e]),value:e.toLowerCase()}})).sort((function(e,t){return e.label>=t.label?1:-1}));return[].concat(L(e),L(t))}),[]),m=a("country"),b=d.includes(m.toUpperCase()),v=t||c,w=t||c||b;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(s.u_.Body,{className:y()({"!px-5":l}),children:[(0,S.jsx)(I,{countries:f,isDisabled:v,defaultValue:i}),b&&(0,S.jsx)(D,{children:(0,S.jsx)(x.w,{content:(0,n.t)(["stripe_onboarding_modal","country_not_supported"],{country:(0,n.t)([j.p,m.toUpperCase()])})})})]}),(0,S.jsx)(T,{isDisabled:w,onClose:r})]})},B=function(){var e=(0,a.dd)(),t=(0,c.p)().error,r=b({onError:function(e){t(null===e||void 0===e?void 0:e.message),m()}}),i=r.onSubmit,u=r.isLoading,d=r.isSuccess,p=function(){var e,t,r=null===(e=window)||void 0===e?void 0:e.CLOUDFLARE_COUNTRY_CODE,n="pt"===(null===(t=window)||void 0===t?void 0:t.locale)?"BR":null;return(r||n||"US").toLowerCase()},f=u||d,m=function(){!f&&e.remove()},h={country:p()};return(0,S.jsx)(o.l,{id:l,onSubmit:i,defaultValues:h,children:(0,S.jsxs)(s.u_,{isOpen:e.visible,onClose:m,contentPortalId:"stripe-onboarding-business-modal",children:[(0,S.jsx)(s.u_.Overlay,{}),(0,S.jsxs)(s.u_.Content,{size:"lg",wrapperClassName:"!h-full",children:[(0,S.jsxs)(s.u_.Header,{children:[(0,S.jsx)(s.u_.Title,{size:"md",children:(0,n.t)(["stripe_onboarding_modal","title"])}),(0,S.jsx)(s.u_.HeaderActions,{children:(0,S.jsx)(s.u_.CloseButton,{onClick:m})})]}),(0,S.jsx)(R,{isLoading:u,onClose:m,defaultCountry:p()})]})]})})},U=function(){var e=(0,a.dd)(a.gk.create(B)),t=(0,n.t)("settings.paywalls.processor_status_v2.onboarding.subtitles"),r=b({}).onSubmit;return(0,S.jsxs)(o.l,{onSubmit:r,defaultValues:{forceForm:!0},formClassName:"flex flex-col gap-y-4",children:[(0,S.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,S.jsx)("p",{className:"text-light",dangerouslySetInnerHTML:{__html:t[0]}}),(0,S.jsx)("p",{className:"text-light",dangerouslySetInnerHTML:{__html:t[1]}}),(0,S.jsx)("p",{className:"text-light",dangerouslySetInnerHTML:{__html:t[2]}})]}),(0,S.jsxs)("div",{className:"flex flex-row gap-x-2",children:[(0,S.jsx)(i.z,{type:"button",variant:"circle","data-testid":"stripe-connect",onClick:function(){e.show()},children:(0,S.jsx)("span",{children:(0,n.t)("settings.paywalls.buttons.connect")})}),(0,S.jsx)(i.z,{type:"button",variant:"secondary",onClick:function(){window.open("https://help.circle.so/c/paywall-setup/","_blank")},children:(0,n.t)("learn_more")})]})]})},F=r(22322),z=function(){var e=(0,n.t)("settings.paywalls.processor_status_v2.onboarding.title");return(0,S.jsx)("div",{className:"flex h-full w-full flex-col py-0 md:py-8",children:(0,S.jsxs)("div",{className:"w-full self-center md:w-3/4",children:[(0,S.jsx)(F.t,{sentiment:"default",title:e,description:(0,S.jsx)(U,{})}),(0,S.jsx)("p",{className:"text-default px-7 text-xs",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.onboarding.stripe_regulations_description")}})]})})}},95186:(e,t,r)=>{"use strict";r.d(t,{a:()=>p});var n=r(86013),i=r(88767),o=r(1229),a=r(55675),s=r(72855),c=r(21809),l=r(22044),u=r(22322),d=r(85893),p=function(){var e=(0,n.t)("settings.paywalls.alerts.error.action_failed"),t=(0,c.p)().error,r=(0,i.useMutation)((function(){return o.p.refresh()})),p=r.mutate,f=r.isLoading,m="danger",b=(0,d.jsx)(s.O,{variant:m,children:(0,n.t)("settings.paywalls.processor_status_v2.restricted.status")}),h=(0,d.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,d.jsx)(l.d,{children:(0,d.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.restricted.description")}})}),(0,d.jsx)("div",{children:(0,d.jsx)(a.z,{variant:"circle",onClick:function(){p(void 0,{onSuccess:function(e){window.location.href=e.url},onError:function(r){t((null===r||void 0===r?void 0:r.message)||e)}})},disabled:f,children:(0,n.t)("settings.paywalls.buttons.refresh")})})]});return(0,d.jsx)(u.t,{sentiment:m,title:(0,n.t)("settings.paywalls.processor_status_v2.restricted.title"),badge:b,description:h})}},86681:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(86013),i=r(97012),o=r(72855),a=r(22322),s=r(85893),c=function(){var e=(0,i.wh)().currentCommunitySettings,t=(0,s.jsx)(o.O,{variant:"warning",children:(0,n.t)("settings.paywalls.processor_status_v2.restricted.status")}),r=(0,s.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.restricted_for_application_fee.description")}});return null!==e&&void 0!==e&&e.paywalls_for_restricted_country_enabled?null:(0,s.jsx)(a.t,{sentiment:"warning",title:(0,n.t)("settings.paywalls.processor_status_v2.restricted_for_application_fee.title"),badge:t,description:r})}},22322:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});var n=r(94184),i=r.n(n),o=r(16743),a=r(85893),s=function(e){var t=e.sentiment,r=e.title,n=e.badge,s=e.description,c=i()("md:border md:border-primary md:rounded-lg md:p-8 m-6 bg-primary",{"flex flex-row":"default"!==t});return(0,a.jsx)("div",{className:c,"data-testid":"payment-processor-status",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-2",children:[n&&(0,a.jsx)("div",{children:n}),r&&(0,a.jsx)(o.Z.TitleMd,{"data-testid":"title",children:r}),s&&(0,a.jsx)("div",{"data-testid":"description",children:s})]})})}},94891:(e,t,r)=>{"use strict";r.d(t,{t:()=>l});var n=r(86013),i=r(43629),o=r(72855),a=r(22044),s=r(22322),c=r(85893),l=function(e){var t=e.status,r=t==i.Q.REJECTED?"danger":"warning",l=(0,c.jsx)(o.O,{variant:r,children:(0,n.t)("settings.paywalls.processor_status_v2.".concat(t,".status"))}),u=(0,c.jsx)(a.d,{children:(0,c.jsx)("p",{className:"text-default text-lg",dangerouslySetInnerHTML:{__html:(0,n.t)("settings.paywalls.processor_status_v2.".concat(t,".description"))}})});return(0,c.jsx)(s.t,{sentiment:r,badge:l,title:(0,n.t)("settings.paywalls.processor_status_v2.".concat(t,".title")),description:u})}},27258:(e,t,r)=>{"use strict";r.d(t,{eA:()=>i,J6:()=>o,nh:()=>a});var n=r(86013),i={DETAILS_TAB:(0,n.t)("settings.paywalls.modal.tabs.details.title"),PRICING_TAB:(0,n.t)("settings.paywalls.modal.tabs.pricing.title"),ACCESS_TAB:(0,n.t)("settings.paywalls.modal.tabs.access.title"),POST_PURCHASE_TAB:(0,n.t)("settings.paywalls.modal.tabs.post_purchase.title"),TRACKING_TAB:(0,n.t)("settings.paywalls.modal.tabs.tracking.title")},o={NOT_EXIST:"PAYMENT_PROCESSOR_NOT_EXIST",RESTRICTED:"PAYMENT_PROCESSOR_RESTRICTED",RESTRICED_FOR_APPLICATION_FEES:"PAYMENT_PROCESSOR_RESTRICTED_FOR_APPLICATION_FEES",PENDING:"PAYMENT_PROCESSOR_PENDING",REJECTED:"PAYMENT_PROCESSOR_REJECTED",ENABLED:"PAYMENT_PROCESSOR_ENABLED"},a=[{title:(0,n.t)("settings.paywalls.list.form.display_name_label"),dataIndex:"displayName",key:"displayName"},{title:(0,n.t)("settings.paywalls.list.form.amount_label"),dataIndex:"preferred_price",key:"preferred_price"},{title:(0,n.t)("settings.paywalls.list.form.status_label"),dataIndex:"status",key:"status"},{title:" ",dataIndex:"action",key:"action"},{title:" ",dataIndex:"actionMenu",key:"actionMenu"}]},45157:(e,t,r)=>{"use strict";r.d(t,{l:()=>o});var n=r(43629),i=r(27258),o=function(e){var t,r=e.paymentProcessor,o=void 0;return(0,n.$)(r).some((function(e){o||(o=e())})),{paymentProcessorStatus:null!==(t=o)&&void 0!==t?t:i.J6.ENABLED}}},75122:(e,t,r)=>{"use strict";r.d(t,{B:()=>c});var n=r(86013),i=r(88767),o=r(13546),a=r(4796),s=r(21809),c=function(e){var t=e.createCallback,r=e.updateCallback,c=e.paywall,l=(0,s.p)(),u=l.success,d=l.error,p=(0,n.t)("settings.paywalls.alerts.error.action_failed"),f=function(e,t,r){u(t),r&&r(e)},m=function(e){var t="string"===typeof(null===e||void 0===e?void 0:e.errorDetails)?null===e||void 0===e?void 0:e.errorDetails:p;d(t,{duration:"long"})},b=function(e){return{publish:e,paywall:{status:e?c.status:a.Tl.INACTIVE}}};return{updateMutation:(0,i.useMutation)((function(e){return o.i.updatePaywall(c.id,e)}),{onSuccess:function(e){return f(e,(0,n.t)("settings.paywalls.alerts.success.updated"),r)},onError:m}),createMutation:(0,i.useMutation)((function(e){return o.i.createPaywall(e)}),{onSuccess:function(e){return f(e,(0,n.t)("settings.paywalls.alerts.success.created"),t)},onError:m}),publishMutation:(0,i.useMutation)((function(){return o.i.updatePaywall(c.id,b(!0))}),{onSuccess:function(e){return f(e,(0,n.t)("settings.paywalls.alerts.success.published"),r)},onError:m}),archiveMutation:(0,i.useMutation)((function(){return o.i.updatePaywall(c.id,b(!1))}),{onSuccess:function(e){return f(e,(0,n.t)("settings.paywalls.alerts.success.archived"),r)},onError:m}),deleteMutation:(0,i.useMutation)((function(){return o.i.deletePaywall(c.id)}),{onSuccess:function(e){return f(e,(0,n.t)("settings.paywalls.alerts.success.deleted"),r)},onError:m})}}},29710:(e,t,r)=>{"use strict";r.d(t,{u:()=>F,R:()=>U});var n=r(88767),i=r(72675),o=r(68830),a=r(16855),s=r(75752),c=r(21809),l=r(86013),u=r(55675),d=r(16743),p=r(29451),f=r(27258),m=r(85893);var b=function(e){var t,r,n,i,o=e.refetchPaywalls,a=e.paymentProcessorStatus,s=e.paywallGroupsEnabled,c=(0,p.I)(),b=function(){return c.show({paywall:void 0,refetchPaywalls:o,paywallGroupsEnabled:s})},h=null!==(t=(r={},n=f.J6.ENABLED,i=function(){return(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)(d.Z.TitleSm,{weight:"font-semibold",children:(0,l.t)("settings.paywalls.title")}),(0,m.jsx)(u.z,{variant:"circle",onClick:b,children:(0,l.t)("settings.paywalls.buttons.new")})]})},n in r?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,r)[a])&&void 0!==t?t:function(){return(0,m.jsx)("div",{className:"flex justify-between",children:(0,m.jsx)(d.Z.TitleSm,{weight:"font-semibold",children:(0,l.t)("settings.paywalls.title")})})};return(0,m.jsx)("div",{className:"paywalls-admin-header__container table-wrapper",children:h()})},h=r(3108),v=r(5295),y=r(649),g=r(43037),_=r(30887),j=r(45034),x=r(12995),w=function(e){var t=e.paywalls,r=e.refetchPaywalls,n=e.paywallGroupsEnabled,i=(0,p.I)().show;return{showPaywallAdminFormModalToCreate:function(){return i({paywall:void 0,refetchPaywalls:r,paywallGroupsEnabled:n})},dataSource:null===t||void 0===t?void 0:t.map((function(e){var t,o,a={active:{label:(0,l.t)("settings.paywalls.status.active"),variant:"success"},inactive:{label:(0,l.t)("settings.paywalls.status.inactive"),variant:"default"},draft:{label:(0,l.t)("settings.paywalls.status.draft"),variant:"default"},notIdentified:{label:"",variant:"default"}},s=null!==(t=a[e.status])&&void 0!==t?t:a.notIdentified,c=null!==(o=e.prices_attributes.find((function(e){return e.preferred})))&&void 0!==o?o:e.prices_attributes[0],u=c?(0,y.Y9)(e.currency,c.interval,c.interval_count,c.amount):(0,l.t)("settings.paywalls.list.form.no_preferred_price_selected"),d=[{key:"edit-paywall",label:(0,l.t)("settings.paywalls.list.form.edit"),onClick:function(){return function(e){return i({paywall:e,refetchPaywalls:r,paywallGroupsEnabled:n})}(e)}}];return{key:e.id,displayName:e.name||e.display_name,preferred_price:u,status:(0,m.jsx)(j.C,{variant:s.variant,children:s.label}),action:(0,m.jsxs)("button",{type:"button",className:"text-[12px]",onClick:function(){return(0,g.p0)(e.checkout_path,".paywall-coupons-list__table")},children:[(0,m.jsx)(_.JO,{type:"20-copy",className:"mr-2"}),(0,m.jsx)("span",{children:(0,l.t)("settings.paywalls.list.form.copy_url")})]}),actionMenu:(0,m.jsx)(x.t,{menuItems:d,dropdownSide:"left",shouldCloseOnClickItem:!0})}}))}},O=function(e){var t=e.paywalls,r=e.refetchPaywalls,n=e.isPaywallsLoading,i=e.paywallGroupsEnabled,o=w({paywalls:t,refetchPaywalls:r,paywallGroupsEnabled:i}),a=o.showPaywallAdminFormModalToCreate,s=o.dataSource;return n?(0,m.jsx)(v.a,{}):(0,m.jsx)("div",{className:"paywall-coupons-list","data-testid":"paywall-list",children:s.length>0?(0,m.jsx)(h.w,{columns:f.nh,className:"paywall-coupons-list__table",dataSource:s||[],hasStickyHeader:!0,headerClassName:"top-[116px]"}):(0,m.jsxs)("div",{className:"space__gated locked-pane no-shadow",children:[(0,m.jsx)("h3",{children:(0,l.t)("settings.paywalls.empty_collection_title")}),(0,m.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,l.t)("settings.paywalls.empty_collection_text")}}),(0,m.jsx)("br",{}),(0,m.jsx)(u.z,{variant:"circle",onClick:a,children:(0,l.t)("settings.paywalls.buttons.new")})]})})},S=r(55500),P=r(38838),C=r(95186),k=r(86681),N=r(94891),I=r(64687),A=r.n(I),E=r(34128),D=r(49326),T=r(45157);function L(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var M=function(e){var t=e.paymentProcessor,r=function(){var e,t=(e=A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,E.UT)(D.av.paywalls.index()));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){L(o,n,i,a,s,"next",e)}function s(e){L(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),i=(0,n.useQuery)("paywalls",r);return{paywalls:i.data,refetchPaywalls:i.refetch,isPaywallsLoading:i.isLoading,paymentProcessorStatus:(0,T.l)({paymentProcessor:t}).paymentProcessorStatus}};function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var B=new n.QueryClient(s.Vr),U=function(e){var t,r=e.paymentProcessor,n=e.paywallGroupsEnabled,i=e.shouldHideHeader,o=void 0!==i&&i,a=M({paymentProcessor:r}),s=a.paymentProcessorStatus,c=a.paywalls,l=a.refetchPaywalls,u=a.isPaywallsLoading,d=(R(t={},f.J6.NOT_EXIST,(function(){return null})),R(t,f.J6.REJECTED,(function(){return(0,m.jsx)(N.t,{status:"rejected"})})),R(t,f.J6.PENDING,(function(){return(0,m.jsx)(N.t,{status:"pending"})})),R(t,f.J6.RESTRICED_FOR_APPLICATION_FEES,(function(){return(0,m.jsx)(k.c,{})})),R(t,f.J6.RESTRICTED,(function(){return(0,m.jsx)(C.a,{})})),R(t,f.J6.ENABLED,(function(){return(0,m.jsx)(S.T,{paymentProcessor:r})})),R(t,f.J6.NOT_EXIST,(function(){return(0,m.jsx)(P.q,{})})),t)[s];return(0,m.jsxs)(m.Fragment,{children:[!o&&(0,m.jsx)(b,{refetchPaywalls:l,paymentProcessorStatus:s,paywallGroupsEnabled:n}),d(),s===f.J6.ENABLED&&(0,m.jsx)(O,{refetchPaywalls:l,paywalls:null!==c&&void 0!==c?c:[],isPaywallsLoading:u,paywallGroupsEnabled:n})]})},F=function(e){var t=e.paymentProcessor,r=e.paywallGroupsEnabled;return(0,m.jsx)(o.C,{children:(0,m.jsx)(a.H,{children:(0,m.jsx)(c.V,{children:(0,m.jsx)(n.QueryClientProvider,{client:B,children:(0,m.jsx)(i.yB,{children:(0,m.jsx)(U,{paymentProcessor:t,paywallGroupsEnabled:r})})})})})})}},87658:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});var n=r(97012),i=function(){var e,t=(0,n.wh)().currentCommunity;return null===t||void 0===t||null===(e=t.policies)||void 0===e?void 0:e.is_paywall_tax_available}},40340:(e,t,r)=>{"use strict";r.d(t,{PC:()=>i,oO:()=>o,C:()=>a,zS:()=>s,IF:()=>l,JV:()=>u,bE:()=>d,Gs:()=>p});var n=r(86013),i={message:(0,n.t)("paywall_checkout.form.errors.payment_general_error")},o={message:(0,n.t)("paywall_checkout.form.errors.stripe_connection_failed")},a={message:(0,n.t)("paywall_checkout.form.errors.pix_payment.time_expired"),error_details:"PIX_PAYMENT_EXPIRED"},s={message:(0,n.t)("paywall_checkout.form.errors.pix_payment.pix_modal_closed"),error_details:"PIX_MODAL_CLOSED"},c={message:(0,n.t)("paywall_checkout.form.errors.community_member_billing_info_attributes[tax_id_value]_required")},l=function(){var e;return null===(e=window.Rewardful)||void 0===e?void 0:e.referral},u={disablePayButton:!0,type:"danger",existingAccount:!1,hasAlreadyPurchased:!1,message:null},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.loginUrl,o=t.billingUrl,l=t.eventUrl;return{USER_LOGIN_REQUIRED:{disablePayButton:!1,type:"warning",existingAccount:!0,message:(0,n.t)("paywall_checkout.form.errors.existing_account",{sign_in_url:r})},USER_FORM_ERROR:{message:(0,n.t)("paywall_checkout.form.errors.user_error"),disablePayButton:!1},PAYWALL_ALREADY_PURCHASED:{hasAlreadyPurchased:!0,type:"warning",message:(0,n.t)("paywall_checkout.form.errors.already_purchased",{billing_url:o})},PROCESSOR_ERROR:{message:e.message||(0,n.t)("paywall_checkout.form.errors.payment_general_error")},INVALID_COUPON:{message:e.message},PIX_PAYMENT_EXPIRED:a,PIX_MODAL_CLOSED:s,TAX_ID_REQUIRED:c,EVENT_SPOT_EXPIRED:{type:"danger",message:(0,n.t)("paywall_checkout.form.errors.event_spot_expired",{event_url:l})},EVENT_SPOT_PAID:{type:"warning",message:(0,n.t)("paywall_checkout.form.errors.event_spot_paid",{event_url:l})},EVENT_RSVP_LIMIT_REACHED:{type:"danger",message:(0,n.t)("paywall_checkout.form.errors.event_rsvp_limit_reached")},COLLECT_PAYMENT:{type:"danger",message:(0,n.t)("paywall_checkout.form.errors.collect_payment")}}[e.error_details]||i},p=function(e){var t=e.isPaywallActive,r=e.selectedPrice,i=e.preview;return t&&r?null!==r&&void 0!==r&&r.trial_enabled?null!==r&&void 0!==r&&r.trial_requires_upfront_payment?(0,n.t)("paywall_checkout.form.buttons.paid_trial"):(0,n.t)("paywall_checkout.form.buttons.trial"):0===(null===i||void 0===i?void 0:i.amount_due_now)&&null!==r&&void 0!==r&&r.display_interval?(0,n.t)("paywall_checkout.form.buttons.subscribe"):0!==(null===i||void 0===i?void 0:i.amount_due_now)||null!==r&&void 0!==r&&r.display_interval?(null===i||void 0===i?void 0:i.amount_due_now)>0?"".concat((0,n.t)("paywall_checkout.form.buttons.pay")," ").concat(i.formatted_amount_due_now):"".concat((0,n.t)("paywall_checkout.form.buttons.pay")," ").concat(r.display_amount_with_currency):(0,n.t)("paywall_checkout.form.buttons.continue"):(0,n.t)("paywall_checkout.form.buttons.draft_pay")}},50746:(e,t,r)=>{"use strict";r.d(t,{h:()=>at});var n=r(67294),i=r(86664),o=r(64593),a=r(87536),s=r(88767),c=r(81196),l=r(88992),u=r(74238),d=r(75752),p=r(80424),f=r(57356),m=r(94184),b=r.n(m),h=r(86013),v=r.n(h),y=r(16743),g=r(85893),_=function(e){var t=e.name,r=e.addon,n=e.className,i=e.children,o=e.optional;return(0,g.jsxs)("div",{className:b()(n,"flex flex-col"),children:[(0,g.jsxs)("div",{className:"mb-1 flex flex-row items-center",children:[(0,g.jsxs)("div",{className:"flex flex-row items-center gap-x-1",children:[(0,g.jsx)(y.Z.LabelSm,{weight:"semibold",children:v().t("paywall_checkout.form.fields.".concat(t))}),o&&(0,g.jsxs)(g.Fragment,{children:[" ",(0,g.jsx)(y.Z.LabelSm,{weight:"normal",color:"text-light",children:"(".concat(v().t("paywall_checkout.form.fields.optional"),")")})]})]}),r]}),i]})},j=r(30887),x=r(55675),w=r(5295),O=r(43037),S=r(40340),P=r(64687),C=r.n(P),k=r(81967),N=r(49326),I=r(34128),A=function(e){return(0,I.t5)(N.av.communityMemberCharge.show({processorId:e}),{method:"GET"})},E=r(76181),D=r(56874);function T(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){T(o,n,i,a,s,"next",e)}function s(e){T(o,n,i,a,s,"throw",e)}a(void 0)}))}}var M=function(e,t){var r,n,i=(null===e||void 0===e?void 0:e.subscription_processor_id)||(null===e||void 0===e?void 0:e.payment_intent_processor_id)||(null===e||void 0===e?void 0:e.invoice_processor_id),o="".concat(t).concat(i);return null===(r=window.webview)||void 0===r||null===(n=r.paymentSuccessful)||void 0===n||n.call(r),window.open(o,"_self")},R="requires_action",B="succeeded",U=function(e){return(null===e||void 0===e?void 0:e.status)===R},F=function(e){return(null===e||void 0===e?void 0:e.status)===B};function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function H(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){G(o,n,i,a,s,"next",e)}function s(e){G(o,n,i,a,s,"throw",e)}a(void 0)}))}}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var J=function(e){throw new Error(null===e||void 0===e?void 0:e.message,{cause:e.body})};function $(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var Q=function(e,t,r){var n,i;(null===e||void 0===e||null===(n=e.cause)||void 0===n?void 0:n.error_details)!==S.zS.error_details&&((0,k.d)(e),console.error("Error: unexpected error occurred: ",e),t((0,S.bE)({message:e.message,error_details:(null===e||void 0===e||null===(i=e.cause)||void 0===i?void 0:i.error_details)||S.PC},r)))},K=function(e){var t=e.stripe,r=e.elements,o=(0,p.Y)(),a=o.paywall,c=o.handleError,l=o.setIsProcessingPayment,u=o.loginUrl,d=o.communityRootUrl,f=function(e){var t=e.stripe,r=e.elements,n=(0,p.Y)(),o=n.paywall,a=n.currentCommunity,c=n.checkoutConfirmationUrl,l=n.loginUrl,u=n.communityRootUrl,d=n.handleError,f=n.setIsProcessingPayment,m=n.getSelectedPrice,b=n.isCardInfoRequired,h=function(e){var t;d((0,S.bE)(e,{loginUrl:l,billingUrl:"".concat(u).concat(N.G3.billing.slice(1)),eventUrl:null!==(t=null===o||void 0===o?void 0:o.event_url)&&void 0!==t?t:"#"}))},v=m(),y=function(){var e=L(C().mark((function e(t,r){var n,i,o,a,s;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payment_intent_processor_id,i=t.invoice_processor_id,!(r>30)){e.next=5;break}return console.error("Error: Payment polling timed out"),d(S.PC),e.abrupt("return");case 5:return o=null!==n&&void 0!==n?n:i,e.next=8,A(o);case 8:if(!(a=e.sent).ok){e.next=15;break}return e.next=12,a.json();case 12:if(s=e.sent,!(0,D.Om)(s)){e.next=15;break}return e.abrupt("return",M(t,c));case 15:return e.next=17,new Promise((function(e){return setTimeout(e,2e3)}));case 17:return e.next=19,y(t,r+1);case 19:return e.abrupt("return",void 0);case 20:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=L(C().mark((function e(n){var o,a,s,c,l;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.payment_intent_processor_id,a=n.payment_intent_client_secret,t&&r){e.next=4;break}return d(S.oO),e.abrupt("return");case 4:if(o||a){e.next=8;break}return e.next=7,y(n,0);case 7:case 23:return e.abrupt("return");case 8:return e.next=10,t.retrievePaymentIntent(a);case 10:if(!(s=e.sent).error){e.next=15;break}return console.error("Error: Payment intent error"),d({message:s.error.message,disablePayButton:!0}),e.abrupt("return");case 15:if("canceled"!==(c=s.paymentIntent).status){e.next=20;break}return console.error("Error: Payment intent canceled"),d(S.PC),e.abrupt("return");case 20:if("succeeded"!==c.status){e.next=24;break}return e.next=23,y(n,0);case 24:return e.next=26,t.confirmCardPayment(n.payment_intent_client_secret,{payment_method:{card:r.getElement(i.CardElement)}});case 26:if(!(l=e.sent).error){e.next=32;break}console.error("Error: Card payment confirmation error"),d({message:l.error.message,disablePayButton:!1}),e.next=39;break;case 32:if("succeeded"===l.paymentIntent.status){e.next=37;break}console.error("Error: Payment intent did not succeed"),d(S.PC),e.next=39;break;case 37:return e.next=39,y(n,0);case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=(0,s.useMutation)(function(){var e=L(C().mark((function e(n){var o,s,l,u,p,m,y,_,j,x;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n,(0,S.IF)()&&(o.referral_metadata=(0,S.IF)()),f(!0),e.prev=3,!b){e.next=33;break}return e.next=7,E.k.prepare_DEPRECATED(a.id);case 7:if((s=e.sent).ok){e.next=15;break}return e.next=11,s.json();case 11:return l=e.sent,h(l),f(!1),e.abrupt("return");case 15:return e.next=17,s.json();case 17:return u=e.sent,p=u.setup_intent.client_secret,e.next=21,t.retrieveSetupIntent(p);case 21:if((m=e.sent).setupIntent&&"succeeded"===m.setupIntent.status){e.next=26;break}return e.next=25,t.confirmCardSetup(p,{payment_method:{card:r.getElement(i.CardElement)}});case 25:m=e.sent;case 26:if(!m.error){e.next=31;break}return console.error("Error: card setup error"),d({message:m.error.message,disablePayButton:!1}),f(!1),e.abrupt("return");case 31:y=m.setupIntent.payment_method,o.payment_method_processor_id=y;case 33:return e.next=35,E.k.create_DEPRECATED({formData:o});case 35:if(!(_=e.sent).ok){e.next=46;break}return e.next=39,_.json();case 39:if(j=e.sent,!v.trial_enabled){e.next=42;break}return e.abrupt("return",M(j,c));case 42:return e.next=44,g(j);case 44:e.next=50;break;case 46:return e.next=48,_.json();case 48:x=e.sent,h(x);case 50:e.next=57;break;case 52:e.prev=52,e.t0=e.catch(3),(0,k.d)(e.t0),console.error("Error: unexpected error occurred: ",e.t0),d(S.PC);case 57:return f(!1),e.abrupt("return",void 0);case 59:case"end":return e.stop()}}),e,null,[[3,52]])})));return function(t){return e.apply(this,arguments)}}());return{onSubmitMutation:_}}({stripe:t,elements:r}),m=function(e){var t=e.stripe,r=(0,p.Y)(),i=r.currentCommunity,o=r.checkoutConfirmationUrl,a=(0,s.useMutation)((function(e){return t.confirmPixPayment(e.payment_intent_client_secret,{payment_method:{}})})),c=W((0,n.useState)({}),2),l=c[0],u=c[1],d=(0,s.useMutation)((function(e){return E.k.prepare(e)})),f=(0,s.useMutation)((function(e){return E.k.create({formData:e})})),m=function(){var e=H(C().mark((function e(r){var n,o,s,c,p,f,m,b,h,v,y,g,_,j,x;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.name,s=r.email,c=r.payment_method_type,p=r.paywall_price_id,f=r.coupon_code,m=r.coupon_code_applied,b=r.community_member_billing_info_attributes,h={name:o,email:s,payment_method_type:c,paywall_price_id:p,community_id:i.id,coupon_code:m?f:void 0,community_member_billing_info_attributes:b},!(v=JSON.stringify(l)===JSON.stringify(h))){e.next=9;break}return e.next=6,t.retrievePaymentIntent(null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.payment_intent_client_secret);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=null;case 10:if(y=e.t0,g=v&&U(null===y||void 0===y?void 0:y.paymentIntent),e.t1=g&&(null===d||void 0===d?void 0:d.data),e.t1){e.next=17;break}return e.next=16,d.mutateAsync(h,{onSuccess:function(){u(h)},onError:J});case 16:e.t1=e.sent;case 17:if(!(_=e.t1)){e.next=29;break}return e.next=21,a.mutateAsync(_);case 21:if(j=e.sent,x=j.paymentIntent,!U(x)){e.next=25;break}throw new Error("Pix modal is closed",{cause:S.zS});case 25:if(F(x)){e.next=29;break}throw d.reset(),u({}),new Error("Pix payment expired",{cause:S.C});case 29:return e.abrupt("return",_);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=H(C().mark((function e(t,r){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.mutateAsync(V(V({},t),{},{payment_intent_id:r.payment_intent_id}),{onError:J});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),h=(0,s.useMutation)(function(){var e=H(C().mark((function e(t){var r,n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:if(!(r=e.sent)){e.next=9;break}return e.next=6,b(t,r);case 6:return(n=e.sent)&&M(n,o),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return{onSubmitMutation:h,mutations:{prepareMutation:d,checkoutMutation:f,confirmPixPaymentMutation:a}}}({stripe:t}),b={pix:m,card:f},h=function(){var e,t=(e=C().mark((function e(t){var r,n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,S.IF)()&&(t.referral_metadata=(0,S.IF)()),r=b[t.payment_method_type].onSubmitMutation,e.prev=2,l(!0),e.next=6,r.mutateAsync(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Q(e.t0,c,{loginUrl:u,billingUrl:"".concat(d).concat(N.G3.billing.slice(1)),eventUrl:null!==(n=null===a||void 0===a?void 0:a.event_url)&&void 0!==n?n:"#"});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){$(o,n,i,a,s,"next",e)}function s(e){$(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{onSubmit:h}},X=r(38870),Y=function(){var e=(0,p.Y)(),t=e.currentUser,r=e.currentCommunityMember||t;return t?(0,g.jsxs)("div",{className:"flex flex-row items-center gap-x-2 rounded border border-gray-200 bg-gray-50 px-3 py-4","data-testid":"checkout-form-account-details",children:[(0,g.jsx)(X.s,{src:r.avatar_url,name:r.name,size:"10"}),(0,g.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,g.jsx)(y.Z.LabelSm,{weight:"medium","data-testid":"checkout-form-account-details-name",children:r.name}),(0,g.jsx)(y.Z.LabelXs,{weight:"medium","data-testid":"checkout-form-account-details-email",children:r.email})]})]}):null},ee=r(70360),te=["className","error"];function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ae=(0,n.forwardRef)((function(e,t){var r=e.className,n=e.error,i=void 0!==n&&n,o=oe(e,te);return(0,g.jsx)("input",ne(ne({className:b()(r,{"border-red-600 focus:border-red-600":i},"placeholder:text-light h-11 grow rounded-lg border border-solid border-gray-200 bg-white px-4 py-3 shadow-none outline-0 ring-0 placeholder:opacity-100 focus:border focus:border-gray-500 focus:shadow-none focus:outline-0 focus:ring-0")},o),{},{ref:t}))}));function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}ae.displayName="CheckoutFormInput";var ue=function(e){var t=e.autoFocus,r=void 0!==t&&t,n=e.className,i=e.name,o=e.placeholder,s=e.options,c=void 0===s?{}:s,l=e.type,u=(0,a.Gc)(),d=u.register,p=u.formState.errors,f=(0,a.U2)(p,i);return(0,g.jsxs)("div",{className:b()(n,"flex flex-col"),children:[(0,g.jsx)(ae,ce({autoFocus:r,type:l,error:!!f,placeholder:o},d(i,c))),f&&(0,g.jsx)("div",{className:"mt-2",children:(0,g.jsx)(y.Z.LabelSm,{weight:"semibold",color:"text-red-600",children:(0,h.t)("paywall_checkout.form.errors.".concat(i,"_").concat(String(f.type)))})})]})},de=function(){var e=(0,p.Y)(),t=e.currentUser,r=e.loginUrl;return t?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(_,{name:"email",children:(0,g.jsx)(ue,{type:"text",name:"email",autoFocus:!0,options:{required:!0,pattern:ee.CU}})}),(0,g.jsx)(_,{name:"password",children:(0,g.jsx)(ue,{type:"password",name:"password",options:{required:!0,pattern:ee.zU}})}),(0,g.jsxs)(y.Z.BodyXs,{weight:"regular",children:[(0,h.t)("paywall_checkout.have_an_account"),(0,g.jsx)("a",{href:r,"data-testid":"checkout-form-sign-in-link",children:(0,h.t)("paywall_checkout.form.buttons.sign_in")})]})]})},pe=function(){var e=(0,p.Y)(),t=e.paywall,r=e.communityRootUrl,n=e.hasAlreadyPurchased,i=e.paymentError,o="",a="";return(0,O.Sz)(n,t)?(o="warning",a=(0,h.t)("paywall_checkout.form.errors.already_purchased",{billing_url:"".concat(r).concat(N.G3.billing.slice(1))})):i&&i.message&&(o=i.type,a=i.message),o&&a?(0,g.jsx)("div",{className:b()("rounded border px-6 py-5",{"border-red-500 bg-red-50 text-red-800":"danger"===o,"border-yellow-500 bg-yellow-50 text-yellow-800":"warning"===o}),dangerouslySetInnerHTML:{__html:a},"data-testid":"checkout-alert"}):null},fe=function(){var e=(0,p.Y)(),t=e.currentUser,r=e.isMemberAddressRequired,n=e.paywall,o=e.getSelectedPrice,s=e.setMemberAddressAttributes,c=(0,(0,a.Gc)().watch)("payment_method_type");if(!r&&t)return null;if(r)return(0,g.jsx)(i.AddressElement,{options:f.kl,onChange:s});var l="name_on_card";return(o().trial_enabled&&!n.trial_requires_card||(0,O.kh)(c))&&(l="name"),(0,g.jsx)(_,{name:l,children:(0,g.jsx)(ue,{type:"text",name:"name",options:{required:!0}})})},me=function(){var e=(0,a.Gc)().watch,t=(0,p.Y)().clearCouponCode,r=e("coupon_code");return(0,g.jsxs)("div",{className:"flex w-fit flex-row items-center rounded-lg bg-gray-100 px-4 py-2","data-testid":"checkout-form-coupon-code",children:[(0,g.jsx)(y.Z.LabelSm,{weight:"medium",children:r}),(0,g.jsxs)(x.z,{small:!0,className:"p-0 text-gray-600",type:"button",variant:"plain",onClick:t,"data-testid":"checkout-form-remove-coupon",children:[(0,g.jsx)("span",{className:"sr-only",children:(0,h.t)("paywall_checkout.form.buttons.remove_coupon")}),(0,g.jsx)(j.JO,{type:"16-close",size:16})]})]})},be=function(){var e=(0,a.Gc)().watch,t=(0,p.Y)().applyCouponCode,r=e("coupon_code");return(0,g.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,g.jsx)(ue,{className:"grow",type:"text",name:"coupon_code"}),r&&(0,g.jsx)(x.z,{large:!0,type:"button",variant:"secondary",onClick:t,"data-testid":"checkout-form-apply-coupon",children:(0,g.jsx)(y.Z.LabelSm,{weight:"medium",children:(0,h.t)("paywall_checkout.form.buttons.apply_coupon")})})]})},he=function(){var e,t=(0,a.Gc)().watch;return(0,p.Y)().areCouponsEnabled?(e=t().coupon_code_applied?(0,g.jsx)(me,{}):(0,g.jsx)(be,{}),(0,g.jsx)(_,{name:"coupon_code",optional:!0,children:e})):null},ve=function(e){var t=e.className,r=e.children;return(0,g.jsx)("div",{className:b()("border-secondary-200 flex flex-col py-6 empty:hidden",t),children:r})},ye=r(69270);function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xe="termsOfService",we=function(e){var t=e.label,r=void 0===t?(0,h.t)("checkbox"):t,n=(0,a.Gc)().register;return(0,p.Y)().currentUser?null:(0,g.jsx)("div",{className:"flex",children:(0,g.jsxs)("div",{className:"inline-flex items-start gap-3",children:[(0,g.jsx)("input",_e({type:"checkbox",id:"terms",className:"bg-primary text-circle hover:bg-tertiary disabled:border-selector-inactive disabled:bg-tertiary mt-[3px] h-4 w-4 cursor-pointer rounded border-gray-300"},n(xe,{required:!0}))),(0,g.jsxs)("label",{className:"text-dark mb-0 w-full cursor-pointer",htmlFor:xe,children:[(0,g.jsx)("span",{className:"sr-only",children:r}),(0,g.jsx)(ye.y,{caller:"paywallCheckout"})]})]})})},Oe=r(54794),Se=r(25597);function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){Ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ae=function(e){return{value:e.label,text:e.label}},Ee=Se.A.reduce((function(e,t){return Ne(Ne({},e),{},Ie({},t.label,t))}),{}),De=function(){var e,t=(0,a.Gc)(),r=t.setValue,i=(0,t.watch)().community_member_billing_info_attributes.address_country,o=(0,p.Y)(),s=o.isMemberAddressRequired,c=o.isTaxIdMandatory,l=o.isBrazilianAccountAndProcessorStripeBr,u=Pe((0,n.useState)(c&&l?(0,h.t)("tax_ids.brazil_cpf"):""),2),d=u[0],f=u[1],m=Ee[d],b={required:c},v=(0,n.useCallback)((function(e){var t=e.value;f(t)}),[f]);(0,n.useEffect)((function(){m&&(r("community_member_billing_info_attributes[tax_id_type]",m.enum),s||r("community_member_billing_info_attributes[address_country]",m.countryCode))}),[r,s,m]),(0,n.useEffect)((function(){s&&m&&m.countryCode!==i&&f("")}),[r,s,i,m]);var y=Se.A.filter((function(e){return!c||!l||c&&l&&"BR"===e.countryCode})).filter((function(e){return!s||!i||e.countryCode===i})),j=Pe((0,n.useState)(y.map(Ae)),2),x=j[0],w=j[1],O=(0,n.useCallback)((function(e){var t=e.toLowerCase(),r=y.filter((function(e){return e.label.toLowerCase().includes(t)||e.country.toLowerCase().includes(t)})).map(Ae);w(r)}),[y,w]);return(0,g.jsxs)(_,{name:"tax_id",optional:!c,children:[(0,g.jsx)(Oe.P,{variant:"single",name:"taxIdTypeLabel",data:x,value:d,onChange:v,onSearch:O,hideSelectedItems:!0}),d&&(0,g.jsx)(ue,{className:"mt-2 grow",type:"text",name:"community_member_billing_info_attributes[tax_id_value]",placeholder:m.example,options:Ne(Ne({},null!==(e=null===m||void 0===m?void 0:m.formOptions)&&void 0!==e?e:{}),b)})]})},Te=function(){var e=(0,(0,a.Gc)().watch)().community_member_billing_info_attributes.address_country,t=(0,p.Y)(),r=t.isMemberAddressRequired,n=t.isTaxIdCollectionEnabled,i=t.shouldShowTaxIdForm,o=t.enableTaxIdCollection;return!i||r&&!e?null:n?(0,g.jsx)(De,{}):(0,g.jsx)("div",{className:"flex flex-row items-center gap-x-1",children:(0,g.jsxs)(y.Z.LabelSm,{weight:"regular",children:[(0,h.t)("paywall_checkout.form.tax_id.message")," ",(0,g.jsx)("button",{type:"button",className:"cursor-pointer text-blue-600",onClick:o,children:(0,h.t)("paywall_checkout.form.tax_id.cta")})]})})},Le=function(){var e=(0,(0,p.Y)().getSelectedPrice)(),t=null!==e&&void 0!==e&&e.trial_enabled?(0,h.t)(["paywall_checkout.get_started.trial_title",e.trial_requires_upfront_payment?"paid":"free"]):(0,h.t)("paywall_checkout.get_started.no_trial_title"),r=null!==e&&void 0!==e&&e.trial_enabled?(0,h.t)("paywall_checkout.get_started.trial_description"):(0,h.t)("paywall_checkout.get_started.no_trial_description");return(0,g.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,g.jsx)(y.Z.TitleMd,{children:t}),(0,g.jsx)(y.Z.LabelSm,{color:"text-secondary-500",children:r})]})},Me=r(74284),Re=function(e){var t=e.className,r=e.label,n=e.labelSize,i=void 0===n?"sm":n,o=e.labelWeight,a=void 0===o?"normal":o,s=e.tooltip,c=e.value,l=e.valueSize,u=void 0===l?"sm":l,d=e.valueColor,p=void 0===d?"text-primary":d,f=e.valueWeight,m=void 0===f?"normal":f,h=e.dataTestId,v="sm"===i?y.Z.LabelSm:y.Z.LabelMd,_="sm"===u?y.Z.LabelSm:"md"===u?y.Z.LabelMd:y.Z.LabelLg;return(0,g.jsxs)("div",{className:b()(t,"flex flex-row items-center justify-between space-x-4"),"data-testid":h,children:[(0,g.jsxs)("div",{className:"flex w-1/2 flex-row gap-x-2 md:w-2/3",children:[(0,g.jsx)(v,{weight:a,children:r}),s&&(0,g.jsx)(Me.Y,{dataTestId:"checkout-form-preview-entry-tooltip",className:"inline-flex",content:s,children:(0,g.jsx)(j.JO,{type:"16-question-mark",size:16,color:"text-primary"})})]}),(0,g.jsx)(_,{weight:m,color:p,children:c})]})},Be=r(61666),Ue=function(e){var t=e.preview,r=t.first_payment,n=r.due_on_phrase,i=r.formatted_amount_due,o=r.formatted_subtotal,a=r.discount,s=r.formatted_discount,c=r.tax,l=r.formatted_tax,u=r.starting_balance,d=r.ending_balance-u,p=(0,Be.I)(t.currency,d,{amountInCents:!0,includeCurrencyCode:!0,includeCurrencySymbol:!0,forceMaxFractionDigits:!1});return(0,g.jsxs)(ve,{className:"gap-y-2 border-t",children:[(0,g.jsx)(Re,{label:n,labelWeight:"semibold",value:i,valueWeight:"semibold",dataTestId:"checkout-form-preview-today-payment-total"}),(a<0||c>0||0!==d)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Re,{label:(0,h.t)("paywall_checkout.coupon.subtotal"),value:o,dataTestId:"checkout-form-preview-today-payment-subtotal"}),a<0&&(0,g.jsx)(Re,{label:(0,h.t)("paywall_checkout.coupon.discount"),value:s,valueColor:"text-green-600",dataTestId:"checkout-form-preview-today-discount"}),c>0&&(0,g.jsx)(Re,{label:(0,h.t)("paywall_checkout.coupon.tax"),value:l,dataTestId:"checkout-form-preview-today-tax"}),0!==d&&(0,g.jsx)(Re,{label:(0,h.t)("paywall_checkout.coupon.applied_balance"),value:p,valueColor:d<0?"text-green-600":"text-primary",dataTestId:"checkout-form-preview-applied-balance"})]})]})},Fe=function(e){var t=e.preview.future_payments;if(!t)return null;var r=t.formatted_total,n=t.start_on_phrase,i=t.formatted_subtotal,o=t.discount,a=t.formatted_discount,s=t.discount_phrase,c=t.tax,l=t.formatted_tax;return(0,g.jsxs)(ve,{className:"gap-y-2 border-t",children:[(0,g.jsx)(Re,{label:(0,h.t)("paywall_checkout.future_payments.header"),labelWeight:"semibold",value:r,valueWeight:"semibold",dataTestId:"checkout-form-preview-future-payments-total"}),(0,g.jsx)(Re,{label:n,value:i,dataTestId:"checkout-form-preview-future-payments-subtotal"}),o<0&&(0,g.jsx)(Re,{label:(0,h.t)("paywall_checkout.coupon.discount"),value:a,valueColor:"text-green-600",tooltip:s,dataTestId:"checkout-form-preview-future-payments-discount"}),c>0&&(0,g.jsx)(Re,{label:(0,h.t)("paywall_checkout.coupon.tax"),value:l,dataTestId:"checkout-form-preview-future-payments-tax"})]})},ze=function(){var e=(0,p.Y)(),t=e.previewMutation,r=e.hasAlreadyPurchased,n=e.paywall,i=t.data;return t.isLoading?(0,g.jsx)("div",{className:"py-2",children:(0,g.jsx)(w.a,{variant:"default"})}):(0,O.Sz)(r,n)||t.isIdle||t.isError||!i?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Ue,{preview:i}),(0,g.jsx)(Fe,{preview:i}),(0,g.jsx)(ve,{className:"gap-y-3 border-t py-8",children:(0,g.jsx)(Re,{label:(0,h.t)("paywall_checkout.amount_due"),labelSize:"md",labelWeight:"semibold",value:i.formatted_amount_due_now,valueSize:"lg",valueWeight:"semibold",dataTestId:"checkout-form-preview-total-due-today"})})]})},Ve=r(50768),qe=function(e){var t=e.children,r=e.value,n=e.className;return(0,g.jsx)(Ve.E.Option,{value:r,className:function(e){var t=e.checked;return b()("bg-primary hover:border-secondary relative flex cursor-pointer justify-center rounded-lg border py-3 transition-colors focus:outline-none",{"border-secondary bg-secondary border-1":t,"border-primary":!t},n)},children:(0,g.jsx)("span",{className:"flex flex-row items-center space-x-2",children:t})})},Ge=function(){var e,t=(0,a.Gc)(),r=t.control,i=t.setValue,o=(0,p.Y)(),s=o.getSelectedPrice,c=o.amountDue,l=s(),u=1===(null===l||void 0===l||null===(e=l.payable_payment_methods)||void 0===e?void 0:e.length),d=c<O.eq.MINIMUM||c>O.eq.MAXIMUM;return(0,n.useEffect)((function(){(u||d)&&i("payment_method_type",O.Lt.CARD)}),[u,c]),u||d?null:(0,g.jsx)(a.Qr,{control:r,name:"payment_method_type",render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,g.jsx)(Ve.E,{value:n,onChange:r,children:(0,g.jsxs)("div",{className:"flex flex-row space-x-4",children:[(0,g.jsxs)(qe,{value:O.Lt.CARD,className:"basis-1/2",children:[(0,g.jsx)(j.JO,{type:"credit-card",size:16}),(0,g.jsx)(y.Z.LabelMd,{children:(0,h.t)("paywall_checkout.payment_method_type.card")})]}),(0,g.jsxs)(qe,{value:O.Lt.PIX,className:"basis-1/2",children:[(0,g.jsx)(j.JO,{type:"20-pix",viewBox:"0 0 24 24",size:24}),(0,g.jsx)(y.Z.LabelMd,{children:(0,h.t)("paywall_checkout.payment_method_type.pix")})]})]})})}})},He=r(87958),We=function(e){var t=e.handleOnChangeCard,r=e.handleOnReadyCard,n=(0,p.Y)(),o=n.getSelectedPrice,a=n.isCardInfoRequired,s=o();return a?(0,g.jsx)(_,{name:"card",addon:s.trial_enabled&&(0,g.jsx)("span",{className:"inline-flex",children:(0,g.jsx)(He.T,{className:"inline-flex",content:v().t("paywall_checkout.payment_subtitle_tooltip"),children:(0,g.jsx)(j.JO,{type:"12-question-mark",size:12,color:"text-primary"})})}),children:(0,g.jsx)("div",{"data-testid":"checkout-form-card-field-wrapper",children:(0,g.jsx)(i.CardElement,{options:f.T4,onChange:t,onReady:r})})}):null},Ze=function(e){var t=e.handleOnChangeCard,r=e.handleOnReadyCard,n=(0,p.Y)().isCardInfoRequired,i=(0,(0,a.Gc)().watch)("payment_method_type"),o=(0,O.F_)(i)&&n;return(0,g.jsx)(g.Fragment,{children:o&&(0,g.jsx)(We,{handleOnChangeCard:t,handleOnReadyCard:r})})},Je=function(){var e=(0,a.Gc)().handleSubmit,t=(0,p.Y)().isProcessingPayment,r=function(){var e=(0,a.Gc)().watch,t=(0,p.Y)(),r=t.currentUser,n=t.hasAlreadyPurchased,o=t.loginUrl,s=t.communityRootUrl,c=t.paywall,l=t.getSelectedPrice,u=t.previewMutation,d=t.paymentError,f=t.isCardInfoValid,m=t.isPaywallActive,b=t.isCardInfoComplete,h=t.setIsCardInfoComplete,v=t.isTaxIdMandatory,y=t.shouldShowTaxIdForm,g=(0,i.useStripe)(),_=(0,i.useElements)(),j=l(),x=e(),w=x.name,P=x.email,C=x.password,k=x.termsOfService,N=x.community_member_billing_info_address_attributes_complete,I=x.community_member_billing_info_attributes,A=I.tax_id_value,E=I.tax_id_type,D=!N||!r&&(!w||!P||!C||!k)||!f||!m||d.disablePayButton||(0,O.Sz)(n,c)||u.isLoading||u.isError||v&&y&&(!A||!E),T=u.data,L=(0,S.Gs)({isPaywallActive:m,selectedPrice:j,preview:T}),M=K({stripe:g,elements:_}).onSubmit;return{paymentError:d,isSubmitDisabled:D,selectedPrice:j,currentUser:r,stripe:g,loginUrl:o,communityRootUrl:s,payButtonLabel:L,hasAlreadyPurchased:n,handleOnChangeCard:function(e){e.complete?h(!0):b&&h(!1)},handleOnReadyCard:function(e){return r&&e.focus()},onSubmit:M}}(),n=r.currentUser,o=r.handleOnChangeCard,s=r.handleOnReadyCard,c=r.onSubmit,l=r.payButtonLabel,u=r.stripe,d=r.isSubmitDisabled;return(0,g.jsxs)("div",{"data-testid":"checkout-form-container",children:[t&&(0,g.jsx)(w.a,{variant:"fullscreen"}),(0,g.jsxs)("form",{className:"flex flex-col",onSubmit:e(c),"data-testid":"checkout-form",children:[(0,g.jsx)(Le,{}),(0,g.jsx)(ve,{className:"gap-y-5 border-b",children:n?(0,g.jsx)(Y,{}):(0,g.jsx)(de,{})}),(0,g.jsxs)(ve,{className:"gap-y-5",children:[(0,g.jsx)(Ge,{}),(0,g.jsx)(Ze,{handleOnReadyCard:s,handleOnChangeCard:o}),(0,g.jsx)(fe,{}),(0,g.jsx)(he,{}),(0,g.jsx)(Te,{})]}),(0,g.jsx)(ze,{}),(0,g.jsx)(pe,{}),(0,g.jsxs)(ve,{className:"gap-y-5",children:[(0,g.jsx)(we,{}),(0,g.jsx)(x.z,{type:"submit",large:!0,variant:"primary",disabled:!u||d,"data-testid":"checkout-form-submit-button",children:l}),(0,g.jsxs)("div",{className:"flex flex-row items-center justify-center","data-testid":"checkout-form-secure-legend-container",children:[(0,g.jsx)(j.JO,{color:"text-secondary-50",size:16,type:"lock-solid"}),(0,g.jsx)(y.Z.LabelXs,{color:"text-secondary-50",children:(0,h.t)("paywall_checkout.payment_secure_legend")})]})]})]})]})},$e=function(){var e=(0,p.Y)().currentCommunity;return(0,g.jsxs)("div",{className:"community-info",children:[e.logo_url&&(0,g.jsx)("img",{loading:"lazy",className:"community-info__logo",src:e.logo_url,alt:""}),!e.logo_url&&e.icon_url&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"community-info__icon",children:(0,g.jsx)("img",{loading:"lazy",src:e.icon_url,alt:""})}),(0,g.jsx)("span",{className:"community-info__name",children:e.name})]}),!e.logo_url&&!e.icon_url&&(0,g.jsx)("span",{className:"community-info__name",children:e.name})]})},Qe=r(20695),Ke=function(e){var t=e.event,r=(0,u.TC)().isDarkAppearance;if(!t)return null;var n=t.cover_image_url,i=t.cover_image,o=t.cover_image_variants;if(!n||!i)return null;var a=(o||{}).thumbnail,s=r?(0,Qe.aP)("dark-mode-cover-thumbnail-2x.png"):(0,Qe.aP)("light-mode-cover-thumbnail-2x.png"),c=a||(n||s);return(0,g.jsx)("img",{loading:"lazy",alt:"",src:c,className:"border-primary relative h-full max-h-[112px] w-full max-w-[314px] rounded-lg border object-cover"})},Xe=r(46367),Ye=r(63698),et=function(e){var t=e.event;if(null===t||void 0===t||!t.event_setting_attributes)return null;var r=t.event_setting_attributes,n=r.starts_at,i=r.ends_at,o=r.time_zone,a=r.time_zone_abbreviations,s=r.location_type,c=new Date(n),l=new Date(i),u=(0,Ye.lo)(c,l,o),d=[{icon:"16-calendar",text:"".concat(u," (").concat(a,")")},{icon:s===Xe.Bq.IN_PERSON||s===Xe.Bq.TBD?"16-location":"16-video",text:Xe.gP[s]}];return(0,g.jsx)("div",{className:"flex flex-col gap-y-2 pb-3",children:d.map((function(e){var t=e.icon,r=e.text;return(0,g.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,g.jsx)(j.JO,{type:t,size:16,className:"text-default !w-4"}),(0,g.jsx)(y.Z.LabelXs,{children:r})]},t)}))})},tt=function(e){var t=e.id,r=e.title,n=e.subtitle,i=e.value,o=e.isSelected,a=e.onSelect;return(0,g.jsxs)("button",{type:"button","aria-pressed":o,className:b()("border-primary bg-primary focus-visible:!outline-secondary flex min-h-[4rem] cursor-pointer flex-row items-center justify-between rounded-md border px-5 py-3 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",{"border-secondary bg-secondary":o}),"data-testid":"checkout-paywall-price-option",onClick:function(){return a(t)},children:[(0,g.jsxs)("div",{className:"flex flex-col justify-around gap-y-1 py-1 text-left",children:[(0,g.jsx)(y.Z.LabelMd,{weight:"medium",children:r}),n&&(0,g.jsx)(y.Z.LabelXs,{weight:"regular",children:n})]}),(0,g.jsx)("div",{className:"flex flex-col justify-center whitespace-nowrap",children:(0,g.jsx)(y.Z.LabelMd,{weight:"regular",children:i})})]})},rt=function(){var e,t,r=(0,p.Y)(),n=r.paywall,i=r.getSelectedPrice,o=r.setSelectedPrice,a=function(e){o(e)},s=i(),c=function(e){return s&&s.id==e.id};if(n.description)t=n.description;else if(null!==(e=n.event)&&void 0!==e&&e.body){var l;t=null===(l=n.event)||void 0===l?void 0:l.body}return(0,g.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,g.jsx)(Ke,{event:n.event}),(0,g.jsxs)("div",{className:"flex flex-col gap-3","data-testid":"checkout-paywall-detail",children:[(0,g.jsx)(y.Z.TitleLg,{children:n.display_name}),(0,g.jsx)(et,{event:n.event}),t&&(0,g.jsx)(y.Z.BodyMd,{children:(0,g.jsx)("span",{className:"whitespace-pre-wrap",children:t})})]}),(0,g.jsx)("div",{className:"flex flex-col gap-4",children:(n.prices||[]).map((function(e){return(0,g.jsx)(tt,{id:e.id,title:e.title,subtitle:e.subtitle,value:e.value,isSelected:c(e),onSelect:a},"paywall_price-".concat(e.id))}))})]})};function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var at=function(e){var t=e.paywall,r=e.currentCommunity,m=e.currentUser,b=e.processorId,h=e.processorKey,v=e.isMemberAddressRequired,y=(0,n.useMemo)((function(){return(0,l.O)({stripeAccountId:b,stripePublicKey:h,locale:window.locale})}),[h,b]),_=t.prices[0],j=t.prices.find((function(e){return e.preferred}));j&&(_=j);var x=(0,a.cI)({defaultValues:{community_id:r.id,user_id:null===m||void 0===m?void 0:m.id,paywall_price_id:_.id,coupon_code_applied:!1,community_member_billing_info_attributes:{},community_member_billing_info_address_attributes_complete:!v,payment_method_type:"card"}}),w=new s.QueryClient(d.Vr);return(0,c.H)("paywall-checkout"),(0,g.jsx)(i.Elements,{stripe:y,options:f.jP,children:(0,g.jsx)(u.hk,{theme:u.v.default,children:(0,g.jsx)(s.QueryClientProvider,{client:w,children:(0,g.jsx)(a.RV,it(it({},x),{},{children:(0,g.jsxs)(p.G,it(it({},e),{},{children:[(0,g.jsx)(o.q,{children:(0,g.jsx)("title",{children:t.title})}),(0,g.jsx)("div",{className:"paywall-checkout-wrapper",children:(0,g.jsxs)("div",{className:"paywall-checkout-container",children:[(0,g.jsx)("div",{className:"paywall-info",children:(0,g.jsxs)("div",{className:"paywall-info__content",children:[(0,g.jsx)($e,{}),(0,g.jsx)(rt,{})]})}),(0,g.jsx)("div",{className:"user-info",children:(0,g.jsx)("div",{className:"paywall-info__content",children:(0,g.jsx)(Je,{})})})]})})]}))}))})})})}},17986:(e,t,r)=>{"use strict";r.d(t,{X:()=>B,j:()=>U});var n=r(64687),i=r.n(n),o=r(86664),a=r(86013),s=r.n(a),c=r(72675),l=r(88992),u=r(53448),d=r(57356),p=r(5295),f=r(55675),m=r(67294),b=r(88767),h=r(50567),v=r(21809),y=r(96486),g={address_line1:"",address_line2:"",address_city:"",address_state:"",address_postal_code:"",address_country:""},_=(0,m.createContext)({communityMember:{id:0,name:"",email:""},billingInfo:g,onSuccess:y.noop,asPrerequisite:!1});_.displayName="BillingInfoContext";function j(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=function(){var e=(0,v.p)(),t=e.success,r=e.error,n=(0,m.useContext)(_),o=n.communityMember,a=n.billingInfo,c=n.onSuccess,l=n.asPrerequisite,u=x((0,m.useState)(!1),2),d=u[0],p=u[1],f=x((0,m.useState)({address_line1:null===a||void 0===a?void 0:a.address_line1,address_line2:null===a||void 0===a?void 0:a.address_line2,address_city:null===a||void 0===a?void 0:a.address_city,address_state:null===a||void 0===a?void 0:a.address_state,address_postal_code:null===a||void 0===a?void 0:a.address_postal_code,address_country:null===a||void 0===a?void 0:a.address_country}),2),y=f[0],g=f[1],w=function(){var e,t=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.id){e.next=2;break}return e.abrupt("return",h.O.update(o.id,y));case 2:return e.abrupt("return",h.O.create(o.id,y));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){j(o,n,i,a,s,"next",e)}function s(e){j(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),O=(0,b.useMutation)(w,{onSuccess:function(){t(s().t("paywalls.community_members.billing_info_form.success")),c()},onError:function(e){console.error(e),r(e.message)}}),S=O.isLoading;return{communityMember:o,asPrerequisite:l,billingInfo:a,isBillingInfoComplete:d,onStripeElementAddressChangeEvent:function(e){var t=e.value,r=e.complete,n=t.address;g({address_line1:n.line1,address_line2:n.line2,address_city:n.city,address_state:n.state,address_postal_code:n.postal_code,address_country:n.country}),p(r)},onSaveBillingInfoClick:function(){O.mutate()},isUpdatingBillingInfo:S}},S=r(85893);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(){var e=O(),t=e.communityMember,r=e.asPrerequisite,n=e.billingInfo,i=e.onStripeElementAddressChangeEvent,a=e.isBillingInfoComplete,c=e.onSaveBillingInfoClick,l=e.isUpdatingBillingInfo;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(u.u_.Body,{children:(0,S.jsx)(o.AddressElement,{className:"mt-3",options:C(C({},d.kl),{},{defaultValues:{name:(null===t||void 0===t?void 0:t.name)||"",address:{line1:n.address_line1,line2:n.address_line2,city:n.address_city,state:n.address_state,postal_code:n.address_postal_code,country:n.address_country}}}),onChange:i})}),(0,S.jsx)(u.u_.Footer,{children:(0,S.jsx)(f.z,{full:!0,large:!0,variant:"primary",disabled:!a||l,onClick:c,children:s().t("paywalls.community_members.billing_info_form.submit".concat(r?"_as_prerequisite":""))})})]})},I=r(55389),A=function(e){var t=e.communityMember,r=e.onSuccess,n=e.asPrerequisite,i=(0,I.r)(t),o=i.isLoadingBillingInfo,a=i.billingInfo;return o?(0,S.jsx)(p.a,{variant:"default"}):(0,S.jsx)(_.Provider,{value:{communityMember:t,billingInfo:a||g,onSuccess:r,asPrerequisite:n},children:(0,S.jsx)(N,{})})};function E(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=function(e){var t=e.communityMember,r=e.onSuccess,n=e.asPrerequisite,i=e.localeRoot,s=void 0===i?"paywalls.community_members.billing_info_form":i,p=(0,c.dd)(),f=function(){p.hide(),p.remove()},m=(0,l.C)().stripePromise;return(0,S.jsxs)(u.u_,{title:(0,a.t)([s,"title"]),isOpen:p.visible,onClose:f,children:[(0,S.jsx)(u.u_.Overlay,{}),(0,S.jsxs)(u.u_.Content,{size:"md",children:[(0,S.jsxs)(u.u_.Header,{children:[(0,S.jsx)(u.u_.Title,{children:(0,a.t)([s,"title"])}),(0,S.jsx)(u.u_.HeaderActions,{children:(0,S.jsx)(u.u_.CloseButton,{onClick:f})})]}),(0,S.jsx)(o.Elements,{stripe:m,options:d.jP,children:(0,S.jsx)(A,{communityMember:t,onSuccess:function(){r(),p.hide(),p.remove()},asPrerequisite:n})})]})]})},R=c.gk.create((function(e){return(0,S.jsx)(M,T({},e))})),B=function(){return(0,c.dd)(R)},U=function(e,t){var r=(0,c.dd)(e),n=B();return T(T({},r),{},{show:function(e){var o,a,s,c=t(e);return null!==c&&void 0!==c&&null!==(o=c.policies)&&void 0!==o&&o.requires_billing_info?n.show({communityMember:c,onSuccess:(a=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.show(e);case 2:case"end":return t.stop()}}),t)})),s=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=a.apply(e,t);function o(e){E(i,r,n,o,s,"next",e)}function s(e){E(i,r,n,o,s,"throw",e)}o(void 0)}))},function(){return s.apply(this,arguments)}),asPrerequisite:!0}):r.show(e)}})}},55389:(e,t,r)=>{"use strict";r.d(t,{r:()=>a});var n=r(88767),i=r(50567),o=r(49326),a=function(e){var t=(0,n.useQuery)(o.av.paywalls.communityMembers.billingInfo.show(e.id),(function(){return i.O.show(e.id)}),{retry:function(e,t){return 404!==t.status},useErrorBoundary:function(e){return 404!==(null===e||void 0===e?void 0:e.status)}});return{isLoadingBillingInfo:t.isLoading,billingInfo:t.data,refetchBillingInfo:t.refetch}}},57356:(e,t,r)=>{"use strict";var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{jP:()=>o,kl:()=>a,T4:()=>s});var o={appearance:{theme:"stripe",variables:{spacingGridRow:"20px"},rules:(n={},i(n,".Label",{color:"rgb(59, 59, 59)",fontFamily:'system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"14px",fontWeight:"600",lineHeight:"20px",margin:"0",padding:"0"}),i(n,".Input",{backgroundColor:"rgb(255, 255, 255)",border:"1px solid rgb(229, 231, 235)",borderColor:"rgb(229, 231, 235)",borderRadius:"8px",borderStyle:"solid",borderWidth:"1px",boxShadow:"none",color:"rgb(59, 59, 59)",fontFamily:'system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"16px",fontWeight:"400",lineHeight:"18px",margin:"0",marginTop:"4px",outline:"transparent solid 0px",outlineOffset:"0",padding:"12px 16px",transition:"none"}),i(n,".Input:focus",{border:"1px solid rgba(107, 114, 128)",borderColor:"rgba(107, 114, 128)",borderWidth:"1px",boxShadow:"none",outline:"transparent solid 0px",outlineOffset:"0",transition:"none"}),n)}},a={mode:"billing",fields:{phone:"never"},display:{name:"full"}},s={hidePostalCode:!0,classes:{base:"h-11 w-full grow rounded-lg border border-solid border-gray-200 bg-white px-4 py-3 shadow-none outline-0 ring-0",focus:"border border-gray-500 shadow-none outline-0 ring-0"}}},81208:(e,t,r)=>{"use strict";r.d(t,{a:()=>L,O:()=>C});var n=r(86013),i=r.n(n),o=r(73935),a=r(67294),s=r(85893);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){var t=e.trialDays,r=e.hasSubscriptionPrices,o=e.label,l=void 0===o?(0,n.t)("checkbox"):o,u=t>0,d=c((0,a.useState)(u),2),p=d[0],f=d[1];return r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"form-group full-width",children:[(0,s.jsxs)("div",{className:"form-meta",children:[(0,s.jsx)("label",{children:i().t("settings.paywalls.form.free_trial.section_subtitle")}),(0,s.jsx)("div",{className:"field-description",children:i().t("settings.paywalls.form.free_trial.section_description")})]}),(0,s.jsx)("div",{className:"form-input",children:(0,s.jsx)("div",{className:"form-meta-button",children:(0,s.jsxs)("div",{className:"simple-toggle",children:[(0,s.jsx)("input",{type:"checkbox",value:"true",id:"checkbox-enable-trial",name:"enable-trial",defaultChecked:p,onChange:function(e){f(e.target.checked)}}),(0,s.jsx)("label",{htmlFor:"checkbox-enable-trial",children:(0,s.jsx)("span",{className:"sr-only",children:l})})]})})})]}),p&&(0,s.jsxs)("div",{className:"input-container",children:[(0,s.jsx)("label",{children:i().t("settings.paywalls.form.free_trial.input_label")}),(0,s.jsxs)("div",{className:"form-input-group",children:[(0,s.jsx)("input",{type:"number",step:"1",min:"1",name:"paywall[trial_days]",id:"paywall_trial_days",placeholder:i().t("settings.paywalls.form.free_trial.placeholder"),defaultValue:t||1,className:"form-control form-input-group--prefix"}),(0,s.jsx)("div",{className:"form-input-group--suffix",children:i().t("settings.paywalls.form.free_trial.days_label")})]})]})]}):(0,s.jsx)("p",{children:i().t("settings.paywalls.form.free_trial.need_subscription_price")})},d=["monthly","annual","quarter","biannual","biweekly","weekly","daily","onetime"],p=function(e,t){return"subscription"===e?"".concat(t," ").concat((0,n.t)("settings.paywall_prices.subscription_item_text")):t},f=function(e,t,r){var i=function(e){return e/=100,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:e%1==0?0:2}).format(e)+" USD"}(r);return e?(i+=" / ",i+=(0,n.t)("settings.paywall_prices.interval_labels.".concat(e),{count:t})):i},m=function(e){var t=e.priceType,r=e.interval,i=e.intervalCount,o=e.intervalLabel,a=e.amount,c=e.preferred,l=e.allowPreferredAction,u=e.onRemove,d=e.onSetPreferred;return(0,s.jsxs)("div",{className:"price-list__element",children:[(0,s.jsxs)("div",{className:"price-list__element__info",children:[(0,s.jsx)("div",{className:"price-list__element__info--type",children:p(t,o)}),(0,s.jsx)("div",{className:"price-list__element__info--amount",children:f(r,i,a)})]}),(0,s.jsxs)("div",{className:"price-list__element__actions",children:[!c&&l&&(0,s.jsx)("button",{type:"button",className:"price-list__element__actions__action btn-link label-negative focus-visible:!outline-secondary focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",onClick:d,children:(0,n.t)("settings.paywall_prices.buttons.make_preferred")}),c&&(0,s.jsx)("button",{type:"button",className:"price-list__element__actions__action label-positive focus-visible:!outline-secondary focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",onClick:d,children:(0,n.t)("settings.paywall_prices.form.preferred_label")}),(0,s.jsx)("button",{type:"button",className:"price-list__element__actions__danger btn-link focus-visible:!outline-secondary focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",onClick:u,children:(0,n.t)("settings.paywall_prices.buttons.remove")})]})]})},b={daily:{interval:"daily",interval_count:1,interval_label:"daily"},weekly:{interval:"weekly",interval_count:1,interval_label:"weekly"},biweekly:{interval:"weekly",interval_count:2,interval_label:"biweekly"},monthly:{interval:"monthly",interval_count:1,interval_label:"monthly"},quarter:{interval:"monthly",interval_count:3,interval_label:"quarter"},biannual:{interval:"monthly",interval_count:6,interval_label:"biannual"},annual:{interval:"yearly",interval_count:1,interval_label:"annual"},onetime:{interval:void 0,interval_count:void 0,interval_label:"onetime"}},h=function(e,t,r,n){var i=r.find((function(r){return r.amount===Math.round(100*e)&&r.interval===b[t].interval&&r.interval_count===b[t].interval_count}));return e.length<1||r.length>n-1||!!i},v=r(96486);function y(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"===typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S="monthly",P=function(e,t){var r=x((0,a.useState)(e||[]),2),n=r[0],i=r[1],o=x((0,a.useState)(S),2),s=o[0],c=o[1],l=x((0,a.useState)(""),2),u=l[0],d=l[1],p=x((0,a.useState)([]),2),f=p[0],m=p[1],h=x((0,a.useState)(!1),2),g=h[0],j=h[1];(0,a.useEffect)((function(){!function(){var t=n.filter((function(e){return!!e.tempId})).map((function(e){return(0,v.omit)(e,["tempId","interval_label"])})),r=e.filter((function(e){return!n.some((function(t){return t.id===e.id}))})).map((function(e){return _(_({},e),{},{_destroy:"1"})})),i=e.find((function(e){return e.preferred})),o=n.find((function(e){return e.preferred})),a=[];null!==i&&void 0!==i&&i.id&&(null===i||void 0===i?void 0:i.id)!==(null===o||void 0===o?void 0:o.id)&&n.find((function(e){return e.id===(null===i||void 0===i?void 0:i.id)}))&&a.push({id:i.id,preferred:!1}),"undefined"!==typeof(null===o||void 0===o?void 0:o.id)&&(null===i||void 0===i?void 0:i.id)!==(null===o||void 0===o?void 0:o.id)&&a.push({id:o.id,preferred:!0});var s=[].concat(y(t),y(r),a);m(s.map((function(e){return JSON.stringify(e)}))),j(n.some((function(e){return e.interval})))}()}),[n]);return{currentPaywallPrices:n,intervalOption:s,onIntervalOptionChange:function(e){c(e.target.value)},amount:u,onAmountChange:function(e){var t=e.target.value;t?d(t<1?1:t):d("")},onAdd:function(e){if(e.preventDefault(),s&&u&&!(n.length>t)){var r=b[s],o=r.interval?"subscription":"onetime",a=Math.round(100*u);i([].concat(y(n),[{tempId:"temp-id-".concat(Math.floor(1e6*Math.random())),amount:a,interval:r.interval,interval_count:r.interval_count,interval_label:I18n.t("settings.paywall_prices.form.interval_select_options.".concat(r.interval_label,"_label")),price_type:o,preferred:!1}])),c(S),d("")}},onRemove:function(e){if(!(e<0||e>=n.length)){var t=y(n);t.splice(e,1),i(t)}},onSetPreferred:function(e){if(!(e<0||e>=n.length)){var t=y(n),r=t.findIndex((function(e){return e.preferred}));r!==e&&"undefined"!==typeof r&&(t[r]=_(_({},t[r]),{},{preferred:!1})),t[e]=_(_({},t[e]),{},{preferred:!0}),i(t)}},changes:f,hasSubscriptionPrices:g}},C=function(e){var t=e.name,r=e.paywall_prices,i=e.prices_max_count,a=e.trial_days,c=P(r,i),l=c.currentPaywallPrices,p=c.intervalOption,f=c.onIntervalOptionChange,b=c.amount,v=c.onAmountChange,y=c.onAdd,g=c.onRemove,_=c.onSetPreferred,j=c.changes,x=c.hasSubscriptionPrices,w=document.getElementById("paywall-free-trial-container");return(0,s.jsxs)("div",{className:"paywall-prices-container",children:[(0,s.jsxs)("div",{className:"add-new-price","data-testid":"add-new-price",children:[(0,s.jsx)("select",{className:"add-new-price__element",value:p,onChange:f,children:d.map((function(e){return(0,s.jsx)("option",{value:e,children:(0,n.t)("settings.paywall_prices.form.interval_select_options.".concat(e,"_label"))},e)}))}),(0,s.jsx)("span",{className:"amount-icon",children:"$"}),(0,s.jsx)("input",{type:"number",step:".01",min:"1",placeholder:(0,n.t)("settings.paywall_prices.amount"),className:"form-control add-new-price__element--short rounded-none rounded-r-md",value:b,onChange:v}),(0,s.jsx)("button",{type:"submit",disabled:h(b,p,l,i),className:"add-new-price__element--button btn btn-circle",onClick:y,children:(0,n.t)("settings.paywall_prices.buttons.add")})]}),(0,s.jsx)("div",{className:"price-list",children:l.map((function(e,t){var r=e.id,n=e.tempId,i=e.price_type,o=e.interval,a=e.interval_count,c=e.interval_label,u=e.amount,d=e.preferred;return(0,s.jsx)(m,{priceType:i,interval:o,intervalLabel:c,intervalCount:a,amount:u,preferred:d,allowPreferredAction:l.length>1,onRemove:function(){return g(t)},onSetPreferred:function(){return _(t)}},r||n)}))}),j.map((function(e){return(0,s.jsx)("input",{name:"".concat(t,"[]"),type:"hidden",value:e},e)})),(0,o.createPortal)((0,s.jsx)(u,{trialDays:a,hasSubscriptionPrices:x}),w)]})},k=r(36762),N=r(61926),I=["currency"];function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var L=(0,a.forwardRef)((function(e,t){var r=e.currency,n=T(e,I),i=r.code.toUpperCase(),o=r.direction===k.RV.rtl?(0,s.jsx)("div",{className:"px-4 py-2",children:i}):null,a=r.direction===k.RV.ltr?(0,s.jsx)(s.Fragment,{children:i}):null;return(0,s.jsx)(N.l.Input,E(E({},n),{},{ref:t,inputMode:"numeric",prefixWrapperClassName:"bg-primary! border-primary! rounded-l-lg! relative! -mr-px! inline-flex! items-center! space-x-2! border! sm:text-sm!",prefix:o,suffix:a}))}));L.displayName="PaywallCurrencyAmountFormInput"},62199:(e,t,r)=>{"use strict";r.d(t,{c:()=>v});var n=r(64687),i=r.n(n),o=r(67294),a=r(96486),s=r(58533),c=r(20557),l=r(86078),u=r(20882),d=r(85893);function p(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=m((0,o.useState)(e.posts||[]),2),r=t[0],n=t[1],b=m((0,o.useState)(!1),2),h=b[0],v=b[1],y=m((0,o.useState)(1),2),g=y[0],_=y[1],j=e.space,x=e.current_user,w=function(){var t,o=(t=i().mark((function t(){var o,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(c.a.posts.index({spaceId:j.id,params:{page:g,sort:e.sort,iframe:!0}}));case 2:if(!(o=t.sent).ok){t.next=11;break}return t.next=6,o.json();case 6:s=t.sent,n((0,a.uniqBy)([].concat(p(r),p(s.records)),"id")),v(s.has_next_page),_(s.page+1),window.loadOembed();case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();return(0,o.useEffect)((function(){w()}),[]),(0,d.jsx)(s.Z,{style:{overflow:"initial"},scrollThreshold:.75,next:w,hasMore:h,loader:(0,d.jsx)(l.m,{}),dataLength:r.length,children:r.map((function(e){return(0,d.jsx)(u.d,{post:e,space:j,current_user:x},e.id)}))})}},20882:(e,t,r)=>{"use strict";r.d(t,{d:()=>b});var n=r(67294),i=r(94184),o=r.n(i),a=r(66007),s=r(86013),c=r(49326),l=r(62128),u=r(61180),d=r(30887),p=r(85893);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=function(e){var t=e.space,r=e.post,i=e.current_user,m=e.show_comments_on_load,b=void 0!==m&&m,h=e.is_shared_post,v=void 0!==h&&h,y=i,g=(0,n.useRef)(null),_=f((0,n.useState)(b&&!v),2),j=_[0],x=_[1],w=f((0,n.useState)(!b),2),O=w[0],S=w[1],P=(0,u.Ro)(),C=f((0,n.useState)(P&&r.comments_count>10),2),k=C[0],N=C[1];(0,n.useEffect)((function(){if(g.current){var e=function(e){var n=g.current.querySelector('[data-action="toggle-comment-with-focus"]'),i=g.current.querySelector('[data-action="toggle-comment"]');if(n&&i){var o=n.contains(e.target);if(o||i.contains(e.target)){if(e.preventDefault(),v){var a=(0,c.LM)({slug:r.slug,spaceSlug:t.slug,params:{notice:(0,s.t)("comments.log_in_to_add_a_comment")}});return void(window.location.href=a)}x(!j),S(!!o)}}};return g.current.addEventListener("click",e),function(){g.current.removeEventListener("click",e)}}}),[g,x,j]);var I=o()("post post--parent",{"post--shared":v,"post--shared__truncated":v&&!y,"is-truncation-disabled":r.is_truncation_disabled,"is-pinned":r.pinned_at_top_of_space,"flagged-for-approval":r.flagged_for_approval_at,"post-name--empty":!r.name,"post-meta--hidden":r.hide_meta_info}),A=!y&&(null===r||void 0===r?void 0:r.is_comments_enabled)||v&&(null===r||void 0===r?void 0:r.show_post_teaser);return(0,p.jsxs)("div",{className:I,children:[(0,p.jsx)("div",{ref:g,children:(0,p.jsx)(a.Z,{html:r.html})}),Boolean(!!j&&!v)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"post__comments trix-v2","data-controller":"comments",id:"all_comments","data-post-id":r.id,children:[Boolean(A&&(null===r||void 0===r?void 0:r.comments_count)>5)&&(0,p.jsx)(a.Z,{html:r.gated_html}),Boolean(k)&&(0,p.jsxs)(p.Fragment,{children:[Boolean((null===r||void 0===r?void 0:r.comments_count)>1)&&(0,p.jsx)("div",{className:"show-all-comments__wrapper",children:(0,p.jsxs)("a",{className:"show-all-comments__link btn btn-secondary",href:"#all_comments",onClick:function(e){e.preventDefault(),N(!1),window.location.hash="#all_comments"},children:[(0,p.jsx)(d.JO,{type:"arrow-solid-top-left"}),(0,s.t)("post.comments_section.show_all_count_comments",{count:r.comments_count})]})}),(0,p.jsx)(l.ZP.CommentHierarchy,{id:P,post:r,space:t,communityMember:y,showReplyForm:!0,autofocusReplyForm:O})]}),Boolean(!k)&&(0,p.jsx)(l.ZP.CommentsList,{post:r,space:t,communityMember:y,showReplyForm:!0,autofocusReplyForm:O})]}),Boolean(A&&(null===r||void 0===r?void 0:r.comments_count)<=5)&&(0,p.jsx)(a.Z,{html:r.gated_html})]})]})}},81435:(e,t,r)=>{"use strict";r.d(t,{P:()=>d});var n=r(94184),i=r.n(n),o=r(85893),a=["children","className","displayView"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=function(e){var t=e.children,r=e.className,n=e.displayView,s=u(e,a);return(0,o.jsx)("div",c(c({className:i()("space__posts !pb-16 lg:!pb-6",l({},"space__posts--".concat(n),n),r),"data-testid":"post_section"},s),{},{children:t}))}},89609:(e,t,r)=>{"use strict";r.d(t,{v:()=>_});var n=r(67294),i=r(94184),o=r.n(i),a=r(24185),s=r(61345),c=r(49326),l=r(81217),u=r(393),d=r(25388),p=r(97012),f=r(84702),m=r(63099),b=r(72810);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _=function(){var e,t,r=(0,a.UO)(),i=r.postSlug,v=r.spaceSlug,g=(0,p.wh)(),_=g.currentCommunitySettings,j=g.isLoading,x=(0,p.nT)(),w=(0,a.k6)(),O=(0,d.L)().show,S=(_||{}).quick_post_v2_enabled,P=x.helpers.findBy({slug:v})||{},C=(0,l.t)({spaceId:P.id,spaceSlug:v,postSlug:i}),k=(0,u.D)(),N=(0,f.I)(),I=Boolean(null===P||void 0===P?void 0:P.hide_right_sidebar)&&!(0,s.V5)(P),A=y((0,m.k)(!1),2),E=A[0],D=A[1];(0,n.useEffect)((function(){document.documentElement.scrollTo({top:0,left:0,behavior:"instant"})}),[null===C||void 0===C||null===(e=C.post)||void 0===e?void 0:e.id]);var T=o()("view-space view-space--".concat(null===(t=C.data)||void 0===t?void 0:t.space_id," view-space-in-group view-space-in-group--").concat(P.space_group_id)),L=k||C.isLoading||!C.data;!function(e){var t=e.enabled,r=e.key,i=e.onLoadInEditMode,o=(0,b.t)().edit,a=h((0,n.useState)(!1),2),s=a[0],c=a[1];(0,n.useEffect)((function(){c(!1)}),[r]),(0,n.useEffect)((function(){t&&!s&&"true"===o&&(i(),c(!0))}),[t,s,o,i])}({enabled:!j&&!L,key:"".concat(v).concat(i),onLoadInEditMode:function(){S?O({post:C.data,onPostChange:C.onPostChange}):D()}});var M=C.data?[[C.data.id]]:[];return{isLoading:L,isLoadingAppData:k,isIframeEmbed:N,isQuickPostV2Enabled:S,space:P,postResource:C,bodyClassNames:T,hasRightSidebar:I,shouldShowEditPostModal:E,setShouldShowEditPostModal:D,perPagePostIds:M,onPostDestroy:function(){w.push(c.RZ.show({spaceSlug:v}))},spacesContext:x,spaceSlug:v,postSlug:i}}},42590:(e,t,r)=>{"use strict";r.d(t,{h:()=>x});var n=r(67294),i=r(96486),o=r(70714),a=r(59393),s=r(22972),c=r(97012),l=r(23560),u=r.n(l),d=r(28175),p=r(55675),f=r(30887),m=r(85893),b=function(e){var t=e.children,r=e.className,n=e.hasIcon,i=void 0!==n&&n,o=e.id,a=e.isButton,s=void 0!==a&&a,c=e.linkName,l=e.render,b=e.showModal,h=(0,d.I)().isV3Enabled;return u()(l)?(0,m.jsx)(m.Fragment,{children:l({onClick:b})}):s?(0,m.jsxs)(p.z,{type:"button",className:r,id:o,onClick:b,"aria-haspopup":!0,large:h,isFullRounded:h,children:[i&&(0,m.jsx)(f.JO,{type:"plus"}),c||t]}):(0,m.jsx)("a",{className:r,id:o,onClick:b,href:"#new-post","aria-haspopup":!0,children:c||t})},h=r(94812);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=function(e){var t,r=e.bodyForEditor,l=void 0===r?"":r,u=e.children,d=e.className,p=e.currentSpaceId,f=e.hasIcon,v=void 0!==f&&f,g=e.id,j=e.isButton,x=void 0===j||j,w=e.linkName,O=e.maxZIndexEnabled,S=void 0!==O&&O,P=e.onSubmitSuccess,C=e.render,k=e.tiptapBodyForEditor,N=e.title,I=void 0===N?"":N,A=(0,c.wh)(),E=A.currentCommunitySettings,D=A.isViewOnlyMasquerading,T=null===E||void 0===E?void 0:E.quick_post_v2_enabled,L=(0,o.r)(),M=_((0,n.useState)(!1),2),R=M[0],B=M[1],U=(0,c.L2)(),F=p||(null===U||void 0===U||null===(t=U.data)||void 0===t?void 0:t.id),z=(0,s.d)({cacheKey:a._7}).getPersistedFormFieldValues,V=_((0,n.useState)({space_id:F}),2),q=V[0],G=V[1],H=D?i.noop:function(e){e.preventDefault();var t=z();G(y(y({},t),{},{name:I||(null===t||void 0===t?void 0:t.name),body_for_editor:l||(null===t||void 0===t?void 0:t.body),space_id:F||(null===t||void 0===t?void 0:t.space_id)})),T?L.show({spaceId:F,onSubmitSuccess:P,bodyForEditor:l,tiptapBodyForEditor:k}):B(!0)};return(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(b,{className:d,hasIcon:v,id:g,isButton:x,linkName:w,render:C,showModal:H,children:u}),R&&(0,m.jsx)(c.DW,{post:q,onPostChange:G,children:(0,m.jsx)(h.Y,{show:!0,closeModal:function(){B(!1),G({})},currentSpaceId:F,maxZIndexEnabled:S,onSubmitSuccess:P})})]},F)}},63055:(e,t,r)=>{"use strict";r.d(t,{R:()=>_});var n=r(67294),i=r(86013),o=r(88767),a=r(75752),s=r(97012),c=r(81217),l=r(5295),u=r(85893),d=["currentSpaceId","postSlug","children","loaderVariant"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function h(e){var t=e.currentSpaceId,r=e.postSlug,n=e.children,i=e.loaderVariant,o=void 0===i?"fullscreen":i,a=b(e,d),p=(0,c.t)({spaceId:t,postSlug:r}),m=p.post;return p.isLoading?(0,u.jsx)(l.a,{variant:o}):(0,u.jsx)(s.DW,f(f({post:m},a),{},{children:n}))}var v=r(94812);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _=function(e){var t=e.currentSpaceId,r=e.postSlug,c=y((0,n.useState)(!1),2),l=c[0],d=c[1],p=y((0,n.useState)(!1),2)[1];var f=function(){d(!1)},m=new o.QueryClient(a.Vr);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("button",{type:"button",onClick:function(e){e.preventDefault(),p(!0),d(!0)},children:[(0,u.jsx)("h4",{children:(0,i.t)("edit_post")}),(0,u.jsx)("div",{className:"dropdown-menu__descriptor",children:(0,i.t)("edit_post_description")})]}),(0,u.jsx)(o.QueryClientProvider,{client:m,children:(0,u.jsx)(s.HB,{children:l&&(0,u.jsx)(h,{currentSpaceId:t,postSlug:r,closeModal:f,onPostChange:function(){f(),window.location.reload()},children:(0,u.jsx)(v.Y,{show:!0,closeModal:f,currentSpaceId:t})})})})]})}},70714:(e,t,r)=>{"use strict";r.d(t,{r:()=>S});var n=r(86013),i=r(96486),o=r(72675),a=r(20744),s=r(59393),c=r(97012),l=r(22972),u=r(85893),d=function(e){var t,r,n=e.spaceId,i=e.bodyForEditor,o=e.tiptapBodyForEditor,d=e.shouldSkipRedirectAfterSubmit,p=e.onSubmitSuccess,f=(0,c.L2)(),m=n||("undefined"!==typeof(null===(t=f)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.id)?f.data.id:void 0),b=(0,(0,l.d)({cacheKey:s._7}).getPersistedFormFieldValues)(),h={id:null,space_id:m||(null===b||void 0===b?void 0:b.space_id),name:null===b||void 0===b?void 0:b.name,body_for_editor:i||(null===b||void 0===b?void 0:b.body),tiptap_body:o||(null===b||void 0===b?void 0:b.tiptap_body),cover_image:null===b||void 0===b?void 0:b.cover_image};return(0,u.jsx)(c.DW,{post:h,children:(0,u.jsx)(a.H,{shouldSkipRedirectAfterSubmit:d,onSubmitSuccess:p})})},p=r(26636),f=r(80715),m=r(72892),b=r(53448),h=r(98175),v=r(16855),y=r(66443),g=r(35),_=r(76645);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){var t=e.spaceId,r=e.shouldSkipRedirectAfterSubmit,a=e.onSubmitSuccess,s=e.bodyForEditor,c=e.tiptapBodyForEditor,l=(0,o.dd)(),j=(0,p.L)().isDirty,x=(0,m.c)({shouldPrevent:j}),w=(0,g.Z)(),O=(0,_.d)(),S=(0,y.d)(),P=w.visible||O.visible||S.visible;return(0,f.u)({disabled:P,onClose:x}),(0,u.jsxs)(b.u_,{isOpen:l.visible,onClose:i.noop,className:"quick-post-v2-modal w-full max-w-3xl","aria-label":(0,n.t)("quick_post_v2.title"),children:[(0,u.jsx)(b.u_.Overlay,{onClick:x}),(0,u.jsx)(v.H,{children:(0,u.jsx)(h._x,{children:(0,u.jsx)(d,{spaceId:t,bodyForEditor:s,tiptapBodyForEditor:c,shouldSkipRedirectAfterSubmit:r,onSubmitSuccess:a})})})]})},O=o.gk.create((function(e){return(0,u.jsx)(w,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))})),S=function(){return(0,o.dd)(O)}},73377:(e,t,r)=>{"use strict";r.d(t,{I:()=>o});var n=r(67294),i=r(21809),o=function(e){var t=e.alert,r=e.notice,o=(0,i.p)(),a=o.success,s=o.error;return(0,n.useEffect)((function(){t&&s(t),r&&a(r)}),[]),null}},66047:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(67294),i=r(95220),o=r(85893);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=(0,n.forwardRef)((function(e,t){return(0,o.jsx)("div",{children:(0,o.jsx)(i.y,s(s({},e),{},{ref:t}))})}));l.displayName="RichTextInput";const u=l},779:(e,t,r)=>{"use strict";r.d(t,{X:()=>s});var n=r(86013),i=r(43422),o=r(16743),a=r(85893),s=function(){return(0,a.jsx)(i.b,{className:"lg:-mt-16",leftContent:(0,a.jsx)(o.Z.LabelMd,{weight:"semibold",children:(0,a.jsx)("a",{className:"text-dark",href:"/",children:(0,n.t)("settings.analytics.title")})})})}},53787:(e,t,r)=>{"use strict";r.d(t,{Y:()=>p});var n=r(67294),i=r(96486),o=r(88767),a=r(97012),s=r(34128),c=r(31889),l=r(87232),u=r(49326),d=r(85893);function p(){var e=(0,a.wh)().currentCommunityMember,t=(0,c.vb)(e),r=(0,o.useInfiniteQuery)(["member-tags"],(function(e){var t=e.pageParam,r=void 0===t?1:t;return(0,s.UT)(u.av.memberTags.index({params:{page:r}}))}),{getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0}}),p=r.data,f=r.fetchNextPage,m=r.hasNextPage,b=r.isLoading;return(0,n.useEffect)((function(){m&&f()}),[p]),{isLoading:b,memberTags:(0,n.useMemo)((function(){var e=(0,i.flatten)(null===p||void 0===p?void 0:p.pages.map((function(e){return e.records}))),r=function(e){return{label:e.name,richLabel:(0,d.jsxs)("span",{className:"flex gap-1.5",children:[e.custom_emoji_url?(0,d.jsx)("img",{loading:"lazy",className:"mt-[3px] block h-4",src:e.custom_emoji_url,alt:e.name}):(0,d.jsx)("span",{children:e.emoji}),(0,d.jsx)("span",{children:e.name})]}),value:e.id.toString()}};return t?e.map(r):(0,l.U)({memberTags:e}).map(r)}),[p,t])}}},24009:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});var n=r(97012),i=function(){var e=(0,n.wh)(),t=e.currentCommunity;return!(e.isLoading||null===t||void 0===t||!t.analytics_filters_feature_flag_enabled)}},57882:(e,t,r)=>{"use strict";r.d(t,{T:()=>p});var n=r(86013),i=r(88767),o=r(34128),a=r(49326),s=r(78573),c=r(97012),l=r(21809),u=r(16743),d=r(85893),p=function(e){var t=e.show,r=e.onClose,p=(0,l.p)(),f=(0,c.N3)(),m=f.active_paywall_subscriptions,b=f.active_but_non_cancelable_paywall_subscriptions,h=a.av.communityMembers.deactivateAccount({id:f.id}),v=(0,i.useMutation)((function(){return(0,o.pC)(h)}),{onSuccess:function(){p.success((0,n.t)("deactivate_account_confirmation_modal.successfully_deactivated")),r(),window.location.href=(0,a.jE)()},onError:function(){p.error((0,n.t)("deactivate_account_confirmation_modal.error_deactivated"))}}),y=v.mutateAsync,g=v.isLoading;return b?(0,d.jsx)(s.W,{title:(0,n.t)("deactivate_account_confirmation_modal.title"),isOpen:t,onClose:r,contentPortalId:"deactivate-account-not-allowed",actionVariant:"primary",actionText:(0,n.t)("deactivate_account_confirmation_modal.not_allowed_action"),onAction:r,disabled:g,children:(0,d.jsx)(u.Z.LabelMd,{color:"text-default",children:(0,n.t)("deactivate_account_confirmation_modal.not_allowed_description")})}):(0,d.jsxs)(s.W,{title:(0,n.t)("deactivate_account_confirmation_modal.title"),isOpen:t,onClose:r,contentPortalId:"deactivate-account",actionVariant:"danger",actionText:(0,n.t)("deactivate_account_confirmation_modal.deactivate"),onAction:y,disabled:g,children:[m&&(0,d.jsx)("div",{className:"pb-3",children:(0,d.jsx)(u.Z.LabelMd,{color:"text-default",children:(0,n.t)("deactivate_account_confirmation_modal.description_with_subscription")})}),(0,d.jsx)(u.Z.LabelMd,{color:"text-default",children:(0,n.t)("deactivate_account_confirmation_modal.description")})]})}},25992:(e,t,r)=>{"use strict";r.d(t,{L:()=>l,F:()=>u});var n=r(67294),i=r(88767),o=r(1320);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=20,u=function(e){var t,r,a,c,u,d=null!==e&&void 0!==e?e:{},p=d.query,f=void 0===p?"":p,m=d.perPage,b=void 0===m?l:m,h=d.initialPage,v=void 0===h?1:h,y=d.options,g=["settings","invitation-links",f,b,v],_=s({getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0},void 0===y?{}:y),j=(0,i.useInfiniteQuery)(g,(function(e){var t=e.pageParam,r=void 0===t?v:t,n=1;r>0&&(n=r);var i=s({page:n,per_page:b},f&&{query:f});return o.bC.list({params:i})}),_),x=(0,n.useMemo)((function(){var e,t;return null!==(e=null===(t=j.data)||void 0===t?void 0:t.pages)&&void 0!==e?e:[]}),[null===(t=j.data)||void 0===t?void 0:t.pages]),w=null!==(r=null===(a=x[0])||void 0===a?void 0:a.count)&&void 0!==r?r:0,O=null!==(c=null===(u=x[0])||void 0===u?void 0:u.per_page)&&void 0!==c?c:b;return s(s({},j),{},{queryKey:g,totalInvitationLinks:w,pageSize:O,pages:x})}},64632:(e,t,r)=>{"use strict";r.d(t,{S:()=>w,l:()=>O});var n=r(67294),i=r(24185),o=r(57882),a=r(72831),s=r(63099),c=r(72167),l=r(97012),u=r(25067),d=r(85893);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(){var e=p((0,s.k)(!1),2),t=e[0],r=e[1],n=(0,l.wh)();return n.isLoading?(0,d.jsx)(u.gi,{variant:"community-sidebar-v2"}):(0,a.h)(n)?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.T,{show:t,onClose:r}),(0,d.jsx)("div",{className:"sidebar sidebar--left","data-testid":"sidebar-left",children:(0,d.jsx)("div",{className:"fixed h-full w-full !max-w-[22.5rem]","data-draggable":"false",children:(0,d.jsx)(c.R,{})})})]}):(0,d.jsx)(i.l_,{to:"/"})},b=(0,n.memo)(m);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=(0,n.createContext)({config:{},setConfig:function(){}});j.displayName="LayoutContext";var x={disableRightSidebar:!1,renderLeftSidebar:function(){return(0,d.jsx)(b,{})},disableSidebar:!1,hideAppBar:!1},w=function(e){var t=e.children,r=g((0,n.useState)(x),2),i=r[0],o=r[1],a={config:i,setConfig:o,resetToDefault:function(){o(x)},mergeConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(v(v({},i),e))}};return(0,d.jsx)(j.Provider,{value:a,children:t})},O=function(){return(0,n.useContext)(j)}},34256:(e,t,r)=>{"use strict";r.d(t,{y:()=>s});var n=r(67294),i=r(45697),o=r.n(i),a=r(64632),s=function(e){var t=(0,a.l)(),r=t.mergeConfig,i=t.resetToDefault;return(0,n.useEffect)((function(){return r(e),function(){i()}}),[]),null};s.propTypes={disableRightSidebar:o().bool.isRequired,renderLeftSidebar:o().func,disableSidebar:o().func}},57263:(e,t,r)=>{"use strict";r.d(t,{L:()=>_});var n=r(11824),i=r(88767),o=r(64632),a=r(97529),s=r(97012),c=r(24880),l=r(75752),u=r(34974),d=r(21809),p=r(85893),f=["notice","alert","display_community_switcher","children"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var y=new i.QueryClient(l.Vr),g=(0,u.P)((function(e){var t=e.notice,r=e.alert,n=e.display_community_switcher,a=e.children,l=v(e,f);return(0,p.jsx)(i.QueryClientProvider,{client:y,children:(0,p.jsx)(c.i,{backendProps:b({notice:t,alert:r,display_community_switcher:n},l),children:(0,p.jsx)(s.HB,{children:(0,p.jsx)(d.V,{children:(0,p.jsx)(o.S,{children:a})})})})})}),(function(){return(0,p.jsx)(a.D,{})})),_=function(){return(0,p.jsx)(g,{children:(0,p.jsx)(n.LiveStreamSettings,{hideHeader:!0})})}},11824:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LiveStreamSettings:()=>Te,default:()=>Le});var n=r(86013),i=r(36911),o=r(21653),a=r(92232),s=r(74339),c=r(97012),l=r(67144),u=r(86078),d=r(26981),p=r(15002),f=r(24702),m=r(46479),b=r(16743),h=r(85893),v=function(){return(0,h.jsx)(m.iA,{className:"mb-7",variant:"default",children:(0,h.jsxs)("div",{className:"flex h-96 flex-col items-center justify-center gap-2","data-testid":"live-settings-empty-state",children:[(0,h.jsx)(b.Z.TitleLg,{children:(0,n.t)("live_streams.dashboard.table.no_live_records")}),(0,h.jsx)(b.Z.BodyLg,{color:"text-gray-600",textAlign:"text-center",children:(0,n.t)("live_streams.dashboard.table.engage_with_live")}),(0,h.jsx)("div",{className:"mt-2",children:(0,h.jsx)(f.h,{variant:"circle",small:!1})})]})})},y=r(31256),g=r(65771),_=r(23736),j=r(5295),x=function(e){var t=e.title,r=e.children,i=e.isLoading,o=e.canPurchaseMore,a=void 0===o||o,s=e.onPurchase,c=(0,g.E)().isCommunityOnTrial,l=(0,_.v)();return(0,h.jsx)("div",{className:"bg-primary border-primary relative shrink-0 grow rounded-lg border px-5 py-4","data-testid":"live-main-status",children:i?(0,h.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,h.jsx)(j.a,{})}):(0,h.jsxs)("div",{className:"flex h-full flex-col",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[t&&(0,h.jsx)(b.Z.LabelSm,{children:t}),!c&&a&&(0,h.jsx)("button",{type:"button",className:"cursor-pointer text-sm",onClick:function(){l.show({onSuccess:s})},children:(0,n.t)("live_streams.dashboard.limits.add_more")})]}),(0,h.jsx)("div",{className:"relative grow",children:r})]})})},w=function(e){var t=e.hosts,r=e.participants,i=e.onPurchase,o=e.isLoading,a=(0,g.E)().isCommunityOnEnterprise;return(0,h.jsx)(x,{isLoading:o,canPurchaseMore:!a,onPurchase:i,title:(0,n.t)("live_streams.dashboard.limits.hosts"),children:(0,h.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,h.jsx)("div",{children:(0,h.jsx)("div",{className:"text-dark text-base font-bold",children:t})}),(0,h.jsxs)("div",{children:[(0,h.jsx)(b.Z.LabelSm,{children:(0,n.t)("live_streams.dashboard.limits.participants")}),(0,h.jsx)("div",{className:"text-dark text-base font-bold",children:r})]})]})})},O=function(e){return Math.trunc(100*e)/100},S=function(e){var t=e.usage,r=e.limit,n=e.color,i=void 0===n?"red":n,o=e.label,a={width:"".concat(r?Math.min(t/r*100,100):0,"%"),backgroundColor:i},s="".concat(O(t)," / ").concat(O(r));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"relative mb-2 h-1 w-full rounded-sm bg-gray-300",children:(0,h.jsx)("div",{className:"absolute h-full rounded-sm",style:a})}),(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[o&&(0,h.jsx)(b.Z.LabelXs,{children:o}),(0,h.jsx)(b.Z.LabelXs,{children:s})]})]})},P=function(e){var t=e.limit,r=e.usage,i=e.onPurchase,o=e.isLoading;if(!t)return null;var a=r/t*100;return(0,h.jsxs)(x,{isLoading:o,canPurchaseMore:!0,onPurchase:i,title:(0,n.t)("live_streams.dashboard.limits.video_storage"),children:[(0,h.jsx)("div",{className:"mb-5",children:(0,h.jsx)(b.Z.TitleMd,{children:O(r)})}),(0,h.jsx)(S,{usage:r,limit:t,label:(0,n.t)("live_streams.dashboard.limits.storage_limit"),color:a>75?"red":"green"})]})},C=function(e){var t=e.limit,r=e.usage,i=e.onPurchase,o=e.isLoading;if(!t)return null;var a=r/t*100;return(0,h.jsxs)(x,{isLoading:o,canPurchaseMore:!0,onPurchase:i,title:(0,n.t)("live_streams.dashboard.limits.hours_this_month"),children:[(0,h.jsx)("div",{className:"mb-5",children:(0,h.jsx)(b.Z.TitleMd,{children:O(r)})}),(0,h.jsx)(S,{usage:r,limit:t,label:(0,n.t)("live_streams.dashboard.limits.monthly_limit"),color:a>75?"red":"green"})]})},k=function(){var e=(0,c.wh)().currentCommunity,t=(0,y.lQ)(),r=t.monthlyHourLimit,n=t.monthlyHourUsage,i=t.storageLimit,o=t.storageUsage,a=t.hostLimit,s=t.participantLimit,l=t.isLoading,u=t.refetchAddons;return e.supports_live_streams?(0,h.jsxs)("div",{className:"mb-4 flex w-full flex-col gap-4 md:flex-row",children:[(0,h.jsx)(C,{isLoading:l,limit:r,usage:n,onPurchase:u}),(0,h.jsx)(P,{isLoading:l,limit:i,usage:o,onPurchase:u}),(0,h.jsx)(w,{isLoading:l,hosts:a,participants:s,onPurchase:u})]}):null},N=r(55675),I=function(e){var t=e.startRecordNumber,r=e.endRecordNumber,i=e.totalRecordCount,o=e.page,a=e.fetchPrevPage,s=e.hasNextPage,c=e.fetchNextPage;return(0,h.jsxs)("div",{className:"flex flex-row-reverse items-center justify-end space-x-4 space-x-reverse ",children:[(0,h.jsxs)("div",{className:"text-dark text-sm font-medium",children:[t,"-",r," ",(0,n.t)("live_streams.dashboard.pagination.of")," ",i]}),(0,h.jsxs)("div",{className:"ml-2 space-x-2",children:[(0,h.jsx)(N.z,{variant:"secondary",disabled:1===o,onClick:a,type:"button",children:(0,n.t)("live_streams.dashboard.pagination.prev")}),(0,h.jsx)(N.z,{variant:"secondary",disabled:!s,onClick:c,type:"button",children:(0,n.t)("live_streams.dashboard.pagination.next")})]})]})},A=r(67294),E=r(94184),D=r.n(E),T=r(28772),L=r(61005),M=r(3108),R=r(42590),B=r(47634),U=r(11909),F=r(88767),z=r(88526),V=r(21809),q=function(e,t){var r=(0,V.p)(),i=r.error,o=r.success;return{deleteRecording:(0,F.useMutation)((function(){return z.Q.deleteRoomRecording({roomId:null===e||void 0===e?void 0:e.id,id:null===e||void 0===e?void 0:e.recording_id})}),{onSuccess:function(){o((0,n.t)("live_streams.delete_recording.success"),{duration:"short",shouldUseProgress:!1}),t()},onError:function(){i((0,n.t)("live_streams.delete_recording.error"))}}).mutate}},G=r(22837),H=r(48885);function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $=function(e){var t=e.room,r=(0,c.wh)().currentCommunitySettings,n=null===r||void 0===r?void 0:r.tiptap_post_enabled;return{trixBodyWithRecording:(0,A.useMemo)((function(){if(n||!t.recording_url)return"";var e=t.recording_blob,r=new G.default.Attachment(Z(Z({},e),{},{url:t.recording_url,sgid:e.attachable_sgid,filesize:e.byte_size,contentType:"video/mp4",content:t.video_container_tag})),i=G.default.Text.textForAttachmentWithAttributes(r),o=[new G.default.Block(i)];if(t.description){var a=new G.default.StringPiece(t.description),s=new G.default.Text([a]);o.unshift(new G.default.Block(s))}var c=new G.default.Document(o),l=new G.default.DocumentView(c).render(),u="";return l.forEach((function(e){var t=e.pop();u+=t.outerHTML})),u}),[n,t]),tiptapBodyWithRecording:n&&t.recording_attachment?(0,H.Ln)({bodyContent:[t.description?(0,H.Z9)({text:t.description}):(0,H.H9)(),(0,H.Om)({file:t.recording_attachment})],inlineAttachments:[t.recording_attachment]}):null}},Q=function(e){var t=e.room,r=e.refetch,i=e.setCurrentRoom,o=function(e,t){var r=(0,V.p)(),i=r.error,o=r.success;return{endRoom:(0,F.useMutation)((function(){return z.Q.endStream({id:null===e||void 0===e?void 0:e.id})}),{onSuccess:function(){o((0,n.t)("live_streams.room.".concat((0,U.vX)(e),".end_success")),{duration:"short",shouldUseProgress:!1}),t()},onError:function(){return i((0,n.t)("live_streams.room.".concat((0,U.vX)(e),".end_error")))}}).mutate}}(t,r),a=o.endRoom,s=(0,U.vX)(t),l=q(t,r).deleteRecording,u=function(e,t){var r=(0,V.p)(),i=r.error,o=r.success,a=(0,c.wh)().currentUser;return{chatTranscript:(0,F.useMutation)((function(){return z.Q.chatTranscript({id:null===e||void 0===e?void 0:e.id})}),{onSuccess:function(){o((0,n.t)("live_streams.room.chat_transcript_success",{name:null===e||void 0===e?void 0:e.name,email:null===a||void 0===a?void 0:a.email})),t()},onError:function(){return i((0,n.t)("live_streams.room.chat_transcript_error"))}}).mutate}}(t,r),p=u.chatTranscript,f=(0,B.tv)({title:(0,n.t)("live_streams.".concat(s,"_ended.confirm")),onConfirm:a}),m=f.confirmModal,b=f.onConfirmButtonClick,v=(0,B.tv)({title:(0,n.t)("live_streams.chat_transcript.confirm"),onConfirm:p,sentiment:"primary"}),y=v.confirmModal,g=v.onConfirmButtonClick,_=(0,B.tv)({title:(0,n.t)("live_streams.delete_recording.confirm"),onConfirm:l,description:(0,n.t)("live_streams.delete_recording.confirm_description")}),j=_.confirmModal,x=_.onConfirmButtonClick,w=$({room:t}),O=w.trixBodyWithRecording,S=w.tiptapBodyWithRecording,P=[{key:"view-details",label:(0,n.t)("live_streams.dashboard.table.actions.view_details"),onClick:function(){return i(t)}}];if((0,U.UT)(t)||P.unshift({key:"end-stream",label:(0,n.t)("live_streams.dashboard.table.actions.".concat(s,".end")),onClick:b}),t.recording_url&&P.push({key:"post-to-space",linkComponent:function(e){return(0,h.jsx)(R.h,{hasIcon:!1,isButton:!1,render:function(e){var t=e.onClick;return(0,h.jsx)(d.w.Actions.Item,{onClick:t,children:(0,n.t)("live_streams.dashboard.table.actions.post_to_space")})},bodyForEditor:O,tiptapBodyForEditor:S,title:t.name},e)},label:(0,n.t)("live_streams.dashboard.table.actions.post_to_space")}),t.chat_transcript&&P.push({key:"chat-transcript",label:(0,n.t)("live_streams.dashboard.table.actions.chat_transcript"),onClick:g}),t.recording_url){P.push({key:"download-recording",label:(0,n.t)("live_streams.dashboard.table.actions.download_recording"),onClick:function(){window.open(t.recording_url,"_blank")}})}if(t.transcript_url){P.push({key:"download-transcript",label:(0,n.t)("live_streams.dashboard.table.actions.download_transcript"),onClick:function(){window.open(t.transcript_url,"_blank")}})}return t.recording_url&&P.push({key:"delete-recording",label:(0,n.t)("live_streams.dashboard.table.actions.delete_recording"),hasDanger:!0,onClick:x}),(0,h.jsxs)(h.Fragment,{children:[m,j,y,(0,h.jsx)(d.w.Actions,{children:P.map((function(e){var t=e.key,r=e.label,n=e.hasDanger,i=e.onClick,o=e.linkComponent;return"post-to-space"===t?o(t):(0,h.jsx)(d.w.Actions.Item,{hasDanger:n,onClick:i,children:r},t)}))})]})},K=r(78270),X=r(90846),Y=r(30887),ee=r(74284),te=r(12995),re=r(86112),ne=function(){return(0,h.jsx)(ee.Y,{content:(0,n.t)("live_streams.dashboard.details.actions"),children:(0,h.jsx)(Y.JO,{type:"menu-dots-vertical"})})},ie=function(e){var t=e.room,r=e.refetch,i=(0,c.wh)().currentCommunitySettings,o=q(t,r).deleteRecording,a=$({room:t}),s=a.trixBodyWithRecording,l=a.tiptapBodyWithRecording,u=(0,B.tv)({title:(0,n.t)("live_streams.delete_recording.confirm"),onConfirm:o,description:(0,n.t)("live_streams.delete_recording.confirm_description"),maxIndex:!0}),d=u.confirmModal,p=u.onConfirmButtonClick,f=[{key:"download",label:(0,n.t)("live_streams.dashboard.details.download"),href:t.recording_url},{key:"delete",label:(0,n.t)("live_streams.dashboard.details.delete"),onClick:p},{key:"post-to-space",linkComponent:(0,h.jsx)(R.h,{hasIcon:!1,isButton:!1,linkName:(0,n.t)("live_streams.dashboard.table.actions.post_to_space"),bodyForEditor:s,tiptapBodyForEditor:l,title:t.name,maxZIndexEnabled:!0}),label:(0,n.t)("live_streams.dashboard.table.actions.post_to_space")}];if(t.transcript_url){f.splice(1,0,{key:"download-transcript",label:(0,n.t)("live_streams.dashboard.details.download_transcript"),onClick:function(){window.open(t.transcript_url,"_blank")}})}return(0,h.jsxs)("div",{children:[(0,h.jsx)(re.Y,{rounded:!0,src:t.recording_url,type:"video/mp4",mediaTranscriptId:t.transcript_id,variant:null!==i&&void 0!==i&&i.community_ai_settings_enabled?"enhanced":"default"}),(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsx)("div",{className:"text-dark mb-1 mt-4 text-lg font-semibold",children:t.recording_name}),d,(0,h.jsx)(te.t,{renderButton:function(){return(0,h.jsx)(ne,{})},menuItems:f,dropdownSide:"left",shouldCloseOnClickItem:!0})]})]})},oe=function(e){var t=e.recording_duration;return(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("div",{className:"stream-details__details__label",children:(0,n.t)("live_streams.dashboard.details.duration")}),(0,h.jsx)("p",{children:t})]})},ae=function(e){var t=e.room,r=e.refetch,i=(0,T.ie)(t.created_at,{year:"numeric",month:"short",day:"numeric"});return(0,h.jsxs)("div",{className:"stream-details__details",children:[t.recording_url&&(0,h.jsx)(ie,{room:t,refetch:r}),t.description&&(0,h.jsx)("div",{className:"mb-6",children:(0,h.jsx)("p",{className:"break-words pr-12",children:t.description})}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("div",{className:"stream-details__details__label",children:(0,n.t)("live_streams.dashboard.details.room_id")}),(0,h.jsx)("p",{children:t.id})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("div",{className:"stream-details__details__label",children:(0,n.t)("live_streams.dashboard.details.created_at")}),(0,h.jsx)("p",{children:i})]}),t.recording_duration&&(0,h.jsx)(oe,{recording_duration:t.recording_duration}),(0,U.L6)(t)&&(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("div",{className:"text-darkest font-medium",children:(0,n.t)("live_streams.dashboard.details.guests_count")}),(0,h.jsx)("p",{children:t.guests_count})]})]})},se=function(e){var t=e.onClickDownload;return(0,h.jsxs)("div",{className:"grid grid-cols-2 pr-2 font-medium",children:[(0,h.jsx)("p",{className:"pr-1",children:I18n.t("live_streams.dashboard.participants.csv")}),(0,h.jsx)(Y.JO,{type:"download",className:D()("cursor-pointer"),onClick:t})]})},ce=r(16492),le=function(e){var t=e.record;return(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsxs)("div",{className:"flex w-1/2 items-center py-2",children:[(0,h.jsx)("div",{className:"relative mr-3 h-10 w-10",children:(0,h.jsx)(ce.u,{name:t.name,src:t.avatar_url})}),(0,h.jsx)(b.Z.LabelSm,{weight:"semibold",children:t.name})]}),(0,h.jsx)("div",{className:"w-1/2",children:t.email})]})},ue=function(e){var t=e.onSearchChange;return(0,h.jsxs)("div",{className:"grow",children:[(0,h.jsx)(Y.JO,{type:"search"}),(0,h.jsx)("input",{type:"text",name:"textSearch",placeholder:I18n.t("live_streams.dashboard.participants.placeholder"),onChange:t,className:"bg-primary placeholder:text-light mr-2 w-10/12 border-transparent placeholder:opacity-100 focus:border-transparent focus:ring-0"})]})};function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fe=function(e){var t=e.onClickSort,r=de((0,A.useState)(!1),2),n=r[0],i=r[1];return(0,h.jsxs)("div",{className:"grid grid-cols-2 pr-2 font-medium text-gray-800",children:[(0,h.jsx)("p",{className:"pr-1",children:I18n.t("live_streams.dashboard.participants.sort")}),(0,h.jsx)(Y.JO,{type:"caret-down",className:D()("cursor-pointer fill-gray-800",{"rotate-180":n}),onClick:function(){i(!n),t(n)}})]})},me=r(49326);function be(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return he(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ge=function(e){var t=e.roomId,r=e.participantsCount,i=function(e){var t={per_page:2e3,sort:"oldest"},r=(0,F.useQuery)(me.av.liveStreams.participants({roomId:e,params:t})),n=r.data,i=r.isLoading,o=null===n||void 0===n?void 0:n.records;return{records:o&&be(new Map(o.map((function(e){return[e.email,e]}))).values()),isLoading:i}}(t),o=i.records,a=i.isLoading,s=ve((0,A.useState)(""),2),l=s[0],u=s[1],d=ve((0,A.useState)(!1),2),p=d[0],f=d[1],m=function(e){var t=(0,V.p)(),r=t.success,i=t.error,o=(0,c.wh)().currentCommunityMember,a=null===o||void 0===o?void 0:o.email;return{onDownloadCSV:function(){return fetch(me.av.liveStreams.downloadParticipantsCSV({roomId:e})).then((function(e){e.ok?r((0,n.t)("export_member_csv.message",{email:a})):i((0,n.t)("export_member_csv.error_message"))})).catch((function(e){i((0,n.t)("export_member_csv.error_message")),console.error(null===e||void 0===e?void 0:e.message)}))}}}(t),b=m.onDownloadCSV,v=o&&o.filter((function(e){return e.name.toLowerCase().includes(l.toLocaleLowerCase())}))||[];return v=p?v.sort((function(e,t){return t.name.localeCompare(e.name)})):v.sort((function(e,t){return e.name.localeCompare(t.name)})),(0,h.jsxs)("div",{className:"stream-details__participants",children:[(0,h.jsxs)("div",{className:"border-primary mb-6 flex items-center justify-between border-b-[1px] pb-1.5",children:[(0,h.jsx)(ue,{onSearchChange:function(e){u(e.target.value)}}),(0,h.jsx)(fe,{onClickSort:function(e){f(!e)}}),(0,h.jsx)(se,{onClickDownload:b})]}),!a&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"stream-details__participants__label",children:(0,n.t)("live_streams.dashboard.participants.participant_count",{count:r})}),v&&v.length>0&&(0,h.jsx)("div",{className:"stream-details__participants__list",children:v.map((function(e){return(0,h.jsx)(le,{record:e},e.id)}))})]})]})};function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var xe=function(e){var t=e.isOpen,r=e.onClose,i=e.room,o=e.refetch,a=Object.freeze({DETAILS:(0,n.t)("live_streams.dashboard.details.tabs.details"),PARTICIPANTS:(0,n.t)("live_streams.dashboard.details.tabs.participants")}),s=Object.values(a).map((function(e){return{label:e}})),c=_e((0,A.useState)(a.DETAILS),2),l=c[0],u=c[1],d=(null===i||void 0===i?void 0:i.room_type)||U.H0.STREAM;return i?(0,h.jsxs)(K.u,{variant:"large",show:t,onClose:r,className:"stream-details",children:[(0,h.jsx)("div",{className:"stream-details__title",children:(0,n.t)("live_streams.dashboard.details.".concat(d,".title"))}),(0,h.jsx)(X.m,{controlled:!0,activeTab:l,onClick:u,options:s,variant:"underline"}),l===a.DETAILS&&(0,h.jsx)(ae,{room:i,refetch:o}),l===a.PARTICIPANTS&&(0,h.jsx)(ge,{roomId:null===i||void 0===i?void 0:i.id,participantsCount:null===i||void 0===i?void 0:i.total_participants})]}):null};function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oe=function(e){var t,r=e.status,i=(we(t={},U.LV.INITIALIZING,(0,n.t)("live_streams.status.initializing")),we(t,U.LV.BACKSTAGE,(0,n.t)("live_streams.status.backstage")),we(t,U.LV.LIVE,(0,n.t)("live_streams.status.live")),we(t,U.LV.ENDED,(0,n.t)("live_streams.status.finished")),we(t,U.LV.CLOSING,(0,n.t)("live_streams.status.closing")),t);return(0,h.jsxs)("div",{className:"live-stream-status",children:[[U.LV.BACKSTAGE,U.LV.LIVE,U.LV.ENDED].includes(r)?(0,h.jsx)("div",{className:D()("live-stream-status__icon",{"live-stream-status__icon--backstage":r===U.LV.BACKSTAGE,"live-stream-status__icon--live":r===U.LV.LIVE,"live-stream-status__icon--ended":r===U.LV.ENDED}),children:(0,h.jsx)(Y.JO,{size:6,type:"middot"})}):null,i[r]||""]})};function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Ce(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ie=function(e){var t=e.records,r=e.refetch,i=e.className,o=ke((0,A.useState)(null),2),a=o[0],s=o[1],c=[{title:(0,n.t)("live_streams.dashboard.table.name"),dataIndex:"name",key:"name",variant:"uppercase"},{title:(0,n.t)("live_streams.dashboard.table.status"),dataIndex:"status",key:"status",variant:"uppercase",className:L.M.sm,tdClassName:L.M.sm},{title:(0,n.t)("live_streams.dashboard.table.date"),dataIndex:"created_at",key:"created_at",variant:"uppercase",className:L.M.xl,tdClassName:L.M.xl},{title:(0,n.t)("live_streams.dashboard.table.recording"),dataIndex:"recording",key:"recording",variant:"uppercase"},{title:(0,n.t)("live_streams.dashboard.table.participants"),dataIndex:"total_participants",key:"total_participants",variant:"uppercase",className:L.M.md,tdClassName:L.M.md},{title:(0,n.t)("live_streams.dashboard.table.type"),dataIndex:"type",key:"type",variant:"uppercase",className:L.M.xl,tdClassName:L.M.xl},{title:" ",dataIndex:"actions",key:"actions",variant:"actions"}],l=(null===t||void 0===t?void 0:t.map((function(e){return Pe(Pe({},e),{},{key:e.id,name:(0,h.jsx)("button",{type:"button",className:"max-w-[240px] cursor-pointer truncate",title:e.name,onClick:function(){s(e)},children:e.name}),status:(0,h.jsx)(Oe,{status:e.status}),created_at:(0,T.ie)(e.created_at,{year:"numeric",month:"short",day:"numeric"}),recording:(0,h.jsx)("a",{className:D()("text-dark inline max-w-sm truncate hover:text-black",{"cursor-text":!e.recording_url}),title:(0,n.t)("live_streams.dashboard.table.actions.download"),href:e.recording_url,download:!0,target:"_blank",rel:"noreferrer",children:e.recording_url?(0,n.t)("live_streams.dashboard.table.actions.download"):"-"}),type:"conference"==e.room_type?(0,n.t)("live_streams.dashboard.table.room"):(0,n.t)("live_streams.dashboard.table.stream"),actions:(0,h.jsx)(Q,{room:e,refetch:r,setCurrentRoom:s}),rowClassName:"group"})})))||[];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(xe,{isOpen:!!a,onClose:function(){s(null)},room:a,refetch:r}),(0,h.jsx)(M.w,{columns:c,dataSource:l,className:i,hasStickyHeader:!0,headerClassName:"top-16"})]})},Ae=r(20557);function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return De(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return De(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Te=function(e){var t=e.hideHeader,r=void 0!==t&&t,f=(0,c.wh)().currentCommunity,m=(f=void 0===f?{}:f).supports_live_streams,b=(0,l.R)().liveStreamsLimitsEnabled,y=function(){var e=Ee((0,A.useState)(1),2),t=e[0],r=e[1],n=(0,F.useQuery)(Ae.a.liveStreams.index({params:{page:t,per_page:10}}),{keepPreviousData:!0}),i=n.isLoading,o=n.isFetching,a=n.data,s=n.refetch,c=(null===a||void 0===a?void 0:a.records)||[],l=null===a||void 0===a?void 0:a.count,u=null===a||void 0===a?void 0:a.page_count,d=l?Math.ceil(l/10):0,p=!(null===a||void 0===a||!a.has_next_page),f=10*(t-1)+1;return{page:t,records:c,totalRecordCount:l,pageRecordCount:u,pageCount:d,hasNextPage:p,startRecordNumber:f,endRecordNumber:f+u-1,isLoading:i,isFetching:o,refetch:s,fetchNextPage:function(){r(t+1)},fetchPrevPage:function(){r(Math.max(t-1,1))}}}(),g=y.records,_=y.page,j=y.hasNextPage,x=y.totalRecordCount,w=y.startRecordNumber,O=y.endRecordNumber,S=y.isLoading,P=y.refetch,C=y.fetchNextPage,N=y.fetchPrevPage,E=x>0;return(0,h.jsxs)("div",{className:"bg-primary h-full",children:[r?(0,h.jsx)(i.S,{title:(0,n.t)("live_streams_settings")}):(0,h.jsx)(o.b,{pageTitle:(0,n.t)("live_streams_settings"),rightContent:(0,h.jsx)(s.G,{inSettings:!0}),hasBorder:!0}),(0,h.jsxs)(p.T,{maxWidth:"none",children:[m&&(0,h.jsx)(h.Fragment,{children:S?(0,h.jsx)(u.m,{}):(0,h.jsxs)(h.Fragment,{children:[b&&E&&(0,h.jsx)(k,{}),x>0&&(0,h.jsx)(d.w.Headline,{className:"!px-0",children:(0,h.jsx)(d.w.Headline.Title,{children:(0,n.t)("live_streams.count",{count:x})})}),E?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Ie,{records:g,refetch:P,className:"live-stream-settings__table",totalRecordCount:x}),(0,h.jsx)(I,{startRecordNumber:w,endRecordNumber:O,totalRecordCount:x,page:_,fetchPrevPage:N,hasNextPage:j,fetchNextPage:C})]}):(0,h.jsx)(v,{})]})}),!m&&(0,h.jsx)("div",{className:"border-primary bg-primary border p-6 text-center lg:rounded-lg lg:p-36",children:(0,h.jsx)(a.s,{})})]})]})};const Le=Te},32799:(e,t,r)=>{"use strict";r.d(t,{L:()=>l,D:()=>u});var n=r(67294),i=r(88767),o=r(71462);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=20,u=function(e){var t,r,a,c,u,d=(0,o.M)().list,p=null!==e&&void 0!==e?e:{},f=p.query,m=void 0===f?"":f,b=p.perPage,h=void 0===b?l:b,v=p.initialPage,y=void 0===v?1:v,g=p.options,_=void 0===g?{}:g,j=p.status,x=void 0===j?"inbox":j,w=["flagged-content",m,h,y,x],O=s({getNextPageParam:function(e){var t=e.has_next_page,r=e.page;return t?Number(r)+1:void 0},getPreviousPageParam:function(e){var t=e.page;return t>1?t-1:void 0},keepPreviousData:!0},_),S=(0,i.useInfiniteQuery)(w,(function(e){var t=e.pageParam,r=void 0===t?y:t,n=1;r>0&&(n=r);var i=s({page:n,per_page:h,status:x},m&&{query:m});return d({params:i})}),O),P=(0,n.useMemo)((function(){var e,t;return null!==(e=null===(t=S.data)||void 0===t?void 0:t.pages)&&void 0!==e?e:[]}),[null===(t=S.data)||void 0===t?void 0:t.pages]),C=null!==(r=null===(a=P[0])||void 0===a?void 0:a.count)&&void 0!==r?r:0,k=null!==(c=null===(u=P[0])||void 0===u?void 0:u.per_page)&&void 0!==c?c:h;return s(s({},S),{},{queryKey:w,totalRecords:C,pageSize:k,pages:P})}},63528:(e,t,r)=>{"use strict";r.d(t,{vC:()=>n,dW:()=>i,V9:()=>o,GI:()=>a});var n={INBOX:"inbox",APPROVED:"approved",REJECTED:"rejected"},i=["inbox","approved","rejected"],o="status",a={POST:"post",COMMENT:"comment"}},71462:(e,t,r)=>{"use strict";r.d(t,{M:()=>o});var n=r(34128),i=r(49326),o=function(){return{list:function(e){var t=e.params,r=void 0===t?{}:t;return(0,n.UT)(i.av.flaggedContent.index({params:r}))},get:function(e){return(0,n.UT)(i.av.flaggedContent.show({id:e}))},approve:function(e){return(0,n.gN)(i.av.flaggedContent.approve({id:e}))},reject:function(e){return(0,n.gN)(i.av.flaggedContent.reject({id:e}))}}}},75152:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var n=r(32799),i=r(63528),o=function(){return{inboxCount:(0,n.D)({status:i.vC.INBOX}).totalRecords,approvedCount:(0,n.D)({status:i.vC.APPROVED}).totalRecords,rejectedCount:(0,n.D)({status:i.vC.REJECTED}).totalRecords}}},23736:(e,t,r)=>{"use strict";r.d(t,{v:()=>$});var n=r(86013),i=r.n(n),o=r(88767),a=r(72675),s=r(53448),c=r(21809),l=r(64687),u=r.n(l),d=r(86599),p=r(61926),f=r(5295),m=r(33740),b=r(85893),h=["serverErrors"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var j=function(e){var t=e.serverErrors,r=_(e,h),n=t.title,i=t.errors,o=t.topExtraInfo,a=t.bottomExtraInfo;return(0,b.jsx)("div",y(y({className:"server-errors"},r),{},{children:(0,b.jsxs)("div",{className:"server-errors__wrapper",children:[(0,b.jsx)("div",{className:"server-errors__close-icon",children:(0,b.jsx)(m.Z,{className:"server-errors__icon-svg"})}),(0,b.jsxs)("div",{className:"server-errors__container",children:[n&&(0,b.jsx)("h3",{className:"server-errors__title",children:n}),o&&(0,b.jsx)("p",{className:"server-errors__extra-info",children:o}),i&&Array.isArray(i)&&(0,b.jsx)("div",{className:"server-errors__content",children:(0,b.jsx)("ul",{className:"server-errors__list",children:i.map((function(e){return(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"server-errors__error-title",children:e.title}),":"," ",(0,b.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}})]},e.title)}))})}),a&&(0,b.jsx)("p",{className:"server-errors__extra-info",children:a})]})]})}))},x=r(67294),w=r(4992),O=function(e,t,r,n){return n?e?t:0:e*t/r};function S(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){S(o,n,i,a,s,"next",e)}function s(e){S(o,n,i,a,s,"throw",e)}a(void 0)}))}}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=(0,x.createContext)();A.displayName="AddOnsSettingsContext";var E=function(e){var t=e.onSuccess,r=e.onCloseModal,a=e.children,s=e.refetchCurrentPlan,l=N((0,x.useState)(),2),d=l[0],p=l[1],f=N((0,x.useState)([]),2),m=f[0],h=f[1],v=N((0,x.useState)(),2),y=v[0],g=v[1],_=N((0,x.useState)(),2),j=_[0],S=_[1],I=N((0,x.useState)(!0),2),E=I[0],D=I[1],T=N((0,x.useState)(),2),L=T[0],M=T[1],R=N((0,x.useState)(),2),B=R[0],U=R[1],F=function(e){var t=e.handleOnSuccess,r=void 0===t?null:t,i=e.setServerErrors,a=void 0===i?null:i,s=e.onCloseModal,l=void 0===s?null:s,u=e.refetchCurrentPlan,d=void 0===u?null:u,p=(0,c.p)();return{handleAddonsMutation:(0,o.useMutation)((function(e){return w.z.create(e)}),{onSuccess:function(){r?r():(d&&d(),p.success((0,n.t)("settings.billing.add_ons.changes_succeeded")),l&&l())},onError:function(e){console.error(e),a&&a({title:null===e||void 0===e?void 0:e.message,errors:null===e||void 0===e?void 0:e.errorDetails})}})}}({handleOnSuccess:t,setServerErrors:M,onCloseModal:r,refetchCurrentPlan:s}),z=F.handleAddonsMutation,V=function(e){return"boolean"===typeof e},q=function(e){return e.map((function(e){return e.step=e.unit_size,e.toggleable=V(e.quantity),e}))},G=function(e){var t={};return e.map((function(e){t[e.slug]=O(e.quantity,e.base_amount,e.unit_size,V(e.quantity))})),t},H=function(e){return e.filter((function(e){return e.is_grandfathered})).map((function(e){return e.name})).join(", ")},W=function(e){var t={};return e.map((function(e){t[e.slug]=e.quantity})),t},Z=function(e){return m.find((function(t){return t.slug===e}))},J=function(){var e=P(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.z.index();case 2:if(!(t=e.sent).ok){e.next=14;break}return e.next=6,t.json();case 6:r=e.sent,g(W(r)),h(q(r)),U(H(r)),S(G(r)),D(!1),e.next=15;break;case 14:M({title:i().t("something_went_wrong")});case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=P(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},Object.keys(t).forEach((function(e){var n=Z(e);r[n.id.toString()]=t[e]})),z.mutate(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,x.useEffect)((function(){J()}),[]),(0,x.useEffect)((function(){!function(){var e=0;j&&(Object.keys(j).forEach((function(t){e+=j[t]})),p(e))}()}),[j]);var Q={getPlanInterval:function(){return m[0].interval},getPlanCurrency:function(){return m[0].price_currency},total:d,addOnsData:m,defaultValues:y,isLoading:E,handleAddonsMutation:z,serverErrors:L,getAddOnPrice:function(e,t){var r=Z(e);return O(t,r.base_amount,r.unit_size,r.toggleable)},updateTotalPrice:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},j);r[e]=t,S(r)},onSubmit:$,grandfatheredAddonNames:B};return(0,b.jsx)(A.Provider,{value:Q,children:a})},D=function(){return(0,x.useContext)(A)},T=r(45833),L=r(97803),M=["name","interval","monthlyAmount","step","toggleable","maxPurchasableQuantity","priceCurrency","unitSize"];function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var q=function(e){var t=e.name,r=e.interval,i=e.monthlyAmount,o=e.step,a=void 0===o?1:o,s=e.toggleable,c=void 0!==s&&s,l=e.maxPurchasableQuantity,u=e.priceCurrency,d=e.unitSize,f=V(e,M),m=D(),h=m.defaultValues,v=m.getAddOnPrice,y=m.updateTotalPrice,g=F((0,x.useState)(),2),_=g[0],j=g[1],w=function(e){var r=O(e);y(t,r)},O=function(e){var r=v(t,e);return j(r),r};return(0,x.useEffect)((function(){O(h[t])}),[]),(0,b.jsx)(p.l.Item,B(B({name:t,hideBorder:!0,isFirstChild:!0,label:(0,n.t)("settings.billing.add_ons.manage.".concat(t)),description:(0,n.t)("settings.billing.add_ons.manage.".concat(r,".").concat(t,"_description"),{amount:i,quantity:d})},f),{},{children:(0,b.jsxs)("div",{className:"form-input manage-add-ons__item",children:[c&&(0,b.jsx)("div",{className:"manage-add-ons__item-button",children:(0,b.jsx)(T.R,{name:t,onChange:w})}),!c&&(0,b.jsx)("div",{className:"manage-add-ons__item-button",children:(0,b.jsx)(L.A,{name:t,step:a,onChange:w,max:l})}),(0,b.jsx)("div",{className:"manage-add-ons__item-price",children:(0,b.jsxs)("span",{children:[(0,b.jsx)("b",{children:u+_})," ",(0,n.t)("separator_slash")," ",r.charAt(0)]})})]})}))};function G(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var H=function(e){var t=e.onAfterSubmit,r=D(),i=r.isLoading,o=r.handleAddonsMutation,a=r.addOnsData,s=r.defaultValues,c=r.onSubmit,l=r.total,m=r.serverErrors,h=r.getPlanInterval,v=r.getPlanCurrency,y=r.grandfatheredAddonNames,g=function(){var e,r=(e=u().mark((function e(){var r=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.apply(void 0,r),t&&t();case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){G(o,n,i,a,s,"next",e)}function s(e){G(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,b.jsxs)(b.Fragment,{children:[i&&(0,b.jsx)("div",{className:"manage-add-ons__loader",children:(0,b.jsx)(f.a,{})}),!i&&(0,b.jsxs)("div",{children:[y&&(0,b.jsx)("div",{className:"mt-6 rounded-md border border-l-8 border-amber-500 p-5",children:(0,b.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,n.t)("settings.billing.add_ons.manage.grandfathered_addons",{addons:y})}})}),(0,b.jsx)(p.l,{onSubmit:g,defaultValues:s,children:(0,b.jsxs)("div",{className:"manage-add-ons__fields-wrapper text-dark",children:[m&&(0,b.jsx)(j,{serverErrors:m}),a.map((function(e){return(0,b.jsx)("div",{className:"mb-1",children:(0,b.jsx)(q,{name:e.slug,step:e.step,monthlyAmount:e.formatted_base_monthly_amount,toggleable:e.toggleable,interval:e.interval,maxPurchasableQuantity:e.max_purchasable_quantity,unitSize:e.unit_size,priceCurrency:e.price_currency})},e.slug)})),(0,b.jsxs)("div",{className:"manage-add-ons__total",children:[(0,b.jsx)("div",{className:"manage-add-ons__total-label",children:(0,n.t)("settings.billing.add_ons.manage.total_purchase")}),(0,b.jsxs)("div",{className:"manage-add-ons__total-value",children:[(0,b.jsx)("b",{children:v()+l})," ",(0,n.t)("separator_slash")," ",h().charAt(0)]})]}),(0,b.jsx)("div",{className:"form-actions",children:(0,b.jsx)(d._,{type:"submit",variant:"primary",full:!0,submitting:o.isLoading,children:(0,n.t)("settings.billing.add_ons.manage.apply_changes")})})]})})]})]})},W=new o.QueryClient,Z=function(e){var t=e.onSuccess,r=e.refetchCurrentPlan,i=(0,c.p)(),l=(0,a.dd)(),u=function(){l.hide(),l.remove()};return(0,b.jsx)(o.QueryClientProvider,{client:W,children:(0,b.jsx)(E,{onSuccess:t,onCloseModal:u,refetchCurrentPlan:r,children:(0,b.jsxs)(s.u_,{isOpen:l.visible,onClose:u,className:"manage-add-ons__modal",title:(0,n.t)("settings.billing.add_ons.manage_addons"),children:[(0,b.jsx)(s.u_.Overlay,{}),(0,b.jsxs)(s.u_.Content,{size:"lg",children:[(0,b.jsx)(s.u_.Header,{children:(0,b.jsx)(s.u_.Title,{size:"sm",children:(0,n.t)("settings.billing.add_ons.manage_addons")})}),(0,b.jsx)(s.u_.Body,{children:(0,b.jsx)(H,{onAfterSubmit:function(){t&&(u(),i&&i.success((0,n.t)("settings.billing.add_ons.changes_succeeded")))}})})]})]})})})},J=a.gk.create((function(e){var t=e.onSuccess,r=e.refetchCurrentPlan;return(0,b.jsx)(Z,{onSuccess:t,refetchCurrentPlan:r})})),$=function(){return(0,a.dd)(J)}},55259:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});var n=["/settings","/members/manage","/members/invite","/members/invitation_links","/members/onboarding","/members/bulk_import","/members/edit","/members/profile_fields","/settings/members/activity_logs"]},15002:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});var n=r(94184),i=r.n(n),o=r(86013),a=r(85893),s=function(e){var t=e.maxWidth,r=void 0===t?"md":t,n=e.className,s=e.children,c={md:"max-w-4xl",lg:"max-w-[1152px]",xl:"max-w-8xl",none:"max-w-none"}[r]||"";return(0,a.jsx)("main",{"aria-label":(0,o.t)("main_content"),className:i()("settings-app text-dark mx-auto p-4 lg:px-6 lg:py-12",c,n),children:s})}},21653:(e,t,r)=>{"use strict";r.d(t,{b:()=>b});var n=r(36911),i=r(43422),o=r(34256),a=r(1293),s=r(66365),c=r(49942),l=r(97012),u=r(98929),d=r(85893);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e){var t=e.pageTitle,r=e.layoutConfigProps,p=e.pageMetaProps,m=e.rightContent,b=e.leftContent,h=e.filters,v=e.headline,y=e.hasBorder,g=window.innerWidth<=768?".no-header":".header__inside",_=(0,l.wh)().currentCommunity,j=!(0,u.Aq)(_);return(0,a.$)(g),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.S,f({title:t},p)),(0,d.jsx)(o.y,f({disableRightSidebar:!1},r)),j&&(0,d.jsx)(s.n,{children:(0,d.jsx)(i.b,{leftContent:b||(0,d.jsx)(c.y,{children:t}),rightContent:m,filters:h,headline:v,hasBorder:y})})]})}},94621:(e,t,r)=>{"use strict";r.d(t,{T:()=>c});var n=r(66007),i=r(86013),o=r(30887),a=r(3803),s=r(85893),c=function(){return(0,s.jsxs)(a.v,{className:"flex gap-x-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(o.JO,{type:"20-info",size:24,"aria-hidden":"true"})}),(0,s.jsx)(n.Z,{html:(0,i.t)("settings_sso_add_members_suggestion")})]})}},54032:(e,t,r)=>{"use strict";r.d(t,{x:()=>y});var n=r(64687),i=r.n(n),o=r(86013),a=r(23560),s=r.n(a),c=r(88767),l=r(1320),u=r(93826),d=r(97012),p=r(37933),f=r(15591),m=r(21809),b=r(16743),h=r(85893);function v(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var y=function(e){var t,r,n=e.show,a=e.spaceGroupId,y=e.onClose,g=e.onSuccess,_=(0,m.p)(),j=_.error,x=_.success,w=(0,p.C)().goToCommunityRootPath,O=(0,d.nT)(),S=O.records,P=O.actions.refresh,C=(0,d.e2)(),k=C.actions.refresh,N=C.helpers.findById,I=(0,c.useMutation)((function(){return l.iD.destroy(a)}),{onSuccess:(t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x((0,o.t)("space_groups.form.delete.success")),e.next=3,Promise.all([P(),k()]);case 3:w(),s()(y)&&y(),s()(g)&&g();case 6:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(e){v(o,n,i,a,s,"next",e)}function s(e){v(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return r.apply(this,arguments)}),onError:function(){j((0,o.t)("space_groups.form.delete.failed"))}}),A=I.mutate,E=I.isLoading,D=S.filter((function(e){return e.space_group_id===a})),T=N(a);return(0,h.jsxs)(f.V,{title:(0,o.t)("space_groups.delete.title"),confirmUserPrompt:(0,o.t)("space_groups.delete.confirm_prompt"),isOpen:n,onClose:y,onCancel:y,onConfirm:A,confirmVariant:"danger",isDisabled:E,confirmText:E?(0,o.t)("deleting"):(0,o.t)("confirm"),children:[(0,h.jsx)(u.w,{content:(0,o.t)("space_groups.delete.description",{space_name:(null===T||void 0===T?void 0:T.name)||""})})," ",Boolean(D.length)&&(0,h.jsxs)(h.Fragment,{children:[(0,o.t)("space_groups.delete.this_includes"),(0,h.jsxs)("div",{className:"border-primary mt-4 rounded-md border",children:[(0,h.jsx)("div",{className:"bg-secondary border-primary rounded-t-md border-b px-4 py-1",children:(0,h.jsx)(b.Z.LabelXs,{weight:"semibold",children:(0,o.t)("space_groups.delete.spaces_count",{count:D.length})})}),(0,h.jsx)("ul",{className:"max-h-56 w-full list-inside overflow-y-scroll p-4",children:D.map((function(e){return(0,h.jsx)("li",{className:"truncate",children:e.name},e.id)}))})]})]})]})}},11117:(e,t,r)=>{"use strict";r.d(t,{a:()=>u});var n=r(86013),i=r(61926),o=r(85893);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={translationRoot:"space_groups.form.create",hiddenField:!0,hideDescription:!0,className:"flex flex-row-reverse justify-end m-0",labelClassName:"ml-4 mb-0",labelWrapperClassName:"flex items-center",shouldToggleValueOnLabelClick:!0},u=function(){return(0,o.jsxs)("div",{className:"mt-8 space-y-5",children:[(0,o.jsx)(i.l.Item,s(s({},l),{},{name:"hide_members_count",tooltipText:(0,n.t)("space_groups.form.create.hide_members_count_tooltip"),children:(0,o.jsx)(i.l.ToggleSwitch,{variant:"small"})})),(0,o.jsx)(i.l.Item,s(s({},l),{},{name:"is_hidden_from_non_members",tooltipText:(0,n.t)("space_groups.form.create.is_hidden_from_non_members_tooltip"),children:(0,o.jsx)(i.l.ToggleSwitch,{variant:"small"})})),(0,o.jsx)(i.l.Item,s(s({},l),{},{name:"hide_non_member_spaces_from_sidebar",tooltipText:(0,n.t)("space_groups.form.create.hide_non_member_spaces_from_sidebar_tooltip"),children:(0,o.jsx)(i.l.ToggleSwitch,{variant:"small"})})),(0,o.jsx)(i.l.Item,s(s({},l),{},{name:"allow_members_to_create_spaces",tooltipText:(0,n.t)("space_groups.form.create.allow_members_to_create_spaces_tooltip"),children:(0,o.jsx)(i.l.ToggleSwitch,{variant:"small"})})),(0,o.jsx)(i.l.Item,s(s({},l),{},{name:"automatically_add_members_to_new_spaces",tooltipText:(0,n.t)("space_groups.form.create.automatically_add_members_to_new_spaces_tooltip"),children:(0,o.jsx)(i.l.ToggleSwitch,{variant:"small"})})),(0,o.jsx)(i.l.Item,s(s({},l),{},{name:"add_members_to_space_group_on_space_join",tooltipText:(0,n.t)("space_groups.form.create.add_members_to_space_group_on_space_join_tooltip"),children:(0,o.jsx)(i.l.ToggleSwitch,{variant:"small"})}))]})}},17021:(e,t,r)=>{"use strict";r.d(t,{K:()=>b});var n=r(67294),i=r(86013),o=r(87536),a=r(31304),s=r.n(a),c=r(61926),l=r(85893);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f={replacement:"-",remove:/[*+~.;()'"!:@#]/g,lower:!0},m={translationRoot:"space_groups.form.create",hideBorder:!0,hideDescription:!0,fullWidth:!1},b=function(){var e=(0,o.Gc)(),t=e.watch,r=e.setValue,a=e.formState,u=t("name"),p=Boolean(a.dirtyFields.name),b=Boolean(a.dirtyFields.slug);return(0,n.useEffect)((function(){u&&!b&&p&&r("slug",s()(u,f))}),[r,u,b,p]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(c.l.Item,d(d({},m),{},{isFirstChild:!0,name:"name",rules:{required:(0,i.t)("space_groups.form.create.name_is_required"),maxLength:255},variant:"extra-bottom-margin",children:(0,l.jsx)(c.l.Input,{})}))}),(0,l.jsx)(c.l.Item,d(d({},m),{},{name:"slug",rules:{maxLength:255},variant:"extra-bottom-margin",transformValue:function(e){return s()(e,f)},tooltipText:(0,i.t)("space_groups.form.create.slug_tooltip",{host:window.location.origin}),children:(0,l.jsx)(c.l.Input,{})}))]})}},70996:(e,t,r)=>{"use strict";r.d(t,{T:()=>A});var n=r(67294),i=r(86013),o=r(97012),a=r(30887),s=r(55675),c=r(5295),l=r(16743),u=r(64687),d=r.n(u),p=r(99310),f=r(88767),m=r(34128),b=r(49326);r(61345);var h=r(71032),v=r(86599),y=r(53448),g=r(21809),_=r(50193),j=r(61926),x=r(85893),w="edit-course-type-form",O=function(e){var t=e.defaultValues,r=e.onSubmit;return(0,x.jsx)(j.l,{id:w,onSubmit:r,defaultValues:t,validationSchema:void 0,className:void 0,formClassName:void 0,children:(0,x.jsx)(_.q,{hideLabel:!0})})};function S(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t,r,a,c=e.space,l=e.isOpen,u=e.onClose,_=(null===(t=c.course_setting)||void 0===t?void 0:t.course_type)||p.t,j={course_setting:{course_type:_}},C=P((0,n.useState)(!1),2),k=C[0],N=C[1],I=P((0,n.useState)(!1),2),A=I[0],E=I[1],D=P((0,n.useState)(!0),2),T=D[0],L=D[1],M=P((0,n.useState)(j),2),R=M[0],B=M[1],U=(0,g.p)(),F=U.error,z=U.success,V=function(){u(),setTimeout((function(){N(!1),L(!0),E(!1)}),100)},q=(0,o.T4)({spaceId:c.id}).refetch,G=function(e){var t=e.space,r=e.options,n=void 0===r?{}:r,i=b.av.courses.settings({courseId:t.id});return(0,f.useMutation)((function(e){return(0,m.aU)(i,e)}),n)}({space:c,options:{onSuccess:(r=d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:z((0,i.t)("spaces.form.create.course_types.save_success"),{duration:"short",shouldUseProgress:!1}),V();case 4:case"end":return e.stop()}}),e)})),a=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){S(o,n,i,a,s,"next",e)}function s(e){S(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)}),onError:function(){F((0,i.t)("spaces.form.create.course_types.save_error")),N(!1)}}}),H=G.mutate,W=R.course_setting.course_type,Z=(0,i.t)("spaces.form.create.course_types.".concat(W,"_confirmation"));return(0,x.jsxs)(y.u_,{isOpen:l,onClose:u,contentPortalId:"course-type-picker-portal",children:[(0,x.jsx)(y.u_.Overlay,{}),(0,x.jsxs)(y.u_.Content,{size:"md",children:[(0,x.jsxs)(y.u_.Header,{children:[(0,x.jsx)(y.u_.Title,{size:"sm",children:(0,i.t)("spaces.form.create.course_types.label")}),(0,x.jsx)(y.u_.HeaderActions,{children:(0,x.jsx)(y.u_.CloseButton,{onClick:u})})]}),(0,x.jsxs)(y.u_.Body,{className:"px-2",children:[T&&(0,x.jsx)(O,{defaultValues:j,onSubmit:function(e){_===e.course_setting.course_type?(z((0,i.t)("spaces.form.create.course_types.save_success"),{duration:"short",shouldUseProgress:!1}),V()):(B(e),E(!0),L(!1))}}),(0,x.jsx)(h.c,{title:(0,i.t)("spaces.form.create.course_types.are_you_sure"),confirmText:(0,i.t)("save"),cancelText:(0,i.t)("cancel"),confirmVariant:"circle",disabled:k,isOpen:A,onCancel:function(){L(!0),E(!1)},onClose:function(){L(!0),E(!1)},onConfirm:function(){N(!0),H(R)},children:(0,x.jsx)("p",{children:Z})})]}),(0,x.jsxs)(y.u_.Footer,{className:"flex justify-end",children:[!k&&(0,x.jsx)(s.z,{type:"button",variant:"secondary",className:"mr-2",onClick:u,children:(0,i.t)("cancel")}),(0,x.jsx)(v._,{type:"submit",variant:"circle",form:w,submitting:k,children:(0,i.t)("save")})]})]})]})};function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t,r=e.space,u=N((0,n.useState)(!1),2),d=u[0],f=u[1],m=(0,o.T4)({spaceId:null===r||void 0===r?void 0:r.id}),b=m.data,h=m.isLoading,v=(0,o.wh)().isViewOnlyMasquerading;if(h)return(0,x.jsx)(c.a,{});if(!b)return null;var y=(null===(t=b.course_setting)||void 0===t?void 0:t.course_type)||p.t;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(k,{space:b,isOpen:d,onClose:function(){f(!1)}}),(0,x.jsxs)(l.Z.BodySm,{weight:"font-medium",children:[(0,x.jsx)(a.JO,{type:"16-book",size:16,className:"align-text-bottom"})," ",(0,i.t)("spaces.form.create.course_types.label"),":"," ",(0,x.jsx)(s.z,{variant:"plain",className:"hover:bg-tertiary !text-dark !px-1 !py-0.5 !font-semibold underline decoration-dashed decoration-1 underline-offset-2",onClick:function(){return f(!0)},disabled:v,children:(0,i.t)("spaces.form.create.course_types.".concat(y))})]})]})}},50193:(e,t,r)=>{"use strict";r.d(t,{q:()=>c});var n=r(86013),i=r(30887),o=r(61926),a=r(85893),s=[{label:(0,n.t)("spaces.form.create.course_types.self_paced"),value:"self_paced",description:(0,n.t)("spaces.form.create.course_types.self_paced_info")},{label:(0,n.t)("spaces.form.create.course_types.structured"),value:"structured",description:(0,n.t)("spaces.form.create.course_types.structured_info")},{label:(0,n.t)("spaces.form.create.course_types.scheduled"),value:"scheduled",description:(0,n.t)("spaces.form.create.course_types.scheduled_info")}],c=function(e){var t=e.hideLabel;return(0,a.jsx)(o.l.Item,{name:"course_setting[course_type]",hideDescription:!0,rules:{required:(0,n.t)("spaces.form.create.choose_course_type"),maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",label:(0,n.t)("spaces.form.create.course_types.label"),hideLabel:t,children:(0,a.jsx)(o.l.RadioGroup,{variant:"box",name:"visibility",options:s,optionAlignment:"left",checkedIcon:(0,a.jsx)(i.JO,{type:"20-checkmark-circle",size:16})})})}},99310:(e,t,r)=>{"use strict";r.d(t,{d:()=>n,t:()=>i});var n={self_paced:"self_paced",scheduled:"scheduled",structured:"structured"},i=n.self_paced},14103:(e,t,r)=>{"use strict";r.d(t,{a:()=>D});var n=r(16765),i=r(49326),o=r(94184),a=r.n(o),s=r(85893),c=["href","children","className","rel"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=function(e){var t=e.href,r=e.children,n=e.className,i=e.rel,o=void 0===i?"noopener noreferrer":i,l=p(e,c);return(0,s.jsx)("a",u(u({},l),{},{href:t,rel:o,className:a()("focus-visible:!outline-secondary bg-brand text-brand-button inline-block rounded-md px-[18px] py-[6px] text-sm font-bold leading-5 transition-colors duration-150 hover:opacity-90 focus-visible:!outline focus-visible:!outline-2 focus-visible:!outline-offset-2",n),children:r}))},m=function(e){var t=e.heading,r=void 0===t?"":t,o=e.description,a=void 0===o?"":o,c=e.button_label,l=void 0===c?"":c,u=e.button_link,d=void 0===u?"":u,p=e.background_image,m=void 0===p?"":p,b=e.overlay_color,h=void 0===b?"#191B1F":b,v=e.heading_color,y=void 0===v?"#FFFFFF":v,g=e.text_color,_=void 0===g?"#FFFFFF":g,j=e.button_background_color,x=void 0===j?"#2B2E33":j,w=e.button_text_color,O=void 0===w?"#FFFFFF":w,S=(0,n.Vi)(h).alpha(.75).toRgbString(),P="";if(m)try{P=new URL(m).href}catch(C){P=(0,i.C9)({signed_id:m})}return(0,s.jsx)("div",{className:"flex w-full flex-col items-center bg-cover bg-center py-14 bg-blend-multiply",style:{backgroundImage:"url(".concat(P,")"),backgroundColor:S},children:(0,s.jsxs)("div",{className:"max-w-3xl px-5 text-center",children:[Boolean(r)&&(0,s.jsx)("h2",{className:"mb-3 text-4xl font-bold leading-10",style:{color:y},children:r}),Boolean(a)&&(0,s.jsx)("p",{className:"mb-5 text-base leading-6 tracking-tighter",style:{color:_},children:a}),Boolean(l)&&(0,s.jsx)(f,{href:d,style:{backgroundColor:x,color:O},children:l})]})})};function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=r(67294),y=r(96486),g=r(37109);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=r(66007),w=r(86013),O=r(72810),S=r(16743),P=(r(64555),r(30887)),C=r(6809),k=function(e){var t=e.locked_page_heading,r=void 0===t?"":t,n=e.locked_page_description,i=void 0===n?{}:n,o=e.locked_button_url,a=void 0===o?"":o,c=e.locked_button_label,l=void 0===c?"":c,u=(0,O.t)().invited,d=Boolean(u),p=Boolean(l&&a),f=i.rendered_html_with_layout,m=void 0===f?"":f,b=Boolean(m);return(0,s.jsx)("div",{className:"flex h-full w-full justify-center p-0 md:h-auto md:p-6","data-testid":"locked-space",children:(0,s.jsxs)("div",{className:"border-primary bg-primary h-full w-full max-w-5xl rounded-none border-0 px-10 py-20 text-center md:h-auto md:rounded-lg md:border",children:[(0,s.jsx)(P.JO,{type:"lock",className:"mb-5 !w-14"}),d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Z.TitleSm,{weight:"semibold",children:(0,w.t)("please_check_your_email")}),(0,s.jsx)(S.Z.BodyMd,{children:(0,w.t)("please_check_your_email_description")})]}),!d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)(S.Z.TitleSm,{weight:"semibold",children:r||(0,w.t)("this_space_is_private")})}),(0,s.jsxs)("div",{className:"mb-4",children:[b&&(0,s.jsx)("div",{className:"text-dark flex justify-center",children:(0,s.jsx)(x.Z,{html:m})}),!b&&(0,s.jsx)(S.Z.BodyMd,{children:(0,w.t)("this_space_is_private_description")})]}),p&&(0,s.jsx)(C.Q,{variant:"brand",href:a,children:l})]})]})})},N=r(46613);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E={banner:m,description:function(e){var t=e.description_tiptap,r=void 0===t?{}:t,n=e.sgids_to_object_map,i=void 0===n?{}:n,o=e.inline_attachments,a=void 0===o?[]:o,c=_((0,v.useState)((0,y.uniqueId)("description_block_")),2),l=c[0],u=c[1];return(0,v.useEffect)((function(){u((0,y.uniqueId)("description_block_"))}),[r]),(0,s.jsx)("div",{className:"bg-primary flex w-full flex-col items-center py-10",children:(0,s.jsx)("div",{className:"w-full max-w-[800px] px-3",children:(0,s.jsx)(g.R,{readOnly:!0,value:r,sgidToObjectMap:i,inlineAttachments:a,editorClassName:"break-words",disabledExtensions:["mention","poll","cta"]})})},l)},call_to_action:function(e){return(0,s.jsx)(m,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))},lessons:function(e){var t=e.isMember,r=void 0!==t&&t,n=e.sections,i=void 0===n?[]:n;return(0,s.jsx)("div",{className:"bg-primary flex w-full flex-col items-center py-10",children:(0,s.jsx)("div",{className:"w-full max-w-[800px] px-3",children:(0,s.jsx)(N.V,{isMember:r,sections:i})})})},legacy_lock_screen:function(e){var t=e.locked_page_heading,r=void 0===t?"":t,n=e.locked_page_description,i=void 0===n?{}:n,o=e.locked_button_url,a=void 0===o?"":o,c=e.locked_button_label,l=void 0===c?"":c;return(0,s.jsx)("div",{className:"bg-secondary text-dark h-full",children:(0,s.jsx)(k,{locked_page_heading:r,locked_page_description:i,locked_button_url:a,locked_button_label:l})})}},D=function(e){var t=e.block,r=void 0===t?{}:t,n=r.type,i=r.data,o=E[n];return(0,s.jsx)(o,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},i))}},42561:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(17182),i=r(50515),o=r(14103),a=r(85893),s=function(e){var t=e.blocks,r=void 0===t?[]:t;return Array.isArray(r)&&r.some((function(e){return!(null!==e&&void 0!==e&&e.hidden)}))?(0,a.jsx)("div",{className:"bg-primary text-dark h-full",children:r.filter((function(e){return!e.hidden})).map((function(e){return(0,a.jsx)("div",{className:"pointer-events-none select-none",children:(0,a.jsx)(o.a,{block:e})},e.id)}))}):(0,a.jsx)(n.F.Body,{hasPaddingTopMobile:!1,children:(0,a.jsx)(i.R,{})})}},87301:(e,t,r)=>{"use strict";r.d(t,{z:()=>k,U:()=>P});var n=r(67294),i=r(96486),o=r(86013);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={type:"banner",hidden:!1,data:{heading:(0,o.t)("courses.lockscreen.default.banner_heading"),description:(0,o.t)("courses.lockscreen.default.banner_description"),button_label:(0,o.t)("courses.lockscreen.default.buy_now"),button_link:"",background_image:"",overlay_color:"#191B1F",heading_color:"#FFFFFF",text_color:"#FFFFFF",button_background_color:"#2B2E33",button_text_color:"#FFFFFF"}},u={type:"description",hidden:!1,data:{description_tiptap:{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:(0,o.t)("courses.lockscreen.default.description")}]}]},sgids_to_object_map:{},inline_attachments:[]}},d={type:"lessons",hidden:!0,data:{sections:[]}},p={type:"call_to_action",hidden:!1,data:s(s({},l.data),{},{overlay_color:"#2C3341",heading:(0,o.t)("courses.lockscreen.default.call_to_action_heading"),description:(0,o.t)("courses.lockscreen.default.call_to_action_description")})},f=[l,u,d,p];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g={event:["banner","description","call_to_action","legacy_lock_screen"],basic:["banner","description","call_to_action","legacy_lock_screen"],chat:["banner","description","call_to_action","legacy_lock_screen"],course:["banner","description","call_to_action","lessons"]},_={banner:l,description:u,call_to_action:p,lessons:d},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).post_type,r=g[void 0===t?"basic":t]||g.basic;return e.filter((function(e){return r.includes(e.type)}))},x=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){return e.some((function(e){return e.type===t.type}))||e.push(t),e}),[])},w=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),r=e.locked_page_heading,n=void 0===r?"":r,i=e.locked_page_description,o=void 0===i?{}:i,a=e.locked_button_label,s=void 0===a?"":a,c=e.locked_button_url,l=void 0===c?"":c,u=e.post_type,d=void 0===u?"basic":u,p=o.rendered_html_with_layout;return Boolean(n||s||l||(void 0===p?"":p))&&"course"!==d?t.some((function(e){return"legacy_lock_screen"===e.type}))?t.map((function(e){return"legacy_lock_screen"===e.type?b(b({},e),{},{data:{locked_page_heading:n,locked_page_description:o,locked_button_url:l,locked_button_label:s}}):e})):(t.unshift({type:"legacy_lock_screen",hidden:!1,data:{locked_page_heading:n,locked_page_description:o,locked_button_url:l,locked_button_label:s}}),t.map((function(e){return"legacy_lock_screen"===e.type?e:b(b({},e),{},{hidden:!0})}))):t},O=function(e){return e.map((function(e){return b(b({},e),{},{id:(0,i.uniqueId)("block_")})}))},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).course_sections,r=void 0===t?[]:t,n=Array.isArray(r)?r:[];return e.map((function(e){return"lessons"!==e.type?e:b(b({},e),{},{data:b(b({},e.data),{},{sections:n})})}))},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lock_screen_blocks,r=void 0===t?[]:t,n=Array.isArray(r)&&r.length>0,i=j(n?r:[],e),o=x(i),a=w(o,e),s=O(a);return S(s,e)}(e)}),[e])},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lock_screen_blocks,r=void 0===t?[]:t,n=Array.isArray(r)&&r.length>0,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).post_type,r=void 0===t?"basic":t,n=v(e);return(g[r]||g.basic).forEach((function(e){"legacy_lock_screen"!==e&&(n.some((function(t){return t.type===e}))||n.push(_[e]))})),n}(j(n?r:f,e),e),o=x(i),a=w(o,e),s=O(a);return S(s,e)},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.useMemo)((function(){return C(e)}),[e])}},93156:(e,t,r)=>{"use strict";r.d(t,{v:()=>a});var n=r(86013),i=r(30887),o=r(85893),a=function(e){var t=e.isSpaceMember,r=e.isDripped,a=e.isCompleted,s="lock",c="lesson_locked";return t&&r&&(s=a?"16-checked-green":"16-unchecked",c=a?"lesson_completed":"lesson_incomplete"),(0,o.jsx)(i.JO,{className:"text-default flex-none",size:16,type:s,"aria-label":(0,n.t)(["courses.lessons",c])})}},46613:(e,t,r)=>{"use strict";r.d(t,{V:()=>k});var n=r(86013);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=function(e){var t=e.reduce((function(e,t){var r=i(t.split(":").reverse(),3),n=r[0],o=r[1],a=r[2];return e+(parseInt(n)+60*parseInt(o)+3600*parseInt(null!==a&&void 0!==a?a:0))}),0);return{hours:Math.floor(t/3600),minutes:Math.floor(t%3600/60),seconds:t%60}},s=function(e){var t=e.hours,r=e.minutes;return t>0?(0,n.t)("courses.summary.content.hr_min_duration",{hours:t,minutes:r}):(0,n.t)("courses.summary.content.min_duration",{minutes:r})},c=r(55675),l=r(16743),u=r(94184),d=r.n(u),p=r(30887),f=r(40160),m=r(24185),b=r(93156),h=r(16219),v=r(49326),y=r(87958),g=r(85893),_=function(e){var t,r=e.lesson,n=void 0===r?{}:r,i=e.isMember,o=e.section,a=(0,m.UO)(),s=null===a||void 0===a?void 0:a.spaceSlug;return(0,g.jsx)(f.OL,{onClick:function(e){i||e.preventDefault()},to:v.H4.showLesson({spaceSlug:s,lessonId:n.id,sectionId:o.id}),className:d()("flex w-full items-center space-x-2 p-4",i?"cursor-pointer":"cursor-default"),children:(0,g.jsxs)(y.T,{content:(0,h.t)({drippedAt:o.dripped_at,dripDelay:o.drip_delay,needsToCompletePreviousLesson:n.needs_to_complete_previous_lesson}),placement:"bottom-start",disabled:n.is_dripped,arrow:!1,className:"flex w-full items-center",dataTestId:"lesson-content-tittle",children:[(0,g.jsx)(b.v,{isDripped:n.is_dripped,isSpaceMember:i,isCompleted:n.completed}),(0,g.jsx)("div",{className:"ml-3 flex-1",children:(0,g.jsx)(l.Z.BodySm,{children:n.name})}),(null===(t=n.featured_media)||void 0===t?void 0:t.duration)&&(0,g.jsx)(l.Z.BodySm,{children:n.featured_media.duration})]})},n.id)},j=function(e){var t=e.section,r=void 0===t?{}:t,i=e.isMember,o=e.hasBorder,c=void 0!==o&&o,u=e.open,f=e.onToggle,m=a(r.lessons.map((function(e){var t;return null===(t=e.featured_media)||void 0===t?void 0:t.duration})).filter(Boolean)),b=(0!==m.hours||0!==m.minutes)&&" ".concat((0,n.t)("separator_dot")," ").concat(s(m)),h=r.lessons.length;return(0,g.jsxs)("div",{children:[(0,g.jsxs)("button",{type:"button",onClick:f,className:d()("bg-secondary flex w-full justify-between p-4 text-left",{"border-primary border-b":u||c}),children:[(0,g.jsxs)("div",{className:"flex",children:[(0,g.jsx)(p.JO,{type:u?"16-chevron-down":"16-chevron-right",className:"mr-2",size:16}),(0,g.jsx)(l.Z.LabelMd,{weight:"semibold",color:"text-darkest",children:r.name})]}),(0,g.jsxs)(l.Z.LabelSm,{children:[(0,n.t)("courses.summary.content.lessons_count",{count:h}),b]})]}),u&&(0,g.jsx)("div",{className:"divide-primary divide-y",children:r.lessons.map((function(e){return(0,g.jsx)(_,{lesson:e,isMember:i,section:r},e.id)}))})]},r.id)},x=r(67294);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t=e.isMember,r=void 0!==t&&t,i=e.sections,o=void 0===i?[]:i,u=function(e){var t=e.sections,r=P((0,x.useState)(Object.fromEntries(t.map((function(e){return[e.id,!0]})))),2),n=r[0],i=r[1];return{hasExpandedSections:function(){return Object.values(n).some(Boolean)},isSectionExpanded:function(e){return n[e.id]},toggleSectionExpanded:function(e){i((function(t){return O(O({},t),{},S({},e.id,!t[e.id]))}))},expandAllSections:function(){i(Object.fromEntries(t.map((function(e){return[e.id,!0]}))))},collapseAllSections:function(){i(Object.fromEntries(t.map((function(e){return[e.id,!1]}))))}}}({sections:o}),d=u.hasExpandedSections,p=u.isSectionExpanded,f=u.toggleSectionExpanded,m=u.expandAllSections,b=u.collapseAllSections;if(0===(null===o||void 0===o?void 0:o.length))return null;var h=o.length,v=o.reduce((function(e,t){return e+t.lessons.length}),0),y=a(o.map((function(e){return e.lessons})).flat().map((function(e){var t;return null===(t=e.featured_media)||void 0===t?void 0:t.duration})).filter(Boolean)),_=(0!==y.hours||0!==y.minutes)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.Z.LabelSm,{children:(0,n.t)("separator_dot")}),(0,g.jsx)(l.Z.LabelSm,{children:s(y)})]});return(0,g.jsxs)("div",{className:"flex w-full flex-col","data-testid":"summary-course-content",children:[(0,g.jsx)(l.Z.TitleSm,{as:"h2",weight:"semibold",color:"text-darkest",children:(0,n.t)("courses.summary.content.title")}),(0,g.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,g.jsxs)("div",{className:"text-dark flex items-center space-x-1",children:[(0,g.jsx)(l.Z.LabelSm,{children:(0,n.t)("courses.summary.content.sections_count",{count:h})}),(0,g.jsx)("span",{children:(0,n.t)("separator_dot")}),(0,g.jsx)(l.Z.LabelSm,{children:(0,n.t)("courses.summary.content.lessons_count",{count:v})}),_]}),(0,g.jsx)(c.z,{className:"!p-0",variant:"plain",onClick:function(){d()?b():m()},children:(0,g.jsx)(l.Z.LabelSm,{children:d()?(0,n.t)("courses.summary.content.collapse_all_sections"):(0,n.t)("courses.summary.content.expand_all_sections")})})]}),(0,g.jsx)("div",{className:"border-primary overflow-hidden rounded-md border",children:o.map((function(e,t){var n=t===h-1;return(0,g.jsx)(j,{section:e,isMember:r,hasBorder:!n,open:p(e),onToggle:function(){return f(e)}},e.id)}))})]})}},27799:(e,t,r)=>{"use strict";r.d(t,{l:()=>O});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r(96486),c=r(50730),l=r(68465),u=r(26953),d=r(74284),p=r(71362),f=r(78270),m=r(30887),b=r(85893),h=function(e){var t=e.onClick;return(0,b.jsx)("a",{href:"#create-space",className:"block-header__action action--add-space","data-testid":"create-space",onClick:t,children:(0,b.jsx)(m.JO,{type:"circle-add"})})},v=["spaceGroupId","type","size","useDrawerFlow","children"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var O=function(e){var t=e.spaceGroupId,r=e.type,i=e.size,m=void 0===i?"md":i,y=e.useDrawerFlow,_=e.children,x=w(e,v),O=j((0,n.useState)(!1),2),S=O[0],P=O[1],C=(0,u.a7)(),k=function(){P(!1)},N=function(e){e.preventDefault(),P(!0)};return(0,b.jsxs)(b.Fragment,{children:[!r&&(0,b.jsx)("a",g(g({href:"#create-space",onClick:N},x),{},{children:_})),"icon"===r&&(C?(0,b.jsx)(d.Y,{content:(0,a.t)("create_a_space"),delay:0,arrow:!0,size:"regular",animation:"fade",children:(0,b.jsx)(h,{onClick:N})}):(0,b.jsx)(h,{onClick:N})),"link"===r&&(0,b.jsx)("button",g(g({type:"submit",className:o()({"create-space-btn--md":"md"===m,"create-space-btn--lg":"lg"===m}),onClick:N},x),{},{children:(0,a.t)("create_a_space")})),y?(0,b.jsx)(p.d,{hideHeader:!0,open:S,noWrapperPadding:!0,children:(0,b.jsx)(l._,{open:S,onClose:k,currentSpaceGroupId:t})}):(0,b.jsx)(f.u,{variant:"fullscreen",title:(0,a.t)("create_a_space"),show:S,onClose:s.noop,hideCloseButton:!0,hideTitle:!0,children:(0,b.jsx)(c.J,{space_group_id:t,onModalClose:k})})]})}},30176:(e,t,r)=>{"use strict";r.d(t,{R:()=>s});var n=r(94184),i=r.n(n),o=r(16743),a=r(85893),s=function(e){var t=e.title,r=e.description,n=e.className;return(0,a.jsx)("div",{className:i()("flex h-full",n),children:(0,a.jsxs)("div",{className:"mx-auto flex flex-col gap-2 self-center p-6 text-center",children:[t&&(0,a.jsx)("div",{children:(0,a.jsx)(o.Z.TitleSm,{weight:"semibold",children:t})}),r&&(0,a.jsx)("div",{children:(0,a.jsx)(o.Z.BodySm,{color:"text-default",children:r})})]})})}},61645:(e,t,r)=>{"use strict";r.d(t,{Nn:()=>d,Jr:()=>p});var n=r(86013),i=(r(61345),"!h-6 !w-6 !text-dark"),o="spaces.form.edit.customize.layout",a=[{label:(0,n.t)([o,"feed"]),icon:{type:"feed-thumbnail",viewBox:"0 0 75 78"},value:"posts"},{label:(0,n.t)([o,"list"]),icon:{type:"list-thumbnail",viewBox:"0 0 75 77"},value:"list"},{label:(0,n.t)([o,"card"]),icon:{type:"card-thumbnail",viewBox:"0 0 75 77"},value:"cards"}],s=[{label:(0,n.t)([o,"feed"]),icon:{type:"customize-layout-feed",viewBox:"0 0 25 24",className:i},value:"posts"},{label:(0,n.t)([o,"list"]),icon:{type:"customize-layout-list",viewBox:"0 0 25 24",className:i},value:"list"},{label:(0,n.t)([o,"card"]),icon:{type:"20-card-view-mobile",viewBox:"0 0 25 24",className:i},value:"cards"}],c=[{label:(0,n.t)([o,"thumbnail"]),icon:{type:"customize-layout-feed",viewBox:"0 0 25 24",className:i},value:"thumbnail"},{label:(0,n.t)([o,"list"]),icon:{type:"customize-layout-list",viewBox:"0 0 25 24",className:i},value:"posts"},{label:(0,n.t)([o,"calendar"]),icon:{type:"support-widget-calendar",viewBox:"0 0 24 24",className:i},value:"calendar"}],l=[{label:(0,n.t)([o,"thumbnail"]),icon:{type:"event-layout-thumbnail",viewBox:"0 0 118 84"},value:"thumbnail"},{label:(0,n.t)([o,"list"]),icon:{type:"event-layout-list",viewBox:"0 0 118 90"},value:"posts"},{label:(0,n.t)([o,"calendar"]),icon:{type:"event-layout-calendar",viewBox:"0 0 120 90"},value:"calendar"}],u=[{label:(0,n.t)([o,"feed"]),icon:{type:"20-feed",viewBox:"-2 -1 25 24",className:i},value:"feed"},{label:(0,n.t)([o,"masonry"]),icon:{type:"20-masonry",viewBox:"-2 -1 25 24",className:i},value:"masonry"},{label:(0,n.t)([o,"grid"]),icon:{type:"20-grid",viewBox:"-2 -1 25 24",className:i},value:"grid"}],d=function(e){var t=e.excludedOptions,r=void 0===t?[]:t,n=e.postType;return("event"===n?l:"image"===n?u:a).filter((function(e){return!r.includes(e.value)}))},p=function(e){var t=e.excludedOptions,r=void 0===t?[]:t,n=e.postType;return("event"===n?c:"image"===n?u:s).filter((function(e){return!r.includes(e.value)}))}},12204:(e,t,r)=>{"use strict";r.d(t,{l:()=>b});var n=r(67294),i=r(94184),o=r.n(i),a=r(86013),s=r(87536),c=r(97012),l=r(61345),u=r(61926),d=r(10029),p=r(61989),f=r(61645),m=r(85893),b=function(e){var t,r,i,b=e.space,h=e.isShownInRailBar,v=void 0!==h&&h,y=((0,c.wh)().currentCommunitySettings||{}).space_directory_enabled,g=(0,s.Gc)(),_=g.watch,j=g.setValue,x="open"!==_("visibility"),w=_("visible_tabs"),O=_("default_tab"),S=_("show_tab_bar"),P=_("display_view"),C=_("locked_page_description"),k=(0,l.H3)(b),N=_("hide_member_sidebar"),I=null===w||void 0===w?void 0:w.includes("posts"),A="cards"===P;(w.includes(O)||j("default_tab",w[0]),w.length>1&&!S&&j("show_tab_bar",!0),x&&null!==b&&void 0!==b&&null!==(t=b.locked_page_description)&&void 0!==t&&t.trix_html&&!C)&&j("locked_page_description",null===b||void 0===b||null===(i=b.locked_page_description)||void 0===i?void 0:i.trix_html);(0,n.useEffect)((function(){w.includes("members")?j("hide_member_sidebar",!0):j("hide_member_sidebar",!1)}),[b]),(0,n.useEffect)((function(){k&&j("visible_tabs",N?["posts","members"]:["posts"])}),[N,k]);var E=!A,D=!(0,l.Ug)(b)||(0,l.Ug)(b)&&y;return(0,m.jsxs)("div",{className:o()({"edit-space__container":!v}),children:[(0,l.H3)(b)&&(0,m.jsxs)(m.Fragment,{children:[I&&(0,m.jsx)(u.l.Item,{hideBorder:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.customize.layout.label"),name:"display_view",variant:"extra-bottom-margin",children:(0,m.jsx)(u.l.RadioGroup,{fullWidth:!1,labelOutside:!0,options:(0,f.Nn)({postType:b.post_type})})}),E&&(0,m.jsx)(u.l.Item,{inline:!0,hideBorder:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.customize.right_sidebar"),name:"show_right_sidebar",shouldToggleValueOnLabelClick:!0,children:(0,m.jsx)(u.l.ToggleSwitch,{variant:"small"})})]}),!(0,l.Ug)(b)&&(0,m.jsx)(u.l.Item,{inline:!0,hideBorder:!0,label:(0,a.t)("spaces.form.edit.customize.cover_image"),name:"cover_image",description:(0,a.t)("spaces.form.edit.customize.cover_image_description"),children:(0,m.jsx)(d.a,{name:"cover_image",aspectRatio:43/9})}),(0,l.Ug)(b)&&(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsx)(u.l.Item,{name:"chat_room_description",hideBorder:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.customize.add_description"),placeholder:(0,a.t)("spaces.form.edit.customize.description_placeholder"),variant:"extra-bottom-margin",children:(0,m.jsx)(u.l.TextArea,{})})}),D&&(0,m.jsx)(u.l.Item,{inline:!0,hideBorder:!0,label:(0,a.t)("spaces.form.edit.customize.thumbnail_image"),name:"thumbnail_image",description:(0,a.t)("spaces.form.edit.customize.thumbnail_image_description"),children:(0,m.jsx)(d.a,{name:"thumbnail_image",aspectRatio:16/9})}),k&&(0,m.jsx)(u.l.Item,{inline:!0,hideBorder:!0,hideDescription:!0,label:(0,a.t)("spaces.form.edit.customize.show_sidebar_members_block"),name:"hide_member_sidebar",shouldToggleValueOnLabelClick:!0,children:(0,m.jsx)(u.l.ToggleSwitch,{variant:"small"})}),x&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(u.l.Item,{name:"customize_lock_screen",inline:!0,hideBorder:!0,hideDescription:!0,tooltipText:(0,a.t)("spaces.form.edit.customize.customize_lock_screen.description"),label:(0,a.t)("spaces.form.edit.customize.customize_lock_screen.label")}),(0,m.jsxs)("div",{className:"customize-lock-screen",children:[(0,m.jsx)(u.l.Input,{name:"locked_page_heading",placeholder:(0,a.t)("spaces.form.edit.customize.customize_lock_screen.placeholders.title")}),(0,m.jsx)("div",{className:"trix-v2",children:(0,m.jsx)(p.O,{value:C,className:"locked-page-description",id:"locked_page_description",name:"locked_page_description",placeholder:(0,a.t)("spaces.form.edit.customize.customize_lock_screen.placeholders.description")},null===b||void 0===b||null===(r=b.locked_page_description)||void 0===r?void 0:r.trix_html)}),(0,m.jsx)(u.l.Input,{name:"locked_button_label",placeholder:(0,a.t)("spaces.form.edit.customize.customize_lock_screen.placeholders.button_text")}),(0,m.jsx)(u.l.Input,{name:"locked_button_url",placeholder:(0,a.t)("spaces.form.edit.customize.customize_lock_screen.placeholders.button_link")})]})]})]})}},73761:(e,t,r)=>{"use strict";r.d(t,{Hr:()=>d,fj:()=>p,$o:()=>m});var n=r(96486);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=function(e){return[].concat(s("all"==e.default_notification_setting?["default_notification_setting"]:[]),s("all"==e.default_in_app_notification_setting?["default_in_app_notification_setting"]:[]),s("all"==e.default_mobile_notification_setting?["default_mobile_notification_setting"]:[]))},u=function(e){return e.all_notifications_enabled?"all":e.mention_notifications_enabled?"mentions":e.notifications_off?"never":void 0},d=function(e){var t=e.visible_tabs;return Object.keys(t).filter((function(e){return t[e]}))},p=function(e){var t;return o(o({},(0,n.omit)(e,["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting","visible_tabs","hide_right_sidebar","is_post_disabled","prevent_members_from_adding_others","hide_post_settings","disable_member_post_covers","is_hidden","hide_sorting","moderator_ids"])),{},{notification_type:"chat"===e.post_type?u(e):l(e),show_right_sidebar:!e.hide_right_sidebar,allow_members_to_create_posts:!e.is_post_disabled,allow_members_to_add_others:!e.prevent_members_from_adding_others,allow_post_title:!e.hide_post_settings,allow_cover_images:!e.disable_member_post_covers,show_sorting:!e.hide_sorting,show_to_logged_out_visitors:!e.is_hidden,visible_tabs:d(e),locked_page_description:null===(t=e.locked_page_description)||void 0===t?void 0:t.trix_html})},f=function(e){var t={};return e.forEach((function(e){return t[e]=!0})),t},m=function(e){var t,r=e.show_right_sidebar,i=e.allow_members_to_create_posts,a=e.allow_members_to_add_others,s=e.allow_post_title,c=e.allow_cover_images,l=e.show_to_logged_out_visitors,u=e.meta_tag_attributes,d=e.notification_type,p=e.visible_tabs,m=e.show_sorting;return o(o(o({},(0,n.omit)(e,["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting","visible_tabs","show_right_sidebar","allow_members_to_create_posts","allow_members_to_add_others","allow_post_title","allow_cover_images","show_to_logged_out_visitors","customize_lock_screen","policies","is_space_owner","is_space_member","meta_tag_attributes","show_sorting","moderator_ids"])),{},{hide_right_sidebar:!r,is_post_disabled:!i,prevent_members_from_adding_others:!a,hide_post_settings:!s,disable_member_post_covers:!c,is_hidden:!l,hide_sorting:!m,visible_tabs:f(p)},function(e){return{default_notification_setting:e.includes("default_notification_setting")?"all":"never",default_in_app_notification_setting:e.includes("default_in_app_notification_setting")?"all":"never",default_mobile_notification_setting:e.includes("default_mobile_notification_setting")?"all":"never",default_mention_mobile_notification_setting:e.includes("default_mention_mobile_notification_setting")?"all":"never",default_mention_in_app_notification_setting:e.includes("default_mention_in_app_notification_setting")?"all":"never"}}("chat"===e.post_type?(t=d).includes("all")?["default_mobile_notification_setting","default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:t.includes("mentions")?["default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:[]:d)),{},{meta_tag_attributes:o({},(0,n.omit)(u,"opengraph_image_id"))})}},83434:(e,t,r)=>{"use strict";r.d(t,{c:()=>ae});var n=r(67294),i=r(86013),o=r.n(i),a=r(97012),s=r(21809),c=r(64687),l=r.n(c),u=r(24185),d=r(1320),p=r(30887),f=r(71362),m=r(61345),b=r(76034),h=r(55675),v=r(61926),y=r(12204),g=r(55560),_=r(84436),j=r(52991),x=r(63395),w=r(85893),O=function(){return(0,w.jsxs)("div",{className:"edit-space__container",children:[(0,w.jsx)(g.Z,{}),(0,w.jsx)(x.Z,{}),(0,w.jsx)(j.V,{}),(0,w.jsx)(_.Z,{})]})},S=r(87536),P=r(90846),C={DETAILS:"Details",CUSTOMIZE:"Customize",OPTIONS:"Options"};const k=function(e){var t=e.activeTab,r=e.setActiveTab,n=(0,S.Gc)(),i=n.reset,o=n.formState.dirtyFields,a=!!Object.keys(o).length;return(0,w.jsx)(P.m,{wrapperClassName:"px-6",controlled:!0,activeTab:t,onClick:function(e){a?confirm("Are you sure you want to navigate away from this page?\nAll your unsaved changes will be lost.")&&(i(),r(e)):r(e)},options:Object.values(C).map((function(e){return{label:e}})),variant:"underline"})};var N=r(23694),I=function(){return(0,w.jsx)(N.z,{title:(0,i.t)("spaces.form.edit.options.labels.label"),children:(0,w.jsx)("div",{className:"edit-space__container",children:(0,w.jsx)(v.l.Item,{hideBorder:!0,label:(0,i.t)("spaces.form.edit.options.labels.pinned_posts.label"),description:(0,i.t)("spaces.form.edit.options.labels.pinned_posts.description"),name:"pinned_posts_label",variant:"extra-bottom-margin",children:(0,w.jsx)(v.l.Input,{placeholder:(0,i.t)("spaces.form.pinned_posts")})})})})};const A=function(){return(0,w.jsx)(N.z,{title:o().t("spaces.form.edit.options.moderators.label"),children:(0,w.jsx)("div",{className:"edit-space__container",children:(0,w.jsx)(v.l.Item,{variant:"extra-bottom-margin",label:o().t("spaces.form.edit.options.moderators.space_moderators.label"),description:o().t("spaces.form.edit.options.moderators.space_moderators.description"),name:"moderator_ids",hideBorder:!0,children:(0,w.jsx)(v.l.CommunityMemberSelect,{placeholder:o().t("spaces.form.edit.options.moderators.space_moderators.placeholder"),variant:"tags",direction:"down",valueField:"id",excludeAdmins:!0})})})})};var E=r(98929);function D(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const L=function(e){var t=e.space,r=[];(0,m.V5)(t)&&(r=["allow_members_to_add_others","hide_from_featured_areas","allow_members_to_create_posts"]),(0,m.Ug)(t)&&(r=["chat_room_show_history"]),(0,m.H3)(t)&&(r=["allow_members_to_add_others","allow_members_to_create_posts","allow_post_title","allow_cover_images","hide_from_featured_areas"]);var n=(0,a.wh)().currentCommunity;(0,E.v)(n)||(0,m.Ug)(t)||(r=[].concat(D(r),["show_to_logged_out_visitors"]));var i=function(e){return"allow_members_to_create_posts"!==e?(0,m.V5)(t)?"allow_members_to_create_events":"allow_members_to_create_posts":e};return(0,w.jsx)(N.z,{title:o().t("spaces.form.edit.options.permissions.label"),children:(0,w.jsx)("div",{className:"edit-space__container",children:r.map((function(e){return(0,w.jsx)(v.l.Item,{inline:!0,hideBorder:!0,hideDescription:!0,label:o().t("spaces.form.edit.options.permissions.".concat(i(e))),name:e,children:(0,w.jsx)(v.l.ToggleSwitch,{variant:"small"})},e)}))})})};var M=r(31304),R=r.n(M),B=r(59393),U=r(36883),F=r(71299);const z=function(e){var t=e.setImageToDelete,r=[{name:"slug",label:o().t("spaces.form.edit.options.seo.slug"),description:o().t("spaces.form.edit.options.seo.slug_description",{host:window.location.host}),transformValue:function(e){return R()(e,{replacement:"-",remove:/[*+~.;()'"!:@#]/g,lower:!0})}},{name:"meta_tag_attributes[meta_title]",label:o().t("spaces.form.edit.options.seo.meta_title")},{name:"meta_tag_attributes[meta_description]",label:o().t("spaces.form.edit.options.seo.meta_description")},{name:"meta_tag_attributes[opengraph_title]",label:o().t("spaces.form.edit.options.seo.opengraph_title")},{name:"meta_tag_attributes[opengraph_description]",label:o().t("spaces.form.edit.options.seo.opengraph_description")}],n=(0,S.Gc)().getValues;return(0,w.jsx)(N.z,{title:o().t("spaces.form.edit.options.seo.label"),children:(0,w.jsxs)("div",{className:"edit-space__container",children:[r.map((function(e){var t=e.name,r=e.label,n=e.description,i=e.transformValue;return(0,w.jsx)(v.l.Item,{hideBorder:!0,hideDescription:!n,label:r,name:t,transformValue:i,description:n,variant:"extra-bottom-margin",children:(0,w.jsx)(v.l.Input,{})},t)})),(0,w.jsxs)("div",{className:"edit-space__image-upload",children:[(0,w.jsx)(v.l.Label,{hideBorder:!0,label:o().t("spaces.form.edit.options.seo.opengraph_image.label")}),(0,w.jsx)(F.D,{name:"meta_tag_attributes[opengraph_image]",alt:"",className:"relative",showAddCoverBtn:!0,aspectRatio:B.pI.OPEN_GRAPH,changeImageText:o().t("spaces.form.edit.options.seo.opengraph_image.change"),onDelete:function(){return t(n("meta_tag_attributes[opengraph_image_id]"))},customAddCoverBtn:(0,w.jsx)(U.Z,{title:o().t("spaces.form.edit.options.seo.opengraph_image.add"),description:o().t("spaces.form.edit.options.seo.opengraph_image.description")})})]})]})})};function V(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const G=function(e){var t=e.space,r={LATEST:{label:(0,i.t)("latest"),value:"latest"},OLDEST:{label:(0,i.t)("oldest"),value:"oldest"},POPULAR:{label:(0,i.t)("popular"),value:"popular"},LIKES:{label:(0,i.t)("likes"),value:"likes"},NEW_ACTIVITY:{label:(0,i.t)("new_activity"),value:"new_activity"},ALPHABETICAL:{label:(0,i.t)("alphabetical"),value:"alphabetical"}},n=[{name:"default_comment_sort",options:[r.LATEST,r.OLDEST]}];return(0,m.V5)(t)||(n=[].concat(V(n),[{name:"default_sort",options:Object.values(r)},{name:"default_member_sort",options:[r.LATEST,r.OLDEST]}])),(0,w.jsx)(N.z,{title:(0,i.t)("spaces.form.edit.options.sort.label"),children:(0,w.jsxs)("div",{className:"edit-space__container",children:[(0,w.jsx)(v.l.Item,{inline:!0,hideBorder:!0,hideDescription:!0,label:(0,i.t)("spaces.form.edit.options.sort.show_sorting"),name:"show_sorting",children:(0,w.jsx)(v.l.ToggleSwitch,{variant:"small"})}),n.map((function(e){var t=e.name,r=e.options;return(0,w.jsx)(v.l.Item,{hideBorder:!0,label:(0,i.t)("spaces.form.edit.options.sort.".concat(t,".label")),description:(0,i.t)("spaces.form.edit.options.sort.".concat(t,".description")),name:t,variant:"extra-bottom-margin",children:(0,w.jsx)(v.l.SelectNative,{options:r})},t)}))]})})};const H=function(e){var t=e.setImageToDelete,r=e.space;return(0,w.jsxs)("div",{className:"edit-space__container edit-space__container--no-padding",children:[!(0,m.Ug)(r)&&(0,w.jsx)(A,{}),(0,w.jsx)(L,{space:r}),(0,m.H3)(r)&&(0,w.jsx)(I,{}),(0,w.jsx)(z,{setImageToDelete:t}),!(0,m.Ug)(r)&&(0,w.jsx)(G,{space:r})]})};var W=r(73761);function Z(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q=function(e){var t=e.spaceId,r=e.spaceGroupId,i=e.refetch,c=e.refreshSidebarSpaces,g=(0,b.m)(),_=g.fetchSpace,j=g.space,x=(0,m.fO)(),S=J((0,n.useState)(!1),2),P=S[0],N=S[1],I=J((0,n.useState)(C.DETAILS),2),A=I[0],E=I[1],D=J((0,n.useState)(null),2),T=D[0],L=D[1],M=(0,a.wh)().currentCommunityMember;(0,n.useEffect)((function(){_(t)}),[]);var R=(0,b.m)().updateSpace,B=(0,s.p)(),U=(0,u.k6)(),F=function(){var e,r=(e=l().mark((function e(r,n){var a,s,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.reset,e.prev=1,N(!0),s=(0,W.$o)(r),!T){e.next=8;break}return e.next=7,d.UK.deleteOpenGraphImage(T);case 7:L(!1);case 8:return e.next=10,R(s,t);case 10:return u=e.sent,e.next=13,Promise.all([i(),c()]);case 13:a((0,W.fj)(u)),U.push(x(u,M)),B.success(o().t("spaces.form.edit.success")),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),B.error(o().t("spaces.form.edit.error"));case 21:return e.prev=21,N(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,18,21,24]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){Z(o,n,i,a,s,"next",e)}function s(e){Z(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),z=(0,n.useMemo)((function(){return j&&(0,W.fj)(j)}),[j]);return j&&z?(0,w.jsxs)(v.l,{onSubmit:F,defaultValues:z,className:"form__wrapper edit-space edit-space__form",children:[(0,w.jsx)(k,{activeTab:A,setActiveTab:E,space:j}),function(){switch(A){case C.DETAILS:return(0,w.jsx)(O,{currentSpaceGroup:r});case C.CUSTOMIZE:return(0,w.jsx)(y.l,{space:j});case C.OPTIONS:return(0,w.jsx)(H,{space:j,setImageToDelete:L})}}(),(0,w.jsx)(f.d.Footer,{sticky:!0,children:(0,w.jsx)(h.z,{disabled:P,type:"submit",full:!0,variant:"primary",children:P?o().t("spaces.form.edit.apply_changes_button_saving"):o().t("spaces.form.edit.apply_changes_button")})})]}):(0,w.jsx)("div",{className:"edit-space__loader",children:(0,w.jsx)(p.JO,{type:"loader"})})};function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ee=function(e){return(0,w.jsx)(s.V,{children:(0,w.jsx)(a.Br,{children:(0,w.jsx)(a.CM,{children:(0,w.jsx)(a.BD,{children:(0,w.jsx)(Q,X({},e))})})})})};function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ae=function(e){var t=ie((0,n.useState)(!1),2),r=t[0],i=t[1],a=ie((0,n.useState)(!1),2),s=a[0],c=a[1];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("button",{type:"submit",onClick:function(){return i(!0)},className:"edit-space-button",children:o().t("spaces.form.edit.edit_button_label")}),(0,w.jsx)(f.d,{noWrapperPadding:!0,fixedHeader:!0,maskClosable:!1,title:o().t("spaces.form.edit.edit_drawer_header"),open:r,onClose:function(){i(!1),s&&window.location.reload()},children:(0,w.jsx)(ee,re(re({},e),{},{open:r,setSubmitted:c}))})]})}},62730:(e,t,r)=>{"use strict";r.d(t,{g:()=>p});var n=r(67294),i=r(61926),o=r(68521),a=r(85893),s=["onSubmit","space","children"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=function(e){var t=e.onSubmit,r=e.space,c=e.children,u=d(e,s),p=(0,n.useMemo)((function(){return r&&(0,o.f)(r)}),[r]);return(0,a.jsx)(i.l,l(l({id:"edit-space-form",onSubmit:t,defaultValues:p,className:"flex h-full flex-col overflow-auto",formClassName:"flex flex-col h-full overflow-auto"},u),{},{children:c}))}},4093:(e,t,r)=>{"use strict";r.d(t,{r:()=>M});var n=r(86013),i=r(58533),o=r(86078),a=r(46479),s=r(16743),c=r(30887),l=r(85893),u=function(e){var t=e.onAdd;return(0,l.jsxs)("button",{type:"button",className:"hover:bg-secondary flex h-12 w-full flex-row items-center rounded-lg",onClick:t,children:[(0,l.jsx)("div",{className:"bg-secondary ml-4 mr-3 inline-flex h-8 w-8 items-center justify-center rounded-md text-gray-600",children:(0,l.jsx)(c.JO,{type:"16-account",size:16})}),(0,l.jsx)(s.Z.LabelSm,{weight:"semibold",children:(0,n.t)("spaces.form.edit.members.add_members")})]})},d=r(26953),p=r(1002),f=function(e){var t=e.member,r=e.cellVariant,i=e.onEdit,o=e.onRemove,s=e.tableVariant,u=t.id;return(0,l.jsx)(a.pj,{variant:r,className:"w-12 pr-4 text-right",children:(0,l.jsxs)(p.Lt,{direction:"bottom-end",button:(0,l.jsx)(p.Lt.MenuButton,{className:"invisible group-hover:visible",children:(0,l.jsx)(c.JO,{type:"20-menu-3-dot",size:20,className:"text-dark"})}),children:[(0,l.jsx)(p.Lt.Item,{children:(0,l.jsx)(p.Lt.ItemLink,{type:"button",onClick:function(){return i(t)},children:(0,n.t)("spaces.form.edit.members.edit_member")})}),(0,l.jsx)(p.Lt.Item,{onClick:function(){return o(u)},children:(0,l.jsx)(p.Lt.ItemLink,{type:"button",children:"space-group-members"==s?(0,n.t)("space_groups.form.edit.members.remove_from_space_group"):(0,n.t)("spaces.form.edit.members.remove_from_space")})})]})})},m=r(48895),b=function(e){var t,r=e.member,n=e.cellVariant;if(e.hideColumn)return null;var i=null!==r&&void 0!==r&&null!==(t=r.currentSpaceMember)&&void 0!==t&&t.created_at?(0,m.w)({dateTime:new Date(r.currentSpaceMember.created_at),format:"long_date"}):"";return(0,l.jsx)(a.pj,{variant:n,className:"",children:(0,l.jsx)(s.Z.LabelSm,{color:"text-selector-active",children:i})})},h=function(e){var t=e.member,r=e.cellVariant;if(e.hideColumn)return null;var n=null!==t&&void 0!==t&&t.lastActive?(0,m.w)({dateTime:new Date(t.lastActive),format:"long_date"}):"";return(0,l.jsx)(a.pj,{variant:r,className:"",children:(0,l.jsx)(s.Z.LabelSm,{color:"text-selector-active",children:n})})},v=r(61345),y=r(97012),g=r(31889),_=r(38870),j=r(39834),x=function(e){var t=e.member,r=t.name,i=t.email,o=t.avatarUrl,c=t.role,u=e.cellVariant,d=(0,y.L2)();return(0,l.jsx)(a.pj,{variant:u,className:"w-80",children:(0,l.jsxs)("div",{className:"inline-flex items-center",children:[(0,l.jsx)(_.s,{name:r,src:o,size:"10"}),(0,l.jsxs)("div",{className:"w-60 pl-3",children:[(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(s.Z.LabelSm,{truncate:!0,weight:"semibold",color:"text-selector-active",children:r}),(0,v.H)(null===d||void 0===d?void 0:d.data)&&(0,g.RN)(c)&&(0,l.jsx)(j.g,{label:(0,n.t)("spaces.form.edit.members.waitlist"),square:!0})]}),(0,l.jsx)("div",{className:"w-60 truncate",children:(0,l.jsx)(s.Z.LabelSm,{color:"text-default",children:i})})]})]})})},w=r(5100),O=function(e){var t=e.cellVariant,r=e.member,n=e.onRoleChange,i=r.role,o=r.id;return(0,l.jsx)(a.pj,{variant:t,className:"w-32",children:(0,l.jsx)(w.D,{id:o,role:i,onRoleChange:n})})},S=function(e){var t,r,n,i=e.member,o=e.cellVariant,u=e.hideColumn,d=null===i||void 0===i||null===(t=i.currentSpaceMember)||void 0===t?void 0:t.community_member_paywall_content_granted;if(u)return null;var p=(null===d||void 0===d||null===(r=d.paywall)||void 0===r?void 0:r.name)||(null===d||void 0===d||null===(n=d.paywall)||void 0===n?void 0:n.display_name),f=Boolean(p),m=(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsx)(c.JO,{type:"20-payments",className:"text-selector-active !w-4",size:20}),(0,l.jsx)("div",{className:"w-36 truncate",children:(0,l.jsx)(s.Z.LabelSm,{color:"text-selector-active",children:p})})]});return(0,l.jsx)(a.pj,{variant:o,className:"",children:f?m:"-"})},P=function(e){var t=e.member,r=e.onRemove,n=e.onEdit,i=e.onRoleChange,o=e.cellVariant,s=void 0===o?"no-padding":o,c=e.tableVariant,u=e.columns,p=(0,d.kK)();return(0,l.jsxs)(a.SC,{className:"border-primary hover:bg-secondary group h-14 border-b",children:[(0,l.jsx)(x,{member:t,cellVariant:s}),(0,l.jsx)(O,{member:t,cellVariant:s,onRoleChange:i}),(0,l.jsx)(b,{member:t,cellVariant:s,hideColumn:!u.joinedAt||p}),(0,l.jsx)(S,{member:t,cellVariant:s,hideColumn:!u.paywall}),(0,l.jsx)(h,{member:t,cellVariant:s,hideColumn:!u.lastActive||p}),(0,l.jsx)(f,{member:t,cellVariant:s,onEdit:n,onRemove:r,tableVariant:c})]})},C=function(e){var t=e.columnsToRender,r=e.shouldShowHeader;return void 0!==r&&r?(0,l.jsx)(a.FE,{children:Object.keys(t).map((function(e){var r,n=t[e];return n&&(0,l.jsx)(a.dc,{className:"!px-0 ".concat(null!==(r=n.className)&&void 0!==r?r:""),children:(0,l.jsx)(s.Z.LabelXs,{leading:"leading-tight",color:"text-default",weight:"semibold",children:n.title.toUpperCase()})},n.key)}))}):null},k=r(55675),N=function(e){var t=e.onAddMember;return(0,l.jsxs)("div",{className:"flex min-h-[600px] flex-col items-center pt-44",children:[(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsx)(s.Z.TitleSm,{weight:"semibold",children:(0,n.t)("spaces.form.edit.members.no_members")})}),(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsx)(s.Z.BodySm,{children:(0,n.t)("spaces.form.edit.members.there_are_no_members")})}),(0,l.jsx)(k.z,{type:"button",variant:"secondary",large:!0,onClick:t,children:(0,n.t)("spaces.form.edit.members.add_members")})]})},I=r(67294),A=["dataLength","members","onAdd","onEdit","onRemove","onRoleChange","searchTerm","shouldHideAddMemberButton","shouldShowHeader","cellVariant","variant"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var M=function(e){var t=e.dataLength,r=e.members,c=e.onAdd,p=e.onEdit,f=e.onRemove,m=e.onRoleChange,b=e.searchTerm,h=void 0===b?"":b,v=e.shouldHideAddMemberButton,y=void 0!==v&&v,g=e.shouldShowHeader,_=void 0!==g&&g,j=e.cellVariant,x=void 0===j?"no-border":j,w=e.variant,O=void 0===w?"space-members":w,S=L(e,A),k=function(e){var t=e.dataLength,r=e.searchTerm,i=e.members,o=e.shouldHideAddMemberButton,a=0===t,s=0===i.length&&!r,c=0===i.length&&r,l=!r&&!o,u=(0,d.kK)(),p=i[0];return{isSpaceMembersEmpty:a,isResultEmpty:s,isResultEmptyWithSearch:c,shouldShowAddMember:l,columnsToRender:(0,I.useMemo)((function(){var e=null===p||void 0===p?void 0:p.currentSpaceMember,t=(null===p||void 0===p?void 0:p.currentSpaceMember)&&!u,r=(null===p||void 0===p?void 0:p.lastActive)&&!u;return{member:{title:(0,n.t)("spaces.form.edit.members.columns.name"),key:"name",className:"w-80"},memberRole:{title:(0,n.t)("spaces.form.edit.members.columns.role"),key:"memberRole"},joinedAt:t?{title:(0,n.t)("spaces.form.edit.members.columns.joined"),key:"joinedAt"}:null,paywall:e?{title:(0,n.t)("spaces.form.edit.members.columns.paywall"),key:"paywall"}:null,lastActive:r?{title:(0,n.t)("spaces.form.edit.members.columns.last_active"),key:"lastActive"}:null,dropdown:{title:"",key:"dropdown",className:"w-12"}}}),[p,u])}}({dataLength:t,members:r,searchTerm:h,shouldHideAddMemberButton:y}),E=k.isSpaceMembersEmpty,T=k.isResultEmpty,M=k.isResultEmptyWithSearch,R=k.shouldShowAddMember,B=k.columnsToRender;return E||T?(0,l.jsx)(N,{onAddMember:c}):M?(0,l.jsx)(s.Z.BodyMd,{children:(0,n.t)("spaces.form.edit.members.no_members_found_for_term",{member_search_term:h})}):(0,l.jsxs)(i.Z,D(D({loader:(0,l.jsx)(o.m,{}),dataLength:t,style:{overflow:"initial"},scrollThreshold:.5},S),{},{children:[R&&(0,l.jsx)(u,{onAdd:c}),(0,l.jsxs)(a.iA,{variant:"no-border",className:"w-full min-w-[600px]",tableClassName:"w-full table-fixed",children:[(0,l.jsx)(C,{columnsToRender:B,shouldShowHeader:_}),(0,l.jsx)(a.RM,{variant:"no-divider",children:r.map((function(e){return(0,l.jsx)(P,{cellVariant:x,member:e,onEdit:p,onRemove:f,onRoleChange:m,columns:B,tableVariant:O},e.id)}))})]})]}))}},17366:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(86013),i=r(97012),o=r(98929),a=r(61345),s=r(61926),c=r(16743),l=r(85893);function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const p=function(e){var t=e.space,r=(0,i.wh)().currentCommunity,d=[];(0,a.V5)(t)&&(d=["allow_members_to_add_others","hide_from_featured_areas","allow_members_to_create_posts"]),(0,a.Ug)(t)&&(d=["chat_room_show_history"]),(0,a.Ds)(t)&&(d=["allow_members_to_add_others","allow_members_to_create_posts","hide_from_featured_areas"]),(0,a.H3)(t)&&(d=["allow_members_to_add_others","allow_members_to_create_posts","allow_post_title","allow_cover_images","hide_from_featured_areas"]),(0,a.qy)(t)&&(d=["allow_members_to_add_others"]),(0,o.v)(r)||(0,a.Ug)(t)||(0,a.EG)(t)||(d=[].concat(u(d),["show_to_logged_out_visitors"])),d=[].concat(u(d),["hide_members_count"]);var p=function(e){return"allow_members_to_create_posts"==e?(0,a.V5)(t)?"allow_members_to_create_events":"allow_members_to_create_posts":e};return(0,l.jsxs)("div",{className:"mt-5 flex-1 md:mt-8",children:[(0,l.jsx)(c.Z.TitleSm,{weight:"bold",children:(0,n.t)("spaces.form.edit.options.permissions.label")}),d.map((function(e){return(0,l.jsx)(s.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,n.t)("spaces.form.edit.options.permissions.".concat(p(e))),name:e,className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,l.jsx)(s.l.ToggleSwitch,{variant:"small"})},e)}))]})}},43377:(e,t,r)=>{"use strict";r.d(t,{P:()=>d});var n=r(86013),i=r(61345),o=r(61926),a=r(16743),s=r(85893);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(e){var t=e.space,r=function(e){var t={LATEST:{label:(0,n.t)("latest"),value:"latest"},OLDEST:{label:(0,n.t)("oldest"),value:"oldest"},POPULAR:{label:(0,n.t)("popular"),value:"popular"},LIKES:{label:(0,n.t)("likes"),value:"likes"},NEW_ACTIVITY:{label:(0,n.t)("new_activity"),value:"new_activity"},ALPHABETICAL:{label:(0,n.t)("alphabetical"),value:"alphabetical"}},r={name:"default_comment_sort",options:[t.LATEST,t.OLDEST]},o={name:"default_sort",options:Object.values(t)},a={name:"default_member_sort",options:[t.LATEST,t.OLDEST,t.ALPHABETICAL]};return(0,i.V5)(e)?[r]:(0,i.qy)(e)?[a]:(0,i.Ds)(e)?[r,l(l({},o),{},{options:o.options.filter((function(e){return"alphabetical"!==e.value}))})]:[r,o,a]}(t),c=!(0,i.qy)(t)&&!(0,i.V5)(t);return(0,s.jsxs)("div",{className:"mt-8 flex-1",children:[(0,s.jsx)(a.Z.TitleSm,{weight:"semibold",children:(0,n.t)("spaces.form.edit.options.sort.label")}),c&&(0,s.jsx)(o.l.Item,{hiddenField:!0,hideDescription:!0,label:(0,n.t)("spaces.form.edit.options.sort.show_sorting"),name:"show_sorting",className:"my-5 flex flex-row-reverse items-center justify-end py-0",labelClassName:"ml-4 mb-0",shouldToggleValueOnLabelClick:!0,children:(0,s.jsx)(o.l.ToggleSwitch,{variant:"small"})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4",children:r.map((function(e){var t=e.name,r=e.options;return(0,s.jsx)(o.l.Item,{hideBorder:!0,label:(0,n.t)("spaces.form.edit.options.sort.".concat(t,".label")),tooltipText:(0,n.t)("spaces.form.edit.options.sort.".concat(t,".description")),hideDescription:!0,name:t,variant:"extra-bottom-margin",children:(0,s.jsx)(o.l.SelectNative,{options:r})},t)}))})]})}},68521:(e,t,r)=>{"use strict";r.d(t,{f:()=>p,$:()=>b});var n=r(96486),i=r(61345);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){return[].concat(c("all"==e.default_notification_setting?["default_notification_setting"]:[]),c("all"==e.default_in_app_notification_setting?["default_in_app_notification_setting"]:[]),c("all"==e.default_mobile_notification_setting?["default_mobile_notification_setting"]:[]))},d=function(e){return e.all_notifications_enabled?"all":e.mention_notifications_enabled?"mentions":e.notifications_off?"never":void 0},p=function(){var e,t,r,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(a(a(a({},(0,n.omit)(s,["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting","visible_tabs","hide_right_sidebar","is_post_disabled","prevent_members_from_adding_others","hide_post_settings","disable_member_post_covers","is_hidden","hide_sorting","course_setting","require_topic_selection"])),{},{notification_type:"chat"===s.post_type?d(s):u(s),show_right_sidebar:!s.hide_right_sidebar,allow_members_to_create_posts:!s.is_post_disabled,allow_members_to_add_others:!s.prevent_members_from_adding_others,allow_post_title:!s.hide_post_settings,allow_cover_images:!s.disable_member_post_covers,show_sorting:!s.hide_sorting,show_to_logged_out_visitors:!s.is_hidden,visible_tabs:(t=s,r=t.visible_tabs,o=void 0===r?{}:r,Object.keys(o).filter((function(e){return o[e]}))),locked_page_description:null===(e=s.locked_page_description)||void 0===e?void 0:e.trix_html},function(e){return(0,i.EG)(e)?{course_setting_attributes:e.course_setting}:{}}(s)),f(s)),{},{topics:s.topics_order,require_topic_selection:s.require_topic_selection})},f=function(e){var t={};return e.logged_in_space_welcome_banner&&(t={logged_in_title:e.logged_in_space_welcome_banner.title,logged_in_description:a({},e.logged_in_space_welcome_banner.description||{}),logged_in_cover:e.logged_in_space_welcome_banner.cover,logged_in_banner_enabled:e.logged_in_space_welcome_banner.banner_enabled,allow_close:e.logged_in_space_welcome_banner.allow_close,logged_in_media_is_video:e.logged_in_space_welcome_banner.is_video}),e.logged_out_space_welcome_banner&&(t=a(a({},t),{},{logged_out_title:e.logged_out_space_welcome_banner.title,logged_out_description:a({},e.logged_out_space_welcome_banner.description||{}),logged_out_cover:e.logged_out_space_welcome_banner.cover,logged_out_banner_enabled:e.logged_out_space_welcome_banner.banner_enabled,logged_out_media_is_video:e.logged_out_space_welcome_banner.is_video})),t},m=function(e){var t={};return e.forEach((function(e){return t[e]=!0})),t},b=function(e){var t,r=e.show_right_sidebar,i=e.allow_members_to_create_posts,o=e.allow_members_to_add_others,s=e.allow_post_title,c=e.allow_cover_images,l=e.show_to_logged_out_visitors,u=e.meta_tag_attributes,d=e.notification_type,p=e.visible_tabs,f=e.show_sorting;return a(a(a({},(0,n.omit)(e,["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting","visible_tabs","show_right_sidebar","allow_members_to_create_posts","allow_members_to_add_others","allow_post_title","allow_cover_images","show_to_logged_out_visitors","customize_lock_screen","policies","is_space_owner","is_space_member","meta_tag_attributes","show_sorting"])),{},{hide_right_sidebar:!r,is_post_disabled:!i,prevent_members_from_adding_others:!o,hide_post_settings:!s,disable_member_post_covers:!c,is_hidden:!l,hide_sorting:!f,visible_tabs:m(p)},function(e){return{default_notification_setting:e.includes("default_notification_setting")?"all":"never",default_in_app_notification_setting:e.includes("default_in_app_notification_setting")?"all":"never",default_mobile_notification_setting:e.includes("default_mobile_notification_setting")?"all":"never",default_mention_mobile_notification_setting:e.includes("default_mention_mobile_notification_setting")?"all":"never",default_mention_in_app_notification_setting:e.includes("default_mention_in_app_notification_setting")?"all":"never"}}("chat"===e.post_type?(t=d).includes("all")?["default_mobile_notification_setting","default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:t.includes("mentions")?["default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:[]:d)),{},{meta_tag_attributes:a({},(0,n.omit)(u,"opengraph_image_id"))})}},36287:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(85893),i=function(){return(0,n.jsx)("div",{className:"border-primary my-1 border-t"})}},82102:(e,t,r)=>{"use strict";r.d(t,{X:()=>L});var n=r(86013),i=r(96486),o=r(72675),a=r(26953),s=r(53448),c=r(97012),l=r(31889),u=r(61345),d=r(30887),p=r(16743),f=r(44626),m=r(15647),b=r(38460),h=r(84495),v=r(5295),y=r(85893),g=function(e){var t=e.space,r=(0,h.uk)(t.chat_room_uuid),a=r.chatParticipants,c=r.isLoading,l=r.refetchChatParticipants,u=r.hasNextPage,d=r.fetchNextPage,f=r.totalCount,m=(0,o.dd)(),g=t.chat_room_description;return(0,y.jsxs)(s.u_,{isOpen:m.visible,onClose:m.visible?m.hide:i.noop,children:[(0,y.jsx)(s.u_.Overlay,{}),(0,y.jsxs)(s.u_.Content,{children:[(0,y.jsxs)(s.u_.Header,{children:[(0,y.jsxs)(s.u_.Title,{size:"sm",children:[(0,n.t)("chat_space.details")," (",!c&&f,")"]}),(0,y.jsx)(s.u_.HeaderActions,{children:(0,y.jsx)(s.u_.CloseButton,{onClick:m.visible?m.hide:i.noop})})]}),(0,y.jsxs)(s.u_.Body,{className:"flex flex-col gap-4 !px-5 !py-2",children:[g&&(0,y.jsx)(p.Z.BodySm,{children:g}),c?(0,y.jsx)(v.a,{center:!0}):(0,y.jsx)(b.V,{spaceMembers:a,hasMoreSpaceMembers:u,space:t,refetchSpaceMembers:l,fetchNextPage:d})]})]})]})},_=o.gk.create((function(e){var t=e.space;return(0,y.jsx)(g,{space:t})})),j=r(36287),x=function(e){var t=e.space,r=e.setIsAddMemberOpen,i=e.isAdmin,a=(0,u.Y_)(t),s=(0,u.J$)(t),c=(0,o.dd)(_);return(0,y.jsxs)(y.Fragment,{children:[s&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:function(){return c.show({space:t})},children:[(0,y.jsxs)("div",{className:"flex items-center gap-4",children:[(0,y.jsx)(d.JO,{type:"16-info",size:16,className:"text-default"}),(0,y.jsx)(p.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,n.t)("chat_space.details")})]}),(0,y.jsx)(d.JO,{type:"16-chevron-right",size:16,className:"text-default"})]}),(0,y.jsx)(j.Z,{})]}),a&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.j,{space:t,onInviteMember:function(){return r(!0)}}),(0,y.jsx)(j.Z,{})]}),(0,y.jsx)(f.B,{space:t,isAdmin:i})]})},w=function(e){var t=e.space,r=e.isAdmin,n=e.setIsAddMemberOpen,i=(0,u.Y_)(t);return(0,y.jsxs)(y.Fragment,{children:[i&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.j,{space:t,onInviteMember:function(){return n(!0)}}),(0,y.jsx)(j.Z,{})]}),(0,y.jsx)(f.B,{space:t,isAdmin:r})]})},O=r(84711),S=r(72406),P=function(e){var t=e.space,r=e.setIsAddMemberOpen,n=e.onClickAddCoverImage,i=e.isAdmin,o=(0,u.Y_)(t),a=(0,u.J$)(t);return(0,y.jsxs)(y.Fragment,{children:[a&&(0,y.jsx)("div",{className:"md:hidden",children:(0,y.jsx)(O.v,{space:t})}),(0,y.jsx)(j.Z,{}),o&&(0,y.jsx)(m.j,{space:t,onInviteMember:function(){return r(!0)},onAddCoverImage:n}),!i&&a&&(0,u.P8)(t)&&(0,y.jsx)(S.B,{space:t,onInviteMember:function(){return r(!0)}}),(0,y.jsx)(j.Z,{}),(0,y.jsx)(f.B,{space:t,isAdmin:i})]})},C=r(11801),k=function(e){var t=e.space,r=e.isAdmin,n=e.setIsAddMemberOpen,i=(0,u.J$)(t);return(0,y.jsxs)(y.Fragment,{children:[i&&(0,u.JW)(t)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(C.t,{space:t}),(0,y.jsx)(j.Z,{})]}),(0,u.Y_)(t)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.j,{space:t,onInviteMember:function(){return n(!0)}}),(0,y.jsx)(j.Z,{})]}),!r&&i&&(0,u.P8)(t)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(S.B,{space:t,onInviteMember:function(){return n(!0)}}),(0,y.jsx)(j.Z,{})]}),(0,y.jsx)(f.B,{space:t,isAdmin:r})]})},N=r(96363),I=r(71232),A=function(e){var t=e.space,r=e.setIsAddMemberOpen,n=e.onClickAddCoverImage,i=e.isAdmin,o=(0,u.JW)(t),a=(0,u.Y_)(t),s=(0,u.J$)(t);return(0,y.jsxs)("div",{className:"flex flex-col",children:[(0,y.jsx)(N.m,{space:t}),(0,y.jsx)(j.Z,{}),o&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(I.J,{space:t}),(0,y.jsx)(j.Z,{})]}),a&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.j,{space:t,onInviteMember:function(){return r(!0)},onAddCoverImage:n}),(0,y.jsx)(j.Z,{})]}),!i&&s&&(0,u.P8)(t)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(S.B,{space:t,onInviteMember:function(){return r(!0)}}),(0,y.jsx)(j.Z,{})]}),(0,y.jsx)(f.B,{space:t,isAdmin:i})]})},E=function(e){var t=e.space,r=e.onClickAddCoverImage,n=e.setIsAddMemberOpen,i=(0,c.wh)().currentCommunityMember,o=(0,l.vb)(i);return t?(0,u.H3)(t)||(0,u.Ds)(t)?(0,y.jsx)(A,{space:t,setIsAddMemberOpen:n,onClickAddCoverImage:r,isAdmin:o}):(0,u.Ug)(t)?(0,y.jsx)(x,{space:t,setIsAddMemberOpen:n,isAdmin:o}):(0,u.V5)(t)?(0,y.jsx)(P,{space:t,setIsAddMemberOpen:n,onClickAddCoverImage:r,isAdmin:o}):(0,u.qy)(t)?(0,y.jsx)(k,{space:t,setIsAddMemberOpen:n,isAdmin:o}):(0,u.EG)(t)?(0,y.jsx)(w,{space:t,isAdmin:o,setIsAddMemberOpen:n}):null:null},D=function(e){var t=e.space,r=e.setIsAddMemberOpen,c=e.onClickAddCoverImage,l=(0,o.dd)();return!(0,a.kK)()&&l.visible&&l.hide(),(0,y.jsxs)(s.u_,{isOpen:l.visible,onClose:l.visible?l.hide:i.noop,children:[(0,y.jsx)(s.u_.Overlay,{}),(0,y.jsxs)(s.u_.Content,{size:"lg",children:[(0,y.jsxs)(s.u_.Header,{className:"!px-5 !py-4",children:[(0,y.jsx)(s.u_.Title,{size:"sm",children:(0,n.t)("space_settings")}),(0,y.jsx)(s.u_.HeaderActions,{children:(0,y.jsx)(s.u_.CloseButton,{onClick:l.visible?l.hide:i.noop})})]}),(0,y.jsx)(s.u_.Body,{className:"!px-0 !py-1",children:(0,y.jsx)(E,{space:t,setIsAddMemberOpen:r,onClickAddCoverImage:c})})]})]})},T=o.gk.create((function(e){var t=e.space,r=e.setIsAddMemberOpen,n=e.onClickAddCoverImage;return(0,y.jsx)(D,{space:t,setIsAddMemberOpen:r,onClickAddCoverImage:n})})),L=function(){return(0,o.dd)(T)}},49276:(e,t,r)=>{"use strict";r.d(t,{$:()=>y});var n=r(94184),i=r.n(n),o=r(86013),a=r(24185),s=r(31889),c=r(48794),l=r(25022),u=r(97012),d=r(61642),p=r(28175),f=r(87958),m=r(1002),b=r(128),h=r(25067),v=r(85893),y=function(e){var t=e.space,r=(0,a.k6)(),n=(0,u.wh)().currentCommunityMember,y=(0,c.g)({spaces:t.slug}),g=y.members,_=y.isLoading,j=y.canSeeMembersDirectory,x=y.canSeeMembersAvatarRow,w=(0,l.u)().show,O=(0,u.T4)({spaceId:t.id}),S=O.data,P=O.isLoading,C=(0,p.I)().isV3Enabled,k=P||Boolean(null===S||void 0===S?void 0:S.hide_members_count)||!x,N=(0,d.I)({spaceId:t.id,enabled:!k}),I=N.count,A=N.isLoading;return k?null:A||_?(0,v.jsx)(h.gi,{variant:"members-avatar-row"}):(0,v.jsx)(f.T,{content:(0,o.t)("see_all_members"),disabled:!j,children:(0,v.jsxs)("button",{type:"button",disabled:!j,onClick:function(){if((0,s.vb)(n))return w({spaceId:t.id,initialSection:(0,o.t)("customize_space.members")});j&&r.push("/members?filter[spaces]=".concat(t.slug))},className:i()({"focus-visible:outline-secondary rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2":C}),children:[(0,v.jsx)("div",{className:"md:hidden",children:(0,v.jsx)(m.Lt.Header,{children:(0,o.t)("members")})}),(0,v.jsx)(b.n,{members:g,amountToShow:3,totalCount:I})]})})}},84711:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var n=r(49276),i=r(85893),o=function(e){var t=e.space;return(0,i.jsx)(n.$,{space:t})}},96363:(e,t,r)=>{"use strict";r.d(t,{m:()=>o});var n=r(49276),i=r(85893),o=function(e){var t=e.space;return(0,i.jsx)(n.$,{space:t})}},78015:(e,t,r)=>{"use strict";r.d(t,{X:()=>w,p:()=>O});var n=r(40160),i=r(24185),o=r(67732),a=r(1002),s=r(73367),c=r(82102),l=r(67294),u=r(86013),d=r(91966),p=r.n(d),f=r(49326),m=r(72810),b=["sort"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var _=["latest","new_activity","oldest","popular","likes","alphabetical"],j=function(e){var t=e.defaultSort,r=void 0===t?"latest":t,n=e.include,i=void 0===n?_:n,o=e.exclude,a=void 0===o?[]:o,s=_.includes(r)?r:i[0],c=(0,m.t)(),d=c.sort,h=void 0===d?s:d,y=g(c,b);return{sort:h,sortingOptions:(0,l.useMemo)((function(){var e=p()(i,a);return r=r||e[0],e.map((function(e){return{value:e,label:(0,u.t)("sorting_options.".concat(e)),pathTo:"?".concat((0,f.UK)(v(v({},y),{},{sort:e})))}}))}),[r,i,a,y,h])}},x=r(85893),w=function(e){var t=e.defaultSort,r=e.include,n=e.exclude,i=e.shouldOpenToLeft,o=void 0!==i&&i,s=e.onChange,c=e.button,l=j({defaultSort:t,exclude:n,include:r}),u=l.sort,d=l.sortingOptions;return(0,x.jsx)(a.Lt,{direction:o?"bottom-start":"bottom-end",options:d,activeOptionValue:u,onChange:s,button:c})},O=function(e){var t=e.defaultSort,r=e.include,a=e.exclude,l=j({defaultSort:t,include:r,exclude:a}).sortingOptions,u=(0,o.v)().isMobileWebNewSpaceCustomizationUIEnabled,d=(0,c.X)(),p=(0,i.TH)(),f=new URLSearchParams(p.search).get("sort")||t;return u?(0,x.jsx)("div",{children:l.map((function(e){var t=e.value,r=e.label,i=e.pathTo;return(0,x.jsx)(n.OL,{className:"text-light block px-5 py-2 text-sm font-medium",to:i,onClick:d.hide,isActive:function(){return f===t},activeClassName:"!text-dark",children:r},t)}))}):(0,x.jsx)(x.Fragment,{children:l.map((function(e){var t=e.value,r=e.label,n=e.pathTo;return(0,x.jsx)(s.F,{forceClose:!0,to:n,children:r},t)}))})}},49942:(e,t,r)=>{"use strict";r.d(t,{y:()=>s});var n=r(94184),i=r.n(n),o=r(16743),a=r(85893),s=function(e){var t=e.children,r=e.truncate,n=void 0!==r&&r,s=e.isMembersSpace,c=void 0!==s&&s;return(0,a.jsx)("div",{className:"text-dark",children:(0,a.jsx)(o.Z.TitleSm,{as:"h1","data-testid":"space-title-name",weight:"semibold",children:(0,a.jsx)("span",{className:i()({"block truncate md:max-w-[260px] lg:max-w-[200px] xl:max-w-[300px] 2xl:max-w-none":n,"max-w-[12ch]":c&&n,"max-w-[200px] sm:max-w-[400px]":!c&&n}),children:t})})})}},96391:(e,t,r)=>{"use strict";r.d(t,{M:()=>y});var n=r(94184),i=r.n(n),o=r(74238),a=r(97012),s=r(31889),c=r(28175),l=r(15218),u=r(30887),d=r(2194),p=r(85893),f=function(e){var t=e.space,r=e.className,n=(0,o.TC)().currentAppearance,f=(0,a.wh)().currentCommunityMember,m=(0,s.vb)(f),b=(0,d.$)({shouldShowLockIconForNonMembers:t.show_lock_icon_for_non_members&&!t.is_space_member,isPrivate:t.is_private,isAdmin:m}),h=(0,c.I)().isV3Enabled;return(0,p.jsx)(l.S,{className:i()("title-emoji",r,{"!w-6":!h,"w-5":h}),emoji:t.emoji,appearance:n,customEmojiUrl:t.custom_emoji_url,customEmojiDarkUrl:t.custom_emoji_dark_url,shouldUseLockIcon:b,lockIcon:(0,p.jsx)(u.JO,{type:"lock",className:"text-dark"}),dataTestId:"title-emoji"})},m=r(16743),b=r(61642),h=r(61345),v=r(49942),y=function(e){var t=e.space,r=e.shouldShowMembersCount,n=void 0!==r&&r,o=(0,b.I)({spaceId:t.id,enabled:n}),a=o.count,s=o.isLoading,l=(0,c.I)().isV3Enabled;return(0,p.jsxs)("div",{className:i()("flex items-center",{"gap-4":!l,"gap-2":l}),children:[(0,p.jsx)(f,{className:i()({"text-2xl":!l,"justify-center text-sm":l}),space:t}),(0,p.jsxs)("div",{className:"flex",children:[(0,p.jsx)(v.y,{truncate:!0,isMembersSpace:(0,h.qy)(t),children:t.name}),n&&(0,p.jsx)("div",{className:"ml-1",children:(0,p.jsx)(m.Z.BodyLg,{weight:"semibold",tracking:"tracking-normal",children:!s&&"(".concat(a,")")})})]})]})}},72406:(e,t,r)=>{"use strict";r.d(t,{B:()=>m});var n=r(86013),i=r(96486),o=r(97012),a=r(61345),s=r(28175),c=r(67732),l=r(30887),u=r(1002),d=r(16743),p=r(81562),f=r(85893),m=function(e){var t=e.space,r=e.onInviteMember,m=(0,o.wh)().isViewOnlyMasquerading,b=(0,c.v)().isMobileWebNewSpaceCustomizationUIEnabled,h=(0,s.I)().iconSize,v=(0,a.H)(t)?(0,n.t)("customize_space.add_waitlist"):(0,n.t)("space_header.invite_member"),y=(0,p.o)().inviteMemberIcon;return b?(0,f.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:r,children:[(0,f.jsxs)("div",{className:"flex items-center gap-4",children:[(0,f.jsx)(l.JO,{type:y,size:h,className:"text-default"}),(0,f.jsx)(d.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,n.t)("space_header.invite_member")})]}),(0,f.jsx)(l.JO,{type:"16-chevron-right",size:16,className:"text-default"})]}):(0,f.jsx)(u.Lt.IconWithBadgeList,{options:[{value:(0,n.t)("space_header.invite_member"),label:v,onClick:m?i.noop:r,icon:y,iconSize:h}]})}},44626:(e,t,r)=>{"use strict";r.d(t,{B:()=>_});var n=r(86013),i=r(93556),o=r(46580),a=r(61345),s=r(28175),c=r(67732),l=r(30887),u=r(1002),d=r(16743),p=r(40129),f=r(81562),m=r(85893),b=function(){var e=(0,i.Y)(),t=(0,p.v)().space,r=(0,s.I)().isV3Enabled,o=(0,f.o)().deleteSpaceIcon;return(0,m.jsx)(u.Lt.ItemWithLink,{onClick:function(){return e.show({space:t,onSuccess:function(){window.location.href="/"}})},children:(0,m.jsx)(u.Lt.IconContainer,{children:r?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"h-5 w-5",children:(0,m.jsx)(l.JO,{type:o,className:"text-v2-danger",size:20})}),(0,m.jsx)(d.Z.LabelXsPlus,{weight:"medium",color:"text-v2-danger",children:(0,n.t)("space_header.delete_space")})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.JO,{type:o,className:"text-v2-danger",size:16}),(0,m.jsx)(d.Z.LabelSm,{color:"text-v2-danger",children:(0,n.t)("space_header.delete_space")})]})})},(0,n.t)("space_header.delete_space"))},h=r(72406),v=r(96486),y=r(97012),g=function(){var e=(0,o.l)(),t=(0,y.wh)().isViewOnlyMasquerading,r=(0,s.I)().isV3Enabled,i=(0,f.o)().leaveSpaceIcon;return(0,m.jsx)(u.Lt.ItemWithLink,{onClick:t?v.noop:e.show,children:(0,m.jsx)(u.Lt.IconContainer,{children:r?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"h-5 w-5",children:(0,m.jsx)(l.JO,{type:i,className:"text-v2-danger",size:20})}),(0,m.jsx)(d.Z.LabelXsPlus,{weight:"medium",color:"text-v2-danger",children:(0,n.t)("space_header.leave_space")})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.JO,{type:i,className:"text-v2-danger",size:16}),(0,m.jsx)(d.Z.LabelSm,{color:"text-v2-danger",children:(0,n.t)("space_header.leave_space")})]})})},(0,n.t)("space_header.leave_space"))},_=function(e){var t=e.space,r=e.isAdmin,p=e.onInviteMember,v=(0,c.v)().isMobileWebNewSpaceCustomizationUIEnabled,y=(0,a.J$)(t),_=(0,a.D)(t),j=(0,i.Y)(),x=(0,o.l)(),w=(0,s.I)(),O=w.isV3Enabled,S=w.iconSize,P=(0,f.o)(),C=P.leaveSpaceIcon,k=P.deleteSpaceIcon,N=O&&(0,a.P8)(t)&&!!p,I=y&&!_;return v?(0,m.jsxs)(m.Fragment,{children:[y&&!_&&(0,m.jsxs)("button",{type:"submit",className:"flex w-full items-center gap-4 px-5 py-2",onClick:function(){return x.show()},children:[(0,m.jsx)(l.JO,{type:C,className:"text-v2-danger",size:S}),(0,m.jsx)(d.Z.LabelSm,{color:"text-v2-danger",children:(0,n.t)("space_header.leave_space")})]}),r&&(0,m.jsxs)("button",{type:"submit",className:"flex w-full items-center gap-4 px-5 py-2",onClick:function(){return j.show({space:t,onSuccess:function(){window.location.href="/"}})},children:[(0,m.jsx)(l.JO,{type:k,className:"text-v2-danger",size:S}),(0,m.jsx)(d.Z.LabelSm,{color:"text-v2-danger",children:(0,n.t)("space_header.delete_space")})]})]}):(0,m.jsxs)(m.Fragment,{children:[!O&&r&&(0,m.jsx)(u.Lt.Separator,{}),O&&(r||N||I)&&(0,m.jsx)(u.Lt.Separator,{}),N&&(0,m.jsx)(h.B,{space:t,onInviteMember:p}),I&&(0,m.jsx)(g,{}),r&&(0,m.jsx)(b,{})]})}},15647:(e,t,r)=>{"use strict";r.d(t,{j:()=>k});var n=r(86013),i=r(25022),o=r(97012),a=r(28175),s=r(67732),c=r(30887),l=r(1002),u=r(16743),d=r(36287),p=r(23560),f=r.n(p),m=r(61642),b=r(6038),h=r(61345),v=r(26953),y=r(81562),g=(0,n.t)("customize_space.customize"),_=(0,n.t)("customize_space.options"),j=(0,n.t)("customize_space.paywalls.title"),x=(0,n.t)("customize_space.members"),w=(0,n.t)("customize_space.lessons"),O=(0,n.t)("customize_space.lock_screen"),S=(0,n.t)("customize_space.set_welcome_banner"),P=function(e){var t=e.space,r=e.onInviteMemberClick,i=e.onAddCoverClick,s=e.openCustomizeModal,c=((0,o.wh)().currentCommunitySettings||{}).space_description_enabled,l=(0,h.EG)(t),u=f()(i),d=f()(r),p=l,P=(0,h.V5)(t),C=(0,v.a7)(),k=function(e){var t=e.space,r=null!==t&&void 0!==t?t:{},i=r.cover_image_url,o=r.cover_image_visible;return i||o?(0,n.t)("update_cover"):(0,n.t)("add_cover")}({space:t}),N=(0,a.I)(),I=N.isV3Enabled,A=N.iconSize,E=(0,m.I)({spaceId:t.id}),D=E.count,T=E.isLoading,L=(0,y.o)(),M=L.coverImageIcon,R=L.customizeLessonsIcon,B=L.welcomeBannerIcon,U=L.customizeIcon,F=L.creditCardIcon,z=L.customizeLockScreenIcon,V=L.customizeMembersIcon,q=L.inviteMemberIcon,G=L.customizeOptionsIcon,H=[];if(u&&H.push({value:(0,n.t)("add_cover_image"),label:k,onClick:i,icon:M,iconSize:A}),p&&H.push({value:w,label:w,onClick:function(){return s({initialSection:w})},icon:R,iconSize:A}),c&&P&&H.push({value:g,label:S,onClick:function(){return s({initialSection:g,scrollToId:"space-welcome-banner"})},icon:B,iconSize:A}),H.push({value:g,label:g,onClick:function(){return s({initialSection:g})},icon:U,iconSize:A},{value:j,label:j,onClick:function(){return s({initialSection:j})},icon:F,iconSize:A},{value:O,label:O,onClick:function(){return s({initialSection:O})},icon:z,iconSize:A}),I||H.push({value:x,label:x,badge:""+(T?"":(0,b.H)(D)),onClick:function(){return s({initialSection:x})},icon:V,iconSize:A}),d&&(!I||!C)){var W=(0,h.H)(t)?(0,n.t)("customize_space.add_waitlist"):(0,n.t)("space_header.invite_member");H.push({value:(0,n.t)("space_header.invite_member"),label:W,onClick:r,icon:q,iconSize:A})}return H.push({value:_,label:_,onClick:function(){return s({initialSection:_})},icon:G,iconSize:A}),H},C=r(85893),k=function(e){var t=e.space,r=e.onInviteMember,p=e.onAddCoverImage,f=t.id,m=(0,i.u)().show,b=(0,o.L2)().refetch,h=(0,s.v)().isMobileWebNewSpaceCustomizationUIEnabled,v=(0,a.I)(),y=v.isV3Enabled,g=v.iconSize,_=function(e){var t=e.initialSection,r=e.scrollToId;m({spaceId:f,refetch:function(){b()},initialSection:t,scrollToId:r})},j=[{value:(0,n.t)("customize_space.access"),label:(0,n.t)("customize_space.access"),icon:y?"20-locker-open-v3":"16-lock-unlocked",iconSize:g,badge:y&&"open"===t.visibility?(0,n.t)("spaces.form.create.visibility_types.public"):(0,n.t)("spaces.form.create.visibility_types.".concat(t.visibility)),badgeVariant:"plain",onClick:function(){return _({initialSection:(0,n.t)("customize_space.customize")})}}],x=P({space:t,onInviteMemberClick:r,onAddCoverClick:p,openCustomizeModal:_});return h?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:function(){return _({initialSection:(0,n.t)("customize_space.customize")})},children:[(0,C.jsxs)("div",{className:"flex items-center gap-4",children:[(0,C.jsx)(c.JO,{type:"16-lock-unlocked",size:16,className:"text-default"}),(0,C.jsx)(u.Z.LabelSm,{color:"text-light",weight:"medium",children:(0,n.t)("customize_space.access")})]}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)(u.Z.LabelSm,{color:"text-dark",weight:"semibold",children:(0,n.t)("spaces.form.create.visibility_types.".concat(t.visibility))}),(0,C.jsx)(c.JO,{type:"16-chevron-right",size:16,className:"text-default"})]})]}),(0,C.jsx)(d.Z,{}),x.map((function(e){return(0,C.jsxs)("button",{type:"submit",className:"flex w-full items-center justify-between px-5 py-2.5",onClick:e.onClick,children:[(0,C.jsxs)("div",{className:"flex items-center gap-4",children:[e.icon&&(0,C.jsx)(c.JO,{type:e.icon,size:g,className:"text-default"}),(0,C.jsx)(u.Z.LabelSm,{color:"text-light",weight:"medium",children:e.label})]}),(0,C.jsx)(c.JO,{type:"16-chevron-right",size:16,className:"text-default"})]},e.value)}))]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(l.Lt.IconWithBadgeList,{options:j}),(0,C.jsx)(l.Lt.Separator,{}),(0,C.jsx)(l.Lt.Header,{children:(0,n.t)("space")}),(0,C.jsx)(l.Lt.IconWithBadgeList,{options:x})]})}},11801:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});var n=r(86013),i=r(78015),o=r(1002),a=r(85893),s=function(e){var t=e.space;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Lt.Header,{children:(0,n.t)("space_header.sort_order")}),(0,a.jsx)(i.p,{defaultSort:t.default_member_sort||"latest",showDescription:!1,include:["latest","oldest","alphabetical"]})]})}},71232:(e,t,r)=>{"use strict";r.d(t,{J:()=>s});var n=r(86013),i=r(78015),o=r(1002),a=r(85893),s=function(e){var t=e.space;return(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Lt.Header,{children:(0,n.t)("space_header.sort_order")}),(0,a.jsx)(i.p,{defaultSort:(null===t||void 0===t?void 0:t.default_sort)||"latest",showDescription:!1})]})}},81562:(e,t,r)=>{"use strict";r.d(t,{o:()=>s});var n=r(67294),i=r(28175),o={coverImageIcon:"16-file-image",customizeLessonsIcon:"16-document-text",welcomeBannerIcon:"16-welcome-banner",customizeIcon:"16-customize",creditCardIcon:"credit-card",customizeLockScreenIcon:"16-lock",customizeMembersIcon:"members-v2",inviteMemberIcon:"16-invite-member",customizeOptionsIcon:"16-info",leaveSpaceIcon:"16-exit",deleteSpaceIcon:"16-trash-bin"},a={coverImageIcon:"20-image-v3",customizeLessonsIcon:"20-doc-v3",welcomeBannerIcon:"16-welcome-banner",customizeIcon:"20-customize-v3",creditCardIcon:"20-card-v3",customizeLockScreenIcon:"20-locker-closed-v3",inviteMemberIcon:"20-user-plus-v3",customizeOptionsIcon:"20-info-v3",leaveSpaceIcon:"20-sign-out-v3",deleteSpaceIcon:"20-sign-out-v3"},s=function(){var e=(0,i.I)().isV3Enabled;return(0,n.useMemo)((function(){return e?a:o}),[e])}},61892:(e,t,r)=>{"use strict";r.d(t,{k:()=>g});var n=r(64687),i=r.n(n),o=r(86013),a=r(88767),s=r(34128),c=r(49326),l=r(40754),u=r(93826),d=r(97012),p=r(61345),f=r(37933),m=r(15591),b=r(21809),h=r(85893);function v(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var y="spaces.leave",g=function(e){var t=e.show,r=e.onClose,n=e.space,g=(0,f.C)().goToCommunityRootPath,_=(0,d.wh)().currentCommunityMember,j=(0,d.e2)().actions.refresh,x=(0,d.nT)().actions.refresh,w=(0,d.T4)({spaceId:null===n||void 0===n?void 0:n.id}),O=w.space,S=void 0===O?{}:O,P=w.refetch,C=(0,b.p)(),k=C.error,N=C.success,I=(0,l.m)(S.chat_room_uuid).refetchChatRoom,A=function(){var e,t=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(),x(),(0,p.$n)(n)||P(),(0,p.Ug)(n)&&I();case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){v(o,n,i,a,s,"next",e)}function s(e){v(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),E=(0,a.useMutation)((function(){return(0,s.pC)(c.av.spaceMembers.leaveSpace({spaceId:null===n||void 0===n?void 0:n.id,memberId:null===_||void 0===_?void 0:_.id}))}),{onSuccess:function(){N((0,o.t)("leave_space_success",{name:n.name}),{duration:"short",shouldUseProgress:!1}),A(),r(),(0,p.$n)(n)&&g()},onError:function(){k((0,o.t)("leave_space_error"))}}),D=E.mutate,T=E.isLoading;return(0,h.jsxs)(m.V,{title:(0,o.t)([y,"title"]),confirmUserPrompt:(0,o.t)([y,"confirm_prompt"]),isOpen:t,onClose:r,onCancel:r,onConfirm:D,confirmVariant:"danger",isDisabled:T,confirmText:T?(0,o.t)("leaving"):(0,o.t)("confirm"),children:[(0,h.jsx)(u.w,{content:(0,o.t)([y,"description"],{space_name:(null===n||void 0===n?void 0:n.name)||""})})," ",!(0,p.Y_)(n)&&((0,p.$n)(n)||(0,p.WB)(n))&&(0,o.t)([y,"private_space"])]})}},50515:(e,t,r)=>{"use strict";r.d(t,{R:()=>l});var n=r(86013),i=r(16743),o=r(30887),a=r(85893),s=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z.TitleSm,{weight:"semibold",children:(0,n.t)("please_check_your_email")}),(0,a.jsx)(i.Z.BodyMd,{children:(0,n.t)("please_check_your_email_description")})]})},c=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(i.Z.TitleSm,{weight:"semibold",children:(0,n.t)("this_space_is_private")})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(i.Z.BodyMd,{children:(0,n.t)("this_space_is_private_description")})})]})},l=function(e){var t=e.isInvited;return(0,a.jsxs)("div",{className:"border-primary bg-primary h-full rounded-none border-0 px-10 py-20 text-center sm:h-auto sm:rounded-lg sm:border","data-testid":"locked-space",children:[(0,a.jsx)(o.JO,{type:"lock",className:"mb-5 !w-14"}),t?(0,a.jsx)(s,{}):(0,a.jsx)(c,{})]})}},50730:(e,t,r)=>{"use strict";r.d(t,{J:()=>V});var n=r(97012),i=r(64687),o=r.n(i),a=r(67294),s=r(47031),c=r(76034),l=r(61926),u=r(21809),d=r(86013),p=r(87536),f=r(35500),m=r(81888),b=r(79718),h=r(26953),v=r(40733),y=r(85893),g=function(){var e=(0,n.e2)().records,t=(0,h.Be)(),r=[{label:(0,d.t)("spaces.form.create.space_type_basic_post_label"),name:"basic",description:(0,d.t)("spaces.form.create.space_type_basic_post_description"),icon:{default:"space-open",selected:"space-open-active",viewBox:"0 0 80 80"},multi:!1},{label:(0,d.t)("spaces.form.create.space_type_event_post_label"),name:"event",description:(0,d.t)("spaces.form.create.space_type_event_post_description"),icon:{default:"space-private",selected:"space-private-active",viewBox:"0 0 80 80"},multi:!1}],i=[{label:(0,d.t)("spaces.form.create.visibility_open_label"),name:"open",description:(0,d.t)("spaces.form.create.visibility_open_description"),icon:{default:"space-open",selected:"space-open-active",viewBox:"0 0 80 80"},alertTitle:(0,d.t)("spaces.form.create.visibility_open_alert_title"),multi:!1},{label:(0,d.t)("spaces.form.create.visibility_private_label"),name:"private",description:(0,d.t)("spaces.form.create.visibility_private_description"),icon:{default:"space-private",selected:"space-private-active",viewBox:"0 0 80 80"},alertTitle:(0,d.t)("spaces.form.create.visibility_private_alert_title"),multi:!1},{label:(0,d.t)("spaces.form.create.visibility_secret_label"),name:"secret",description:(0,d.t)("spaces.form.create.visibility_secret_description"),icon:{default:"space-members-only",selected:"space-members-only-active",viewBox:"0 0 80 80"},multi:!1}];return(0,y.jsxs)("div",{className:"new-space-form__step new-space-form__basic-info",children:[(0,y.jsxs)("div",{className:"new-space-form__space-group",children:[(0,y.jsxs)("h2",{className:"heading-h2",children:[1===e.length&&(0,d.t)("spaces.form.create.space_type_step_title_no_spaces"),e.length>1&&(0,d.t)("spaces.form.create.space_type_step_title")]}),e.length>1&&(0,y.jsx)(b.V,{variant:"large",name:"space_group_id",spaceGroups:e})]}),(0,y.jsxs)("div",{className:"new-space-form__name",children:[(0,y.jsx)(l.l.Item,{name:"emoji",hideBorder:!0,hideDescription:!0,label:(0,d.t)("spaces.form.create.icon"),children:(0,y.jsx)(l.l.EmojiPicker,{name:"emoji",placement:"bottom-start",emojiSize:23,defaultEmoji:"hash_prefix"})}),(0,y.jsx)(l.l.Item,{name:"name",hideBorder:!0,hideDescription:!0,translationRoot:"spaces.form",rules:{required:"Name is required!",maxLength:255},placeholder:(0,d.t)("spaces.form.create.name_your_space"),fullWidth:!0,children:(0,y.jsx)(l.l.Input,{label:(0,d.t)("spaces.form.create.space_name"),className:"form-control form-control--lg",autoFocus:!0})})]}),(0,y.jsxs)("div",{className:"new-space-form__type",children:[(0,y.jsx)("h3",{className:"heading-h3",children:(0,d.t)("spaces.form.create.space_type_label")}),(0,y.jsx)(v.X,{id:"post_type",name:"post_type",variant:"box",direction:t?"horizontal":"vertical",list:r})]}),(0,y.jsxs)("div",{className:"new-space-form__visibility",children:[(0,y.jsx)("label",{children:(0,d.t)("spaces.form.create.visibility_step_title")}),(0,y.jsx)(v.X,{id:"visibility",name:"visibility",variant:"box",direction:t?"horizontal":"vertical",list:i})]})]})},_=r(18009),j=r(61989),x=function(){var e=(0,_.k)(),t="spaces.form.create";return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("h2",{className:"heading-h2",children:I18n.t("".concat(t,".private_space_lock_screen_step_title"))}),(0,y.jsxs)("div",{className:"new-space-form__locked-screen",children:[(0,y.jsx)(l.l.Item,{name:"locked_page_heading",rules:{},hideBorder:!0,hideDescription:!0,translationRoot:t,fullWidth:!0,children:(0,y.jsx)(l.l.Input,{autoFocus:!0})}),(0,y.jsxs)("div",{className:"form-group form-group--column no-border trix-v2",children:[(0,y.jsx)("label",{children:I18n.t("spaces.form.create.locked_page_description")}),(0,y.jsx)(j.O,{ref:e,id:"locked_page_description",name:"locked_page_description",placeholder:I18n.t("".concat(t,".locked_page_content_placeholder")),preventAccidentalLeave:!1,tabIndex:0,className:"w-full"})]}),(0,y.jsx)(l.l.Item,{name:"locked_button_label",hideDescription:!0,translationRoot:t,hideBorder:!0,fullWidth:!0,children:(0,y.jsx)(l.l.Input,{})}),(0,y.jsx)(l.l.Item,{name:"locked_button_url",hideDescription:!0,translationRoot:t,hideBorder:!0,fullWidth:!0,children:(0,y.jsx)(l.l.Input,{})})]})]})},w=function(){var e=(0,h.a7)(),t=[{label:(0,d.t)("spaces.notification_email_label"),description:(0,d.t)("spaces.notification_email_description"),name:"default_notification_setting",icon:{default:"notifications-email",selected:"notifications-email-active",viewBox:"0 0 88 88"},multi:!0},{label:(0,d.t)("spaces.notification_in_app_label"),description:(0,d.t)("spaces.notification_in_app_description"),name:"default_in_app_notification_setting",icon:{default:"notifications-app",selected:"notifications-app-active",viewBox:"0 0 88 88"},multi:!0},{label:(0,d.t)("spaces.notification_mobile_label"),description:(0,d.t)("spaces.notification_mobile_description"),name:"default_mobile_notification_setting",icon:{default:"notifications-mobile",selected:"notifications-mobile-active",viewBox:"0 0 88 88"},multi:!0},{label:(0,d.t)("spaces.no_notification_label"),description:(0,d.t)("spaces.no_notification_description"),name:"none",icon:{default:"notifications-none",selected:"notifications-none-active",viewBox:"0 0 88 88"},multi:!1}];return(0,y.jsxs)("div",{className:"new-space-form__notification",children:[(0,y.jsx)("h2",{className:"heading-h2 heading-max-width",children:I18n.t("spaces.form.create.notification_step_title")}),(0,y.jsx)("div",{className:"new-space-form__notification-options",children:(0,y.jsx)(v.X,{id:"notification_preferences",name:"notification_preferences",variant:"box",direction:e?"horizontal":"vertical",list:t,multi:!0})})]})},O=function(e){var t=e.currentSpaceGroupId,r=e.isPrivateSpaceWithLockedScreen,n=(0,p.Gc)().watch,i=(0,a.useContext)(f.l).steps,o=n("name"),s=n("visibility"),c=n("notification_preferences");return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.h,{sequence:i.basicInformation.sequence,title:i.basicInformation.title,status:i.basicInformation.status,displayNext:!0,isNextStepDisabled:!o||!s,children:(0,y.jsx)(g,{spaceGroupId:t})}),(0,y.jsx)(m.h,{sequence:i.notificationPreferences.sequence,title:i.notificationPreferences.title,status:i.notificationPreferences.status,displaySubmit:!0,isNextStepDisabled:!c,children:(0,y.jsx)(w,{})}),(0,y.jsx)(m.h,{sequence:i.lockScreen.sequence,title:i.lockScreen.title,status:i.lockScreen.status,displayNext:!0,displaySkip:!0,children:(0,y.jsx)(x,{isPrivateSpaceWithLockedScreen:r})})]})};function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t=e.currentSpaceGroupId,r=e.onModalClose,n=(0,p.Gc)(),i=n.watch,s=n.trigger,c=i("visibility"),l={basicInformation:{sequence:1,title:(0,d.t)("name_and_type"),status:"active"},lockScreen:{sequence:2,title:(0,d.t)("lock_screen"),status:"upcoming"},notificationPreferences:{sequence:3,title:(0,d.t)("notification"),status:"upcoming"}},u=N((0,a.useState)(l),2),m=u[0],b=u[1],h=function(){return null===c||void 0===c?void 0:c.includes("private")},v=function(){var e,t=(e=o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===m.basicInformation.sequence?3:e.t0===m.lockScreen.sequence?8:13;break;case 3:return e.next=5,s("name");case 5:return e.sent&&(r=P(P({},m),{},{basicInformation:P(P({},m.basicInformation),{},{status:"completed"})}),r=!0===h()?P(P({},r),{},{lockScreen:P(P({},m.lockScreen),{},{status:"active"})}):P(P({},r),{},{lockScreen:P(P({},m.lockScreen),{},{status:"inactive"}),notificationPreferences:P(P({},m.notificationPreferences),{},{status:"active"})}),b(r)),e.abrupt("break",13);case 8:return e.next=10,s("locked_page_heading");case 10:return e.sent&&(n=P(P({},m),{},{lockScreen:P(P({},m.lockScreen),{},{status:"completed"}),notificationPreferences:P(P({},m.notificationPreferences),{},{status:"active"})}),b(n)),e.abrupt("break",13);case 13:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){k(o,n,i,a,s,"next",e)}function s(e){k(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return m?(0,y.jsx)(f.O,{steps:m,onNextClick:v,onPreviousClick:function(e){switch(e){case m.lockScreen.sequence:var t=P(P({},m),{},{lockScreen:P(P({},m.lockScreen),{},{status:"upcoming"}),basicInformation:P(P({},m.basicInformation),{},{status:"active"})});b(t);break;case m.notificationPreferences.sequence:var r=P(P({},m),{},{notificationPreferences:P(P({},m.notificationPreferences),{},{status:"upcoming"})});r=!0===h()?P(P({},r),{},{lockScreen:P(P({},m.lockScreen),{},{status:"active"})}):P(P({},r),{},{lockScreen:P(P({},m.lockScreen),{},{status:"upcoming"}),basicInformation:P(P({},m.basicInformation),{},{status:"active"})}),b(r)}},onClose:r,stepPanelContainer:(0,y.jsx)(O,{currentSpaceGroupId:t,isPrivateSpaceWithLockedScreen:h})}):null},E=r(55675),D=r(78270),T=function(e){var t=e.show,r=e.onModalClose,n=e.spaceRootUrl;return(0,y.jsxs)(D.u,{show:t,onClose:r,showIcon:!1,children:[(0,y.jsx)("p",{className:"text-sm text-gray-500",children:I18n.t("spaces.form.create.success_message")}),(0,y.jsx)(E.z,{style:{width:200,height:100},name:name,onClick:function(){window.location="".concat(n,"/invite")},variant:"secondary",children:I18n.t("spaces.invite_members")}),(0,y.jsx)(E.z,{style:{width:200,height:100},name:name,onClick:function(){window.location="".concat(n,"/new")},variant:"secondary",children:I18n.t("spaces.create_post")}),(0,y.jsx)(E.z,{style:{width:200,height:100},name:name,onClick:function(){window.location="".concat(n,"/settings")},variant:"secondary",children:I18n.t("spaces.customize")})]})};function L(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var B=function(e){var t=e.space_group_id,r=e.onModalClose,i=(0,c.m)().createSpace,d=(0,n.c6)(),p=(0,n.e2)(),f=d.helpers.isDataLoaded()&&p.helpers.isDataLoaded(),m=M((0,a.useState)(!1),1)[0],b=M((0,a.useState)(""),1)[0],h=(0,u.p)(),v=function(e){var t={};return Object.entries(e).forEach((function(e){var r=M(e,2),n=r[0],i=r[1];["visibility","post_type"].includes(n)?t[n]=i[0]:"notification_preferences"===n?["default_notification_setting","default_in_app_notification_setting","default_mobile_notification_setting"].forEach((function(e){i.includes("none")?t[e]="never":t[e]=i.includes(e)?"all":"never"})):t[n]=i})),t},g=function(){var e,t=(e=o().mark((function e(t){var r,n,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i(v(t));case 3:(r=e.sent)&&r.root_url&&(window.location=r.root_url),e.next=13;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),n=e.t0.firstErrorDetail,a=e.t0.errorDetails,s=n||a,h.error(s);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){L(o,n,i,a,s,"next",e)}function s(e){L(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,y.jsx)(s.u.Root,{show:f,as:a.Fragment,children:(0,y.jsxs)("div",{className:"new-space-form",children:[(0,y.jsx)(l.l,{onSubmit:g,defaultValues:{space_group_id:t,emoji:"#"},children:(0,y.jsx)(A,{currentSpaceGroupId:t,onModalClose:function(){r.redirect_to?window.location=r.redirect_to:r()}})}),(0,y.jsx)(T,{show:m,onModalClose:function(){window.location="/"},spaceRootUrl:b})]})})};function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=function(e){return(0,y.jsx)(n.Br,{children:(0,y.jsx)(n.CM,{children:(0,y.jsx)(B,F({},e))})})}},55560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(79718),i=r(97012),o=r(18009),a=r(61926),s=r(53448),c=r(85893);const l=function(){var e=(0,o.k)(),t=(0,i.e2)().records,r=(0,s.UV)().contentPortalElement;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.l.Item,{name:"name",hideDescription:!0,translationRoot:"spaces.form.create.basic_info",rules:{required:"Name is required!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,c.jsx)(a.l.Input,{ref:e,prefix:(0,c.jsx)(a.l.EmojiPickerV3Wrapper,{})})}),(0,c.jsx)(a.l.Item,{name:"space_group_id",translationRoot:"spaces.form.create.basic_info",hideDescription:!0,rules:{required:"Please choose a space group!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,c.jsx)(n.V,{variant:"form-input",spaceGroups:t,name:"space_group_id",appendTo:r})})]})}},84436:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(86013),i=r.n(n),o=r(87536),a=r(61926),s=r(85893);function c(){return"event"!==(0,(0,o.Gc)().watch)("post_type")?null:(0,s.jsx)(a.l.Item,{name:"event_auto_rsvp_enabled",label:i().t("spaces.form.event_auto_rsvp_enabled"),hideBorder:!0,hideDescription:!0,inline:!0,shouldToggleValueOnLabelClick:!0,children:(0,s.jsx)(a.l.ToggleSwitch,{variant:"small"})})}},52991:(e,t,r)=>{"use strict";r.d(t,{V:()=>l});var n=r(86013),i=r(87536),o=r(69447),a=r(97012),s=r(61926),c=r(85893),l=function(){var e=(0,i.qo)({name:"post_type"}),t=(0,a.wh)(),r=t.currentCommunitySettings,l=t.currentCommunity,u=Boolean(null===r||void 0===r?void 0:r.chat_notification_preferences_enabled),d=Boolean((null===l||void 0===l?void 0:l.ios_app_enabled)||(null===l||void 0===l?void 0:l.has_branded_app));if("chat"==e&&(!u||!d)||"course"==e||"members"==e)return null;var p=[{label:(0,n.t)("spaces.form.create.notification_types.email"),description:(0,n.t)("spaces.form.create.notification_by_space_type.".concat(e,".email_description")),value:"default_notification_setting"},{label:(0,n.t)("spaces.form.create.notification_types.inapp"),description:(0,n.t)("spaces.form.create.notification_by_space_type.".concat(e,".inapp_description")),value:"default_in_app_notification_setting"},{label:(0,n.t)("spaces.form.create.notification_types.mobile"),description:(0,n.t)("spaces.form.create.notification_by_space_type.".concat(e,".mobile_description")),value:"default_mobile_notification_setting"}],f="chat"==e?(0,n.t)("spaces.form.create.notification_types.chat_label"):(0,n.t)("spaces.form.create.notification_types.label");return(0,c.jsx)(s.l.Item,{name:"notification_type",label:f,hideDescription:!0,hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:"chat"==e?(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsx)(s.l.RadioGroup,{variant:"radio",name:"notification_type",verticalSpacing:"normal",options:o.M})}):(0,c.jsx)(s.l.CheckboxGroup,{name:"notification_type",options:p})})}},79024:(e,t,r)=>{"use strict";r.d(t,{m:()=>a});var n=r(86013),i=r(61926),o=r(85893);function a(e){var t=e.disabled,r=void 0!==t&&t,a=e.isCoursesEnabled,s=void 0!==a&&a,c=e.hideLabel,l=void 0!==c&&c,u=[{label:(0,n.t)("spaces.form.create.space_types.post_label"),icon:{type:"post-2",viewBox:"0 0 20 20"},value:"basic"},{label:(0,n.t)("spaces.form.create.space_types.event_label"),icon:{type:"event",viewBox:"0 0 20 20"},value:"event"},{label:(0,n.t)("spaces.form.create.space_types.chat_label"),icon:{type:"chat-2",viewBox:"0 0 20 20"},value:"chat"}];return s&&u.push({label:(0,n.t)("spaces.form.create.space_types.course_label"),icon:{type:"book",viewBox:"0 0 20 20"},value:"course"}),u.push({label:(0,n.t)("spaces.form.create.space_types.members_label"),icon:{type:"20-space-picker-members",viewBox:"0 0 20 20"},value:"members"}),u.push({label:(0,n.t)("spaces.form.create.space_types.image_label"),icon:{type:"20-images",viewBox:"0 0 20 20"},value:"image"}),(0,o.jsx)(i.l.Item,{name:"post_type",hideLabel:l,label:(0,n.t)("spaces.form.create.space_types.label"),hideDescription:!0,rules:{required:"Please choose an access type!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,o.jsx)(i.l.RadioGroup,{className:"create-space__form__grid-type",disabled:r,variant:"box",fullWidth:!1,name:"space_type",options:u})})}},63395:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(86013),i=r.n(n),o=r(87536),a=r(61345),s=r(61926),c=r(85893);const l=function(){var e=[{label:i().t("spaces.form.create.visibility_types.open"),value:"open",info:i().t("spaces.form.create.visibility_types.open_info")},{label:i().t("spaces.form.create.visibility_types.private"),value:"private",info:i().t("spaces.form.create.visibility_types.private_info"),infoSubText:i().t("spaces.form.create.visibility_types.private_info_subtext")},{label:i().t("spaces.form.create.visibility_types.secret"),value:"secret",info:i().t("spaces.form.create.visibility_types.secret_info"),infoSubText:i().t("spaces.form.create.visibility_types.secret_info_subtext")}],t=(0,o.qo)({name:"post_type"}),r=(0,o.qo)({name:"visibility"}),n=(0,o.Gc)().setValue;return(0,a.EG)({post_type:t})?("draft"!=r&&n("visibility","draft"),(0,c.jsx)(s.l.Item,{hideBorder:!0,name:"visibility",label:i().t("courses.access"),description:i().t("courses.access_description")})):(0,c.jsx)(s.l.Item,{name:"visibility",hideDescription:!0,label:i().t("spaces.form.create.visibility_types.label"),rules:{required:"Please choose a visibility!",maxLength:255},hideBorder:!0,fullWidth:!0,variant:"extra-bottom-margin",children:(0,c.jsx)(s.l.RadioGroup,{fullWidth:!1,variant:"box",name:"visibility",options:e})})}},19865:(e,t,r)=>{"use strict";r.d(t,{e:()=>q,F:()=>G});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r(96486),c=r(24185),l=r(99310),u=r(81967),d=r(95295),p=r(97012),f=r(49326),m=r(76034),b=r(86078),h=r(21155),v=r(49498),y=r(61926),g=r(32014),_=r(21809),j=r(87536),x=r(87958),w=r(61345),O=r(85893),S=function(e){var t=e.spaceGroupMemberCount,r=e.chatSpaceMemberLimit,n=(0,p.e2)().helpers.findBy,i=(0,j.Gc)(),s=i.watch,c=i.setValue,l=s("space_group_id"),u=s("post_type"),d=n({id:l});(0,o.useEffect)((function(){d&&c("add_members_from_space_group",d.automatically_add_members_to_new_spaces)}),[l]);var f=(0,w.Ug)({post_type:u})&&t>r;return(0,O.jsx)(x.T,{content:(0,a.t)("members_in_space_group_limit_reached"),disabled:!f,children:(0,O.jsx)(y.l.Item,{name:"add_members_from_space_group",label:I18n.t("spaces.form.add_members_from_space_this_group"),hideBorder:!0,hideDescription:!0,inline:!0,shouldToggleValueOnLabelClick:!0,isDisabled:f,children:(0,O.jsx)(y.l.ToggleSwitch,{variant:"small",disabled:f})})})},P=r(55560),C=r(55675),k=r(71362),N=function(e){var t=e.isLoading,r=void 0!==t&&t;return(0,O.jsx)(k.d.Footer,{sticky:!0,children:(0,O.jsx)(C.z,{type:"submit",variant:"circle",full:!0,disabled:r,form:q,children:r?(0,a.t)("creating"):(0,a.t)("create_space")})})},I=r(30887),A=function(e){var t=e.onClose;return(0,O.jsx)(k.d.Header,{addHeaderPadding:!0,title:(0,a.t)("spaces.form.create.title"),fixed:!0,Actions:(0,O.jsxs)("button",{type:"submit",className:"close-button",onClick:t,children:[(0,O.jsx)(I.JO,{type:"close"}),(0,O.jsx)("span",{className:"sr-only",children:(0,a.t)("drawer.close_panel")})]})})},E=r(84436),D=r(52991),T=r(79024),L=r(63395);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function F(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){U(o,n,i,a,s,"next",e)}function s(e){U(o,n,i,a,s,"throw",e)}a(void 0)}))}}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q="create-space-form",G=function(e){var t=e.onClose,r=e.currentSpaceGroupId,n=e.post_type,j=void 0===n?"basic":n,x=e.courseSetting,w=void 0===x?{course_type:l.t}:x,C=e.renderHeader,k=void 0===C?A:C,I=e.renderFooter,M=void 0===I?N:I,B=e.hideSpaceTypePicker,U=void 0!==B&&B,V=e.setExternalLoadingState,G=void 0===V?s.noop:V,H=(0,c.k6)(),W=(0,p.nT)().actions.refresh,Z=z((0,o.useState)(!1),2),J=Z[0],$=Z[1],Q=(0,m.m)(),K=Q.createSpace,X=Q.maxSpaceLimit,Y=(0,p.wh)(),ee=Y.currentCommunity,te=Y.currentCommunitySettings,re=Y.currentCommunityMember,ne=!(null===re||void 0===re||!re.is_admin),ie=(0,_.p)(),oe=(0,h.w)(),ae=!(null===te||void 0===te||!te.courses_enabled)&&(null===ee||void 0===ee?void 0:ee.courses_feature_flag_enabled),se=(0,p.e2)().helpers,ce=se.isDataLoading,le=se.findBy,ue=ee.current_plan_tier,de=le({id:r}),pe={space_group_id:r,post_type:ne?j:"basic",visibility:"open",course_setting:w,emoji:"#",custom_emoji:g.j,notification_type:[],is_post_disabled:!0,add_members_from_space_group:null===de||void 0===de?void 0:de.automatically_add_members_to_new_spaces,default_comment_sort:"latest",default_member_sort:"latest",default_sort:"latest"};if("chat"==j&&(pe.notification_type="never"),ce())return(0,O.jsx)(b.m,{});var fe=!(0,d.kw)(ue)&&!(0,d.gR)(ue)&&Boolean(null===re||void 0===re?void 0:re.is_admin)&&Boolean(null===te||void 0===te?void 0:te.upgrade_flows_for_space_creation_enabled),me=function(){var e=F(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fe){e.next=3;break}return e.next=3,X(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=F(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),H.push(f.lA.content.spaces),e.next=4,oe.hide();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=F(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!1),G(!1),e.next=4,oe.show({planTier:(0,d.FZ)(ue)||void 0,onSuccess:be,subheading:t.body.message,successButtonLabel:(0,a.t)("pricing_plans.upgrade_modal.actions.go_to_spaces"),source:v.f.SPACE_LIMIT_UPGRADE_MODAL,showPlanDetails:!0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(e){return R(R(R(R({},(0,s.omit)(e,"notification_type","course_setting")),function(e){return{default_notification_setting:e.includes("default_notification_setting")?"all":"never",default_in_app_notification_setting:e.includes("default_in_app_notification_setting")?"all":"never",default_mobile_notification_setting:e.includes("default_mobile_notification_setting")?"all":"never",default_mention_mobile_notification_setting:e.includes("default_mention_mobile_notification_setting")?"all":"never",default_mention_in_app_notification_setting:e.includes("default_mention_in_app_notification_setting")?"all":"never"}}("chat"===e.post_type?"all"==(t=e.notification_type)?["default_mobile_notification_setting","default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:"mentions"==t?["default_mention_mobile_notification_setting","default_mention_in_app_notification_setting"]:[]:e.notification_type)),"course"===e.post_type?{course_setting:e.course_setting}:{}),{},{is_post_disabled:"event"===e.post_type&&e.is_post_disabled});var t},ye=function(){var e=F(i().mark((function e(r){var n,o,a,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),G(!0),e.prev=2,e.next=5,me(r.space_group_id);case 5:return n=ve(r),e.next=8,K(n);case 8:return o=e.sent,e.next=11,W();case 11:t(),H.push((0,f._v)({spaceSlug:o.slug})),e.next=27;break;case 15:if(e.prev=15,e.t0=e.catch(2),(0,u.d)(e.t0),console.error(e.t0),a=e.t0.firstErrorDetail,s=e.t0.errorDetails,c=a||s,i=e.t0,l=void 0,d=void 0,!(null===(l=i.body)||void 0===l||null===(d=l.error_details)||void 0===d?void 0:d.max_space_limit)||!fe){e.next=26;break}return e.next=24,he(e.t0);case 24:e.next=27;break;case 26:ie.error(c);case 27:return e.prev=27,G(!1),e.finish(27);case 30:case"end":return e.stop()}var i,l,d}),e,null,[[2,15,27,30]])})));return function(t){return e.apply(this,arguments)}}();return(0,O.jsxs)(y.l,{id:q,onSubmit:ye,defaultValues:pe,className:"create-space__form",children:[k({onClose:t}),(0,O.jsxs)("div",{children:[(0,O.jsx)(P.Z,{}),(0,O.jsx)(S,{spaceGroupMemberCount:(null===de||void 0===de?void 0:de.space_group_members_count)||0,chatSpaceMemberLimit:(null===ee||void 0===ee?void 0:ee.chat_space_members_limit)||0}),ne&&!U&&(0,O.jsx)(T.m,{isCoursesEnabled:ae}),(0,O.jsx)(L.Z,{}),(0,O.jsx)(D.V,{}),(0,O.jsx)(E.Z,{})]}),M({isLoading:J})]})}},68465:(e,t,r)=>{"use strict";r.d(t,{_:()=>l});var n=r(97012),i=r(19865),o=r(85893);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e){return(0,o.jsx)(n.Br,{children:(0,o.jsx)(n.CM,{children:(0,o.jsx)(i.F,s({},e))})})}},34532:(e,t,r)=>{"use strict";r.d(t,{d:()=>a});var n=r(94184),i=r.n(n),o=r(85893),a=function(e){var t=e.children,r=e.className;return(0,o.jsx)("div",{className:i()("react-page-space-show h-full w-full",r),children:t})}},87506:(e,t,r)=>{"use strict";r.d(t,{K:()=>ft});var n=r(64687),i=r.n(n),o=r(67294),a=r(62748),s=r(393),c=r(97012),l=r(34128),u=r(28803),d=r(60060),p=r(25067),f=r(28175),m=r(26953),b=r(94184),h=r.n(b),v=r(86013),y=r.n(v),g=r(30887),_=r(96486),j=r(77803),x=r(31889),w=r(72675),O=r(88767),S=r(87561),P=r(53448),C=r(49326),k=r(55675),N=r(61926),I=r(85893);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=S.Ry().shape({name:S.Z_().required(y().t("link_name_required")),url:S.Vo((function(e){return e.startsWith("mailto:")?S.Z_().trim().matches(/([mailto:\w.\-pL]+@\w+.[\w.\-pL]+)/,y().t("link_url_invalid")).required(y().t("link_url_required")):S.Z_().url(y().t("link_url_invalid")).required(y().t("link_url_required"))}))}),L=function(e){var t=e.isEdit,r=e.link,n=(0,c.wh)().refetch,i=B(),o=function(){n(),i.hide()},a=(0,O.useMutation)((function(e){return(0,l.Cu)(C.av.communities.communityLinks.create(),e)}),{onSuccess:o}),s=a.mutate,u=a.isLoading,d=(0,O.useMutation)((function(e){return(0,l.aU)(C.av.communities.communityLinks.update({communityLinkId:r.id}),e)}),{onSuccess:o}),p=d.mutate,f=d.isLoading;return(0,I.jsxs)(N.l,{onSubmit:function(e){t?p(e):s(e)},validationSchema:T,defaultValues:t?E({},r):{name:"",url:""},children:[(0,I.jsxs)(P.u_.Body,{children:[(0,I.jsx)(N.l.Item,{name:"name",variant:"extra-bottom-margin",label:y().t("link_name"),description:y().t("link_name_description"),hideBorder:!0,children:(0,I.jsx)(N.l.Input,{})}),(0,I.jsx)(N.l.Item,{variant:"extra-bottom-margin",name:"url",label:y().t("link_url"),description:y().t("link_url_description"),hideBorder:!0,children:(0,I.jsx)(N.l.Input,{})})]}),(0,I.jsx)(P.u_.Footer,{children:t?(0,I.jsx)(k.z,{full:!0,disabled:f,type:"submit",variant:"primary",children:f?y().t("link_updating"):y().t("link_update")}):(0,I.jsx)(k.z,{full:!0,disabled:u,type:"submit",variant:"primary",children:u?y().t("link_creating"):y().t("link_create")})})]})},M=function(e){var t=e.isEdit,r=void 0!==t&&t,n=e.link,i=(0,w.dd)();return(0,I.jsxs)(P.u_,{title:(0,v.t)("add_link"),isOpen:i.visible,onClose:i.hide,children:[(0,I.jsx)(P.u_.Overlay,{}),(0,I.jsxs)(P.u_.Content,{children:[(0,I.jsxs)(P.u_.Header,{children:[(0,I.jsx)(P.u_.Title,{className:"text-center",size:"md",children:(0,v.t)("add_link")}),(0,I.jsx)(P.u_.HeaderActions,{className:"absolute right-0 top-0 mr-6 mt-6",children:(0,I.jsx)(P.u_.CloseButton,{onClick:i.hide})})]}),(0,I.jsx)(L,{isEdit:r,link:n})]})]})},R=w.gk.create((function(e){var t=e.isEdit,r=e.link;return(0,I.jsx)(M,{isEdit:t,link:r})})),B=function(){return(0,w.dd)(R)},U=r(30414),F=function(){var e=B(),t=(0,f.I)().isV3Enabled;return(0,I.jsx)(U.T,{children:(0,I.jsxs)("button",{type:"button",className:h()("text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover flex w-full items-center px-2",{"rounded-md py-1.5 text-sm":!t,"text-xs-plus h-8.5 rounded-lg px-4 font-medium transition-colors duration-200":t}),onClick:function(){return e.show()},children:[(0,I.jsx)(g.JO,{type:"16-add-new",size:16}),(0,I.jsx)("span",{className:"ml-2",children:(0,v.t)("add_link")})]})})},z=r(1002),V=r(63099),q=r(71032),G=function(e){var t=e.isOpen,r=e.onClose,n=e.link,i=(0,c.wh)().refetch,o=(0,O.useMutation)((function(e){return(0,l.pC)(C.av.communities.communityLinks.delete({communityLinkId:n.id}),e)}),{onSuccess:function(){i(),r()}}),a=o.mutate,s=o.isLoading;return(0,I.jsx)(q.c,{isOpen:t,title:(0,v.t)("delete_link"),onClose:r,onCancel:r,onConfirm:a,cancelText:(0,v.t)("cancel"),confirmText:s?(0,v.t)("deleting"):(0,v.t)("delete"),disabled:s,confirmVariant:"danger",children:(0,v.t)("delete_link_confirmation",{name:n.name})})};function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Z=(0,j.W8)((function(e){var t=e.link,r=e.isAdmin,n=H((0,V.k)(!1),2),i=n[0],o=n[1],a=H((0,V.k)(!1),2),s=a[0],c=a[1],l=(0,m.en)(),u=B(),d=(0,f.I)().isV3Enabled;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("a",{href:t.url,target:"_blank",rel:"noreferrer",draggable:"false",title:t.name,className:h()("text-c-sidebar hover:text-c-sidebar focus:text-c-sidebar active:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover group flex w-full items-center gap-2 px-2",{"my-px rounded-md py-1.5 text-sm font-normal":!d,"text-xs-plus h-8.5 !m-0 rounded-lg px-4 font-medium transition-colors duration-200":d}),children:[(0,I.jsx)("span",{className:h()({"flex !h-5 !w-5 items-center justify-center":d}),children:(0,I.jsx)(g.JO,{type:"16-external-link",className:h()({"!h-4 !w-4":d}),size:16})}),(0,I.jsx)("h4",{className:h()("truncate text-current",{"w-full max-w-full text-sm font-normal ":!d,"text-xs-plus flex-1 font-medium":d}),children:t.name}),(0,I.jsx)("button",{type:"button",className:h()("flex gap-0.5",{"hidden group-hover:flex":l&&s}),onClick:function(e){e.preventDefault(),e.stopPropagation()},"aria-label":(0,v.t)("community_sidebar.view_sidebar_link_options"),children:r&&(0,I.jsxs)(z.Lt,{buttonClassName:"flex py-0.5 w-5 h-5 rounded hover:bg-black/10 transition-colors",button:(0,I.jsx)(g.JO,{type:"16-menu-dots-horizontal",size:16}),onToggle:c,appendTo:document.body,children:[(0,I.jsx)(z.Lt.ItemWithLink,{onClick:function(){u.show({isEdit:!0,link:t})},children:(0,v.t)("edit")}),(0,I.jsx)(z.Lt.ItemWithLink,{onClick:o,children:(0,v.t)("delete")})]})})]},t.url),(0,I.jsx)(G,{link:t,isOpen:i,onClose:o})]})})),J=(0,j.JN)((function(e){var t=e.links,r=(0,c.wh)().currentCommunityMember,n=(0,x.vb)(r),i=(0,f.I)().isV3Enabled;return(0,I.jsxs)("div",{className:h()({"space-y-px":!i,"flex flex-col gap-y-1":i}),children:[t.map((function(e,t){return(0,I.jsx)(Z,{index:t,disabled:!n,isAdmin:n,link:e},(0,_.uniqueId)(String(t)))})),n&&(0,I.jsx)(F,{})]})}));function $(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||K(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||K(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){if(e){if("string"===typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y=function(){var e=function(){var e=(0,c.wh)(),t=e.currentCommunity,r=e.currentCommunityMember,n=Q((0,V.k)(!0),2),i=n[0],a=n[1],s=Q((0,o.useState)(t.links),2),u=s[0],d=s[1],p=(0,x.vb)(r),f=(0,O.useMutation)((function(e){var t=e.links_order_array;return(0,l.aU)(C.av.communities.communityLinks.reorder(),{links_order_array:t})})).mutate;return(0,o.useEffect)((function(){var e=t.links,r=u;e.length===r.length?(e.some((function(e){return e.name!==r.find((function(t){return t.id===e.id})).name}))||e.some((function(e){return e.url!==r.find((function(t){return t.id===e.id})).url})))&&d(t.links):d(t.links)}),[t.links,u]),{canSeeLinks:p||t.links.length>0,shouldShowLinks:i,toggleLinks:a,orderedList:u,onSortEnd:function(e){var t=e.oldIndex,r=e.newIndex,n=$((0,j.Rp)(u,t,r)),i=n.map((function(e){return e.id.toString()}));d(n),f({links_order_array:i})}}}(),t=e.canSeeLinks,r=e.shouldShowLinks,n=e.toggleLinks,i=e.orderedList,a=e.onSortEnd,s=(0,m.en)(),u=(0,f.I)().isV3Enabled;return t?(0,I.jsxs)("div",{id:"links-section",className:h()("mb-8 px-3",{"mt-4":!u,"mt-6 flex flex-col gap-1 lg:px-6":u}),children:[(0,I.jsxs)("button",{type:"button",className:h()("text-c-sidebar hover:bg-c-sidebar-hover focus-visible:bg-c-sidebar-hover group flex w-full items-center space-x-px py-1.5 text-sm font-semibold transition-colors",{"my-px rounded-md px-2":!u,"rounded-lg px-4 transition-colors duration-200":u}),onClick:n,children:[(0,I.jsx)("span",{children:(0,v.t)("links")}),(0,I.jsx)("div",{className:h()("flex rounded py-0.5 transition-transform",{"hidden group-hover:flex":s,"rotate-0":!r,"rotate-90":r}),"aria-label":r?(0,v.t)("community_sidebar.expand_group",{group_name:"links"}):(0,v.t)("community_sidebar.collapse_group",{group_name:"links"}),children:(0,I.jsx)(g.JO,{type:"cheveron-right",size:16})})]}),r&&(0,I.jsx)(J,{links:i,distance:5,lockAxis:"y",onSortEnd:a})]}):null},ee=r(24185),te=r(27064),re=r(73188),ne=r(37179),ie=["children"];function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var le=function(e){var t=e.children,r=ce(e,ie);return(0,I.jsx)("button",ae(ae({type:"button",className:"text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover my-px flex cursor-pointer items-center justify-start rounded-md px-2 py-1.5 text-sm"},r),{},{children:t}))};function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fe=function(e){return(0,I.jsxs)(le,de(de({},e),{},{children:[(0,I.jsx)(g.JO,{size:16,type:"16-add-new"}),(0,I.jsx)("span",{"data-testid":"add-space",className:"mx-2",children:(0,v.t)("add_space")})]}))},me=function(e){var t=e.spaceGroupId,r=(0,te.G)();return(0,I.jsx)(fe,{onClick:function(){r.show({spaceGroupId:t})}})};function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(){return ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ye.apply(this,arguments)}var ge=function(e){var t=ye({},e);return(0,I.jsxs)(le,he(he({},t),{},{children:[(0,I.jsx)(g.JO,{size:16,type:"16-add-new"}),(0,I.jsx)("span",{className:"mx-2",children:(0,v.t)("join_a_space")})]}))},_e=function(e){var t=e.spaceGroupSlug,r=(0,ee.k6)();return(0,I.jsx)(ge,{onClick:function(){r.push("/s/".concat(t))}})},je=function(e){var t=e.spaceGroup;return(0,u.yG)({spaceGroup:t})?(0,I.jsx)(me,{spaceGroupId:t.id}):t.hide_non_member_spaces_from_sidebar?(0,I.jsx)(_e,{spaceGroupSlug:t.slug}):null},xe=r(32194),we=r(61345),Oe=r(94623);const Se=(0,j.W8)((function(e){var t=e.space,r=(0,c.wh)().currentCommunityMember,n=(0,we.fO)()(t,r),i=(0,xe.h4)().spaces.find((function(e){return e.id===t.id}));return(0,I.jsx)(Oe.z,{space:t,buttonLink:n,spaceNotificationDetail:i})}));var Pe=r(78232),Ce=(0,j.JN)((function(e){var t=e.spaceGroup,r=e.listId,n=(0,c.wh)().currentCommunityMember,i=t.spaces,o=i.length>0,a=(0,m.a7)(),s=!(0,x.vb)(n)||!a;return(0,I.jsx)(Pe.I,{id:r,children:o?i.map((function(e,t){return(0,I.jsx)(Se,{index:t,space:e,disabled:s},e.id)})):(0,I.jsx)(je,{spaceGroup:t})})}));Ce.displayName="SpaceList";var ke=r(11694);function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ae=(0,j.W8)((function(e){var t=e.spaceGroup,r=e.onSpaceSortEnd,n=e.position,i=e.spaceGroupDragProperties,o=(0,c.wh)(),a=o.currentCommunityMember,s=o.currentCommunitySettings,d=Ne((0,V.k)(t.collapsed),2),p=d[0],f=d[1],m=(0,re.a)(),b=(0,ee.k6)(),h=(0,te.G)(),v=(0,ne.I)().toggleSpaceGroupDrawer,y=(0,O.useMutation)((function(){return(0,l.Cu)(C.Ts.toggleVisibility({spaceGroupId:String(t.id)}))})).mutate,g=(0,x.vb)(a),_=(0,u.wh)({spaceGroup:t}),j=(null===s||void 0===s?void 0:s.new_space_group_creation_flow_enabled)?function(){return m.show({spaceGroup:t,tab:"Details"})}:function(){return b.push(C.Ts.edit({spaceGroupId:String(t.id)}))},w=t.slug,S="".concat(t.slug,"-list");return(0,I.jsx)(ke.I,{id:w,listId:S,position:n,isCollapsed:!!Boolean(n===(null===i||void 0===i?void 0:i.index)&&(null===i||void 0===i?void 0:i.isDragging))||p,isDragging:null===i||void 0===i?void 0:i.isDragging,canManage:_,onCollapseToggle:function(){f(),y()},spaceGroup:t,onEditSpaceGroupClick:j,onCreateSpaceClick:function(){return h.show({spaceGroupId:t.id})},onCreateSpaceGroupClick:v,isAdmin:g,onAddMembersClick:function(){return m.show({spaceGroup:t,tab:"Members"})},children:(0,I.jsx)(Ce,{listId:S,distance:10,lockAxis:"y",onSortEnd:function(e){var n=e.oldIndex,i=e.newIndex;return r({oldIndex:n,newIndex:i,spaceGroup:t})},spaceGroup:t})})})),Ee=r(36168),De=(0,j.JN)((function(e){var t=e.spaceGroupWithSpaces,r=e.onSpaceSortEnd,n=e.spaceGroupDragProperties,i=(0,c.wh)().currentCommunityMember,o=(0,x.vb)(i),a=(0,m.a7)(),s=!o||!a;return(0,I.jsx)(Ee.E,{children:t.map((function(e,t){return(0,I.jsx)(Ae,{index:t,disabled:s,isAdmin:o,position:t,spaceGroup:e,spaceGroupDragProperties:n,onSpaceSortEnd:r},e.id)}))})})),Te=r(15560),Le=r(98486),Me=r(45771),Re=r(19736),Be=r(84495),Ue=r(23744),Fe=r(90882),ze=r(59665),Ve=function(){var e,t,r=(0,ee.k6)(),n=(0,ne.I)(),i=n.shouldShowOnboarding,o=n.isOnboardingActive,a=n.hideOnboardingConfirmationModal,s=n.currentCommunity,c=n.currentCommunitySettings,l=n.currentCommunityMember,u=n.showSpotlightSearch,d=n.shouldShowAllEventsPage,p=(0,ze.R)(),f=p.newNotificationCount,m=p.toggleNotificationDrawer,b=p.resetNewNotificationsCount,h=(0,Be.rZ)().unreadThreadsCount,v=(0,Be.K$)().unreadChatCount,y=(0,Ue.g)(),g=(null===l||void 0===l||null===(e=l.policies)||void 0===e?void 0:e.can_access_threads_tab)||h>0;return(0,I.jsx)(Fe.x,{allDMsBadgeText:String(v),hasCurrentCommunityMember:!!l,isHomePageEnabled:null===s||void 0===s?void 0:s.home_page_enabled,isMessagingEnabled:y,isOnboardingActive:o,notificationBadgeText:String(f),onGettingStartedClick:function(){return r.push(Re.Fy.onboarding())},onGettingStartedClose:a.show,onNotificationClick:function(){m(),b()},onSearchClick:u,shouldShowMemberDirectory:(0,x.VP)(l,c),shouldShowOnboarding:i,shouldShowSpaceDirectory:null===c||void 0===c?void 0:c.space_directory_enabled,shouldShowCoursesDirectory:null===s||void 0===s||null===(t=s.policies)||void 0===t?void 0:t.can_view_courses_directory,shouldShowChatThreadsTab:g,resetNewNotificationsCount:b,unreadThreadsCount:h,shouldShowAllEventsPage:d,shouldShowLeaderboard:null===c||void 0===c?void 0:c.leaderboard_enabled})},qe=r(89457),Ge=r(24702),He=r(83218),We=r(63001),Ze=function(e){var t=e.headline,r=void 0===t?"":t,n=e.name,i=void 0===n?"":n;return(0,I.jsxs)("div",{className:"flex max-w-[128px] flex-col text-left",children:[(0,I.jsx)("span",{className:"text-c-sidebar truncate text-sm font-medium",children:i}),(0,I.jsx)("span",{className:"text-c-sidebar truncate text-sm font-normal",children:r})]})},Je=r(38870),$e={strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,8]}}]},Qe=function(e){var t=e.imageUrl,r=void 0===t?"":t,n=e.name,i=void 0===n?"":n,o=e.onEditProfileClick,a=e.onSignOutClick,s=e.publicUid,c=void 0===s?"":s,l=e.headline,u=void 0===l?"":l,d=e.showMemberBilling,p=void 0!==d&&d,f=e.canAccessAuthenticationPage,m=void 0!==f&&f,b=e.canShowPaywallsAffiliate,h=void 0!==b&&b,y=(0,ee.TH)(),g=(0,We.r)().show,j=[];return j.push({value:(0,v.t)("view_profile"),label:(0,v.t)("view_profile"),onClick:function(){return g({memberPublicId:c})},icon:"16-account",dataTestId:"profile-link"},{value:(0,v.t)("edit_profile"),label:(0,v.t)("edit_profile"),onClick:function(){return(0,_.isFunction)(o)&&o()},icon:"16-edit",dataTestId:"edit-profile-link"},{value:(0,v.t)("notification"),label:(0,v.t)("notification"),pathTo:C.du.notifications(y),icon:"sidebar-bell",dataTestId:"notification-link"}),m&&j.push({value:(0,v.t)("authentication"),label:(0,v.t)("authentication"),pathTo:C.du.authentication(y),icon:"16-lock-unlocked",dataTestId:"authentication-link"}),p&&j.push({value:(0,v.t)("billing"),label:(0,v.t)("billing"),pathTo:C.du.billing(y),icon:"credit-card",dataTestId:"member-billing-link"}),h&&j.push({value:(0,v.t)("member_profile_modal.affiliate_dashboard.title"),label:(0,v.t)("member_profile_modal.affiliate_dashboard.title"),pathTo:C.du.affiliate(y),icon:"16-paywalls-affiliates",dataTestId:"member-affiliate-link"}),j.push({value:"separator"},{value:(0,v.t)("sign_out"),label:(0,v.t)("sign_out"),onClick:function(){return(0,_.isFunction)(a)&&a()},icon:"16-sign-out"}),(0,I.jsx)(z.Lt,{size:"full",direction:"top-start",dataTestId:"user-profile-dropdown",className:"inline-flex",buttonWrapperClassName:"inline-flex",button:(0,I.jsxs)("div",{className:"flex items-center gap-[14px]","data-testid":"user-profile-button",children:[(0,I.jsx)(Je.s,{name:i,src:r,size:"10"}),(0,I.jsx)(Ze,{headline:u,name:i})]}),popperOptions:$e,children:(0,I.jsxs)("div",{"data-testid":"user-profile-menu",children:[(0,I.jsx)(z.Lt.Header,{children:(0,v.t)("sidebar_account")}),(0,I.jsx)(z.Lt.IconWithBadgeList,{options:j})]})})},Ke=function(e){var t=e.headline,r=void 0===t?"":t,n=e.imageUrl,i=void 0===n?"":n,o=e.name,a=void 0===o?"":o,s=e.onEditProfileClick,c=e.onSignOutClick,l=e.publicUid,u=void 0===l?"":l,d=e.showMemberBilling,p=void 0!==d&&d,f=e.canAccessAuthenticationPage,m=void 0!==f&&f,b=e.canShowPaywallsAffiliate,h=void 0!==b&&b;return(0,I.jsx)(Qe,{imageUrl:i,headline:r,name:a,onEditProfileClick:s,onSignOutClick:c,publicUid:u,showMemberBilling:p,canAccessAuthenticationPage:m,canShowPaywallsAffiliate:h})},Xe=r(91681),Ye=function(e){var t=e.children,r=e.className,n=(0,Xe.RE)();return(0,I.jsx)("div",{className:h()("border-c-sidebar bg-c-sidebar bottom-0 w-[inherit] border-t px-4 py-3",r),"data-testid":"profile-section",style:n,children:(0,I.jsx)("div",{className:"flex items-center justify-between",children:t})})},et=function(e){var t=e.headline,r=void 0===t?"":t,n=e.imageUrl,i=void 0===n?"":n,o=e.name,a=void 0===o?"":o,s=e.onEditProfileClick,c=e.onSignOutClick,l=e.publicUid,u=void 0===l?"":l,d=e.showMemberBilling,p=void 0!==d&&d,f=e.canAccessAuthenticationPage,m=void 0!==f&&f,b=e.canShowPaywallsAffiliate,h=void 0!==b&&b,v=e.children,y=e.className;return(0,I.jsxs)(Ye,{className:y,children:[(0,I.jsx)(Ke,{headline:r,imageUrl:i,name:a,onEditProfileClick:s,onSignOutClick:c,publicUid:u,showMemberBilling:p,canAccessAuthenticationPage:m,canShowPaywallsAffiliate:h}),v]})},tt=function(){var e=(0,ee.k6)(),t=(0,ee.TH)(),r=(0,c.wh)().currentCommunityMember,n=(null===r||void 0===r?void 0:r.policies)||{},i=(0,He.W)().room;if(!r)return null;return(0,I.jsx)(et,{headline:r.headline,imageUrl:r.avatar_url,name:r.name,onEditProfileClick:function(){return e.push(C.du.profile(t))},onSignOutClick:function(){window.location.href=(0,C.jE)()},publicUid:null===r||void 0===r?void 0:r.public_uid,showMemberBilling:null===n||void 0===n?void 0:n.can_access_billing,canAccessAuthenticationPage:null===n||void 0===n?void 0:n.can_access_authentication_page,canShowPaywallsAffiliate:null===n||void 0===n?void 0:n.can_show_paywalls_affiliate,children:!i&&(0,I.jsx)("div",{className:"ml-5",children:(0,I.jsx)(Ge.h,{})})})},rt=r(93187),nt=r(74339),it=r(41070),ot=function(e){var t=e.onSortEnd,r=e.spaceGroupWithSpaces,n=e.onSpaceSortEnd,i=e.updateBeforeSortStart,a=e.spaceGroupDragProperties,s=(0,c.wh)(),l=s.currentCommunity,u=s.currentCommunityMember,p=(0,m.j)(),b=(0,m.BT)(),h=(0,f.I)().isV3Enabled,v=b||!b&&!h,y=p&&h,g=(0,d.L)().refetchSpaceNotifications;return(0,o.useEffect)((function(){u&&g()}),[u,g]),!u&&l.is_private?null:(0,I.jsxs)(it.F,{children:[(!h||!p)&&(0,I.jsx)(Me.J,{}),(0,I.jsxs)(Le.S,{children:[v&&(0,I.jsx)(Ve,{}),y&&(0,I.jsx)(qe.C,{}),(0,I.jsx)(De,{distance:25,lockAxis:"y",onSortEnd:t,spaceGroupWithSpaces:r,onSpaceSortEnd:n,updateBeforeSortStart:i,spaceGroupDragProperties:a,helperClass:"!pointer-events-auto"}),(0,I.jsx)(Y,{})]}),(0,I.jsxs)(rt.G,{children:[(0,I.jsx)(nt.g,{}),!p&&(0,I.jsx)(tt,{}),(0,I.jsx)(Te.Q,{})]})]})};function at(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function st(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){at(o,n,i,a,s,"next",e)}function s(e){at(o,n,i,a,s,"throw",e)}a(void 0)}))}}function ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(r),!0).forEach((function(t){ut(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ft=function(){var e=dt((0,o.useState)({index:null,isDragging:!1}),2),t=e[0],r=e[1],n=(0,c.e2)(),f=n.helpers.isDataLoading,m=n.records,b=n.actions.refresh,h=(0,c.nT)(),v=h.helpers,y=v.isDataLoading,g=v.spaceVisibleOnSidebar,_=h.actions.refresh,j=(0,c.wh)(),x=j.currentCommunityMember,w=j.isLoading,O=dt((0,o.useState)([]),2),S=O[0],P=O[1],C=g(),k=y()||f()||w,N=(0,d.L)().refetchSpaceNotifications;(0,o.useEffect)((function(){x&&N()}),[x,N]),(0,o.useEffect)((function(){k||P(m.map((function(e){var t=!1,r=C.filter((function(t){return t.space_group_id===e.id}));return e.hide_non_member_spaces_from_sidebar&&(r=r.filter((function(e){return e.is_space_member})),t=C.length>0&&0===r.length),lt(lt({},e),{},{collapsed:(0,u.zb)({currentCommunityMember:x,spaceGroupId:e.id}),noJoinedSpaces:t,spaces:r})})))}),[k,C,m,x]);var A=function(){var e=st(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.spaceGroupId,n=t.orderedSpaceIds,e.prev=1,e.next=4,(0,l.t5)("/space_groups/".concat(r,"/reorder_spaces"),{method:"POST",body:JSON.stringify({order_array:n})});case 4:_(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error while reordering space: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=st(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.t5)("/space_groups/reorder",{method:"POST",body:JSON.stringify({order_array:t})});case 3:r({index:null,isDragging:!1}),b(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error while reordering space groups: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),D=(0,s.D)();return k||D?(0,I.jsx)(p.gi,{variant:"community-sidebar-v2"}):(0,I.jsx)(ot,{onSortEnd:function(e){var t=e.oldIndex,r=e.newIndex,n=(0,a.q)(S,t,r);P(n),E(n.map((function(e){return e.id.toString()})))},spaceGroupWithSpaces:S,onSpaceSortEnd:function(e){var t,r=e.oldIndex,n=e.newIndex,i=e.spaceGroup,o=S.map((function(e){if(e.id==i.id){var t=(0,a.q)(i.spaces,r,n);return lt(lt({},e),{},{spaces:t})}return e}));P(o);var s=null===(t=o.find((function(e){return e.id===i.id})))||void 0===t?void 0:t.spaces.map((function(e){return e.id}));A({spaceGroupId:i.id,orderedSpaceIds:s})},spaceGroupDragProperties:t,updateBeforeSortStart:function(e){r((function(t){return lt(lt({},t),{},{index:e.index,isDragging:!0})}))}})}},36168:(e,t,r)=>{"use strict";r.d(t,{E:()=>s});var n=r(94184),i=r.n(n),o=r(28175),a=r(85893),s=function(e){var t=e.children,r=(0,o.I)().isV3Enabled;return(0,a.jsx)("div",{className:i()("bg-c-sidebar mt-4 flex flex-col px-3",{"space-y-4":!r,"gap-y-6 lg:mt-6 lg:px-6":r}),children:t})}},11694:(e,t,r)=>{"use strict";r.d(t,{I:()=>E});var n=r(67294),i=r(94184),o=r.n(i),a=r(28803),s=r(49326),c=r(26953),l=r(86013),u=r(30414),d=r(30887),p=r(1002),f=r(85893),m=function(e){var t=e.position,r=e.isAdmin,n=e.canCreateSpaces,i=e.onCreateSpace,o=e.onCreateSpaceGroup,a=e.onToggle;if(!r&&!n)return null;return(0,f.jsx)(u.T,{children:(0,f.jsxs)(p.Lt,{className:"flex items-center",buttonClassName:"flex py-0.5 w-5 h-5 rounded hover:bg-black/10 focus-visible:bg-black/10 transition-colors",menuButtonEl:"button",buttonLabel:(0,l.t)("community_sidebar.add_space_or_space_group"),button:(0,f.jsx)(d.JO,{type:"16-add-new",size:16,"aria-hidden":"true",useWithFillCurrentColor:!0}),onToggle:a,children:[n&&(0,f.jsx)(p.Lt.ItemWithLink,{onClick:i,children:(0,l.t)("add_space")}),r&&(0,f.jsx)(p.Lt.ItemWithLink,{onClick:function(){o(t)},children:(0,l.t)("add_space_group")})]})})},b=function(e){var t=e.isActive,r=void 0!==t&&t,n=e.isCollapsed,i=void 0!==n&&n,a=(0,c.en)();return(0,f.jsx)("div",{className:o()("ml-1 mr-auto flex h-5 w-5 rounded py-0.5 transition-transform",{"hidden group-hover:flex":a,"hover:bg-c-sidebar-hover":!r,"rotate-0":i,"rotate-90":!i}),"aria-label":i?(0,l.t)("community_sidebar.expand_group",{group_name:"space"}):(0,l.t)("community_sidebar.collapse_group",{group_name:"space"}),children:(0,f.jsx)(d.JO,{type:"cheveron-right",size:16,"aria-hidden":!0})})};function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){var t,r=e.isDropdownOpen,n=e.canManage,i=e.children,a=(0,c.en)(),s=n?"max-w-[calc(100%-56px)]":"max-w-[calc(100%-32px)]",l=n?"group-hover:max-w-[calc(100%-56px)]":"group-hover:max-w-[calc(100%-32px)]";return(0,f.jsx)("div",{className:o()("flex w-full space-x-px",(t={},h(t,l,!r),h(t,s,r||!a),t)),children:i})},y=function(e){var t=e.isDropdownOpen,r=e.spaceGroup,n=e.isCollapsed,i=e.canManage;return(0,f.jsxs)(v,{isDropdownOpen:t,canManage:i,children:[(0,f.jsx)("h3",{className:"truncate text-sm font-semibold leading-5 text-current","data-id":r.id,"data-testid":"spaces-left-sidebar",title:r.name,children:r.name}),(0,f.jsx)(b,{isCollapsed:n})]})},g=r(96486),_=r(97012),j=["onAddMembersClick","onEditSpaceGroupClick","seeMembersLink","seeSpacesLink","onToggle","canManage"];function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var P=function(e){var t=e.onAddMembersClick,r=e.onEditSpaceGroupClick,n=e.seeMembersLink,i=e.seeSpacesLink,o=e.onToggle,a=e.canManage,s=S(e,j),c=(0,_.wh)().isViewOnlyMasquerading;return(0,f.jsxs)(p.Lt,w(w({className:"flex items-center",buttonClassName:"flex py-0.5 w-5 h-5 rounded hover:bg-black/10 focus-visible:bg-black/10 transition-colors",menuButtonEl:"button",buttonLabel:(0,l.t)("space_groups.view_space_group_options"),button:(0,f.jsx)(d.JO,{type:"16-menu-dots-horizontal",size:16,useWithFillCurrentColor:!0}),onToggle:o,popperOptions:{modifiers:[{name:"offset",options:{offset:[4,0]}}]}},s),{},{children:[(0,f.jsx)(p.Lt.ItemWithLink,{to:i,children:(0,l.t)("space_groups.see_spaces")}),a&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.Lt.ItemWithLink,{to:n,children:(0,l.t)("space_groups.see_members")}),!c&&(0,f.jsx)(p.Lt.ItemWithLink,{onClick:function(){return(0,g.isFunction)(t)&&t()},children:(0,l.t)("space_groups.add_members")}),!c&&(0,f.jsx)(p.Lt.ItemWithLink,{onClick:function(){return(0,g.isFunction)(r)&&r()},children:(0,l.t)("space_groups.edit_space_group")})]})]}))},C=r(31889),k=r(28175),N=function(e){var t=e.listId,r=void 0===t?"":t,n=e.isCollapsed,i=void 0!==n&&n,a=e.children,s=e.onCollapseToggle,c=e.isDragging,l=(0,_.wh)().currentCommunityMember,u=(0,k.I)().isV3Enabled;return(0,f.jsx)("button",{type:"button",className:o()("text-c-sidebar hover:text-c-sidebar hover:bg-c-sidebar-hover focus-visible:text-c-sidebar focus-visible:bg-c-sidebar-hover group mb-1 flex w-full select-none items-center justify-between text-sm font-semibold",{"cursor-grab":!c&&(0,C.vb)(l),"cursor-grabbing":c,"rounded-md px-2 py-1.5":!u,"rounded-lg px-4 py-1.5 transition-colors duration-200":u}),"data-testid":"space-group",onClick:s,"aria-expanded":!i,"aria-controls":r,children:a})};function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=e.canManage,r=void 0!==t&&t,i=e.children,l=e.id,u=e.isAdmin,d=void 0!==u&&u,p=e.isCollapsed,b=void 0!==p&&p,h=e.isDragging,v=void 0!==h&&h,g=e.listId,_=e.onAddMembersClick,j=void 0===_?function(){}:_,x=e.onCollapseToggle,w=void 0===x?function(){}:x,O=e.onCreateSpaceClick,S=void 0===O?function(){}:O,C=e.onCreateSpaceGroupClick,k=void 0===C?function(){}:C,A=e.onEditSpaceGroupClick,E=void 0===A?function(){}:A,D=e.position,T=e.shouldDisplayOptions,L=void 0===T||T,M=e.spaceGroup,R=(0,c.en)(),B=I((0,n.useState)(!1),2),U=B[0],F=B[1];return(0,f.jsxs)("div",{draggable:"false",id:l,children:[(0,f.jsxs)(N,{onCollapseToggle:w,isDragging:v,isCollapsed:b,listId:g,children:[(0,f.jsx)(y,{isDropdownOpen:U,canManage:r,spaceGroup:M,isCollapsed:b}),L&&(0,f.jsxs)("button",{type:"button",className:o()("ml-1 flex gap-1",{"hidden group-hover:flex group-focus-visible:flex":R&&!U}),onClick:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,f.jsx)(P,{onAddMembersClick:j,onEditSpaceGroupClick:E,seeMembersLink:s.Ts.members({spaceGroupSlug:M.slug}),seeSpacesLink:s.Ts.show({spaceGroupSlug:M.slug}),onToggle:F,canManage:r}),((0,a.yG)({spaceGroup:M})||d)&&(0,f.jsx)(m,{position:D,isAdmin:d,onCreateSpace:S,onCreateSpaceGroup:k,canCreateSpaces:(0,a.yG)({spaceGroup:M}),onToggle:F})]})]}),!b&&i]})}},78232:(e,t,r)=>{"use strict";r.d(t,{I:()=>p});var n=r(94184),i=r.n(n),o=r(28175),a=r(85893),s=["children"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=function(e){var t=e.children,r=d(e,s),n=(0,o.I)().isV3Enabled;return(0,a.jsx)("div",l(l({className:i()("flex flex-col",{"gap-y-1":n})},r),{},{children:t}))}},94623:(e,t,r)=>{"use strict";r.d(t,{z:()=>y});var n=r(94184),i=r.n(n),o=r(40160),a=r(74238),s=r(27806),c=r(2194),l=r(30887),u=r(97012),d=r(95071),p=r(31889),f=r(28175),m=r(60060),b=r(15218),h=r(93109),v=r(85893),y=function(e){var t=e.space,r=void 0===t?{id:"",emoji:"",name:"",is_private:!1,is_space_member:!1,show_lock_icon_for_non_members:!1,custom_emoji_url:"",custom_emoji_dark_url:""}:t,n=e.buttonLink,y=void 0===n?"/":n,g=e.spaceNotificationDetail,_=void 0===g?{unread_content_count:0,unread_notifications_count:0}:g,j=(0,h.i)(),x=j.getActiveInactiveClasses,w=j.getUnreadClasses,O=(0,u.wh)().currentCommunityMember,S=(0,p.vb)(O),P=(0,a.TC)().currentAppearance,C=(0,f.I)().isV3Enabled,k=null!==_&&void 0!==_?_:{},N=k.unread_content_count,I=k.unread_notifications_count,A=void 0===I?0:I,E=N>0,D=A>0,T=(0,c.$)({shouldShowLockIconForNonMembers:r.show_lock_icon_for_non_members&&!r.is_space_member,isPrivate:r.is_private,isAdmin:S}),L=(0,m.d)([null===r||void 0===r?void 0:r.id]).resetUnreadCount;return(0,v.jsx)("div",{draggable:"false",children:(0,v.jsxs)(o.OL,{className:function(e){return i()("group flex items-center py-1.5",x(e),w(E),{"my-px px-2":!C,"h-8.5 !rounded-lg px-4 transition-colors duration-75":C})},draggable:"false","data-id":r.id,to:y||{},onClick:function(e){(0,d.n2)(e)&&L()},children:[(0,v.jsx)(b.S,{className:"flex !h-5 !max-h-5 !w-5 items-center leading-none",emojiClassName:C?"text-sm justify-center":"text-lg pl-px",emoji:r.emoji,appearance:P,customEmojiUrl:r.custom_emoji_url,customEmojiDarkUrl:r.custom_emoji_dark_url,shouldUseLockIcon:T,lockIcon:(0,v.jsx)(l.JO,{size:16,type:"lock-v2"})}),(0,v.jsx)("h4",{className:i()("ml-2 max-w-full truncate text-current",{"text-sm":!C,"text-xs-plus":C,"font-normal":!E&&!C,"font-medium":!E&&C,"font-semibold":E}),"data-testid":"space-name",children:r.name}),(E||D)&&(0,v.jsx)(s.l,{isGray:!D,children:A>0?A:N>99?"99+":N})]})})}},93109:(e,t,r)=>{"use strict";r.d(t,{i:()=>l});var n=r(83660),i=r(74238),o="bg-transparent text-c-sidebar focus:text-c-sidebar hover:text-c-sidebar cursor-pointer hover:bg-c-sidebar-hover focus:bg-c-sidebar-hover rounded-md",a="bg-brand rounded-md text-brand-button focus:text-brand-button hover:text-brand-button cursor-default",s="bg-c-active-item-color rounded-md text-c-active-item-text-color focus:text-c-active-item-text-color hover:text-c-active-item-text-color cursor-default",c="rounded-md font-semibold",l=function(){var e=(0,n.q1)(),t=(0,i.TC)().currentTheme,r=e&&"custom"===t;return{getActiveInactiveClasses:function(e){return e?r?s:a:o},getUnreadClasses:function(e){return e?c:""}}}},15560:(e,t,r)=>{"use strict";r.d(t,{Q:()=>b});var n=r(97012),i=r(28175),o=r(26953),a=r(2593),s=r(74339),c=r(64605),l=r(94184),u=r.n(l),d=r(19421),p=r(91681),f=r(85893),m=function(e){var t=e.communitySlug,r=(0,p.RE)(),n=(0,i.I)().isV3Enabled;return(0,f.jsx)(d.t,{className:u()("bg-c-sidebar",{"border-c-sidebar border-t":!n,"justify-center !p-0":n}),communitySlug:t,styles:r})},b=function(e){var t=e.isPreviewMode,r=void 0!==t&&t,l=(0,i.I)().isV3Enabled,u=(0,p.RE)(),d=(0,c.F)(),b=(0,a.K)().shouldShowBranding,h=(0,o.BT)(),v=(0,n.wh)().currentCommunity,y=(null!==v&&void 0!==v?v:{}).slug;return d||b?l?(0,f.jsxs)("div",{style:u,className:"border-c-sidebar flex w-full flex-col gap-2 border-t px-6 pb-3.5 pt-4",children:[!h&&(0,f.jsx)(s.G,{isPreviewMode:r}),b&&(0,f.jsx)(m,{communitySlug:y})]}):(0,f.jsxs)("div",{className:"flex w-full flex-col",children:[!h&&(0,f.jsx)(s.G,{isPreviewMode:r}),b&&(0,f.jsx)(m,{communitySlug:y})]}):null}},98486:(e,t,r)=>{"use strict";r.d(t,{S:()=>b});var n=r(94184),i=r.n(n),o=r(30380),a=r(11960),s=r(31256),c=r(28175),l=r(1227),u=r(26953),d=r(2593),p=r(64605),f=function(){var e=(0,u.j)(),t=(0,a.k)().shouldShowTrialBanner,r=(0,s.Wk)().room,n=(0,d.K)().shouldShowBranding,i=(0,c.I)().isV3Enabled,o=(0,p.F)(),f=(0,l.f)(),m=function(){var e=(0,c.I)().isV3Enabled,t=(0,p.F)(),r=(0,d.K)().shouldShowBranding;return{goLiveButtonHeight:e?39:64,poweredByHeight:e?16:37,extraContainerSpacing:(e&&(r||t)?31:0)+(e&&r&&t?8:0)}}(),b=m.goLiveButtonHeight,h=m.poweredByHeight,v=m.extraContainerSpacing;return{paddingBottom:[f?48:0,e?i?63:48:0,e&&i?0:63,e&&t?48:0,e&&o?b:0,Boolean(r)?168:0,e?0:65,n?h:0,v].reduce((function(e,t){return e+t}),0)}},m=r(85893),b=function(e){var t=e.children,r=f();return(0,m.jsx)("div",{className:i()("h-full"),style:r,children:(0,m.jsx)(o.E,{className:"h-full",options:{scrollbars:{autoHide:"leave",autoHideDelay:0}},children:t})})}},8692:(e,t,r)=>{"use strict";r.d(t,{v:()=>f});var n=r(94184),i=r.n(n),o=r(96486),a=r(86013),s=r(85893),c=function(e){var t=e.name,r=e.src,n=e.className;return(0,s.jsx)("img",{loading:"eager",alt:(0,a.t)("community_logo_alt",{community_name:t}),className:i()("max-h-6",n),src:r})};function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p="logo",f=function(e){var t=e.communityName,r=e.logoType,n=e.logoUrl,a=e.as,l=void 0===a?"button":a,d=e.onLogoClick,f=l;return(0,s.jsx)(f,u(u({className:"w-full min-w-0",onClick:function(){return(0,o.isFunction)(d)&&d()}},"button"===l&&{buttonProps:{type:"button"}}),{},{children:r===p&&n?(0,s.jsx)(c,{name:t,src:n}):(0,s.jsxs)("div",{className:"text-c-sidebar flex items-center gap-2",children:[n&&(0,s.jsx)("div",{children:(0,s.jsx)(c,{name:t,src:n})}),(0,s.jsx)("div",{className:"w-full min-w-0",children:(0,s.jsx)("h1",{"data-testid":"title-name",className:i()("text-c-sidebar truncate text-left text-xl font-semibold normal-case leading-7 tracking-normal"),children:t})})]})}))}},52096:(e,t,r)=>{"use strict";r.d(t,{e:()=>Z});var n=r(96486),i=r(86013),o=r(94184),a=r.n(o),s=r(91681),c=r(16743),l=r(85893),u=function(e){var t,r=e.logoUrl,n=e.iconUrl,i=e.bgColor,o=e.name,u=void 0===o?"":o,d=e.rootUrl,p=e.isActive,f=void 0!==p&&p,m=e.notificationCount,b=void 0===m?0:m,h=(0,s.Gf)().backgroundColor,v=Boolean(r),y=Boolean(n);return(0,l.jsx)("a",{href:d,children:(0,l.jsxs)("div",{className:a()("relative flex items-center justify-center p-3",{"bg-tertiary rounded":f}),children:[(0,l.jsxs)("div",{className:"flex w-full items-center gap-6",children:[(0,l.jsx)("div",{className:"text-badge flex h-[40px] w-[40px] min-w-[40px] cursor-pointer items-center justify-center rounded uppercase",style:v||y?{}:{backgroundColor:i},children:(t=u.charAt(0),v?(0,l.jsx)("img",{loading:"lazy",src:r,alt:""}):y?(0,l.jsx)("img",{loading:"lazy",src:n,style:{width:"40",height:"40"},alt:""}):t)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:(0,l.jsx)(c.Z.LabelMd,{weight:"semibold",children:u})}),(0,l.jsx)(c.Z.LabelSm,{color:"text-light",children:d})]})]}),b>0&&(0,l.jsx)("span",{className:"text-badge flex h-[20px] min-w-[20px] items-center justify-center rounded-full bg-red-500 font-bold",style:{borderColor:h},children:(0,l.jsx)(c.Z.LabelSm,{color:"#fff",children:b})})]})})},d=r(14578),p=function(e){var t=e.onClickDone,r=(0,d.U)().communities;return(0,l.jsxs)("div",{className:"relative flex h-full w-full flex-col gap-1 py-1.5",children:[(0,l.jsxs)("div",{className:"mb-3.5 flex w-full cursor-pointer items-center justify-end px-3",children:[(0,l.jsx)("div",{className:"w-full flex-1",children:(0,l.jsx)(c.Z.LabelLg,{weight:"semibold",children:(0,i.t)("mobile_community_switcher.my_communities")})}),(0,l.jsx)("button",{type:"submit",onClick:t,children:(0,l.jsx)(c.Z.LabelSm,{weight:"semibold",children:(0,i.t)("mobile_community_switcher.done")})})]}),r.map((function(e){return(0,l.jsx)(u,{isActive:e.is_current_community,rootUrl:e.root_url,notificationCount:e.notificationCount,logoUrl:e.logo_attachment_url,iconUrl:e.icon_attachment_url,bgColor:e.brand_color,name:e.name},e.id)}))]})},f=r(72675),m=r(53448),b=function(){var e=(0,f.dd)();return(0,l.jsxs)(m.u_,{isOpen:e.visible,onClose:e.hide,contentPortalId:"mobile-community-switcher-modal",title:(0,i.t)("community_switcher_title"),children:[(0,l.jsx)(m.u_.Overlay,{}),(0,l.jsx)(m.u_.Content,{size:"xl",children:(0,l.jsx)(m.u_.Body,{className:"!px-3",children:(0,l.jsx)(p,{onClickDone:e.hide})})})]})},h=f.gk.create((function(){return(0,l.jsx)(b,{})})),v=r(26953),y=r(74238),g=r(94645),_=r(28175),j=r(30887),x=r(1002);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P={direction:"bottom-end",transitionWrapperClassName:"mt-2 md:-mt-2"},C={direction:"bottom-start",transitionWrapperClassName:"mt-2 md:-mt-2 !w-[16.25rem] !-left-2.5",menuWrapperClassName:"!px-0 !mt-0"},k=function(e){var t=e.children,r=e.hasFullWidth,n=void 0===r||r,o=e.dropDownOptions,s=void 0===o?[]:o,c=(0,_.I)().isV3Enabled,u=c?C:P;return(0,l.jsx)(x.Lt,O(O({},u),{},{size:"full",popperOptions:{strategy:"absolute"},className:a()("h-full",{"w-full":n}),buttonWrapperClassName:"flex w-full h-full px-4 py-3",buttonClassName:"w-full focus-visible:outline-secondary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 rounded-md",button:(0,l.jsxs)("div",{className:"flex w-full items-center justify-between",children:[t,(0,l.jsx)(j.JO,{className:"text-c-sidebar",size:16,type:"caret-down-bold"})]}),buttonDataTestId:"community-menu",children:(0,l.jsxs)("div",{"data-testid":"community-dropdown-menu",children:[!c&&(0,l.jsx)(x.Lt.Header,{children:(0,i.t)("community_header_dropdown.title")}),(0,l.jsx)(x.Lt.IconWithBadgeList,{options:s})]})}))},N=r(8692),I=r(31889),A=r(49326),E=r(67294),D={membersIcon:"members-v2",postsIcon:"16-text-square",marketingHubIcon:"16-send",spacesCrudIcon:"all-spaces",moderationIcon:"settings-moderation",liveStreamIcon:"live-stream-settings",workflowsIcon:"lightning",paywallsIcon:"16-paywalls",plansIcon:"16-plans",analyticsIcon:"16-analytics",affiliatesIcon:"16-paywalls-affiliates",settingsIcon:"16-settings",customizeThemeIcon:"16-palette",toggleThemeLightIcon:"16-moon",toggleThemeDarkIcon:"16-sun",viewAsIcon:"16-eye-open",inviteMemberIcon:"16-invite-member"},T={membersIcon:"20-users-v3",postsIcon:"20-doc-v3",marketingHubIcon:"16-send",spacesCrudIcon:"20-spaces-v3",moderationIcon:"20-shield-v3",liveStreamIcon:"20-live-v3",workflowsIcon:"20-flash-v3",paywallsIcon:"20-currency-v3",plansIcon:"20-card-v3",analyticsIcon:"20-analytics-v3",affiliatesIcon:"20-affiliates-v3",settingsIcon:"20-settings-v3",toggleThemeIcon:"20-moon-v3",toggleThemeLightIcon:"20-moon-v3",toggleThemeDarkIcon:"20-moon-v3",customizeThemeIcon:"20-color-palette-v3",viewAsIcon:"20-open-eye-v3",inviteMemberIcon:"20-user-plus-v3"},L=function(){var e=(0,_.I)().isV3Enabled;return(0,E.useMemo)((function(){return e?T:D}),[e])},M=r(97012),R=r(65771),B=r(1963),U=r(28536),F=r(24185),z={value:"separator"};function V(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var W=function(e){var t,r,o,a,s,c,l=e.isAdmin,u=e.isModerator,d=e.memberCount,p=e.moderationCount,f=e.showToggleTheme,m=e.showCustomizeTheme,b=e.isWorkflowsEnabled,h=(0,y.TC)(),g=function(e){var t=e.showToggleTheme,r=e.currentAppearance,o=e.toggleAppearance,a=void 0===o?n.noop:o,s=L(),c=s.toggleThemeLightIcon,l=s.toggleThemeDarkIcon,u=(0,_.I)().iconSize;return t?[{value:r,label:r===y.OR.LIGHT?(0,i.t)("sidebar_switch_to_dark_mode"):(0,i.t)("sidebar_switch_to_light_mode"),onClick:a,icon:r===y.OR.LIGHT?c:l,iconSize:u}]:[]}({currentAppearance:h.currentAppearance,toggleAppearance:h.toggleAppearance,showToggleTheme:f}),j=(0,B.Vu)(),x=j.isBannerVisible,w=function(e){var t=e.showBanner;return{icon:L().viewAsIcon,iconSize:(0,_.I)().iconSize,label:(0,i.t)("view_as"),onClick:function(){setTimeout((function(){t()}),0)},value:"viewAs"}}({showBanner:j.showBanner}),O=function(e){var t=L().moderationIcon,r=(0,_.I)().iconSize,n={value:(0,i.t)("sidebar_moderation"),label:(0,i.t)("sidebar_moderation"),pathTo:"/settings/moderation",icon:t,iconSize:r};return e&&(n.badge=String(e)),n}(p),S=function(e){var t=e.isVisible,r=e.link,n=e.icon,i=e.iconSize,o=e.title;return t?[{value:o,label:o,pathTo:r,icon:n,iconSize:i}]:[]}((t=(0,M.wh)().currentCommunityMember,r=(0,_.I)().iconSize,o=(0,v.ef)(),a=L().postsIcon,s=Boolean(!o&&((0,I.vb)(t)||(0,I.I$)(t))),c=(0,i.t)("settings.posts.title"),{isVisible:s,link:A.qk.postsDashboard.index(),icon:a,iconSize:r,title:c})),P=(0,R.E)().isCommunityOnPlus,C=(0,M.wh)(),k=C.currentCommunitySettings,N=C.currentCommunity,E=function(e){var t=e.memberCount,r=e.showCustomizeTheme,n=e.moderation,o=e.toggleTheme,a=e.viewAs,s=e.post,c=e.isCommunityOnPlus,l=e.isWorkflowsEnabled,u=e.isSpacesCrudEnabled,d=e.isAffiliatesEnabled,p=e.isBannerVisible,f=e.isMarketingHubEmailBroadcastsEnabled,m=L(),b=m.membersIcon,h=m.marketingHubIcon,v=m.spacesCrudIcon,y=m.liveStreamIcon,g=m.workflowsIcon,j=m.paywallsIcon,x=m.plansIcon,w=m.analyticsIcon,O=m.affiliatesIcon,S=m.settingsIcon,P=m.customizeThemeIcon,C=m.inviteMemberIcon,k=(0,_.I)().iconSize,N=(0,F.TH)().pathname,I=[],E={value:(0,i.t)("section_members"),label:(0,i.t)("section_members"),pathTo:A.Gp.index(),icon:b,iconSize:k};return t&&(E.badge=String(t)),I.push(E),f&&I.push({value:(0,i.t)("sidebar_email"),label:(0,i.t)("sidebar_email"),pathTo:A.lA.email.broadcast,icon:h,iconSize:k}),I.push.apply(I,V(s)),u&&I.push({value:(0,i.t)("settings.spaces.title"),label:(0,i.t)("settings.spaces.title"),pathTo:(0,A.vB)(),icon:v,iconSize:k}),I.push(n),I.push({value:(0,i.t)("sidebar_live_streams"),label:(0,i.t)("sidebar_live_streams"),pathTo:"/settings/live_streams",icon:y,iconSize:k}),l&&I.push({value:(0,i.t)("sidebar_workflows"),label:(0,i.t)("sidebar_workflows"),pathTo:"/settings/workflows",icon:g,iconSize:k}),I.push({value:(0,i.t)("sidebar_paywalls"),label:(0,i.t)("sidebar_paywalls"),pathTo:"/settings/paywalls",icon:j,iconSize:k}),I.push({value:(0,i.t)("pricing_plans.title"),label:c?(0,i.t)("settings.billing.plans.plus"):(0,i.t)("settings.billing.plans.title"),pathTo:(0,A.xn)(),icon:x,iconSize:k}),I.push({value:(0,i.t)("analytics.analytics"),label:(0,i.t)("analytics.analytics"),pathTo:"/settings/analytics",icon:w,iconSize:k}),d&&I.push({value:(0,i.t)("sidebar_paywalls_affiliates"),label:(0,i.t)("sidebar_paywalls_affiliates"),pathTo:"/settings/affiliates_settings",icon:O,iconSize:k}),I.push({value:(0,i.t)("sidebar_settings"),label:(0,i.t)("sidebar_settings"),pathTo:"/settings",icon:S,iconSize:k}),I.push(z),I.push.apply(I,V(o)),r&&I.push({value:(0,i.t)("customize_theme.title"),label:(0,i.t)("customize_theme.title"),pathTo:"/settings/theme",icon:P,iconSize:k}),I.push(z),p||I.push(a),I.push({value:(0,i.t)("sidebar_invite_member"),label:(0,i.t)("sidebar_invite_member"),pathTo:"".concat(A.lA.members.invite,"?from=").concat(N),icon:C,iconSize:k}),I}({memberCount:d,showCustomizeTheme:m,toggleTheme:g,viewAs:w,moderation:O,post:S,isCommunityOnPlus:P,isWorkflowsEnabled:b,isSpacesCrudEnabled:Boolean(k&&k.spaces_crud_enabled),isAffiliatesEnabled:Boolean(null===N||void 0===N?void 0:N.affiliates_feature_flag_enabled),isBannerVisible:x,isMarketingHubEmailBroadcastsEnabled:(0,U.U)()});return l?E:u?function(e){var t=e.moderation,r=e.showToggleTheme,n=e.toggleTheme,i=e.post;return[].concat(G(i),[t],G(r?[z]:[]),G(n))}({moderation:O,showToggleTheme:f,toggleTheme:g,post:S}):g},Z=function(e){var t=e.communityName,r=void 0===t?"":t,i=e.isAdmin,o=void 0!==i&&i,a=e.isModerator,s=void 0!==a&&a,c=e.logoType,u=void 0===c?"icon":c,d=e.logoUrl,p=e.onLogoClick,m=e.showToggleTheme,b=void 0!==m&&m,_=e.showCustomizeTheme,j=void 0!==_&&_,x=e.memberCount,w=e.moderationCount,O=(0,v.ef)(),S=(0,f.dd)(h),P=(0,y.wC)().display_community_switcher,C=(0,g.I)(),I=W({isAdmin:o,isModerator:s,memberCount:x,moderationCount:w,showToggleTheme:b,showCustomizeTheme:j,isWorkflowsEnabled:C}),A=O&&P;return A?(0,l.jsxs)("div",{className:"flex w-full items-center px-4",children:[(0,l.jsx)(N.v,{communityName:r,logoType:u,logoUrl:d,onLogoClick:function(){S.show()}}),(0,l.jsx)(k,{hasFullWidth:!1,dropDownOptions:I})]}):(0,n.isEmpty)(I)?(0,l.jsx)("div",{className:"px-4",children:(0,l.jsx)(N.v,{communityName:r,logoType:u,logoUrl:d,onLogoClick:function(){if(A)return S.show();p&&p()}})}):(0,l.jsx)(k,{dropDownOptions:I,children:(0,l.jsx)(N.v,{communityName:r,logoType:u,logoUrl:d,as:"div"})})}},47761:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var n=r(94184),i=r.n(n),o=r(30414),a=r(28175),s=r(91681),c=r(85893),l=function(e){var t=e.hasBorder,r=void 0!==t&&t,n=e.hasPadding,l=void 0===n||n,u=e.isSticky,d=void 0===u||u,p=e.children,f=e.className,m=(0,s.RE)(),b=(0,a.I)().isV3Enabled;return(0,c.jsx)(o.T,{children:(0,c.jsx)("div",{className:i()(f,"top-0 z-30 flex h-16 min-h-[4rem] items-center justify-between gap-2",{"border-c-sidebar border-b":r,"px-4":l,sticky:d,"bg-c-sidebar":!b}),"data-testid":"top_section_container",style:m,children:p})})}},45771:(e,t,r)=>{"use strict";r.d(t,{J:()=>f});var n=r(98929),i=r(97012),o=r(31889),a=r(83660),s=r(37933),c=r(26953),l=r(74238),u=r(52096),d=r(47761),p=r(85893),f=function(){var e=(0,i.wh)(),t=e.currentCommunity,r=e.currentCommunityMember,f=e.currentCommunitySettings,m=void 0===f?{}:f,b=(0,s.C)().goToCommunityRootPath,h=(0,l.TC)().currentAppearance,v=(0,a.q1)(),y=(0,o.vb)(r),g=(0,o.I$)(r),_=(0,n._v)(t),j=_.url,x=_.type,w=m.dark_mode_enabled,O=(0,c.ef)(),S=(0,a.PN)(),P=null!==t&&void 0!==t?t:{},C=P.member_count,k=P.moderation_count,N=P.dark_icon_url,I=P.dark_logo_url,A=Boolean(w),E=j;return h===l.OR.DARK&&S&&("logo"===x&&I?E=I:"icon"===x&&N&&(E=N)),(0,p.jsx)(d.F,{hasBorder:!0,hasPadding:!1,children:(0,p.jsx)(u.e,{communityName:null===t||void 0===t?void 0:t.name,isAdmin:y,isModerator:g,logoType:x,logoUrl:E,showToggleTheme:A,showCustomizeTheme:v&&!O,onLogoClick:b,memberCount:C,moderationCount:k})})}},90882:(e,t,r)=>{"use strict";r.d(t,{x:()=>V});var n=r(86013),i=r(96486),o=r(24185),a=r(26953),s=r(30887),c=r(23744),l=r(74284),u=r(16743),d=r(67294),p=r(58533),f=r(40160),m=r(59393),b=r(24897),h=r(97012),v=r(95071),y=r(25401),g=r(49326),_=r(76063),j=r(3249),x=r(34974),w=r(5295),O=r(42175),S=r(24587),P=r(47372),C=r(85893),k=function(){var e=(0,o.UO)().uuid,t=(0,O.wO)().onClose,r=(0,h.wh)(),i=r.currentCommunityMember,a=r.isLoading,c=(0,_.T)({openChatRoomUuid:e&&"new"!==e?e:null}),l=c.chatRooms,u=c.hasNextPage,x=c.isLoading,k=c.onEventReceive,N=c.fetchNextPage;(0,b.s)({channel:"ChatRoomChannel",onMessageReceive:function(e){k(e,null===i||void 0===i?void 0:i.id)},community_member_id:null===i||void 0===i?void 0:i.id,canCreateConnection:!0},[l]);var I=a||x,A=(0,d.useMemo)((function(){return l.filter((function(e){return e.last_message}))}),[l]);if(I)return(0,C.jsx)(w.a,{center:!0});if(!A.length)return(0,C.jsx)("div",{className:"h-[532px] 2xl:h-[592px]",children:(0,C.jsx)(P.t,{})});return(0,C.jsx)("div",{id:"scrollableDmsDiv",className:"h-[532px] overflow-auto 2xl:h-[592px]",children:(0,C.jsx)(p.Z,{style:{height:"100%",overflow:"hidden"},scrollThreshold:.8,next:N,hasMore:u,dataLength:A.length,scrollableTarget:"scrollableDmsDiv",loader:(0,C.jsx)(w.a,{center:!0}),children:A.map((function(e){var r,o,a,c,l=e.chat_room_name,u=e.chat_room_kind,d=e.last_message,p=e.current_participant,b=void 0===p?{}:p,h=e.other_participants_preview,_=void 0===h?[]:h,x=e.id,w=e.unread_messages_count,O=e.uuid,P=u===m.g8;return(0,C.jsx)(f.rU,{className:"chat-room-item hover:bg-tertiary block cursor-pointer px-5 py-2.5",onClick:function(e){(0,v.n2)(e)||t()},to:(0,g.so)({uuid:O}),"data-testid":"chat-room-dm-list",children:(0,C.jsxs)("div",{className:"flex items-start justify-between",children:[(0,C.jsxs)("div",{className:"flex",children:[P?(0,C.jsx)("div",{className:"isolate mr-4 mt-1",children:(0,C.jsx)(j.g,{src:null===(r=_[0])||void 0===r?void 0:r.avatar_url,name:null===(o=_[0])||void 0===o?void 0:o.name,alt:(0,n.t)("alt_avatar"),status:null===(a=_[0])||void 0===a?void 0:a.status,size:"8"})}):(0,C.jsx)(S.C,{user1:_[0],user2:_[1]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"flex items-center space-x-2",children:(0,C.jsx)("p",{className:"text-darkest truncate text-sm font-medium ",children:l})}),(0,C.jsx)("div",{className:"mt-0.5",children:(0,C.jsxs)("p",{className:"message-body chat-message-word-wrap",children:[d.sender.community_member_id===(null===i||void 0===i?void 0:i.id)?(0,n.t)("messaging.you"):d.sender.name,": ",d.body||(null===(c=d.rich_text_body)||void 0===c?void 0:c.circle_ios_fallback_text)]})})]})]}),(0,C.jsxs)("div",{className:"flex h-full flex-col items-end justify-start",children:[(0,C.jsx)("p",{className:"text-default flex min-w-[86px] items-end justify-end text-xs",children:(0,y.TF)(d.sent_at)}),(0,C.jsx)("div",{className:"mr-1 flex",children:b.muted?(0,C.jsx)("div",{className:"chat-room__mute",children:(0,C.jsx)(s.JO,{type:"mute-notifications"})}):w>0&&(0,C.jsx)("span",{className:"rounded font-semibold leading-none text-white text-xxs bg-v2-danger p-[3px] min-w-[20px] text-center mt-1 mr-0.5","data-testid":"unread-messages-count",children:w})})]})]})},x)}))})})},N=function(){return(0,C.jsx)("div",{className:"chat-room__error",children:(0,n.t)("chat_space.error_message")})},I=function(){return(0,C.jsx)(x.S,{renderFunc:N,children:(0,C.jsx)(k,{})})},A=function(){var e=(0,c.z)(),t=(0,o.k6)();return(0,C.jsxs)("div",{className:"h-full w-full","data-testid":"chat-dropdown",children:[(0,C.jsxs)("div",{className:"border-primary flex h-16 items-center justify-between border-b px-6",children:[(0,C.jsx)(u.Z.TitleSm,{weight:"bold",children:(0,n.t)("sidebar_all_dms")}),e&&(0,C.jsx)(l.Y,{content:(0,n.t)("new_message"),children:(0,C.jsx)("button",{type:"submit",onClick:function(){t.push("/messages/new")},children:(0,C.jsx)(s.JO,{type:"plus-big",className:"cursor-pointer","data-testid":"new-message"})})})]}),(0,C.jsx)(I,{})]})},E=r(15455),D=r(19736),T=r(62720),L=r(28121),M=r(94184),R=r.n(M),B=r(93109),U=r(27806),F=function(e){var t=e.badgeText,r=e.dataTestId,n=e.iconName,o=e.isActive,a=void 0!==o&&o,c=e.label,l=e.onClick,u=e.rightSideContent,d=e.isGray,p=void 0!==d&&d,f=e.shouldBold,m=void 0!==f&&f,b=e.ariaLabel,h=(0,B.i)().getActiveInactiveClasses,v=!(0,i.isUndefined)(t)&&Number(t)>0&&!u;return(0,C.jsxs)("button",{type:"button","data-testid":r,onClick:l,className:R()("my-px flex w-full items-center px-2 py-1.5 text-sm",h(a)),"aria-labelledby":c,children:[(0,C.jsx)(s.JO,{type:n,size:16,"aria-hidden":!0}),(0,C.jsx)("div",{className:"ml-2 flex-1 text-left",children:(0,C.jsx)("h3",{className:R()("max-w-full truncate text-sm text-current",{"font-normal":!m,"font-bold":m}),children:c})}),v&&(0,C.jsx)(U.l,{ariaLabel:b,isGray:p,children:t}),!t&&u&&u]})},z=function(e){var t=e.badgeText,r=e.isGrayBadge,n=void 0!==r&&r,i=e.dataTestId,o=e.iconName,a=e.label,c=e.linkTo,l=e.disabled,u=void 0!==l&&l,d=e.isActive,p=void 0!==d&&d,m=(0,B.i)().getActiveInactiveClasses;return(0,C.jsxs)(f.OL,{"data-testid":i,to:c,className:function(e){return R()("my-px flex w-full cursor-pointer items-center px-2 py-1.5 text-sm",m(e||p))},onClick:function(e){u&&e.preventDefault()},title:a,children:[(0,C.jsx)(s.JO,{type:o,size:16,"aria-hidden":!0}),(0,C.jsx)("div",{className:"ml-2 flex-1",children:(0,C.jsx)("h3",{className:"max-w-full truncate text-sm font-normal text-current",children:a})}),t&&(0,C.jsx)(U.l,{isGray:n,children:t})]})},V=function(e){var t=e.allDMsBadgeText,r=void 0===t?"":t,c=e.hasCurrentCommunityMember,l=void 0!==c&&c,u=e.isHomePageEnabled,d=void 0!==u&&u,p=e.isMessagingEnabled,f=void 0!==p&&p,m=e.isOnboardingActive,b=void 0!==m&&m,h=e.notificationBadgeText,v=void 0===h?"":h,y=e.onGettingStartedClick,_=e.onGettingStartedClose,j=e.onSearchClick,x=e.shouldShowMemberDirectory,w=void 0!==x&&x,S=e.shouldShowOnboarding,P=void 0!==S&&S,k=e.shouldShowSpaceDirectory,N=void 0!==k&&k,I=e.shouldShowCoursesDirectory,M=void 0!==I&&I,R=e.onNotificationClick,B=e.resetNewNotificationsCount,U=e.disabled,V=void 0!==U&&U,q=e.shouldShowChatThreadsTab,G=void 0!==q&&q,H=e.shouldShowActiveHomeLink,W=void 0!==H&&H,Z=e.unreadThreadsCount,J=e.shouldShowAllEventsPage,$=void 0!==J&&J,Q=e.shouldShowLeaderboard,K=void 0!==Q&&Q,X=(0,o.k6)(),Y=(0,a.Fs)(),ee=X.location.pathname.includes((0,g.yg)()),te=X.location.pathname.includes((0,g.Ng)()),re=X.location.pathname.includes((0,g.Rj)()),ne=X.location.pathname.includes((0,g.AM)()),ie=(0,T.U)().isDmsV3Enabled,oe=(0,a.j)(),ae=!oe;return(0,C.jsxs)("div",{className:"mt-2.5 px-3",children:[!oe&&(0,C.jsx)(F,{label:(0,n.t)("search_item"),onClick:function(){return(0,i.isFunction)(j)&&j()},iconName:"16-search"}),P&&(0,C.jsx)(F,{label:(0,n.t)("getting_started"),iconName:"lightning",isActive:b,onClick:function(){(0,i.isFunction)(y)&&!V&&y()},rightSideContent:(0,C.jsx)("button",{type:"button",className:"flex h-5 w-5 rounded py-0.5 transition-colors hover:bg-black/10 focus:bg-black/10",onClick:function(){(0,i.isFunction)(_)&&!V&&_()},"aria-label":(0,n.t)("close"),children:(0,C.jsx)(s.JO,{type:"16-close",size:16})})}),d&&(0,C.jsx)(z,{label:(0,n.t)("home_page.title"),linkTo:"/home",iconName:"home-v2",disabled:V,isActive:W}),l&&(0,C.jsxs)(C.Fragment,{children:[!oe&&(0,C.jsx)(O.i9,{button:(0,C.jsx)(F,{dataTestId:"notifications-menu",label:(0,n.t)("notifications.page_title"),iconName:"sidebar-bell",badgeText:v,ariaLabel:(0,n.t)("community_sidebar.unread_notifications",{count:Number(v)}),onClick:function(){Y&&(0,i.isFunction)(R)&&!V&&R()},isActive:re}),onOpen:B,disabled:V||!(0,i.isFunction)(R),children:(0,C.jsx)("div",{className:"flex h-full w-full flex-col","data-testid":"notifications-drawer",children:(0,C.jsx)(E.u,{containerElement:"dropdown",isDropdown:!0})})}),f&&!oe&&(ie?(0,C.jsx)(F,{dataTestId:"chat-menu",label:(0,n.t)("sidebar_all_dms"),iconName:"16-messages",badgeText:r,ariaLabel:(0,n.t)("community_sidebar.unread_messages",{count:Number(r)}),onClick:function(){return X.push((0,g.co)({url:(0,g.yg)()}))},isActive:ee}):(0,C.jsx)(O.i9,{button:(0,C.jsx)(F,{dataTestId:"chat-menu",label:(0,n.t)("sidebar_all_dms"),iconName:"16-messages",badgeText:r,ariaLabel:(0,n.t)("community_sidebar.unread_messages",{count:Number(r)}),onClick:function(){return Y&&X.push((0,g.yg)())},isActive:ee}),disabled:V,children:(0,C.jsx)(A,{})})),G&&ae&&(0,C.jsx)(F,{dataTestId:"chat-threads-menu",label:(0,n.t)("chat_threads"),iconName:"16-chat-threads",onClick:function(){return X.push((0,g.Ng)())},isActive:te,badgeText:String(Z),ariaLabel:(0,n.t)("community_sidebar.unread_messages",{count:Number(Z)})}),Y&&(0,C.jsx)(O.i9,{button:(0,C.jsx)(F,{dataTestId:"bookmarks-menu",label:(0,n.t)("header_v3.bookmarks"),iconName:"16-bookmark",onClick:function(){return X.push((0,g.AM)())},isActive:ne}),disabled:V,children:(0,C.jsx)(L.BookmarksList,{})})]}),N&&(0,C.jsx)(z,{label:(0,n.t)("sidebar_spaces"),linkTo:"/spaces",iconName:"all-spaces",disabled:V}),w&&(0,C.jsx)(z,{label:(0,n.t)("members_directory.menu.title"),linkTo:(0,D.UI)(),iconName:"members-v2",disabled:V}),$&&(0,C.jsx)(z,{label:(0,n.t)("events.title"),linkTo:"/events",iconName:"16-calendar",disabled:V}),M&&(0,C.jsx)(z,{label:(0,n.t)("courses.directory.title"),linkTo:"/courses",iconName:"16-book",disabled:V,isGrayBadge:!0}),K&&(0,C.jsx)(z,{label:(0,n.t)("leaderboard.title"),linkTo:"/leaderboard?period=7_days",iconName:"16-analytics",disabled:V,isGrayBadge:!0})]})}},27806:(e,t,r)=>{"use strict";r.d(t,{l:()=>a});var n=r(94184),i=r.n(n),o=r(85893),a=function(e){var t=e.children,r=e.isGray,n=void 0!==r&&r,a=e.ariaLabel;return(0,o.jsx)("div",{className:i()("ml-auto min-w-[1.75rem] rounded px-1.5 py-1 text-center text-[11px] font-semibold leading-[11px]",{"bg-c-sidebar-badge text-c-sidebar-badge-text":!n,"border-primary bg-primary group-hover:bg-primary text-dark my-[-1px] border":n}),"data-testid":"unread-count","aria-label":a,children:t})}},59665:(e,t,r)=>{"use strict";r.d(t,{R:()=>g});var n=r(67294),i=r(96486),o=r(86013),a=r(72675),s=r(71362),c=r(49326),l=r(85244),u=r(20254),d=r(14834),p=r(73097),f=r(20695),m=r(15455),b=r(85893),h=function(e){var t=e.containerElement,r=e.communityMemberId,i=e.newNotificationCount,h=(0,a.dd)(),v=(0,d.f)(f.dL),y=v.newNotificationCount,g=v.setNewNotificationCount,_=v.onNotificationEventReceive,j=v.resizeNotificationWindow,x=(0,l.j)(),w=x.prependTitle,O=x.resetTitleToOriginal;return(0,n.useEffect)((function(){g(i)}),[i]),(0,u.I)(r,_),(0,p.w)(j),(0,n.useEffect)((function(){document.title=y?w("(".concat(y,") ")):O()}),[y]),(0,b.jsx)(s.d,{maskClosable:!0,hideHeader:!0,noWrapperPadding:!0,open:h.visible,onClose:h.hide,children:(0,b.jsxs)("div",{className:"notifications__wrapper--drawer",id:t+"NotificationWrapperOuter","data-testid":"notifications-drawer",children:[(0,b.jsx)(m.u,{handleClose:h.hide,containerElement:"drawer"},"notification-".concat(h.visible)),(0,b.jsx)("div",{className:"notifications__footer",children:(0,b.jsx)("span",{children:(0,b.jsx)("a",{href:(0,c.Rj)(),children:(0,b.jsx)("div",{children:(0,o.t)("view_all_notifications")})})})})]})})},v=a.gk.create((function(e){var t=e.containerElement,r=e.communityMemberId,n=e.newNotificationCount;return(0,b.jsx)(h,{containerElement:t,communityMemberId:r,newNotificationCount:n})})),y=r(97012),g=function(){var e=(0,y.wh)(),t=e.currentCommunity,r=e.currentCommunityMember,o=(0,d.f)(),s=o.newNotificationCount,c=o.fetchNewNotificationsCount,l=o.resetNewNotificationsCount,p=o.onNotificationEventReceive;(0,u.I)(null===r||void 0===r?void 0:r.id,p),(0,n.useEffect)((function(){r&&c(t.id)}),[t.id,r]);var f=(0,a.dd)(v),m=(0,n.useCallback)((function(){(0,i.isEmpty)(r)||(0,i.isEmpty)(t)||f.show({communityMemberId:r.id,newNotificationCount:s})}),[r,t,f]);return{newNotificationCount:s,toggleNotificationDrawer:m,resetNewNotificationsCount:l}}},37179:(e,t,r)=>{"use strict";r.d(t,{I:()=>d});var n=r(24185),i=r(44920),o=r(55408),a=r(81303),s=r(31889),c=r(57783),l=r(97012),u=r(19736),d=function(){var e=(0,i.kc)().isOnboardingAvailable,t=(0,l.wh)(),r=t.currentCommunity,d=t.currentCommunityMember,p=t.currentCommunitySettings,f=(0,c.m)(),m=Boolean((0,n.$B)(u.Fy.onboarding())),b=(0,o.S)(),h=Boolean((0,s.vb)(d)),v=Boolean(h&&e),y=(0,a.D)(),g=h||(null===p||void 0===p?void 0:p.public_events_page);return{shouldShowOnboarding:v,isOnboardingActive:m,hideOnboardingConfirmationModal:b,currentCommunity:r,currentCommunitySettings:p,currentCommunityMember:d,isAdmin:h,spotlightSearch:y,toggleSpaceGroupDrawer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;f.show({position:e})},showSpotlightSearch:function(){y.show()},shouldShowAllEventsPage:g}}},89457:(e,t,r)=>{"use strict";r.d(t,{C:()=>j});var n=r(67294),i=r(86013),o=r(97012),a=r(19736),s=r(94184),c=r.n(s),l=r(40160),u=r(93109),d=r(30887),p=r(85893),f=function(e){var t=e.text,r=e.linkTo,n=e.icon,i=e.isActive,o=void 0!==i&&i,a=e.isDisabled,s=void 0!==a&&a,f=(0,u.i)().getActiveInactiveClasses;return(0,p.jsxs)(l.OL,{to:r,title:t,className:function(e){return c()("h-8.5 flex w-full items-center gap-2 !rounded-lg px-4 py-1.5 transition-colors duration-200",f(e||o))},onClick:function(e){s&&e.preventDefault()},"aria-disabled":s,children:[(0,p.jsx)(d.JO,{type:n,size:20}),(0,p.jsx)("h4",{className:"text-xs-plus max-w-full truncate font-medium text-current",children:t})]})},m=r(31889),b=r(44920),h=["isPresent","linkTo"];function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var j=function(e){var t,r,s,c=e.isDisabled,l=void 0!==c&&c,u=(t=(0,o.wh)().currentCommunityMember,r=(0,b.kc)().isOnboardingAvailable,s=Boolean((0,m.vb)(t)),{shouldShowOnboarding:Boolean(s&&r)}).shouldShowOnboarding,d=(0,o.wh)().currentCommunity,v=(null!==d&&void 0!==d?d:{}).home_page_enabled,g=(0,n.useMemo)((function(){return[{text:(0,i.t)("getting_started"),linkTo:a.Fy.onboarding(),icon:"20-todo-list-v3",isPresent:u,isDisabled:l},{text:(0,i.t)("feed"),linkTo:a.Fy.feed(),icon:"20-feed-v3",isPresent:v,isDisabled:l}]}),[u,l,v]);return g.some((function(e){return e.isPresent}))?(0,p.jsx)("nav",{"aria-label":(0,i.t)("secondary_navigation_bar"),children:(0,p.jsx)("ul",{className:"bg-c-sidebar mt-4 flex list-none flex-col gap-y-1 px-3 lg:mt-6 lg:px-6",children:g.map((function(e){var t=e.isPresent,r=e.linkTo,n=_(e,h);return t&&(0,p.jsx)("li",{children:(0,p.jsx)(f,y({linkTo:r},n))},r)}))})}):null}},93187:(e,t,r)=>{"use strict";r.d(t,{G:()=>a});var n=r(94184),i=r.n(n),o=r(85893),a=function(e){var t=e.children,r=e.className;return(0,o.jsx)("div",{className:i()("fixed bottom-0 flex w-[inherit] flex-col items-center bg-transparent sm:max-w-[21.25rem] md:max-w-[18.5rem]",r),children:t})}},74339:(e,t,r)=>{"use strict";r.d(t,{G:()=>h,g:()=>j});var n=r(94184),i=r.n(n),o=r(86013),a=r(31256),s=r(19175),c=r(97012),l=r(31889),u=r(28175),d=r(30887),p=r(55675),f=r(91681),m=r(64605),b=r(85893),h=function(e){var t=e.isPreviewMode,r=void 0!==t&&t,n=e.inSettings,h=void 0!==n&&n,v=(0,a.IO)(),y=v.isLoading,g=v.isMonthlyHourLimitReached,_=v.isStorageLimitReached,j=g||_,x=(0,s.t)(),w=(0,f.RE)(),O=(0,m.F)(),S=(0,u.I)().isV3Enabled,P=(0,c.wh)(),C=P.currentCommunityMember,k=P.isViewOnlyMasquerading,N=!(0,l.vb)(C)&&(y||j);return O?(0,b.jsx)("div",{className:i()("bg-c-sidebar flex w-full items-center justify-between ",{"pl-4 pr-0":h,"cursor-not-allowed":k,"border-c-sidebar border-t px-4 py-3":!S}),style:w,children:(0,b.jsx)(p.z,{full:!0,onClick:function(){x.show()},variant:"secondary-light",disabled:N,className:i()("!border-dark hover:bg-secondary px-4 py-[8.5px] font-medium transition-colors duration-150 ease-in-out",{"pointer-events-none":r||k}),children:(0,b.jsxs)("div",{className:"text-selector-active flex items-center justify-center",children:[(0,b.jsx)(d.JO,{type:"16-go-live",size:16,className:"text-default mr-2"}),(0,o.t)("sidebar_footer_v3.go_live")]})})}):null},v=r(47634),y=r(11909),g=r(38870),_=r(16743),j=function(){var e,t,r,n=(0,a.Wk)(),s=n.room,c=n.canManage,l=n.handleNavigateToRoom,f=n.handleEndStream,m=(0,u.I)().isV3Enabled,h=(0,v.tv)({title:(0,o.t)("live_streams.".concat((0,y.vX)(s),"_ended.confirm")),onConfirm:f}),j=h.confirmModal,x=h.onConfirmButtonClick;return s?(0,b.jsxs)("div",{className:i()("bg-sidebar-footer-live-indicator w-full p-4",{"mb-4 max-w-[272px] rounded-md":!m,"mb-1 max-w-[272px] rounded-xl":m}),children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(g.s,{size:"6",src:null===s||void 0===s||null===(e=s.creator)||void 0===e?void 0:e.avatar_url,name:null===s||void 0===s||null===(t=s.creator)||void 0===t?void 0:t.name}),(0,b.jsx)(_.Z.BodySm,{color:"text-white max-w-[15ch]",truncate:!0,children:null===s||void 0===s||null===(r=s.creator)||void 0===r?void 0:r.name}),(0,b.jsx)(d.JO,{type:"24-live-waveform",size:24})]}),(0,b.jsx)("div",{className:"bg-c-sidebar-badge flex items-center justify-center rounded-[4px] px-2 py-1",children:(0,b.jsx)("span",{className:"text-xxs font-bold uppercase leading-3 text-white",children:(0,o.t)("sidebar_footer_v3.live")})})]}),(0,b.jsx)(_.Z.BodyMd,{color:"text-white line-clamp-2",weight:"font-semibold",children:null===s||void 0===s?void 0:s.name}),(0,b.jsx)(p.z,{full:!0,className:"!bg-circle mt-4",onClick:l,children:(0,o.t)("sidebar_footer_v3.join")}),c&&(0,b.jsxs)(_.Z.BodyXs,{color:"text-white mt-2",children:[(0,o.t)("live_streams.room.cant_join"),(0,b.jsx)("button",{type:"button",className:"ml-1 cursor-pointer text-xs font-semibold text-white",onClick:x,children:(0,o.t)("live_streams.room.".concat((0,y.vX)(s),".end"))})]}),j]}):null}},64605:(e,t,r)=>{"use strict";r.d(t,{F:()=>a});var n=r(31256),i=r(97012),o=r(31889),a=function(){var e=(0,i.wh)(),t=e.isLoading,r=e.currentCommunityMember,a=(0,n.Wk)().room;return!t&&(0,o.U8)(r)&&!a}},41070:(e,t,r)=>{"use strict";r.d(t,{F:()=>s});var n=r(94184),i=r.n(n),o=r(28175),a=r(85893),s=function(e){var t=e.children,r=(0,o.I)().isV3Enabled;return(0,a.jsx)("div",{className:i()("bg-c-sidebar fixed flex h-full max-h-full flex-col",{"w-sidebar":!r,"w-sidebar-v3":r}),children:t})}},91681:(e,t,r)=>{"use strict";r.d(t,{Gf:()=>s,RE:()=>c});var n=r(16765),i=r(97819),o=r(74238),a=function(){var e,t,r,i=(0,o.TC)(),a=i.customColors,s=i.isCustomTheme,c=i.currentTheme,l=i.currentAppearance,u=(null===(e=a[l])||void 0===e?void 0:e.sidebar_background_color)||"#fff",d=(null===o.v||void 0===o.v||null===(t=o.v[c])||void 0===t||null===(r=t[l])||void 0===r?void 0:r["--color-community-sidebar-background"])||"#fff";return s?(0,n.Vi)(u):(0,n.Vi)(d)},s=function(){var e=a().toHex();return(0,i.W)()?{backgroundColor:e}:{}},c=function(){var e,t=(e=a()).isDark()?e.lighten(.1).toHex():e.darken(.1).toHex();return(0,i.W)()?{borderColor:t}:{}}},89001:(e,t,r)=>{"use strict";r.d(t,{lV:()=>s,Bb:()=>c,zo:()=>l});var n=r(86013),i=r(97012),o="space_access_management",a=function(e,t){return t&&"private"===e?(0,n.t)([o,"tooltip_icon.private"]):t&&"secret"===e?(0,n.t)([o,"tooltip_icon.secret"]):(0,n.t)([o,"tooltip_icon.open"])},s=function(e){return{id:e.id,name:e.name,icon:(t=e.visibility,r=e.is_private,r&&"private"===t?"16-lock":r&&"secret"===t?"16-eye-closed":"16-members-bis"),tooltipText:a(e.visibility,e.is_private)};var t,r},c=function(e){return{id:e.id,name:e.name,spaces:[]}},l=function(e){var t=e.serializeSpaceGroup,r=e.serializeSpace,n=(0,i.nT)(),o=n.records,a=n.isLoading,s=(0,i.e2)(),c=s.records,l=s.isLoading,u=[],d={},p={};return c.forEach((function(e){var r=t(e);u.push(r),d[e.id]=r})),o.forEach((function(e){var t,n=r(e);null===(t=d[e.space_group_id])||void 0===t||t.spaces.push(n),p[n.id]=n})),{options:u,spaceGroupIndex:d,spaceIndex:p,spaceRecords:o,spaceGroupRecords:c,isLoading:a||l}}},84146:(e,t,r)=>{"use strict";r.d(t,{i:()=>ae});var n=r(67294),i=r(86013),o=r(79049),a=r(85893);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=r(94184),u=r.n(l),d=r(87536),p="space_access_management",f=function(e){e()};function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=(0,n.createContext)(null);h.displayName="SpaceAccessManagementContext";var v=function(e){var t=e.options,r=e.children,i=e.parentFieldName,o=void 0===i?"space_group_ids":i,s=e.childFieldName,c=void 0===s?"space_ids":s,l=(0,d.Gc)(),u=l.watch,p=l.setValue,f={spaceGroups:(0,d.Dq)({name:o,shouldUnregister:!1}),spaces:(0,d.Dq)({name:c,shouldUnregister:!1})},b=m((0,n.useState)(""),2),v=b[0],y=b[1],g=u(o),_=u(c),j=function(e){return-1!==e.trim().toLowerCase().search(v.trim().toLowerCase())},x={options:t,parentFieldName:o,childFieldName:c,fieldArrayFields:f,spaceGroupsSelected:g,spacesSelected:_,addSpaceGroups:function(e){f.spaceGroups.append(e)},addSpaces:function(e){f.spaces.append(e)},removeSpaceGroup:function(e){var t=g.findIndex((function(t){return t===e}));-1!==t&&f.spaceGroups.remove(t)},removeSpaces:function(e){var t=_.filter((function(t){return!e.includes(t)}));p(c,t)},isSpaceGroupSelected:function(e){return g.includes(e)},isSpaceSelected:function(e){return _.includes(e)},searchText:v,setSearchText:y,getIsFromSearch:j,getHasAnySearchResults:function(){return t.some((function(e){return j(e.name)||e.spaces.some((function(e){return j(e.name)}))}))},hasSpaceGroupUnselectedSpaces:function(e){return e.spaces.some((function(e){return!_.includes(e.id)}))}};return(0,a.jsx)(h.Provider,{value:x,children:r})},y=function(){var e=(0,n.useContext)(h);if(!e)throw new Error("useSpaceManagementContext must be used within a SpaceManagementContextProvider");return e},g=r(16743),_=function(){return(0,a.jsxs)("div",{className:"flex w-full flex-auto flex-col justify-center gap-y-3 px-6 py-12 text-center",children:[(0,a.jsx)(g.Z.TitleSm,{weight:"semibold",color:"text-selector-active",children:(0,i.t)([p,"empty_result.title"])}),(0,a.jsx)(g.Z.LabelSm,{color:"text-selector-active",children:(0,i.t)([p,"empty_result.subtitle"])})]})},j=function(e){var t=e.children,r=e.isDisabled,n=void 0!==r&&r,i=e.onClick,o=e.className,s=void 0===o?"":o,c=Boolean(i);return(0,a.jsx)("li",{className:u()("group",s),children:(0,a.jsx)("button",{type:"button",className:u()("flex w-full list-none items-center justify-between rounded-md p-2 text-sm transition-colors md:px-4",{"hover:bg-tertiary group-focus-within:bg-tertiary cursor-pointer":!n&&c,"cursor-default opacity-50":n}),onClick:function(){!n&&(null===i||void 0===i||i())},children:t})})},x=r(55675),w=function(e){var t=e.actionText,r=void 0===t?(0,i.t)("add"):t,n=e.isDisabled,o=void 0!==n&&n;return(0,a.jsx)(x.z,{type:"button",small:!0,variant:"text",className:u()("hidden opacity-0 transition-opacity",{"focus:opacity-100 group-hover:opacity-100 md:block":!o}),children:r})},O=r(30887),S=r(87958),P=function(e){var t=e.children;return(0,a.jsx)("span",{className:"flex items-center gap-2 text-left","data-testid":"space-list-title",children:t})},C=function(e){var t=e.icon,r=void 0===t?void 0:t,n=e.tooltipText,i=void 0===n?void 0:n,o=e.children;return(0,a.jsxs)(P,{children:[(0,a.jsxs)("span",{className:"flex h-4 w-4",children:[r&&i&&(0,a.jsx)(S.T,{className:"flex",placement:"top",delay:300,content:i,interactive:!1,children:(0,a.jsx)(O.JO,{type:r,size:16,className:"text-default"})}),r&&!i&&(0,a.jsx)(O.JO,{type:r,size:16,className:"text-default"})]}),o]})},k=function(e){var t=e.space,r=e.spaceGroupId,n=e.onAddChild,i=void 0===n?function(e){e()}:n,o=e.onRemoveChild,a=void 0===o?function(e){e()}:o,s=t.id,c=t.name,l=y(),u=l.isSpaceSelected,d=l.addSpaces,p=l.getIsFromSearch,f=l.removeSpaceGroup,m=l.removeSpaces,b=u(s),h=function(){d(s)},v=p(c),g=function(){f(r),m([s])};return{isChecked:b,isSpaceFound:v,onAddClick:function(){i(h,t)},onRemoveClick:function(){a(g,t)}}},N=["spaceGroupId","onRemoveChild"];function I(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var A=function(e){var t=e.spaceGroupId,r=e.onRemoveChild,n=void 0===r?function(e){e()}:r,o=I(e,N),s=o.name,c=o.icon,l=o.tooltipText,d=k({space:o,spaceGroupId:t,onRemoveChild:n}),f=d.isChecked,m=d.onRemoveClick,b=d.isSpaceFound;return(0,a.jsxs)(j,{onClick:m,isDisabled:!f,className:u()({hidden:!f||!b}),children:[(0,a.jsx)(C,{icon:c,tooltipText:l,children:(0,a.jsx)(g.Z.LabelSm,{children:s})}),f&&(0,a.jsx)(w,{actionText:(0,i.t)([p,"remove"])})]})},E=function(e){var t=e.spaceGroup,r=e.onAddParent,n=void 0===r?function(e){e()}:r,i=e.onRemoveParent,o=void 0===i?function(e){e()}:i,a=t.id,s=t.name,c=t.spaces,l=y(),u=l.isSpaceGroupSelected,d=l.isSpaceSelected,p=l.addSpaceGroups,f=l.addSpaces,m=l.getIsFromSearch,b=l.removeSpaceGroup,h=l.removeSpaces,v=m(s)||c.some((function(e){return m(e.name)})),g=c.map((function(e){return e.id})),_=function(){p(a);var e=g.filter((function(e){return!d(e)}));f(e)},j=(c||[]).filter((function(e){return d(e.id)})),x=u(a),w=x&&j.length===c.length,O=function(){b(a),h(g)};return{isChecked:x,isFromSearch:v,isAllSpacesSelected:w,spacesAlreadySelected:j,onAddClick:function(){return n(_,t)},onRemoveClick:function(){o(O,t)}}},D=["onRemoveParent"];function T(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var L=function(e){var t=e.onRemoveParent,r=void 0===t?function(e){e()}:t,n=T(e,D),o=n.name,s=E({spaceGroup:n,onRemoveParent:r}),c=s.isChecked,l=s.isFromSearch,d=s.isAllSpacesSelected,f=s.spacesAlreadySelected,m=s.onRemoveClick,b=!c&&0===f.length||!l,h=c&&d?(0,i.t)("space_access_management.list.spaces_counter.all_spaces"):(0,i.t)("space_access_management.list.spaces_counter",{count:f.length});return(0,a.jsxs)(j,{isDisabled:!c,onClick:c?m:void 0,className:u()({hidden:b}),children:[(0,a.jsx)(P,{children:(0,a.jsxs)(g.Z.LabelSm,{weight:"semibold",children:[o,(0,a.jsx)("span",{className:"font-normal",children:h})]})}),c&&(0,a.jsx)(w,{actionText:(0,i.t)([p,"remove"])})]})};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var U=r(26953),F=function(e){var t=e.spaceGroupId,r=e.space,n=e.onAddChild,i=void 0===n?function(e){e()}:n,s=e.onRemoveChild,c=void 0===s?function(e){e()}:s,l=r.name,d=r.icon,p=r.tooltipText,f=k({space:r,spaceGroupId:t,onAddChild:i,onRemoveChild:c}),m=f.onRemoveClick,b=f.onAddClick,h=f.isChecked,v=f.isSpaceFound,y=h?m:b;return(0,a.jsxs)(j,{className:u()({hidden:!v}),isDisabled:!1,onClick:y,children:[(0,a.jsx)(C,{icon:d,tooltipText:p,children:(0,a.jsx)(g.Z.LabelSm,{children:l})}),(0,a.jsx)(o.r,{as:"span",checked:h})]})},z=function(e){var t=e.isToggleEnabled,r=void 0===t||t,n=e.spaceGroup,i=e.onAddParent,s=void 0===i?function(e){e()}:i,c=e.onRemoveParent,l=void 0===c?function(e){e()}:c,d=n.name,p=E({spaceGroup:n,onAddParent:s,onRemoveParent:l}),f=p.isChecked,m=p.onAddClick,b=p.onRemoveClick,h=p.isFromSearch,v=f?b:m;return(0,a.jsxs)(j,{className:u()({hidden:!h}),isDisabled:!r,onClick:v,children:[(0,a.jsx)(P,{children:(0,a.jsx)(g.Z.LabelSm,{weight:"semibold",children:d})}),r&&(0,a.jsx)(o.r,{as:"span",checked:f})]})},V=r(93014),q=["topicsCountEnabled","onAddChild","spaceGroupId"];function G(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var H=function(e){var t=e.topicsCountEnabled,r=void 0!==t&&t,n=e.onAddChild,o=void 0===n?function(e){e()}:n,s=e.spaceGroupId,c=G(e,q),l=c.name,d=c.icon,f=c.topicsCount,m=c.tooltipText,b=k({onAddChild:o,space:c,spaceGroupId:s}),h=b.isChecked,v=b.isSpaceFound,y=b.onAddClick;return(0,a.jsx)(a.Fragment,{children:r&&f&&f>=V.tt?(0,a.jsx)(S.T,{content:(0,i.t)("settings.topics.space_management.topics_limit_reached"),interactive:!1,children:(0,a.jsx)(j,{isDisabled:!0,className:u()({hidden:h||!v}),children:(0,a.jsx)(C,{icon:d,tooltipText:m,children:(0,a.jsx)(g.Z.LabelSm,{children:l})})})}):(0,a.jsxs)(j,{isDisabled:h,onClick:y,className:u()({hidden:h||!v}),children:[(0,a.jsx)(C,{icon:d,tooltipText:m,children:(0,a.jsx)(g.Z.LabelSm,{children:l})}),!h&&(0,a.jsx)(w,{actionText:(0,i.t)([p,"add"])})]})})},W=["isButtonEnabled","onAddParent"];function Z(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var J=function(e){var t=e.isButtonEnabled,r=void 0===t||t,n=e.onAddParent,o=void 0===n?function(e){e()}:n,s=Z(e,W),c=s.name,l=E({spaceGroup:s,onAddParent:o}),d=l.isChecked,f=l.onAddClick,m=l.isFromSearch,b=l.isAllSpacesSelected;return(0,a.jsxs)(j,{isDisabled:d||!r,onClick:f,className:u()({hidden:d&&b||!m}),children:[(0,a.jsx)(P,{children:(0,a.jsx)(g.Z.LabelSm,{weight:"semibold",children:c})}),!d&&r&&(0,a.jsx)(w,{actionText:(0,i.t)([p,"add"])})]})};function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X="space_access_management",Y=function(e){var t=e.title,r=void 0===t?(0,i.t)([X,"no_access"]):t,n=e.actionText,o=void 0===n?(0,i.t)([X,"add_all"]):n,s=e.shouldShowButton,c=void 0===s||s,l=e.onClick;return(0,a.jsxs)("div",{className:"flex w-full items-center justify-between px-6 py-5",children:[(0,a.jsx)(g.Z.LabelXxs,{weight:"semibold",color:"text-light",children:r}),c&&(0,a.jsx)(x.z,{type:"button",variant:"text",small:!0,onClick:function(){null===l||void 0===l||l()},className:"ring-secondary focus:ring-1",children:o})]})},ee=function(e){var t=e.children,r=e.className;return(0,a.jsx)("div",{className:u()("md:bg-primary md:divide-primary md:divide-y",r),children:t})},te=["children","className"];function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oe(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ae=Object.assign((function(e){var t=e.children,r=e.className,n=oe(e,te);return(0,a.jsx)(v,ne(ne({},n),{},{children:(0,a.jsx)(ee,{className:u()("border-primary flex flex-col overflow-hidden md:rounded-lg md:border",r),children:t})}))}),{Header:function(e){var t=e.children;return(0,a.jsx)("div",{className:"focus-within:ring-secondary bg-primary border-primary mb-4 flex justify-between rounded-lg border px-3 py-2 focus-within:ring-1 focus-within:ring-inset md:mb-0 md:rounded-none md:rounded-t-lg md:border-0 md:px-6 md:py-3.5",children:t})},SearchBar:function(){var e=y(),t=e.setSearchText,r=e.searchText;return(0,a.jsxs)("div",{className:"text-default flex w-full items-center gap-3",children:[(0,a.jsx)("span",{className:"flex h-4 w-4",children:(0,a.jsx)(O.JO,{type:"16-search",size:16,className:"text-default"})}),(0,a.jsx)("input",{className:"md:bg-primary placeholder:text-light w-full border-0 bg-inherit p-0 text-sm leading-none outline-none placeholder:opacity-100 focus:ring-0",type:"text",placeholder:(0,i.t)([p,"search"]),onChange:function(e){t(e.target.value)},value:r,autoFocus:!0}),r.length>0&&(0,a.jsx)("span",{className:"flex h-4 w-4",children:(0,a.jsx)(O.JO,{type:"16-close",size:16,className:"text-default cursor-pointer",onClick:function(){t("")}})})]})},AllAccessToggle:function(){var e="all_access_enabled",t=s((0,n.useState)(!1),2),r=t[0],c=t[1],l=function(){c((function(e){return!e}))};return(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"checkbox",name:e,id:"checkbox-".concat(e),checked:r,onChange:l,className:"hidden"}),(0,a.jsxs)("label",{className:"m-0 flex cursor-pointer select-none items-center gap-3",htmlFor:"checkbox-".concat(e),children:[(0,a.jsx)("span",{className:"text-default text-sm tracking-tighter",children:(0,i.t)(["space_access_management","all_access"])}),(0,a.jsx)(o.r,{as:"span",checked:r,onChange:l})]})]})},Body:function(e){var t=e.children,r=e.className;return(0,y().getHasAnySearchResults)()?(0,a.jsx)("div",{className:u()("flex w-full flex-auto flex-col overflow-hidden",r),children:t}):(0,a.jsx)(_,{})},ListHeader:function(e){var t=e.children,r=e.className;return(0,a.jsx)("div",{className:u()("divide-primary border-primary bg-primary sticky top-0 z-10 hidden divide-x md:flex md:border-b",r),children:t})},ListHeaderColumn:Y,ListHeaderColumnNoAccess:function(e){var t=e.title,r=void 0===t?(0,i.t)([p,"no_access"]):t,n=e.shouldShowAddAllButton,o=void 0===n||n,s=e.onAddAll,c=y(),l=c.options,u=c.parentFieldName,m=c.childFieldName,b=(0,d.Gc)().setValue,h=[],v=[];l.forEach((function(e){h.push(e.id),e.spaces.forEach((function(e){v.push(e.id)}))}));var g=function(){b(u,h),b(m,v)};return(0,a.jsx)(Y,{title:r,actionText:(0,i.t)([p,"add_all"]),onClick:function(){(s||f)(g)},shouldShowButton:o})},ListHeaderColumnAccessGranted:function(e){var t=e.title,r=void 0===t?(0,i.t)([p,"access"]):t,n=e.onRemoveAll,o=void 0===n?function(e){e()}:n,s=y(),c=s.parentFieldName,l=s.childFieldName,u=(0,d.Gc)().setValue,m=function(){u(c,[]),u(l,[])};return(0,a.jsx)(Y,{title:r,actionText:(0,i.t)([p,"remove_all"]),onClick:function(){(o||f)(m)}})},List:function(e){var t=e.children,r=e.className,n=e.dataTestId;return(0,a.jsx)("ul",{className:u()("list-none py-2 md:p-2",r),"data-testid":n,children:t})},ListContainer:function(e){var t=e.children,r=e.className;return(0,a.jsx)("div",{className:u()("md:divide-primary md:grid md:flex-auto md:grid-cols-2 md:divide-x",r),children:t})},ListNoAccess:function(e){var t=e.shouldShowAddParentButton,r=void 0===t||t,n=e.shouldShowEmptySpaceGroups,i=e.onAddParent,o=e.onAddChild,s=e.className,c=y(),l=c.options,d=c.hasSpaceGroupUnselectedSpaces;return(0,a.jsx)(ae.List,{className:u()("hidden md:block",s),dataTestId:"list-space-access-denied",children:l.map((function(e){return d(e)||n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J,Q({onAddParent:null!==i&&void 0!==i?i:f,isButtonEnabled:r},e),"list-no-access-".concat(e.id)),e.spaces.map((function(t){return(0,a.jsx)(H,Q({onAddChild:null!==o&&void 0!==o?o:f,spaceGroupId:e.id,topicsCountEnabled:!0},t),"list-no-access-".concat(e.id,"-").concat(t.id))}))]}):null}))})},ListAccessGranted:function(e){var t=e.onRemoveParent,r=e.onRemoveChild,n=e.className,i=y().options;return(0,a.jsx)(ae.List,{className:u()("hidden md:block",n),dataTestId:"list-space-access-granted",children:i.map((function(e){var n;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L,R(R({},e),{},{onRemoveParent:t||f}),"list-access-granted_".concat(e.id)),null===(n=e.spaces)||void 0===n?void 0:n.map((function(t){return(0,a.jsx)(A,R(R({},t),{},{spaceGroupId:e.id,onRemoveChild:r||f}),"list-access-granted_".concat(e.id,"-").concat(t.id))}))]})}))})},ListMobile:function(e){var t=e.shouldShowAddParentToggle,r=void 0===t||t,i=e.onAddParent,o=e.onAddChild,s=e.onRemoveParent,c=e.onRemoveChild,l=y().options;return(0,U.Be)()?null:(0,a.jsx)(ae.List,{className:"md:hidden",children:l.map((function(e){return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(z,{isToggleEnabled:r,spaceGroup:e,onAddParent:i,onRemoveParent:s},"list-mobile-".concat(e.id)),e.spaces.map((function(t){return(0,a.jsx)(F,{spaceGroupId:e.id,space:t,onAddChild:o,onRemoveChild:c},"list-mobile-".concat(e.id,"-").concat(t.id))}))]},e.id)}))})},EmptyResult:_})},69447:(e,t,r)=>{"use strict";r.d(t,{M:()=>i});var n=r(86013),i=[{value:"all",label:(0,n.t)("notification_settings.all.label"),description:(0,n.t)("notification_settings.all.description")},{value:"mentions",label:(0,n.t)("notification_settings.mentions.label"),description:(0,n.t)("notification_settings.mentions.description")},{value:"never",label:(0,n.t)("notification_settings.never.label"),description:(0,n.t)("notification_settings.never.description")}]},98843:(e,t,r)=>{"use strict";r.d(t,{_$:()=>j,B_:()=>g,z1:()=>a});var n=r(88767),i=r(34128),o=r(49326),a=function(e){var t=e.space,r=void 0===t?{}:t,a=e.options,s=void 0===a?{}:a,c=o.av.spaces.update({id:r.id});return(0,n.useMutation)((function(e){return(0,i.aU)(c,{space:e})}),s)},s=r(64687),c=r.n(s),l=r(86013),u=r(23560),d=r.n(u),p=r(40754),f=r(97012),m=r(61345),b=r(98090),h=r(21809);function v(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){v(o,n,i,a,s,"next",e)}function s(e){v(o,n,i,a,s,"throw",e)}a(void 0)}))}}var g=function(e){var t,r=e.space,a=e.setOpenNotificationsDropdown,s=void 0===a?function(){}:a,u=r.name,v=r.id,g=(0,n.useQueryClient)(),_=(0,f.wh)(),j=_.currentUser,x=_.currentCommunityMember,w=(0,f.T4)({spaceId:v}).refetch,O=(0,f.e2)().actions.refresh,S=(0,f.nT)().actions.refresh,P=(0,p.m)(r.chat_room_uuid).refetchChatRoom,C=(0,b.u)(r.chat_room_uuid).refetchChatParticipants,k=(0,h.p)(),N=k.success,I=k.error,A=(0,n.useMutation)((function(){return(0,i.Cu)(o.av.spaceMembers.joinSpace({spaceId:v}))}),{onSuccess:(t=y(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:O(),S(),g.invalidateQueries(["spaces"]),(0,m.Ug)(r)&&(P(),C()),N((0,l.t)("joined_space",{space_name:r.name})),null!==x&&void 0!==x&&x.profile_confirmed_at?d()(s)&&s(!0):window.location.href=(0,o.lk)({params:{return_to:window.location.href,new_state:!0}});case 8:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),onError:function(e){I(e.message||(0,l.t)("join_space_failed",{space_name:u}))}}),E=function(){var e=y(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=4;break}window.location.href=(0,o.j)(),e.next=5;break;case 4:return e.abrupt("return",A.mutateAsync());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{joinSpace:E,isSubmitting:A.isLoading}},_=r(35754),j=function(){return(0,_.p)()}},2470:(e,t,r)=>{"use strict";r.d(t,{S:()=>a});var n=r(74238),i=r(15218),o=r(85893),a=function(e){var t=e.spaces,r=e.valueKey,a=void 0===r?"slug":r,s=(0,n.TC)().currentAppearance;return t.map((function(e){var t=e.name;return{richLabel:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.S,{className:"mr-1 inline !h-5 !w-5 align-text-top",emoji:e.emoji,appearance:s,customEmojiUrl:e.custom_emoji_url,customEmojiDarkUrl:e.custom_emoji_dark_url}),(0,o.jsx)("span",{children:e.name})]}),label:t,value:e[a]}}))}},48929:(e,t,r)=>{"use strict";r.d(t,{AO:()=>P,NA:()=>C,y4:()=>N,cy:()=>k});var n=r(67294),i=r(86013),o=r(88767),a=r(1320),s=r(11909),c=r(49326),l=r(67144),u=r(21809),d=["data","isLoading","isError","error","refetch"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){var t=(0,l.R)().liveStreamsHlsEnabled?s.VM.HLS_SPECTATOR:s.VM.SPECTATOR,r=(0,u.p)(),h=r.error,v=r.success,y=b((0,n.useState)(null),2),g=y[0],_=y[1],j=b((0,n.useState)(null),2),x=j[0],w=j[1],O=(0,o.useQuery)(c.av.liveStreams.show({id:e}),{refetchInterval:!g&&1e4}),S=O.data,P=O.isLoading,C=O.isError,k=O.error,N=O.refetch,I=m(O,d),A=b((0,n.useState)(!1),2),E=A[0],D=A[1],T=(0,o.useMutation)((function(e){return a.Qk.join({id:null===S||void 0===S?void 0:S.id,role:e,forReactQuery:!0})}),{onSuccess:function(e){_(e)},onError:function(e){var t=e.firstErrorDetail?"".concat((0,i.t)("live_streams.room.join_error"),": ").concat(e.firstErrorDetail):"".concat((0,i.t)("live_streams.room.join_error"),".");h(t)}}),L=(0,o.useMutation)((function(){return a.Qk.leave({id:null===S||void 0===S?void 0:S.id,participantId:null===g||void 0===g?void 0:g.id,forReactQuery:!0})}),{onSuccess:function(e){return _(e)},onError:function(){return h((0,i.t)("live_streams.room.leave_error"))}}),M=(0,o.useMutation)((function(){return a.Qk.goLive({id:null===S||void 0===S?void 0:S.id,forReactQuery:!0})}),{onSuccess:function(){return N()},onError:function(){return h((0,i.t)("live_streams.room.go_live_error"))}}),R={onSuccess:function(){v((0,i.t)("live_streams.room.".concat((0,s.vX)(S),".end_success"))),D(!0),N()},onError:function(){return h((0,i.t)("live_streams.room.".concat((0,s.vX)(S),".end_error")))}},B=(0,o.useMutation)((function(){return a.Qk.endStream({id:null===S||void 0===S?void 0:S.id})}),R),U=(0,o.useMutation)((function(){return a.Qk.endStreamDelayed({id:null===S||void 0===S?void 0:S.id})}),R),F=(0,o.useMutation)((function(e){return a.Qk.update({id:null===S||void 0===S?void 0:S.id,formData:e})}),{onSuccess:function(){N(),v((0,i.t)("live_streams.room.".concat((0,s.vX)(S),".update_success")),{duration:"short",shouldUseProgress:!1})},onError:function(){return h((0,i.t)("live_streams.room.".concat((0,s.vX)(S),".update_error")))}});return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({room:S,isLoading:P,isError:C,apiError:k,joinAsHost:function(){return T.mutate(s.VM.HOST)},joinAsParticipant:function(){return T.mutate(t)},isJoining:T.isLoading,currentParticipant:g,updateRoom:F.mutate,updateRoomAsync:F.mutateAsync,goLive:M.mutate,goLiveAsync:M.mutateAsync,leave:L.mutate,leaveAsync:L.mutateAsync,endStream:B.mutate,endStreamDelayed:U.mutate,endStreamDelayedAsync:U.mutateAsync,onEndStream:function(e){v(e),D(!0),N()},isLeaving:L.isLoading,refetchRoom:N,streamEnded:(0,s.UT)(S)||E,viewTypeOverride:x,setViewTypeOverride:w},I)},y=r(24185);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=r(85893),S=(0,n.createContext)({});S.displayName="LiveStreamContext";var P=function(e){var t=e.children,r=(0,y.UO)().roomSlug,l=v(r),d=l.room,p=l.isLoading,f=l.isError,m=l.apiError,b=l.joinAsHost,h=l.joinAsParticipant,g=l.isJoining,j=l.currentParticipant,w=l.updateRoom,P=l.updateRoomAsync,C=l.goLive,k=l.goLiveAsync,N=l.leave,I=l.leaveAsync,A=l.endStream,E=l.endStreamDelayed,D=l.endStreamDelayedAsync,T=l.onEndStream,L=l.isLeaving,M=l.refetchRoom,R=l.streamEnded,B=l.viewTypeOverride,U=l.setViewTypeOverride,F=function(e){var t=(0,u.p)().error,r=x((0,n.useState)(null),2),s=r[0],c=r[1],l=x((0,n.useState)(null),2),d=l[0],p=l[1],f=(0,o.useMutation)((function(t){return p(t),a.Qk.createRecorder({id:null===e||void 0===e?void 0:e.id,recording_key:t})}),{onSuccess:function(e){return c(e)},onError:function(e){var r=e.firstErrorDetail?"".concat((0,i.t)("live_streams.room.join_error"),": ").concat(e.firstErrorDetail):"".concat((0,i.t)("live_streams.room.join_error"),".");t(r)}});return{createRecorder:f.mutate,isCreatingRecorder:f.isLoading,recorder:s&&_(_({},s),{},{recording_key:d})}}(d),z=F.recorder,V=F.createRecorder,q=F.isCreatingRecorder,G=function(e,t,r){var i={status:s.wA.ACTIVE,per_page:2e3};null!==r&&void 0!==r&&r.recording_key&&(i.recording_key=r.recording_key);var a=(0,o.useQuery)(c.av.liveStreams.participants({roomId:null===e||void 0===e?void 0:e.id,params:i}),{enabled:!!t||!!r}),l=a.data,u=a.isLoading,d=a.refetch,p=null===l||void 0===l?void 0:l.records;return{participants:(0,n.useMemo)((function(){return null===p||void 0===p?void 0:p.reduce((function(e,t){return e[t.id]=t,e}),{})}),[p]),isLoadingParticipants:u,refetchParticipants:d,roles:{host:[null===e||void 0===e?void 0:e.creator.id],moderator:null===p||void 0===p?void 0:p.filter((function(e){return"moderator"===e.role})).map((function(e){return e.community_member_id}))}}}(d,j,z),H=G.participants,W=G.isLoadingParticipants,Z=G.refetchParticipants,J={status:{isLoadingRoom:p,isLoadingParticipants:W,isRoomError:f,apiError:m,isJoining:g,isCreatingRecorder:q,isLeaving:L,streamEnded:R},data:{room:d,recorder:z,participants:H,roles:G.roles,canHost:!!d&&d.can_host,currentParticipant:j,viewTypeOverride:B,isConferenceRoom:(0,s.$e)(d)},actions:{joinAsHost:b,joinAsParticipant:h,createRecorder:V,updateRoom:w,updateRoomAsync:P,goLive:C,goLiveAsync:k,leave:N,leaveAsync:I,endStream:A,endStreamDelayed:E,endStreamDelayedAsync:D,onEndStream:T,refetchRoom:M,refetchParticipants:Z,setViewTypeOverride:U}};return(0,O.jsx)(S.Provider,{value:J,children:"function"===typeof t?t(J):t})},C=function(){return(0,n.useContext)(S)},k=function(){return C().data},N=function(){return C().actions}},80424:(e,t,r)=>{"use strict";r.d(t,{G:()=>P,Y:()=>C});var n=r(67294),i=r(96486),o=r(87536),a=r(88767),s=r(76181),c=r(40340),l=r(43037),u=r(4796);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h={hasAlreadyPurchased:!1,disablePayButton:!1,existingAccount:!1,message:"",type:""},v=function(e){var t=e.isMemberAddressRequired,r=e.isTaxIdMandatory,i=e.paywall,d=(0,o.Gc)(),f=d.watch,b=d.setValue,v=d.setError,y=m((0,n.useState)(!1),2),g=y[0],_=y[1],j=m((0,n.useState)(h),2),x=j[0],w=j[1],O=m((0,n.useState)(!1),2),S=O[0],P=O[1],C=m((0,n.useState)(0),2),k=C[0],N=C[1];(0,n.useEffect)((function(){x.existingAccount&&v("email",{type:"duplicated"})}),[v,x]);var I=(0,a.useMutation)((function(e){return s.k.preview(e)})),A=f(),E=A.paywall_price_id,D=A.payment_method_type,T=(0,n.useCallback)((function(){var e=f(),t=e.community_id,r=e.paywall_price_id,n=e.community_member_billing_info_attributes,i=e.coupon_code,o=e.coupon_code_applied,a=e.payment_method_type,s={queryParams:{community_id:t,paywall_price_id:r,community_member_billing_info_attributes:n,coupon_code:i,coupon_code_applied:o},shouldIgnoreCommunityMember:(0,l.kh)(a)};I.mutate(s,{onSuccess:function(e){w(h),N(e.amount_due_now)},onError:function(e){console.error(e),o&&b("coupon_code_applied",!1),w({message:e.message,type:"danger",disablePayButton:!0})}})}),[b,w,I]);(0,n.useEffect)((function(){T()}),[E,D]);var L=(0,n.useCallback)((function(e){b("paywall_price_id",e)}),[b,T]),M=(0,n.useCallback)((function(){var e=f("paywall_price_id");return e?i.prices.find((function(t){return t.id==e})):{trial_enabled:!1}}),[f,i.prices]),R=(0,n.useCallback)((function(e){var r=f().community_member_billing_info_attributes,n=(r=void 0===r?{}:r).address_country,i=void 0===n?"":n,o=e.value,a=e.complete,s=o.name,c=o.address,l=c.line1,u=c.line2,d=c.city,p=c.state,m=c.postal_code,h=c.country;b("name",s),b("community_member_billing_info_attributes[address_line1]",l),b("community_member_billing_info_attributes[address_line2]",u),b("community_member_billing_info_attributes[address_city]",d),b("community_member_billing_info_attributes[address_state]",p),b("community_member_billing_info_attributes[address_postal_code]",m),b("community_member_billing_info_attributes[address_country]",h),i!==h&&(b("community_member_billing_info_attributes[tax_id_type]",""),b("community_member_billing_info_attributes[tax_id_value]",""));var v=!t||a;b("community_member_billing_info_address_attributes_complete",v),v&&T()}),[t,b,f,T]),B=(0,n.useCallback)((function(){var e=f().coupon_code;b("coupon_code",(e||"").toUpperCase()),b("coupon_code_applied",!0),T()}),[f,b,T]),U=(0,n.useCallback)((function(){b("coupon_code",""),b("coupon_code_applied",!1),T()}),[b,T]),F=m((0,n.useState)(r),2),z=F[0],V=F[1],q=(0,n.useCallback)((function(){return V(!0)}),[V]),G=m((0,n.useState)(),2),H=G[0],W=G[1],Z=(0,n.useCallback)((function(){H&&(clearTimeout(H),W(void 0))}),[H,W]);(0,n.useEffect)((function(){var e=f((function(e,t){"community_member_billing_info_attributes[tax_id_value]"===t.name&&(Z(),W(setTimeout((function(){T()}),250)))}));return function(){e.unsubscribe(),Z()}}),[f,T,Z,W]);var J=M(),$=(0,u.zh)(i),Q=(!J.trial_enabled||J.trial_requires_upfront_payment||i.trial_requires_card)&&(0,l.F_)(D);return{applyCouponCode:B,clearCouponCode:U,enableTaxIdCollection:q,getSelectedPrice:M,isTaxIdCollectionEnabled:z,paymentError:x,previewMutation:I,setMemberAddressAttributes:R,setPaymentError:w,setSelectedPrice:L,isCardInfoComplete:g,setIsCardInfoComplete:_,isCardInfoValid:!Q||g,isPaywallActive:$,isCardInfoRequired:Q,handleError:function(e){w(p(p({},c.JV),e))},isProcessingPayment:S,setIsProcessingPayment:P,amountDue:k}},y=r(85893),g=["applyCouponCode","clearCouponCode","enableTaxIdCollection","getSelectedPrice","isTaxIdCollectionEnabled","paymentError","previewMutation","setMemberAddressAttributes","setPaymentError","setSelectedPrice","isCardInfoComplete","setIsCardInfoComplete","isCardInfoValid","isPaywallActive","isCardInfoRequired","handleError","isProcessingPayment","setIsProcessingPayment"];function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var O={hasAlreadyPurchased:!1,applyCouponCode:i.noop,checkoutConfirmationUrl:"",children:null,clearCouponCode:i.noop,communityRootUrl:"",areCouponsEnabled:!1,creditCard:{},currentCommunity:{},currentCommunityMember:{},currentUser:{},enableTaxIdCollection:i.noop,getSelectedPrice:function(){return{trial_enabled:!1}},isMemberAddressRequired:!1,isTaxIdCollectionEnabled:!1,loginUrl:"",paymentError:h,paywall:{},previewMutation:{},setMemberAddressAttributes:i.noop,setPaymentError:i.noop,setSelectedPrice:i.noop,isCardInfoComplete:!1,setIsCardInfoComplete:i.noop,isCardInfoValid:!1,isPaywallActive:!1,isCardInfoRequired:!1,handleError:i.noop,isProcessingPayment:!1,setIsProcessingPayment:i.noop,amountDue:0,shouldShowTaxIdForm:!1,isTaxIdMandatory:!1,isBrazilianAccountAndProcessorStripeBr:!1},S=(0,n.createContext)(O);S.displayName="PaywallCheckoutContext";var P=function(e){var t=e.children,r=e.isMemberAddressRequired,n=e.paywall,i=e.isTaxIdMandatory,o=v({isMemberAddressRequired:r,isTaxIdMandatory:i,paywall:n}),a=o.applyCouponCode,s=o.clearCouponCode,c=o.enableTaxIdCollection,l=o.getSelectedPrice,u=o.isTaxIdCollectionEnabled,d=o.paymentError,p=o.previewMutation,f=o.setMemberAddressAttributes,m=o.setPaymentError,b=o.setSelectedPrice,h=o.isCardInfoComplete,_=o.setIsCardInfoComplete,x=o.isCardInfoValid,P=o.isPaywallActive,C=o.isCardInfoRequired,k=o.handleError,N=o.isProcessingPayment,I=o.setIsProcessingPayment,A=w(o,g),E=j(j(j({},O),e),{},{applyCouponCode:a,clearCouponCode:s,enableTaxIdCollection:c,getSelectedPrice:l,isTaxIdCollectionEnabled:u,paymentError:d,previewMutation:p,setMemberAddressAttributes:f,setPaymentError:m,setSelectedPrice:b,isCardInfoComplete:h,setIsCardInfoComplete:_,isCardInfoValid:x,isPaywallActive:P,isCardInfoRequired:C,handleError:k,isProcessingPayment:N,setIsProcessingPayment:I},A);return(0,y.jsx)(S.Provider,{value:E,children:t})},C=function(){return(0,n.useContext)(S)}},56874:(e,t,r)=>{"use strict";r.d(t,{Q_:()=>o,RA:()=>a,mB:()=>s,ac:()=>c,Om:()=>l,YG:()=>d,d_:()=>p,U8:()=>f});var n=r(86013),i=r(43037),o={INCOMPLETE:"incomplete",PROCESSING:"processing",PAID:"paid",CANCELED:"canceled",REFUNDED:"refunded",FAILED:"failed",PARTIAL_REFUNDED:"partial_refunded"},a={PARTIAL_REFUND:(0,n.t)("community_member_charge_presenter.display_status.partial_refund"),INCOMPLETE:(0,n.t)("community_member_charge_presenter.display_status.incomplete"),PROCESSING:(0,n.t)("community_member_charge_presenter.display_status.processing"),PAID:(0,n.t)("community_member_charge_presenter.display_status.paid"),CANCELED:(0,n.t)("community_member_charge_presenter.display_status.canceled"),REFUNDED:(0,n.t)("community_member_charge_presenter.display_status.refunded"),FAILED:(0,n.t)("community_member_charge_presenter.display_status.failed")},s=[o.PAID,o.PARTIAL_REFUNDED,o.REFUNDED,o.FAILED],c=function(e){return(null===e||void 0===e?void 0:e.status)===o.REFUNDED||u(e)},l=function(e){return(null===e||void 0===e?void 0:e.status)===o.PAID},u=function(e){return(null===e||void 0===e?void 0:e.status)!==o.REFUNDED&&(null===e||void 0===e?void 0:e.amount_refunded_raw)>0},d=function(e){return(null===e||void 0===e?void 0:e.payment_method_type)===i.Lt.PIX},p=function(e){return(null===e||void 0===e?void 0:e.payment_method_type)===i.Lt.CARD},f=function(e){return null===(null===e||void 0===e?void 0:e.payment_method_type)}},35144:(e,t,r)=>{"use strict";r.d(t,{Q_:()=>i,pN:()=>o,EW:()=>a,mB:()=>s,vC:()=>c,zi:()=>l});var n=r(77349),i=Object.freeze({INCOMPLETE:"incomplete",ACTIVE:"active",TRIAL:"trial",PAST_DUE:"past_due",CANCELED:"canceled"}),o=function(e){return(null===e||void 0===e?void 0:e.status)===i.TRIAL},a=function(e){return(null===e||void 0===e?void 0:e.status)===i.PAST_DUE},s=[i.ACTIVE,i.TRIAL,i.PAST_DUE,i.CANCELED],c=[i.ACTIVE,i.TRIAL,i.PAST_DUE],l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,r=Number(e)>0?Number(e):0;return(0,n.default)(t,r)}},42482:(e,t,r)=>{"use strict";r.d(t,{D:()=>i});var n=Object.freeze({NOT_STARTED:"not_started",ACTIVE:"active",COMPLETED:"completed",RELEASED:"released",CANCELED:"canceled"}),i=function(e){return e.status===n.COMPLETED}},16219:(e,t,r)=>{"use strict";r.d(t,{B$:()=>a,vv:()=>s,MS:()=>c,XG:()=>l,t:()=>u,O4:()=>d,nl:()=>p,Cc:()=>f,Hv:()=>m});var n=r(86013),i=r(99310),o=r(48895),a=function(e){var t;return"course"===(null===e||void 0===e?void 0:e.post_type)&&(null===e||void 0===e||null===(t=e.course_setting)||void 0===t?void 0:t.course_type)===i.d.self_paced},s=function(e){var t;return"course"===(null===e||void 0===e?void 0:e.post_type)&&(null===e||void 0===e||null===(t=e.course_setting)||void 0===t?void 0:t.course_type)===i.d.structured},c=function(e){var t;return"course"===(null===e||void 0===e?void 0:e.post_type)&&(null===e||void 0===e||null===(t=e.course_setting)||void 0===t?void 0:t.course_type)===i.d.scheduled},l=function(e){return c(e)||s(e)},u=function(e){var t=e.drippedAt,r=e.dripDelay;if(e.needsToCompletePreviousLesson)return(0,n.t)("courses.edit.lesson.complete_previous_lesson_tooltip");if(t){var i=d(t);return"".concat((0,n.t)("courses.edit.lesson.available_on_tooltip")," ").concat(i)}var o=p(r),a=f(r),s=m(a,o);return(0,n.t)("courses.edit.lesson.available_after_tooltip",{drip_delay:s})},d=function(e){return(0,o.w)({dateTime:new Date(e),format:"date_time_with_short_timezone"})},p=function(e){return e%7!==0||0===e?"days":"weeks"},f=function(e){return e%7===0?e/7:e},m=function(e,t){return 0===e?(0,n.t)("courses.edit.sections.drip_schedule.form.immediately"):"".concat(e," ").concat(b(e,t))},b=function(e,t){return(0,n.t)("courses.edit.sections.drip_schedule.form.".concat(t),{count:e})}},63698:(e,t,r)=>{"use strict";r.d(t,{lo:()=>a,tH:()=>s,mI:()=>c});var n=r(96486),i=r(15830),o=function(e,t,r){try{var o=(0,i.Ed)(),a=new Intl.DateTimeFormat(o,r);return(0,n.upperFirst)(a.formatRange(e,t))}catch(s){return s instanceof Error&&console.error("Could not parse date range: ".concat(s.message)),""}},a=function(e,t,r){return o(e,t,{weekday:"long",month:"short",day:"numeric",hour:"numeric",minute:"numeric",timeZone:r})},s=function(e,t,r){return o(e,t,{weekday:"long",hour:"numeric",minute:"numeric",timeZone:r})},c=function(e,t,r){return o(e,t,{hour:"numeric",minute:"numeric",timeZone:r})}},87232:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});var n=function(e){return e.memberTags.filter((function(e){return(e.display_locations||{}).member_directory&&e.is_public}))}},12755:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});var n=function(e){return e>99?"99+":e}},43629:(e,t,r)=>{"use strict";r.d(t,{Q:()=>i,$:()=>o});var n=r(27258),i=Object.freeze({RESTRICTED:"restricted",PENDING:"pending",REJECTED:"rejected",ENABLED:"enabled"}),o=function(e){return[function(){return e?void 0:n.J6.NOT_EXIST},function(){return e.status===i.RESTRICTED?n.J6.RESTRICTED:void 0},function(){return e.is_restricted_for_application_fees?n.J6.RESTRICED_FOR_APPLICATION_FEES:void 0},function(){return e.status===i.PENDING?n.J6.PENDING:void 0},function(){return e.status===i.REJECTED?n.J6.REJECTED:void 0}]}},43037:(e,t,r)=>{"use strict";r.d(t,{Sr:()=>n,p0:()=>i,eq:()=>o,Lt:()=>a,kh:()=>s,F_:()=>c,Sz:()=>l});var n=function(){return"".concat(window.location.origin,"/checkout/")},i=function(e,t){var r,i="".concat(n()).concat(e);if(null!==(r=navigator)&&void 0!==r&&r.clipboard)navigator.clipboard.writeText(i);else{var o=document.createElement("input");o.style="position: absolute; left: -1000px; top: -1000px",o.value=i,document.querySelector(t).appendChild(o),o.focus(),o.setSelectionRange(0,o.value.length),document.execCommand("copy")}},o={MINIMUM:50,MAXIMUM:15e5},a={CARD:"card",PIX:"pix"},s=function(e){return e===a.PIX},c=function(e){return e===a.CARD},l=function(e,t){return e&&!(null!==t&&void 0!==t&&t.can_be_repurchased)}},61149:(e,t,r)=>{"use strict";r.d(t,{Dh:()=>i,hU:()=>o,V5:()=>a,DP:()=>s,vi:()=>c});var n=Object.freeze({fixed:"PaywallCoupons::Fixed",percent:"PaywallCoupons::Percent"}),i=function(e){return e===n.fixed},o=function(e){return e===n.percent},a=n,s=Object.freeze({ACTIVE:"active",INACTIVE:"inactive"}),c=[s.ACTIVE,s.INACTIVE]},4796:(e,t,r)=>{"use strict";r.d(t,{Tl:()=>o,dl:()=>a,zh:()=>s,_h:()=>c,Jy:()=>l});var n=r(96486),i=r(9242),o=Object.freeze({DRAFT:"draft",ACTIVE:"active",INACTIVE:"inactive"}),a=Object.freeze(["active","inactive"]),s=function(e){return e.status===o.ACTIVE},c=function(e){return e.status===o.INACTIVE},l=function(e){return(0,n.filter)(e,(function(e){return function(e){return(0,n.some)(e.prices_attributes,(function(e){return(0,i.AP)(e)}))}(e)}))}},9242:(e,t,r)=>{"use strict";r.d(t,{zA:()=>c,QT:()=>l,t3:()=>u,aG:()=>p,AP:()=>f,fe:()=>m,PI:()=>b,X8:()=>h,QC:()=>v,f:()=>y,TM:()=>g,$_:()=>_});var n=r(86013),i=r(96486),o=r(649),a=r(36762),s=r(61666),c={addingPrice:"adding_price",addingSubscription:"adding_subscription"},l=function(e){return(null===e||void 0===e?void 0:e.price_type)===a.E4.subscription},u=function(e){return(null===e||void 0===e?void 0:e.price_type)===a.E4.installments},d=function(e){return l(e)||u(e)},p=function(e){return(0,i.filter)(e,(function(e){return d(e)}))},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.addingSubscription;return d(e)&&(t==c.addingPrice||!e.upfront_payment_amount)},m=function(e){return(0,i.filter)(e,(function(e){return l(e)}))},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.addingSubscription;return(0,i.filter)(e,(function(e){return f(e,t)}))},h=function(e,t,r){return Object.values(e.frequencies).find((function(e){return e.interval===t&&e.interval_count===r}))},v=function(e){var t,r=null!==(t=e.prices_attributes.find((function(e){return e.preferred})))&&void 0!==t?t:e.prices_attributes[0];return r?(0,o.Y9)(e.currency,r.interval,r.interval_count,r.amount):(0,n.t)("settings.paywalls.list.form.no_preferred_price_selected")},y={noUpfrontPayment:"no_upfront_payment",upfrontPayment:"upfront_payment"},g=function(e,t){if(!t)return{variant:y.noUpfrontPayment};var r=(0,o.LG)(t);if(!r)return{variant:y.noUpfrontPayment};var n=(0,s.I)(e,r,{amountInCents:!0,includeCurrencyCode:!0});return{variant:y.upfrontPayment,amountInCents:r,amountFormatted:n}},_=function(e,t,r){return e.variant===y.noUpfrontPayment?Math.round(t/r):Math.round((t-e.amountInCents)/r)}},8161:(e,t,r)=>{"use strict";r.d(t,{ho:()=>o,FD:()=>a,ju:()=>s});var n=r(96486),i=r(84038),o=function(e){return!(0,n.isNil)(e.paywalls_affiliates_attribution_info)},a=function(e){return o(e)?"manage_attribute_sale":"add_attribute_sale"},s=function(e){return e.status===i._.invited}},19736:(e,t,r)=>{"use strict";r.d(t,{Fy:()=>i,UI:()=>o,zt:()=>a});var n=r(49326),i={onboarding:function(){return"/getting-started"},templates:function(e){return"/communities/".concat(e,"/templates")},questions:function(e){return"/communities/".concat(e,"/questions")},feed:function(){return"/feed"}},o=function(){return"/members"},a=function(e){return"".concat(i.onboarding(),"?").concat((0,n.UK)(e))}},28803:(e,t,r)=>{"use strict";r.d(t,{zb:()=>s,wh:()=>c,yG:()=>l,iQ:()=>u,TO:()=>d});var n=r(96486);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){var t,r=e.spaceGroupId,n=e.currentCommunityMember;return null===n||void 0===n||null===(t=n.hidden_space_group_ids)||void 0===t?void 0:t.includes(r)},c=function(e){var t,r=e.spaceGroup;return null===r||void 0===r||null===(t=r.policies)||void 0===t?void 0:t.can_manage_space_group},l=function(e){var t;return null===(t=e.spaceGroup.policies)||void 0===t?void 0:t.can_create_space},u=function(e){var t=e.spaceGroup,r=e.spaces,i=e.spacesWithDetails,a=void 0===i?[]:i;return r=(r=r.filter((function(e){return e.space_group_id==t.id}))).map((function(e){return o(o({},e),(0,n.find)(a,{id:e.id})||{})})),o(o({},t),{},{spaces:r})},d=function(e){return"paywall"===e}},92445:(e,t,r)=>{"use strict";r.d(t,{w:()=>m,K:()=>h});var n=r(64687),i=r.n(n),o=r(96486),a=r(88767),s=r(34128),c=r(49326),l=r(97012);function u(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)}))}}var p=["community-setting","show"],f=function(){var e=c.av.communities.communitySettings.index();return(0,s.UT)(e)},m=function(){return(0,a.useQuery)(p,f)},b=function(e){var t=e.data,r=e.updates,n=c.av.communities.communitySettings.update({communitySettingId:t.community_settings.id}),i={community_setting:r};return(0,s.gN)(n,i)},h=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.onMutate,s=void 0===n?o.noop:n,c=r.onSuccess,u=void 0===c?o.noop:c,f=r.onError,m=void 0===f?o.noop:f,h=r.onSettled,v=void 0===h?o.noop:h,y=(0,l.wh)().refetch,g=(0,a.useQueryClient)();return(0,a.useMutation)(b,{onMutate:(t=d(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,n=g.getQueryData(p),g.setQueryData(p,r),s&&s(),e.abrupt("return",{previousData:n,data:r});case 5:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),onSuccess:(e=d(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:g.setQueryData(p,t),u&&u();case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onError:m,onSettled:v})}},14578:(e,t,r)=>{"use strict";r.d(t,{U:()=>c});var n=r(88767),i=r(34128),o=r(49326),a=function(){return(0,i.UT)((0,o.Nu)())},s=["COMMUNITY_SWITCHER"],c=function(){var e=(0,n.useQuery)(s,a),t=e.data,r=e.isLoading,i=e.refetch,o=(null===t||void 0===t?void 0:t.token)||"";return{communities:(null===t||void 0===t?void 0:t.communities)||[],token:o,isLoadingCommunities:r,refetchCommunities:i}}},23322:(e,t,r)=>{"use strict";r.d(t,{R:()=>y});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r(88767),c=r(34128),l=r(49326),u=r(97012),d=r(21809);function p(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function(){var e=(0,d.p)(),t=(0,u.wh)().data.display_welcome_banner,r=b((0,o.useState)([]),2),n=r[0],f=r[1],h=b((0,o.useState)([]),2),v=h[0],y=h[1],g=b((0,o.useState)(!1),2),_=g[0],j=g[1],x=b((0,o.useState)(new Set),2),w=x[0],O=x[1],S=b((0,o.useState)({}),2),P=S[0],C=S[1],k=b((0,o.useState)([]),2),N=k[0],I=k[1],A=b((0,o.useState)(t),2),E=A[0],D=A[1],T=(0,s.useQuery)("BANNER_DATA",(function(){return(0,c.UT)((0,l.dm)())}),{onSuccess:function(e){C(e.banner)},onError:function(e){console.error(e)},enabled:!1}),L=T.refetch,M=T.isLoading,R={headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"},B=function(){var e=m(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.UT)((0,l.iL)());case 2:return t=e.sent,r=t.posts,f(r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=(0,s.useMutation)((function(e){var t=e.communityMemberId,r=e.display;return(0,c.gN)(l.av.communityMembers.preference({id:t}),{display_home_welcome_banner:r})}),{onSuccess:function(){D(!1)},onError:function(){e.error((0,a.t)("request_failure_message"))}}).mutateAsync,F=function(){var e=m(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.UT)((0,l.lc)());case 2:return t=e.sent,r=t.events,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{posts:n,spaces:v,bannerData:P,memberActivityData:N,spacesHasNextPage:_,participatingSpacesIds:w,fetchPosts:B,fetchSpaceSuggestions:function(e){var t=e.page,r=e.perPage,n=void 0===r?9:r;fetch((0,l.J7)()+"?page=".concat(t,"&per_page=").concat(n),R).then((function(e){return e.json()})).then((function(e){y(1===t?e.spaces:[].concat(p(v),p(e.spaces))),j(e.has_next_page),O(new Set(e.participating_space_ids))})).catch((function(e){console.error(e)}))},fetchBannerData:L,fetchCommunityMemberActivityData:function(){fetch((0,l.j0)(),R).then((function(e){return e.json()})).then((function(e){I(e.activity)})).catch((function(e){console.error(e)}))},fetchUpcomingEvents:F,isWelcomeBannerVisible:E,setWelcomeBannerPreference:U,setParticipatingSpacesIds:O,isBannerDataLoading:M}}},56202:(e,t,r)=>{"use strict";r.d(t,{o:()=>y});var n=r(64687),i=r.n(n),o=r(67294),a=r(86013),s=r(34128),c=r(49326),l=r(23322),u=r(21809);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v={headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"},y=function(){var e=b((0,o.useState)({community:{},community_setting:{}}),2),t=e[0],r=e[1],n=b((0,o.useState)(!1),2),d=n[0],f=n[1],h=b((0,o.useState)({postSortOptions:[],trendingPostWindowLimit:30,homePageOption:{}}),2),y=h[0],g=h[1],_=b((0,o.useState)([]),2),j=_[0],x=_[1],w=b((0,o.useState)([]),2),O=w[0],S=w[1],P=b((0,o.useState)(!1),2),C=P[0],k=P[1],N=(0,u.p)(),I=N.error,A=N.success,E=(0,l.R)().fetchBannerData,D=function(){var e,t=(e=i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{k(!0),r=(0,s.wG)({landing_page_settings:t}),fetch((0,c.H5)(),p({method:"POST",body:r,mode:"no-cors"},v)).then((function(e){return e.json()})).then((function(){A((0,a.t)("changes_saved")),k(!1),E()})).catch((function(){I((0,a.t)("something_went_wrong")),k(!1)}))}catch(n){console.error(n)}case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){m(o,n,i,a,s,"next",e)}function s(e){m(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{dataLoaded:d,settings:t,metaData:y,loggedInUserSpaceOptions:j,loggedOutUserSpaceOptions:O,setSettings:r,fetchLandingPageSettings:function(){f(!1),fetch((0,c.H5)(),v).then((function(e){return e.json()})).then((function(e){r(e.settings),g({postSortOptions:e.post_sort_options,trendingPostWindowLimit:e.trending_post_window_limit,homePageOption:e.home_page_option}),x(e.logged_in_user_space_options),S(e.logged_out_user_space_options)})).finally((function(){f(!0)})).catch((function(e){console.error(e)}))},setLoggedInUserSpaceOptions:x,setLoggedOutUserSpaceOptions:S,reSetWelcomeBannerPreference:function(){return(0,s.gN)((0,c.HJ)())},updateLandingPageSettings:D,isSaving:C}}},48794:(e,t,r)=>{"use strict";r.d(t,{g:()=>l});var n=r(67294),i=r(31889),o=r(97012),a=r(92445),s=r(95725),c=r(16580).aP[0],l=function(e){var t=(0,o.wh)(),r=t.currentCommunityMember,l=t.currentUser,u=(0,a.w)(),d=u.data,p=u.isLoading,f=null===d||void 0===d?void 0:d.community_settings,m=(0,s.T)({defaultSort:c,scopeResults:e,per_page:3}),b=m.members,h=m.isLoading;return{members:b,isLoading:(0,n.useMemo)((function(){return p||h}),[p,h]),canSeeMembersDirectory:(0,n.useMemo)((function(){var e=null===f||void 0===f?void 0:f.public_member_directory,t=(0,i.vb)(r);return e||t}),[f,r,l]),canSeeMembersAvatarRow:(0,n.useMemo)((function(){return l}),[l])}}},93449:(e,t,r)=>{"use strict";r.d(t,{p:()=>u});var n=r(86013),i=r(23560),o=r.n(i),a=r(88767),s=r(34128),c=r(97012),l=r(21809),u=function(e,t){var r=(0,c.wh)().currentCommunityMember,i=(0,l.p)(),u=i.success,d=i.error;return{downloadMembersCSV:(0,a.useMutation)((function(e){var t=e.downloadURL;return(0,s.UT)(t)}),{onSuccess:function(){u((0,n.t)("export_member_csv.message",{email:r.email})),o()(e)&&e()},onError:function(){d((0,n.t)("export_member_csv.error_message")),o()(t)&&t()}}).mutate}}},14834:(e,t,r)=>{"use strict";r.d(t,{f:()=>b});var n=r(64687),i=r.n(n),o=r(67294),a=r(49326);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=p((0,o.useState)([]),2),r=t[0],n=t[1],s=p((0,o.useState)(0),2),l=s[0],f=s[1],m=p((0,o.useState)(!1),2),b=m[0],h=m[1],v=p((0,o.useState)(!1),2),y=v[0],g=v[1],_={headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"},j=function(t,i){return fetch("/notifications?page=".concat(t,"&per_page=").concat(e,"&notification_group=").concat(i),_).then((function(e){return e.json()})).then((function(e){n(1===t?d(e.records):[].concat(d(r),d(e.records))),g(!0),h(e.has_next_page)}))},x=function(){var e,t=(e=i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(1,t);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,s,"next",e)}function s(e){u(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{dataLoaded:y,setDataLoaded:g,notifications:r,newNotificationCount:l,setNewNotificationCount:f,hasNextPage:b,setHasNextPage:h,fetchNotifications:j,fetchFirstPage:x,resetNewNotificationsCount:function(){l&&fetch("/notifications/reset_new_notifications_count",c(c({},_),{},{method:"POST"})).then((function(e){return e.json()})).then((function(e){f(e.new_notifications_count)})).catch((function(e){console.error(e)}))},markAsRead:function(e){e.read_at||fetch("/notifications/".concat(e.id,"/mark_as_read"),c({method:"POST"},_)).then((function(e){return e.json()})).then((function(t){var i=r.map((function(r){return r.id===e.id?t.record:r}));n(i)})).catch((function(e){console.error(e)}))},markAllAsRead:function(){fetch("/notifications/mark_all_as_read",c(c({},_),{},{method:"POST"})).then((function(e){return e.json()})).then((function(){var e=(new Date).toString(),t=r.map((function(t){return c(c({},t),{},{read_at:e})}));n(t)})).catch((function(e){console.error(e)}))},archiveNotification:function(e){fetch("/notifications/".concat(e.id,"/archive"),c(c({},_),{},{method:"POST"})).then((function(e){return e.json()})).then((function(){var t=r.filter((function(t){return t.id!==e.id}));n(t)})).catch((function(e){console.error(e)}))},fetchNewNotificationsCount:function(e){return fetch((0,a.Rp)()+"?community_id=".concat(e),_).then((function(e){return e.json()})).then((function(e){f(e.new_notifications_count),e.new_notifications_count&&g(!1)}))},resizeNotificationWindow:function(){var e=document.getElementById("bottomBarNotificationWrapperOuter"),t=document.getElementById("bottomBarNotificationWrapperInner");if(e){var r=window.innerHeight-56;e.style.height=r+"px"}if(t){var n=window.innerHeight-215;t.style.height=n+"px"}},onNotificationEventReceive:function(e){switch(e.event){case"resetNewNotificationCount":case"updateNewNotificationCount":f(e.new_notifications_count);break;case"newNotification":f(l+1)}},unfollowNotification:function(e){fetch("/posts/".concat(e.post_id,"/post_followers/").concat(e.post_follower_id),c(c({},_),{},{method:"DELETE"})).then((function(e){return e.json()})).then((function(t){var i=r.map((function(r){return r.id===e.id&&t.success?(r.post_follower_id=null,r):r}));n(i)})).catch((function(e){console.error(e)}))},followNotification:function(e){fetch("/posts/".concat(e.post_id,"/post_followers"),c(c({},_),{},{method:"POST"})).then((function(e){return e.json()})).then((function(t){var i=r.map((function(r){return r.id===e.id&&t.success?(r.post_follower_id=t.post_follower_id,r):r}));n(i)})).catch((function(e){console.error(e)}))}}}},74749:(e,t,r)=>{"use strict";r.d(t,{B:()=>c});var n=r(67294),i=r(88767),o=r(75381);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t,r,s=e.perPage,c=void 0===s?10:s,l=e.page,u=e.setPage,d=e.searchKeyParams,p=void 0===d?"":d,f=e.filters,m=void 0===f?{}:f,b=e.orderParam,h=void 0===b?{created_at:"desc"}:b,v=e.enabled,y=void 0===v||v,g=a((0,n.useState)(h),2),_=g[0],j=g[1],x={filters:m,order:_,page:l,perPage:c,searchKey:p},w=o.W.index(x),O=(0,i.useQuery)({queryKey:["paywall-charges",{filters:m,order:_,page:l,perPage:c,searchKeyParams:p}],queryFn:w,enabled:y}),S=O.data,P=O.refetch,C=O.isLoading,k=O.remove;return{hasFilters:Object.keys(m).length>0,charges:null!==(t=null===S||void 0===S?void 0:S.records)&&void 0!==t?t:[],totalCharges:null!==(r=null===S||void 0===S?void 0:S.count)&&void 0!==r?r:0,refetchCharges:P,removeChargesFromCache:k,isLoadingCharges:C,order:_,setOrder:function(e){j(e),u(1)},perPage:c,page:l,setPage:u}}},99815:(e,t,r)=>{"use strict";r.d(t,{D:()=>c,p:()=>l});var n=r(67294),i=r(88767),o=r(31772);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c="paywall-subscriptions",l=function(e){var t,r,s=e.orderParam,l=void 0===s?{created_at:"desc"}:s,u=e.perPage,d=void 0===u?10:u,p=e.searchKeyParams,f=void 0===p?"":p,m=e.filters,b=void 0===m?{}:m,h=e.enabled,v=void 0===h||h,y=e.page,g=e.setPage,_=a((0,n.useState)(l),2),j=_[0],x=_[1],w={filters:b,order:j,page:y,perPage:d,searchKey:f},O=o.Y.index(w),S=(0,i.useQuery)({queryKey:[c,{filters:b,order:j,page:y,perPage:d},f],queryFn:O,enabled:v}),P=S.data,C=S.refetch,k=S.isLoading,N=S.remove;return{hasFilters:Object.keys(b).length>0,subscriptions:null!==(t=null===P||void 0===P?void 0:P.records)&&void 0!==t?t:[],totalSubscriptions:null!==(r=null===P||void 0===P?void 0:P.count)&&void 0!==r?r:0,refetchSubscriptions:C,removeSubscriptionsFromCache:N,perPage:d,page:y,order:j,setOrder:function(e){x(e),g(1)},setPage:g,isLoadingSubscriptions:k}}},68930:(e,t,r)=>{"use strict";r.d(t,{_o:()=>c,pI:()=>u});var n=r(88767),i=r(88116),o=r(61149);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c="paywall-coupons-list",l=o.vi,u=function(e){var t=e.paywallId,r=e.couponStatuses,o=void 0===r?l:r,u=e.skipDateValidations,d=void 0===u||u,p=e.queryParams,f=void 0===p?{}:p,m=(0,n.useQuery)([c,t,{couponStatuses:o,skipDateValidations:d}],i.p.index({paywallId:t,skipDateValidations:d,couponStatuses:o}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({enabled:Boolean(t)},f));return{paywallCouponsListQuery:m}}},95691:(e,t,r)=>{"use strict";r.d(t,{B:()=>s});var n=r(88767),i=r(34128),o=r(49326),a=function(e){return(0,i.Cu)(o.av.admin.paywalls.exports.create(),e)},s=function(){return{createCsvExportMutation:(0,n.useMutation)((function(e){return a(e)}))}}},53828:(e,t,r)=>{"use strict";r.d(t,{k:()=>u});var n=r(88767),i=r(34128),o=r(4796),a=r(49326);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,n.useQuery)(e,(function(){return(0,i.UT)(a.av.paywalls.index({params:c(c({},t),{},{status:o.dl})}))})),s=r.data,l=void 0===s?[]:s,u=r.isLoading;return{paywalls:l.map((function(e){return{label:e.display_name,value:e.id.toString()}})),isPaywallsLoading:u}}},86646:(e,t,r)=>{"use strict";r.d(t,{o:()=>o,O:()=>s});var n=r(88767),i=r(13546),o="paywalls-list",a=[],s=function(e){var t=e.communityMemberId,r=e.status,s=void 0===r?a:r,c=e.queryParams,l=void 0===c?{}:c;return{paywallsListQuery:(0,n.useQuery)([o,t,{status:s}],i.i.index({community_member_id:t,status:s}),l)}}},88992:(e,t,r)=>{"use strict";r.d(t,{O:()=>s,C:()=>c});var n=r(54465),i=r(97012),o={en:"en",pt:"pt-BR"},a=function(e){return o[null!==e&&void 0!==e?e:"en"]},s=function(e){var t=e.stripeAccountId,r=e.stripePublicKey,i=e.locale;return(0,n.J)(r,{stripeAccount:t,locale:a(i)})},c=function(){var e,t,r=(0,i.wh)().currentCommunity;return{stripePromise:s({stripeAccountId:null===(e=r.payment_processor)||void 0===e?void 0:e.id,stripePublicKey:(null===(t=r.payment_processor)||void 0===t?void 0:t.public_api_key)||window.STRIPE_PUBLIC_KEY,locale:window.locale||"en"})}}},40129:(e,t,r)=>{"use strict";r.d(t,{v:()=>o});var n=r(87189),i=r(97012),o=function(){var e=(0,n.U)();return{space:(0,i.nT)().helpers.findBy({slug:e})}}},40166:(e,t,r)=>{"use strict";r.d(t,{zw:()=>p,fd:()=>f});var n=r(67294),i=r(85564),o=r.n(i),a=r(88767),s=r(34128),c=r(49326);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p={ALPHABETICAL:"alphabetical",OLDEST:"oldest",LATEST:"latest",ROLE:"role"},f=function(){var e,t,r,i,l,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=d.query,m=void 0===f?"":f,b=d.sort,h=void 0===b?p.ALPHABETICAL:b,v=d.order,y=d.filters,g=void 0===y?{}:y,_=d.perPage,j=void 0===_?30:_,x=d.initialPage,w=void 0===x?1:x,O=d.options,S=void 0===O?{}:O,P=d.adminScope,C=void 0!==P&&P,k=["community-members",m,h,v,g,j],N=u({getNextPageParam:function(e){return e.has_next_page?e.page+1:void 0},getPreviousPageParam:function(e){return e.page>1?e.page-1:void 0},keepPreviousData:!0},S),I=(0,a.useInfiniteQuery)(k,(function(e){var t=e.pageParam,r=void 0===t?w:t,n=1;"number"===typeof r&&r>0&&(n=r);var i={page:n,sort:h,filters:g,per_page:j};m&&(i.query=m),v&&(i.order=v);var o=C?c.av.admin.search.communityMembers.index:c.av.search.communityMembers.index;return(0,s.UT)(o({params:i}))}),N),A=(0,n.useMemo)((function(){var e;return(null===(e=I.data)||void 0===e?void 0:e.pages)||[]}),[null===(e=I.data)||void 0===e?void 0:e.pages]),E=(null===(t=A[0])||void 0===t||null===(r=t.meta)||void 0===r?void 0:r.total_count)||0,D=(null===(i=A[0])||void 0===i?void 0:i.count)||0,T=(null===(l=A[0])||void 0===l?void 0:l.per_page)||j,L=(0,n.useMemo)((function(){return o()(A.map((function(e){return e.records})))}),[A]);return u(u({},I),{},{queryKey:k,totalMembers:E,totalQueryMembers:D,members:L,pageSize:T,pages:A})}},30588:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var n=r(1293),i=function(){return(0,n.$)(".community__switcher")}},1293:(e,t,r)=>{"use strict";r.d(t,{$:()=>s});var n=r(67294),i=r(8930);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){var t=o((0,n.useState)("unset"),2),r=t[0],a=t[1],s=(0,i.Y)(e);(0,n.useEffect)((function(){return s&&(a(s.style.display||"unset"),s.style.display="none"),function(){s&&(s.style.display=r)}}),[s])}},57103:(e,t,r)=>{"use strict";r.d(t,{T:()=>i,M:()=>o});var n=r(1293),i=function(){return(0,n.$)(".bottom-banner")},o=function(){return(0,n.$)("#mainHeader")}},97819:(e,t,r)=>{"use strict";r.d(t,{W:()=>o});var n=r(74238),i=r(83660),o=function(){var e=(0,i.q1)(),t=(0,n.TC)().currentTheme;return e&&"default"!==t}},393:(e,t,r)=>{"use strict";r.d(t,{D:()=>o});var n=r(67294),i=r(97012),o=function(){var e=(0,i.nT)(),t=(0,i.e2)(),r=(0,i.wh)(),o=Boolean(e.helpers.isDataLoading()),a=Boolean(t.isLoading),s=Boolean(r.isLoading);return(0,n.useMemo)((function(){return o||a||s}),[o,a,s])}},35754:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var n=r(97012),i=function(){var e=(0,n.wh)().currentCommunityMember,t=(0,n.L2)().data,r=void 0===t?{}:t,i=r.is_private,o=r.is_space_member,a=null===e||void 0===e?void 0:e.is_admin;return i&&!o&&!a}},23744:(e,t,r)=>{"use strict";r.d(t,{z:()=>i,g:()=>o});var n=r(97012),i=function(){var e=(0,n.wh)().currentCommunityMember;return Boolean((null===e||void 0===e?void 0:e.messaging_enabled)||!1)},o=function(){var e,t=(0,n.wh)().currentCommunityMember,r=(null===t||void 0===t?void 0:t.messaging_enabled)||!1,i=!r&&(null===t||void 0===t||null===(e=t.policies)||void 0===e?void 0:e.can_direct_message);return Boolean(i||(null===t||void 0===t?void 0:t.messaging_enabled_by_admin)&&r)}},44141:(e,t,r)=>{"use strict";r.d(t,{z:()=>a});var n=r(88767),i=r(34128),o=r(49326),a=function(e){return(0,n.useMutation)((function(e){var t=e.spaceId,r=e.memberId;return(0,i.pC)(o.av.spaceMembers.leaveSpace({spaceId:t,memberId:r}))}),e)}},93166:(e,t,r)=>{"use strict";r.d(t,{t:()=>o});var n=r(80129),i=r(24185),o=function(e){var t=(0,i.TH)().search,r=(0,n.parse)(t,{ignoreQueryPrefix:!0});try{return e.cast(r)}catch(o){return console.error("Error parsing query params",o),{}}}},76034:(e,t,r)=>{"use strict";r.d(t,{m:()=>u});var n=r(67294),i=r(34128),o=r(49326);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(){var e=c((0,n.useState)(!1),2),t=e[0],r=e[1],l=c((0,n.useState)(null),2),u=l[0],d=l[1],p=c((0,n.useState)(!1),2),f=p[0],m=p[1];return{isJoined:t,joinSpace:function(e){var t={space_id:e};fetch((0,o.J6)(),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(){r(!0)})).catch((function(e){console.error(e)}))},space:u,fetchSpace:function(e){return(0,i.t5)((0,o.Ox)(e)).then((function(e){return e.json()})).then((function(e){d(e)}))},updateSpace:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};m(!0);var n=e instanceof FormData?e:JSON.stringify({space:e});return(0,i.t5)((0,o.C1)(t||u.id),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({method:"PATCH",body:n},r)).then((function(e){return e.json()})).then((function(e){return d(e),m(!1),e}))},createSpace:function(e){var t=JSON.stringify({space:e});return(0,i.t5)(o.av.spaces.create(),{method:"POST",body:t,forReactQuery:!0})},maxSpaceLimit:function(e){return(0,i.t5)(o.av.spaces.maxSpaceLimit(e),{method:"GET",forReactQuery:!0})},isSubmitting:f,reSetWelcomeBannerPreference:function(e){return(0,i.gN)(o.av.spaces.resetSpaceWelcomeBannerPreferencePath(e))}}}},87189:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var n=r(24185),i=function(){var e=((0,n.$B)("/c/:spaceSlug")||{}).params;return(e=void 0===e?{}:e).spaceSlug}},35944:(e,t,r)=>{"use strict";r.d(t,{X:()=>m});var n=r(64687),i=r.n(n),o=r(88767),a=r(34128),s=r(49326);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}var m=function(e){var t=function(){var e,t=(e=i().mark((function e(t){var r,n,o,c,u,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.spaceId,n=t.memberId,o=t.isModerator,e.next=3,(0,a.UT)(s.av.communityMember.settings({memberId:n}));case 3:return c=e.sent,u=c.moderating_space_ids||[],p=o?[].concat(d(u),[r]):u.filter((function(e){return e!==r})),e.abrupt("return",(0,a.aU)(s.av.communityMember.update({memberId:n}),l(l({},c),{},{moderator_space_ids:p})));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){f(o,n,i,a,s,"next",e)}function s(e){f(o,n,i,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,o.useMutation)(t,e)}},8930:(e,t,r)=>{"use strict";r.d(t,{Y:()=>u});var n=r(64687),i=r.n(n),o=r(67294),a=r(11449);function s(e,t,r,n,i,o,a){try{var s=e[o](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(n,i)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,r=c((0,o.useState)(null),2),n=r[0],l=r[1];return(0,o.useEffect)((function(){var r=function(){var r,n=(r=i().mark((function r(){var n;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,a.g)(e,{timeout:t});case 2:n=r.sent,l(n);case 4:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){s(o,n,i,a,c,"next",e)}function c(e){s(o,n,i,a,c,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();r()}),[e,t]),n}},2593:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var n=r(97012),i=function(){var e=(0,n.wh)().currentCommunity,t=null===e||void 0===e?void 0:e.white_label;return{whiteLabel:t,shouldShowBranding:!t}}},73097:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var n=r(67294),i=function(e){(0,n.useEffect)((function(){return window.addEventListener("resize",e),e(),function(){window.removeEventListener("resize",e)}}),[])}},63353:(e,t,r)=>{"use strict";r.d(t,{w:()=>o});var n=r(5295),i=r(85893),o=function(){return(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,i.jsx)(n.a,{})})}},32615:(e,t,r)=>{"use strict";r.d(t,{H:()=>i});var n=r(24185),i=function(){var e,t,r,i,o=Boolean((0,n.$B)({path:"/feed"}));return{isSpaceRoute:Boolean((0,n.$B)({path:"/c/:spaceSlug"})),isSpaceGroupRoute:Boolean((0,n.$B)({path:"/s/:spaceSlug"})),isFeedRoute:o,isHomePage:Boolean(null===(e=(0,n.$B)({path:"/home"}))||void 0===e?void 0:e.isExact),isSpaceShowPage:Boolean(null===(t=(0,n.$B)({path:"/c/:spaceSlug"}))||void 0===t?void 0:t.isExact),isMemberDirectoryPage:Boolean(null===(r=(0,n.$B)({path:"/members"}))||void 0===r?void 0:r.isExact),isMessagesPage:Boolean(null===(i=(0,n.$B)({path:"/messages"}))||void 0===i?void 0:i.isExact)}}},74242:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var n="countries_iso3166"},84038:(e,t,r)=>{"use strict";r.d(t,{s:()=>n,_:()=>i});var n={paypal:"paypal",wise:"wise"},i={inactive:"inactive",invited:"invited",enrolled:"enrolled",disabled:"disabled"}},44825:(e,t,r)=>{"use strict";r.d(t,{R:()=>d});var n=r(88767),i=r(40160),o=r(31696),a=r(16855),s=r(21809),c=r(44422),l=r(75752),u=r(85893),d=function(){return(0,u.jsx)(n.QueryClientProvider,{client:l.Eh,children:(0,u.jsx)(o.Q,{children:(0,u.jsx)(a.H,{includeSidebar:!0,children:(0,u.jsx)(s.V,{children:(0,u.jsx)(i.VK,{children:(0,u.jsx)(c.x,{})})})})})})}},61530:(e,t,r)=>{"use strict";r.d(t,{g:()=>s});var n=r(79292),i=r(22837),o=r(49326);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.file=t,this.editor=r.editor,this.editorElement=r,this.afterCompleteCallback=a;var s=i.default.Attachment.attributesForFile(t);this.attachment=new i.default.Attachment(s),this.tempAttachment=new i.default.Attachment({content:this.tempAttachmentContent(),sgid:"".concat((new Date).getTime(),"-").concat(Math.random())}),this.directUpload=new n.DirectUpload(t,o.av.actionTextDirectUpload.create(),this)}var t,r,s;return t=e,r=[{key:"start",value:function(){this.insertTempAttachment(),this.directUpload.create(this.directUploadDidComplete.bind(this))}},{key:"insertTempAttachment",value:function(){this.editor.insertAttachment(this.tempAttachment)}},{key:"removeTempAttachment",value:function(){this.editor.composition.removeAttachment(this.tempAttachment)}},{key:"insertAttachment",value:function(e){this.attachment.setAttributes({sgid:e.attachable_sgid,url:this.createBlobUrl(e.signed_id,e.filename)}),this.editor.insertAttachment(this.attachment)}},{key:"directUploadWillStoreFileWithXHR",value:function(e){var t=this;e.upload.addEventListener("progress",(function(e){var r=e.loaded/e.total*100;t.tempAttachment.setAttributes({content:t.tempAttachmentContent(r)})}))}},{key:"directUploadDidComplete",value:function(e,t){if(e)throw this.afterCompleteCallback(),new Error("Direct upload failed: ".concat(e));this.editor.composition.attachments.includes(this.tempAttachment)&&(this.removeTempAttachment(),this.insertAttachment(t)),this.afterCompleteCallback()}},{key:"createBlobUrl",value:function(e,t){return(0,o.Gd)({signed_id:e,filename:t})}},{key:"tempAttachmentContent",value:function(){return function(e,t){return'\n  <div class="progress-card">\n    <div class="editor-overlay">\n      <div class="overlay-editor-actions">\n        <a href="#remove-attachment" data-action="remove-attachment" class="close-btn">\n          <div class="close-btn__caret"></div>\n          <svg class="icon icon-close icon--lg" viewBox="0 0 24 24">\n            <use xlink:href="#icon-close" />\n          </svg>\n        </a>\n      </div>\n    </div>\n    <span class="progress-card__filename">'.concat(t,'</span>\n    <span class="progress-card__amount">').concat(e,' %</span>\n    <div class="attachment__upload progress-bar">\n      <div class="progress-bar__line" style="width:').concat(e,'%;"></div>\n    </div>\n  </div>\n')}(parseInt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0),this.file.name)}},{key:"directUploadUrl",get:function(){return this.editorElement.dataset.directUploadUrl}},{key:"blobUrlTemplate",get:function(){return this.editorElement.dataset.blobUrlTemplate}}],r&&a(t.prototype,r),s&&a(t,s),e}()},82255:(e,t,r)=>{"use strict";function n(e){return e.getMonth()+1+"-"+e.getDate()+"-"+e.getFullYear()}function i(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}r.d(t,{L:()=>n,q:()=>i})},85810:(e,t,r)=>{"use strict";var n=r(36808),i=r.n(n),o=r(44140),a=r.n(o);document.addEventListener("turbolinks:load",(function(){i().set("browser_time_zone",function(){var e=window.Intl;try{window.Intl=void 0;var t=a().determine().name();return window.Intl=e,t}catch(r){return a().determine().name()}}(),{expires:365,path:"/"})}))},61484:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/circular-logo@2x-eccc94f76034da90350d.png"},66490:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/leaderboard/feature1-d7961ad79880ac6a266a.png"},66722:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/leaderboard/feature2-c6659a6674af9bf31e8e.png"},11076:(e,t,r)=>{"use strict";e.exports=r.p+"static/assets/images/features/leaderboard/feature3-4c5ab58e7e6741796b14.png"},99333:(e,t,r)=>{"use strict";e.exports=r.p+"739afe7befcf75b4a3ba.mp3"},56933:(e,t,r)=>{"use strict";e.exports=r.p+"static/components/SupportWidget/views/HomeView/circle-icon-32-30402c376436e1d84f3e.png"},80312:(e,t,r)=>{"use strict";e.exports=r.p+"static/components/SupportWidget/views/HomeView/hand-wave-24-7ebd0422764ce86d5245.png"},47165:()=>{}}]);
//# sourceMappingURL=5634-098acfba35b0a93a0000.js.map